(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function gA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var gm={exports:{}},Kl={};var P_;function yA(){if(P_)return Kl;P_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var y in o)y!=="key"&&(c[y]=o[y])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Kl.Fragment=e,Kl.jsx=n,Kl.jsxs=n,Kl}var U_;function _A(){return U_||(U_=1,gm.exports=yA()),gm.exports}var b=_A(),ym={exports:{}},je={};var j_;function vA(){if(j_)return je;j_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.for("react.activity"),x=Symbol.iterator;function L(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,q={};function Q(M,W,he){this.props=M,this.context=W,this.refs=q,this.updater=he||P}Q.prototype.isReactComponent={},Q.prototype.setState=function(M,W){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,W,"setState")},Q.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function ne(){}ne.prototype=Q.prototype;function $(M,W,he){this.props=M,this.context=W,this.refs=q,this.updater=he||P}var me=$.prototype=new ne;me.constructor=$,z(me,Q.prototype),me.isPureReactComponent=!0;var fe=Array.isArray;function Se(){}var D={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function R(M,W,he){var ve=he.ref;return{$$typeof:r,type:M,key:W,ref:ve!==void 0?ve:null,props:he}}function C(M,W){return R(M.type,W,M.props)}function N(M){return typeof M=="object"&&M!==null&&M.$$typeof===r}function k(M){var W={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(he){return W[he]})}var I=/\/+/g;function ae(M,W){return typeof M=="object"&&M!==null&&M.key!=null?k(""+M.key):W.toString(36)}function xe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(Se,Se):(M.status="pending",M.then(function(W){M.status==="pending"&&(M.status="fulfilled",M.value=W)},function(W){M.status==="pending"&&(M.status="rejected",M.reason=W)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function G(M,W,he,ve,Ne){var Le=typeof M;(Le==="undefined"||Le==="boolean")&&(M=null);var Fe=!1;if(M===null)Fe=!0;else switch(Le){case"bigint":case"string":case"number":Fe=!0;break;case"object":switch(M.$$typeof){case r:case e:Fe=!0;break;case S:return Fe=M._init,G(Fe(M._payload),W,he,ve,Ne)}}if(Fe)return Ne=Ne(M),Fe=ve===""?"."+ae(M,0):ve,fe(Ne)?(he="",Fe!=null&&(he=Fe.replace(I,"$&/")+"/"),G(Ne,W,he,"",function(si){return si})):Ne!=null&&(N(Ne)&&(Ne=C(Ne,he+(Ne.key==null||M&&M.key===Ne.key?"":(""+Ne.key).replace(I,"$&/")+"/")+Fe)),W.push(Ne)),1;Fe=0;var Tt=ve===""?".":ve+":";if(fe(M))for(var ot=0;ot<M.length;ot++)ve=M[ot],Le=Tt+ae(ve,ot),Fe+=G(ve,W,he,Le,Ne);else if(ot=L(M),typeof ot=="function")for(M=ot.call(M),ot=0;!(ve=M.next()).done;)ve=ve.value,Le=Tt+ae(ve,ot++),Fe+=G(ve,W,he,Le,Ne);else if(Le==="object"){if(typeof M.then=="function")return G(xe(M),W,he,ve,Ne);throw W=String(M),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Fe}function le(M,W,he){if(M==null)return M;var ve=[],Ne=0;return G(M,ve,"","",function(Le){return W.call(he,Le,Ne++)}),ve}function pe(M){if(M._status===-1){var W=M._result;W=W(),W.then(function(he){(M._status===0||M._status===-1)&&(M._status=1,M._result=he)},function(he){(M._status===0||M._status===-1)&&(M._status=2,M._result=he)}),M._status===-1&&(M._status=0,M._result=W)}if(M._status===1)return M._result.default;throw M._result}var Ee=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Re={map:le,forEach:function(M,W,he){le(M,function(){W.apply(this,arguments)},he)},count:function(M){var W=0;return le(M,function(){W++}),W},toArray:function(M){return le(M,function(W){return W})||[]},only:function(M){if(!N(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return je.Activity=E,je.Children=Re,je.Component=Q,je.Fragment=n,je.Profiler=o,je.PureComponent=$,je.StrictMode=s,je.Suspense=g,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,je.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},je.cache=function(M){return function(){return M.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(M,W,he){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ve=z({},M.props),Ne=M.key;if(W!=null)for(Le in W.key!==void 0&&(Ne=""+W.key),W)!w.call(W,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&W.ref===void 0||(ve[Le]=W[Le]);var Le=arguments.length-2;if(Le===1)ve.children=he;else if(1<Le){for(var Fe=Array(Le),Tt=0;Tt<Le;Tt++)Fe[Tt]=arguments[Tt+2];ve.children=Fe}return R(M.type,Ne,ve)},je.createContext=function(M){return M={$$typeof:d,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:c,_context:M},M},je.createElement=function(M,W,he){var ve,Ne={},Le=null;if(W!=null)for(ve in W.key!==void 0&&(Le=""+W.key),W)w.call(W,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ne[ve]=W[ve]);var Fe=arguments.length-2;if(Fe===1)Ne.children=he;else if(1<Fe){for(var Tt=Array(Fe),ot=0;ot<Fe;ot++)Tt[ot]=arguments[ot+2];Ne.children=Tt}if(M&&M.defaultProps)for(ve in Fe=M.defaultProps,Fe)Ne[ve]===void 0&&(Ne[ve]=Fe[ve]);return R(M,Le,Ne)},je.createRef=function(){return{current:null}},je.forwardRef=function(M){return{$$typeof:y,render:M}},je.isValidElement=N,je.lazy=function(M){return{$$typeof:S,_payload:{_status:-1,_result:M},_init:pe}},je.memo=function(M,W){return{$$typeof:m,type:M,compare:W===void 0?null:W}},je.startTransition=function(M){var W=D.T,he={};D.T=he;try{var ve=M(),Ne=D.S;Ne!==null&&Ne(he,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(Se,Ee)}catch(Le){Ee(Le)}finally{W!==null&&he.types!==null&&(W.types=he.types),D.T=W}},je.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},je.use=function(M){return D.H.use(M)},je.useActionState=function(M,W,he){return D.H.useActionState(M,W,he)},je.useCallback=function(M,W){return D.H.useCallback(M,W)},je.useContext=function(M){return D.H.useContext(M)},je.useDebugValue=function(){},je.useDeferredValue=function(M,W){return D.H.useDeferredValue(M,W)},je.useEffect=function(M,W){return D.H.useEffect(M,W)},je.useEffectEvent=function(M){return D.H.useEffectEvent(M)},je.useId=function(){return D.H.useId()},je.useImperativeHandle=function(M,W,he){return D.H.useImperativeHandle(M,W,he)},je.useInsertionEffect=function(M,W){return D.H.useInsertionEffect(M,W)},je.useLayoutEffect=function(M,W){return D.H.useLayoutEffect(M,W)},je.useMemo=function(M,W){return D.H.useMemo(M,W)},je.useOptimistic=function(M,W){return D.H.useOptimistic(M,W)},je.useReducer=function(M,W,he){return D.H.useReducer(M,W,he)},je.useRef=function(M){return D.H.useRef(M)},je.useState=function(M){return D.H.useState(M)},je.useSyncExternalStore=function(M,W,he){return D.H.useSyncExternalStore(M,W,he)},je.useTransition=function(){return D.H.useTransition()},je.version="19.2.0",je}var z_;function fp(){return z_||(z_=1,ym.exports=vA()),ym.exports}var U=fp();const rc=gA(U);var _m={exports:{}},Xl={},vm={exports:{}},bm={};var B_;function bA(){return B_||(B_=1,(function(r){function e(G,le){var pe=G.length;G.push(le);e:for(;0<pe;){var Ee=pe-1>>>1,Re=G[Ee];if(0<o(Re,le))G[Ee]=le,G[pe]=Re,pe=Ee;else break e}}function n(G){return G.length===0?null:G[0]}function s(G){if(G.length===0)return null;var le=G[0],pe=G.pop();if(pe!==le){G[0]=pe;e:for(var Ee=0,Re=G.length,M=Re>>>1;Ee<M;){var W=2*(Ee+1)-1,he=G[W],ve=W+1,Ne=G[ve];if(0>o(he,pe))ve<Re&&0>o(Ne,he)?(G[Ee]=Ne,G[ve]=pe,Ee=ve):(G[Ee]=he,G[W]=pe,Ee=W);else if(ve<Re&&0>o(Ne,pe))G[Ee]=Ne,G[ve]=pe,Ee=ve;else break e}}return le}function o(G,le){var pe=G.sortIndex-le.sortIndex;return pe!==0?pe:G.id-le.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,y=d.now();r.unstable_now=function(){return d.now()-y}}var g=[],m=[],S=1,E=null,x=3,L=!1,P=!1,z=!1,q=!1,Q=typeof setTimeout=="function"?setTimeout:null,ne=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function me(G){for(var le=n(m);le!==null;){if(le.callback===null)s(m);else if(le.startTime<=G)s(m),le.sortIndex=le.expirationTime,e(g,le);else break;le=n(m)}}function fe(G){if(z=!1,me(G),!P)if(n(g)!==null)P=!0,Se||(Se=!0,k());else{var le=n(m);le!==null&&xe(fe,le.startTime-G)}}var Se=!1,D=-1,w=5,R=-1;function C(){return q?!0:!(r.unstable_now()-R<w)}function N(){if(q=!1,Se){var G=r.unstable_now();R=G;var le=!0;try{e:{P=!1,z&&(z=!1,ne(D),D=-1),L=!0;var pe=x;try{t:{for(me(G),E=n(g);E!==null&&!(E.expirationTime>G&&C());){var Ee=E.callback;if(typeof Ee=="function"){E.callback=null,x=E.priorityLevel;var Re=Ee(E.expirationTime<=G);if(G=r.unstable_now(),typeof Re=="function"){E.callback=Re,me(G),le=!0;break t}E===n(g)&&s(g),me(G)}else s(g);E=n(g)}if(E!==null)le=!0;else{var M=n(m);M!==null&&xe(fe,M.startTime-G),le=!1}}break e}finally{E=null,x=pe,L=!1}le=void 0}}finally{le?k():Se=!1}}}var k;if(typeof $=="function")k=function(){$(N)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ae=I.port2;I.port1.onmessage=N,k=function(){ae.postMessage(null)}}else k=function(){Q(N,0)};function xe(G,le){D=Q(function(){G(r.unstable_now())},le)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(G){G.callback=null},r.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<G?Math.floor(1e3/G):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(G){switch(x){case 1:case 2:case 3:var le=3;break;default:le=x}var pe=x;x=le;try{return G()}finally{x=pe}},r.unstable_requestPaint=function(){q=!0},r.unstable_runWithPriority=function(G,le){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var pe=x;x=G;try{return le()}finally{x=pe}},r.unstable_scheduleCallback=function(G,le,pe){var Ee=r.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Ee+pe:Ee):pe=Ee,G){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=pe+Re,G={id:S++,callback:le,priorityLevel:G,startTime:pe,expirationTime:Re,sortIndex:-1},pe>Ee?(G.sortIndex=pe,e(m,G),n(g)===null&&G===n(m)&&(z?(ne(D),D=-1):z=!0,xe(fe,pe-Ee))):(G.sortIndex=Re,e(g,G),P||L||(P=!0,Se||(Se=!0,k()))),G},r.unstable_shouldYield=C,r.unstable_wrapCallback=function(G){var le=x;return function(){var pe=x;x=le;try{return G.apply(this,arguments)}finally{x=pe}}}})(bm)),bm}var q_;function SA(){return q_||(q_=1,vm.exports=bA()),vm.exports}var Sm={exports:{}},dn={};var H_;function EA(){if(H_)return dn;H_=1;var r=fp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)m+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,m,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:E==null?null:""+E,children:g,containerInfo:m,implementation:S}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,dn.createPortal=function(g,m){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(g,m,null,S)},dn.flushSync=function(g){var m=d.T,S=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=m,s.p=S,s.d.f()}},dn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},dn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},dn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var S=m.as,E=y(S,m.crossOrigin),x=typeof m.integrity=="string"?m.integrity:void 0,L=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;S==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:E,integrity:x,fetchPriority:L}):S==="script"&&s.d.X(g,{crossOrigin:E,integrity:x,fetchPriority:L,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},dn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var S=y(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},dn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var S=m.as,E=y(S,m.crossOrigin);s.d.L(g,S,{crossOrigin:E,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},dn.preloadModule=function(g,m){if(typeof g=="string")if(m){var S=y(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},dn.requestFormReset=function(g){s.d.r(g)},dn.unstable_batchedUpdates=function(g,m){return g(m)},dn.useFormState=function(g,m,S){return d.H.useFormState(g,m,S)},dn.useFormStatus=function(){return d.H.useHostTransitionStatus()},dn.version="19.2.0",dn}var F_;function TA(){if(F_)return Sm.exports;F_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sm.exports=EA(),Sm.exports}var G_;function AA(){if(G_)return Xl;G_=1;var r=SA(),e=fp(),n=TA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function m(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),t;if(f===l)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=f;break}if(T===l){_=!0,l=h,a=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===a){_=!0,a=f,l=h;break}if(T===l){_=!0,l=f,a=h;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var E=Object.assign,x=Symbol.for("react.element"),L=Symbol.for("react.transitional.element"),P=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),ne=Symbol.for("react.consumer"),$=Symbol.for("react.context"),me=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),N=Symbol.iterator;function k(t){return t===null||typeof t!="object"?null:(t=N&&t[N]||t["@@iterator"],typeof t=="function"?t:null)}var I=Symbol.for("react.client.reference");function ae(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===I?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case z:return"Fragment";case Q:return"Profiler";case q:return"StrictMode";case fe:return"Suspense";case Se:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case P:return"Portal";case $:return t.displayName||"Context";case ne:return(t._context.displayName||"Context")+".Consumer";case me:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:ae(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return ae(t(i))}catch{}}return null}var xe=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},Ee=[],Re=-1;function M(t){return{current:t}}function W(t){0>Re||(t.current=Ee[Re],Ee[Re]=null,Re--)}function he(t,i){Re++,Ee[Re]=t.current,t.current=i}var ve=M(null),Ne=M(null),Le=M(null),Fe=M(null);function Tt(t,i){switch(he(Le,i),he(Ne,t),he(ve,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?a_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=a_(i),t=o_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(ve),he(ve,t)}function ot(){W(ve),W(Ne),W(Le)}function si(t){t.memoizedState!==null&&he(Fe,t);var i=ve.current,a=o_(i,t.type);i!==a&&(he(Ne,t),he(ve,a))}function Ai(t){Ne.current===t&&(W(ve),W(Ne)),Fe.current===t&&(W(Fe),Gl._currentValue=pe)}var wi,te;function ee(t){if(wi===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);wi=i&&i[1]||"",te=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wi+t+te}var de=!1;function ue(t,i){if(!t||de)return"";de=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(X){var Y=X}Reflect.construct(t,[],re)}else{try{re.call()}catch(X){Y=X}t.call(re.prototype)}}else{try{throw Error()}catch(X){Y=X}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(X){if(X&&Y&&typeof X.stack=="string")return[X.stack,Y.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var O=_.split(`
`),F=T.split(`
`);for(h=l=0;l<O.length&&!O[l].includes("DetermineComponentFrameRoot");)l++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(l===O.length||h===F.length)for(l=O.length-1,h=F.length-1;1<=l&&0<=h&&O[l]!==F[h];)h--;for(;1<=l&&0<=h;l--,h--)if(O[l]!==F[h]){if(l!==1||h!==1)do if(l--,h--,0>h||O[l]!==F[h]){var Z=`
`+O[l].replace(" at new "," at ");return t.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",t.displayName)),Z}while(1<=l&&0<=h);break}}}finally{de=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?ee(a):""}function ce(t,i){switch(t.tag){case 26:case 27:case 5:return ee(t.type);case 16:return ee("Lazy");case 13:return t.child!==i&&i!==null?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ue(t.type,!1);case 11:return ue(t.type.render,!1);case 1:return ue(t.type,!0);case 31:return ee("Activity");default:return""}}function oe(t){try{var i="",a=null;do i+=ce(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var _e=Object.prototype.hasOwnProperty,be=r.unstable_scheduleCallback,Ae=r.unstable_cancelCallback,qe=r.unstable_shouldYield,bt=r.unstable_requestPaint,Ge=r.unstable_now,en=r.unstable_getCurrentPriorityLevel,Fn=r.unstable_ImmediatePriority,Vr=r.unstable_UserBlockingPriority,xi=r.unstable_NormalPriority,Ko=r.unstable_LowPriority,Pr=r.unstable_IdlePriority,Ps=r.log,Da=r.unstable_setDisableYieldValue,ai=null,tn=null;function Gn(t){if(typeof Ps=="function"&&Da(t),tn&&typeof tn.setStrictMode=="function")try{tn.setStrictMode(ai,t)}catch{}}var It=Math.clz32?Math.clz32:Lc,Mc=Math.log,Na=Math.LN2;function Lc(t){return t>>>=0,t===0?32:31-(Mc(t)/Na|0)|0}var Ri=256,Us=262144,Vt=4194304;function Ci(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Ii(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Ci(l):(_&=T,_!==0?h=Ci(_):a||(a=T&~t,a!==0&&(h=Ci(a))))):(T=l&~f,T!==0?h=Ci(T):_!==0?h=Ci(_):a||(a=l&~t,a!==0&&(h=Ci(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function oi(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function vd(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vc(){var t=Vt;return Vt<<=1,(Vt&62914560)===0&&(Vt=4194304),t}function Di(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function js(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bd(t,i,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,O=t.expirationTimes,F=t.hiddenUpdates;for(a=_&~a;0<a;){var Z=31-It(a),re=1<<Z;T[Z]=0,O[Z]=-1;var Y=F[Z];if(Y!==null)for(F[Z]=null,Z=0;Z<Y.length;Z++){var X=Y[Z];X!==null&&(X.lane&=-536870913)}a&=~re}l!==0&&zs(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function zs(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-It(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Xo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-It(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Wo(t,i){var a=i&-i;return a=(a&42)!==0?1:Bs(a),(a&(t.suspendedLanes|i))!==0?0:a}function Bs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function sr(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Pc(){var t=le.p;return t!==0?t:(t=window.event,t===void 0?32:D_(t.type))}function li(t,i){var a=le.p;try{return le.p=t,i()}finally{le.p=a}}var ci=Math.random().toString(36).slice(2),Pt="__reactFiber$"+ci,Xt="__reactProps$"+ci,Ni="__reactContainer$"+ci,Oa="__reactEvents$"+ci,Sd="__reactListeners$"+ci,Uc="__reactHandles$"+ci,jc="__reactResources$"+ci,Oi="__reactMarker$"+ci;function ka(t){delete t[Pt],delete t[Xt],delete t[Oa],delete t[Sd],delete t[Uc]}function ki(t){var i=t[Pt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ni]||a[Pt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=m_(t);t!==null;){if(a=t[Pt])return a;t=m_(t)}return i}t=a,a=t.parentNode}return null}function $n(t){if(t=t[Pt]||t[Ni]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function On(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function Mi(t){var i=t[jc];return i||(i=t[jc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ut(t){t[Oi]=!0}var Jo=new Set,Zo={};function Li(t,i){Vi(t,i),Vi(t+"Capture",i)}function Vi(t,i){for(Zo[t]=i,t=0;t<i.length;t++)Jo.add(i[t])}var el=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),tl={},nl={};function zc(t){return _e.call(nl,t)?!0:_e.call(tl,t)?!1:el.test(t)?nl[t]=!0:(tl[t]=!0,!1)}function Ma(t,i,a){if(zc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function kn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function jt(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function Wt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ur(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function il(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ct(t){if(!t._valueTracker){var i=Ur(t)?"checked":"value";t._valueTracker=il(t,i,""+t[i])}}function qs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Ur(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Pi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Hs=/[\n"\\]/g;function Sn(t){return t.replace(Hs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function La(t,i,a,l,h,f,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+Wt(i)):t.value!==""+Wt(i)&&(t.value=""+Wt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?rl(t,_,Wt(i)):a!=null?rl(t,_,Wt(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+Wt(T):t.removeAttribute("name")}function Bc(t,i,a,l,h,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){ct(t);return}a=a!=null?""+Wt(a):"",i=i!=null?""+Wt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),ct(t)}function rl(t,i,a){i==="number"&&Pi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function jr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+Wt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function qc(t,i,a){if(i!=null&&(i=""+Wt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+Wt(a):""}function zr(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(xe(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Wt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),ct(t)}function En(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Hc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sl(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Hc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function al(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&sl(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&sl(t,f,i[f])}function Va(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Br=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pa(t){return Br.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ui(){}var ol=null;function Yn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qr=null,Ui=null;function Fs(t){var i=$n(t);if(i&&(t=i.stateNode)){var a=t[Xt]||null;e:switch(t=i.stateNode,i.type){case"input":if(La(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Sn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Xt]||null;if(!h)throw Error(s(90));La(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&qs(l)}break e;case"textarea":qc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&jr(t,!!a.multiple,i,!1)}}}var Ua=!1;function Hr(t,i,a){if(Ua)return t(i,a);Ua=!0;try{var l=t(i);return l}finally{if(Ua=!1,(qr!==null||Ui!==null)&&(Pu(),qr&&(i=qr,t=Ui,Ui=qr=null,Fs(i),t)))for(i=0;i<t.length;i++)Fs(t[i])}}function hi(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Xt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Gs=!1;if(Qn)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){Gs=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{Gs=!1}var ji=null,ll=null,$s=null;function cl(){if($s)return $s;var t,i=ll,a=i.length,l,h="value"in ji?ji.value:ji.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[f-l];l++);return $s=h.slice(t,1<l?1-l:void 0)}function Ys(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function ar(){return!0}function di(){return!1}function nn(t){function i(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?ar:di,this.isPropagationStopped=di,this}return E(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),i}var or={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zi=nn(or),Fr=E({},or,{view:0,detail:0}),ul=nn(Fr),Gr,ja,Bi,za=E({},Fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$r,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bi&&(Bi&&t.type==="mousemove"?(Gr=t.screenX-Bi.screenX,ja=t.screenY-Bi.screenY):ja=Gr=0,Bi=t),Gr)},movementY:function(t){return"movementY"in t?t.movementY:ja}}),hl=nn(za),Qs=E({},za,{dataTransfer:0}),Gc=nn(Qs),$c=E({},Fr,{relatedTarget:0}),Ks=nn($c),dl=E({},or,{animationName:0,elapsedTime:0,pseudoElement:0}),Yc=nn(dl),Ba=E({},or,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Qc=nn(Ba),Kc=E({},or,{data:0}),qi=nn(Kc),Xc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Jc[t])?!!i[t]:!1}function $r(){return Zc}var _n=E({},Fr,{key:function(t){if(t.key){var i=Xc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=Ys(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Wc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$r,charCode:function(t){return t.type==="keypress"?Ys(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ys(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eu=nn(_n),tu=E({},za,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lr=nn(tu),u=E({},Fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$r}),p=nn(u),v=E({},or,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=nn(v),B=E({},za,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),K=nn(B),ge=E({},or,{newState:0,oldState:0}),ze=nn(ge),Dt=[9,13,27,32],it=Qn&&"CompositionEvent"in window,St=null;Qn&&"documentMode"in document&&(St=document.documentMode);var Kn=Qn&&"TextEvent"in window&&!St,Hi=Qn&&(!it||St&&8<St&&11>=St),fi=" ",mi=!1;function Xs(t,i){switch(t){case"keyup":return Dt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ha=!1;function zT(t,i){switch(t){case"compositionend":return qa(i);case"keypress":return i.which!==32?null:(mi=!0,fi);case"textInput":return t=i.data,t===fi&&mi?null:t;default:return null}}function BT(t,i){if(Ha)return t==="compositionend"||!it&&Xs(t,i)?(t=cl(),$s=ll=ji=null,Ha=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Hi&&i.locale!=="ko"?null:i.data;default:return null}}var qT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!qT[t.type]:i==="textarea"}function _g(t,i,a,l){qr?Ui?Ui.push(l):Ui=[l]:qr=l,i=Fu(i,"onChange"),0<i.length&&(a=new zi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var fl=null,ml=null;function HT(t){e_(t,0)}function nu(t){var i=On(t);if(qs(i))return t}function vg(t,i){if(t==="change")return i}var bg=!1;if(Qn){var Ed;if(Qn){var Td="oninput"in document;if(!Td){var Sg=document.createElement("div");Sg.setAttribute("oninput","return;"),Td=typeof Sg.oninput=="function"}Ed=Td}else Ed=!1;bg=Ed&&(!document.documentMode||9<document.documentMode)}function Eg(){fl&&(fl.detachEvent("onpropertychange",Tg),ml=fl=null)}function Tg(t){if(t.propertyName==="value"&&nu(ml)){var i=[];_g(i,ml,t,Yn(t)),Hr(HT,i)}}function FT(t,i,a){t==="focusin"?(Eg(),fl=i,ml=a,fl.attachEvent("onpropertychange",Tg)):t==="focusout"&&Eg()}function GT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nu(ml)}function $T(t,i){if(t==="click")return nu(i)}function YT(t,i){if(t==="input"||t==="change")return nu(i)}function QT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Mn=typeof Object.is=="function"?Object.is:QT;function pl(t,i){if(Mn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!_e.call(i,h)||!Mn(t[h],i[h]))return!1}return!0}function Ag(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wg(t,i){var a=Ag(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Ag(a)}}function xg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?xg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Rg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Pi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Pi(t.document)}return i}function Ad(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var KT=Qn&&"documentMode"in document&&11>=document.documentMode,Fa=null,wd=null,gl=null,xd=!1;function Cg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;xd||Fa==null||Fa!==Pi(l)||(l=Fa,"selectionStart"in l&&Ad(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),gl&&pl(gl,l)||(gl=l,l=Fu(wd,"onSelect"),0<l.length&&(i=new zi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Fa)))}function Ws(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ga={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},Rd={},Ig={};Qn&&(Ig=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function Js(t){if(Rd[t])return Rd[t];if(!Ga[t])return t;var i=Ga[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Ig)return Rd[t]=i[a];return t}var Dg=Js("animationend"),Ng=Js("animationiteration"),Og=Js("animationstart"),XT=Js("transitionrun"),WT=Js("transitionstart"),JT=Js("transitioncancel"),kg=Js("transitionend"),Mg=new Map,Cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cd.push("scrollEnd");function pi(t,i){Mg.set(t,i),Li(i,[t])}var iu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Xn=[],$a=0,Id=0;function ru(){for(var t=$a,i=Id=$a=0;i<t;){var a=Xn[i];Xn[i++]=null;var l=Xn[i];Xn[i++]=null;var h=Xn[i];Xn[i++]=null;var f=Xn[i];if(Xn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&Lg(a,h,f)}}function su(t,i,a,l){Xn[$a++]=t,Xn[$a++]=i,Xn[$a++]=a,Xn[$a++]=l,Id|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Dd(t,i,a,l){return su(t,i,a,l),au(t)}function Zs(t,i){return su(t,null,null,i),au(t)}function Lg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-It(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function au(t){if(50<Ul)throw Ul=0,zf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var Ya={};function ZT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(t,i,a,l){return new ZT(t,i,a,l)}function Nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function cr(t,i){var a=t.alternate;return a===null?(a=Ln(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Vg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function ou(t,i,a,l,h,f){var _=0;if(l=t,typeof t=="function")Nd(t)&&(_=1);else if(typeof t=="string")_=rA(t,a,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=Ln(31,a,i,h),t.elementType=R,t.lanes=f,t;case z:return ea(a.children,h,f,i);case q:_=8,h|=24;break;case Q:return t=Ln(12,a,i,h|2),t.elementType=Q,t.lanes=f,t;case fe:return t=Ln(13,a,i,h),t.elementType=fe,t.lanes=f,t;case Se:return t=Ln(19,a,i,h),t.elementType=Se,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $:_=10;break e;case ne:_=9;break e;case me:_=11;break e;case D:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Ln(_,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function ea(t,i,a,l){return t=Ln(7,t,l,i),t.lanes=a,t}function Od(t,i,a){return t=Ln(6,t,null,i),t.lanes=a,t}function Pg(t){var i=Ln(18,null,null,0);return i.stateNode=t,i}function kd(t,i,a){return i=Ln(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Ug=new WeakMap;function Wn(t,i){if(typeof t=="object"&&t!==null){var a=Ug.get(t);return a!==void 0?a:(i={value:t,source:i,stack:oe(i)},Ug.set(t,i),i)}return{value:t,source:i,stack:oe(i)}}var Qa=[],Ka=0,lu=null,yl=0,Jn=[],Zn=0,Yr=null,Fi=1,Gi="";function ur(t,i){Qa[Ka++]=yl,Qa[Ka++]=lu,lu=t,yl=i}function jg(t,i,a){Jn[Zn++]=Fi,Jn[Zn++]=Gi,Jn[Zn++]=Yr,Yr=t;var l=Fi;t=Gi;var h=32-It(l)-1;l&=~(1<<h),a+=1;var f=32-It(i)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Fi=1<<32-It(i)+h|a<<h|l,Gi=f+t}else Fi=1<<f|a<<h|l,Gi=t}function Md(t){t.return!==null&&(ur(t,1),jg(t,1,0))}function Ld(t){for(;t===lu;)lu=Qa[--Ka],Qa[Ka]=null,yl=Qa[--Ka],Qa[Ka]=null;for(;t===Yr;)Yr=Jn[--Zn],Jn[Zn]=null,Gi=Jn[--Zn],Jn[Zn]=null,Fi=Jn[--Zn],Jn[Zn]=null}function zg(t,i){Jn[Zn++]=Fi,Jn[Zn++]=Gi,Jn[Zn++]=Yr,Fi=i.id,Gi=i.overflow,Yr=t}var rn=null,_t=null,Ze=!1,Qr=null,ei=!1,Vd=Error(s(519));function Kr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw _l(Wn(i,t)),Vd}function Bg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Pt]=t,i[Xt]=l,a){case"dialog":Ye("cancel",i),Ye("close",i);break;case"iframe":case"object":case"embed":Ye("load",i);break;case"video":case"audio":for(a=0;a<zl.length;a++)Ye(zl[a],i);break;case"source":Ye("error",i);break;case"img":case"image":case"link":Ye("error",i),Ye("load",i);break;case"details":Ye("toggle",i);break;case"input":Ye("invalid",i),Bc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ye("invalid",i);break;case"textarea":Ye("invalid",i),zr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||r_(i.textContent,a)?(l.popover!=null&&(Ye("beforetoggle",i),Ye("toggle",i)),l.onScroll!=null&&Ye("scroll",i),l.onScrollEnd!=null&&Ye("scrollend",i),l.onClick!=null&&(i.onclick=ui),i=!0):i=!1,i||Kr(t,!0)}function qg(t){for(rn=t.return;rn;)switch(rn.tag){case 5:case 31:case 13:ei=!1;return;case 27:case 3:ei=!0;return;default:rn=rn.return}}function Xa(t){if(t!==rn)return!1;if(!Ze)return qg(t),Ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||tm(t.type,t.memoizedProps)),a=!a),a&&_t&&Kr(t),qg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));_t=f_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));_t=f_(t)}else i===27?(i=_t,cs(t.type)?(t=am,am=null,_t=t):_t=i):_t=rn?ni(t.stateNode.nextSibling):null;return!0}function ta(){_t=rn=null,Ze=!1}function Pd(){var t=Qr;return t!==null&&(xn===null?xn=t:xn.push.apply(xn,t),Qr=null),t}function _l(t){Qr===null?Qr=[t]:Qr.push(t)}var Ud=M(null),na=null,hr=null;function Xr(t,i,a){he(Ud,i._currentValue),i._currentValue=a}function dr(t){t._currentValue=Ud.current,W(Ud)}function jd(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function zd(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var O=0;O<i.length;O++)if(T.context===i[O]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),jd(f.return,a,t),l||(_=null);break e}f=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),jd(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Wa(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=h.type;Mn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===Fe.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Gl):t=[Gl])}h=h.return}t!==null&&zd(i,t,a,l),i.flags|=262144}function cu(t){for(t=t.firstContext;t!==null;){if(!Mn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ia(t){na=t,hr=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function sn(t){return Hg(na,t)}function uu(t,i){return na===null&&ia(t),Hg(t,i)}function Hg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},hr===null){if(t===null)throw Error(s(308));hr=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else hr=hr.next=i;return a}var e1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},t1=r.unstable_scheduleCallback,n1=r.unstable_NormalPriority,zt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bd(){return{controller:new e1,data:new Map,refCount:0}}function vl(t){t.refCount--,t.refCount===0&&t1(n1,function(){t.controller.abort()})}var bl=null,qd=0,Ja=0,Za=null;function i1(t,i){if(bl===null){var a=bl=[];qd=0,Ja=$f(),Za={status:"pending",value:void 0,then:function(l){a.push(l)}}}return qd++,i.then(Fg,Fg),i}function Fg(){if(--qd===0&&bl!==null){Za!==null&&(Za.status="fulfilled");var t=bl;bl=null,Ja=0,Za=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function r1(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Gg=G.S;G.S=function(t,i){C0=Ge(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i1(t,i),Gg!==null&&Gg(t,i)};var ra=M(null);function Hd(){var t=ra.current;return t!==null?t:gt.pooledCache}function hu(t,i){i===null?he(ra,ra.current):he(ra,i.pool)}function $g(){var t=Hd();return t===null?null:{parent:zt._currentValue,pool:t}}var eo=Error(s(460)),Fd=Error(s(474)),du=Error(s(542)),fu={then:function(){}};function Yg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Qg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ui,ui),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xg(t),t;default:if(typeof i.status=="string")i.then(ui,ui);else{if(t=gt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Xg(t),t}throw aa=i,eo}}function sa(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(aa=a,eo):a}}var aa=null;function Kg(){if(aa===null)throw Error(s(459));var t=aa;return aa=null,t}function Xg(t){if(t===eo||t===du)throw Error(s(483))}var to=null,Sl=0;function mu(t){var i=Sl;return Sl+=1,to===null&&(to=[]),Qg(to,t,i)}function El(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function pu(t,i){throw i.$$typeof===x?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Wg(t){function i(j,V){if(t){var H=j.deletions;H===null?(j.deletions=[V],j.flags|=16):H.push(V)}}function a(j,V){if(!t)return null;for(;V!==null;)i(j,V),V=V.sibling;return null}function l(j){for(var V=new Map;j!==null;)j.key!==null?V.set(j.key,j):V.set(j.index,j),j=j.sibling;return V}function h(j,V){return j=cr(j,V),j.index=0,j.sibling=null,j}function f(j,V,H){return j.index=H,t?(H=j.alternate,H!==null?(H=H.index,H<V?(j.flags|=67108866,V):H):(j.flags|=67108866,V)):(j.flags|=1048576,V)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,V,H,ie){return V===null||V.tag!==6?(V=Od(H,j.mode,ie),V.return=j,V):(V=h(V,H),V.return=j,V)}function O(j,V,H,ie){var Oe=H.type;return Oe===z?Z(j,V,H.props.children,ie,H.key):V!==null&&(V.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===w&&sa(Oe)===V.type)?(V=h(V,H.props),El(V,H),V.return=j,V):(V=ou(H.type,H.key,H.props,null,j.mode,ie),El(V,H),V.return=j,V)}function F(j,V,H,ie){return V===null||V.tag!==4||V.stateNode.containerInfo!==H.containerInfo||V.stateNode.implementation!==H.implementation?(V=kd(H,j.mode,ie),V.return=j,V):(V=h(V,H.children||[]),V.return=j,V)}function Z(j,V,H,ie,Oe){return V===null||V.tag!==7?(V=ea(H,j.mode,ie,Oe),V.return=j,V):(V=h(V,H),V.return=j,V)}function re(j,V,H){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Od(""+V,j.mode,H),V.return=j,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case L:return H=ou(V.type,V.key,V.props,null,j.mode,H),El(H,V),H.return=j,H;case P:return V=kd(V,j.mode,H),V.return=j,V;case w:return V=sa(V),re(j,V,H)}if(xe(V)||k(V))return V=ea(V,j.mode,H,null),V.return=j,V;if(typeof V.then=="function")return re(j,mu(V),H);if(V.$$typeof===$)return re(j,uu(j,V),H);pu(j,V)}return null}function Y(j,V,H,ie){var Oe=V!==null?V.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Oe!==null?null:T(j,V,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case L:return H.key===Oe?O(j,V,H,ie):null;case P:return H.key===Oe?F(j,V,H,ie):null;case w:return H=sa(H),Y(j,V,H,ie)}if(xe(H)||k(H))return Oe!==null?null:Z(j,V,H,ie,null);if(typeof H.then=="function")return Y(j,V,mu(H),ie);if(H.$$typeof===$)return Y(j,V,uu(j,H),ie);pu(j,H)}return null}function X(j,V,H,ie,Oe){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return j=j.get(H)||null,T(V,j,""+ie,Oe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case L:return j=j.get(ie.key===null?H:ie.key)||null,O(V,j,ie,Oe);case P:return j=j.get(ie.key===null?H:ie.key)||null,F(V,j,ie,Oe);case w:return ie=sa(ie),X(j,V,H,ie,Oe)}if(xe(ie)||k(ie))return j=j.get(H)||null,Z(V,j,ie,Oe,null);if(typeof ie.then=="function")return X(j,V,H,mu(ie),Oe);if(ie.$$typeof===$)return X(j,V,H,uu(V,ie),Oe);pu(V,ie)}return null}function we(j,V,H,ie){for(var Oe=null,tt=null,Ce=V,He=V=0,Ke=null;Ce!==null&&He<H.length;He++){Ce.index>He?(Ke=Ce,Ce=null):Ke=Ce.sibling;var nt=Y(j,Ce,H[He],ie);if(nt===null){Ce===null&&(Ce=Ke);break}t&&Ce&&nt.alternate===null&&i(j,Ce),V=f(nt,V,He),tt===null?Oe=nt:tt.sibling=nt,tt=nt,Ce=Ke}if(He===H.length)return a(j,Ce),Ze&&ur(j,He),Oe;if(Ce===null){for(;He<H.length;He++)Ce=re(j,H[He],ie),Ce!==null&&(V=f(Ce,V,He),tt===null?Oe=Ce:tt.sibling=Ce,tt=Ce);return Ze&&ur(j,He),Oe}for(Ce=l(Ce);He<H.length;He++)Ke=X(Ce,j,He,H[He],ie),Ke!==null&&(t&&Ke.alternate!==null&&Ce.delete(Ke.key===null?He:Ke.key),V=f(Ke,V,He),tt===null?Oe=Ke:tt.sibling=Ke,tt=Ke);return t&&Ce.forEach(function(ms){return i(j,ms)}),Ze&&ur(j,He),Oe}function ke(j,V,H,ie){if(H==null)throw Error(s(151));for(var Oe=null,tt=null,Ce=V,He=V=0,Ke=null,nt=H.next();Ce!==null&&!nt.done;He++,nt=H.next()){Ce.index>He?(Ke=Ce,Ce=null):Ke=Ce.sibling;var ms=Y(j,Ce,nt.value,ie);if(ms===null){Ce===null&&(Ce=Ke);break}t&&Ce&&ms.alternate===null&&i(j,Ce),V=f(ms,V,He),tt===null?Oe=ms:tt.sibling=ms,tt=ms,Ce=Ke}if(nt.done)return a(j,Ce),Ze&&ur(j,He),Oe;if(Ce===null){for(;!nt.done;He++,nt=H.next())nt=re(j,nt.value,ie),nt!==null&&(V=f(nt,V,He),tt===null?Oe=nt:tt.sibling=nt,tt=nt);return Ze&&ur(j,He),Oe}for(Ce=l(Ce);!nt.done;He++,nt=H.next())nt=X(Ce,j,He,nt.value,ie),nt!==null&&(t&&nt.alternate!==null&&Ce.delete(nt.key===null?He:nt.key),V=f(nt,V,He),tt===null?Oe=nt:tt.sibling=nt,tt=nt);return t&&Ce.forEach(function(pA){return i(j,pA)}),Ze&&ur(j,He),Oe}function pt(j,V,H,ie){if(typeof H=="object"&&H!==null&&H.type===z&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case L:e:{for(var Oe=H.key;V!==null;){if(V.key===Oe){if(Oe=H.type,Oe===z){if(V.tag===7){a(j,V.sibling),ie=h(V,H.props.children),ie.return=j,j=ie;break e}}else if(V.elementType===Oe||typeof Oe=="object"&&Oe!==null&&Oe.$$typeof===w&&sa(Oe)===V.type){a(j,V.sibling),ie=h(V,H.props),El(ie,H),ie.return=j,j=ie;break e}a(j,V);break}else i(j,V);V=V.sibling}H.type===z?(ie=ea(H.props.children,j.mode,ie,H.key),ie.return=j,j=ie):(ie=ou(H.type,H.key,H.props,null,j.mode,ie),El(ie,H),ie.return=j,j=ie)}return _(j);case P:e:{for(Oe=H.key;V!==null;){if(V.key===Oe)if(V.tag===4&&V.stateNode.containerInfo===H.containerInfo&&V.stateNode.implementation===H.implementation){a(j,V.sibling),ie=h(V,H.children||[]),ie.return=j,j=ie;break e}else{a(j,V);break}else i(j,V);V=V.sibling}ie=kd(H,j.mode,ie),ie.return=j,j=ie}return _(j);case w:return H=sa(H),pt(j,V,H,ie)}if(xe(H))return we(j,V,H,ie);if(k(H)){if(Oe=k(H),typeof Oe!="function")throw Error(s(150));return H=Oe.call(H),ke(j,V,H,ie)}if(typeof H.then=="function")return pt(j,V,mu(H),ie);if(H.$$typeof===$)return pt(j,V,uu(j,H),ie);pu(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,V!==null&&V.tag===6?(a(j,V.sibling),ie=h(V,H),ie.return=j,j=ie):(a(j,V),ie=Od(H,j.mode,ie),ie.return=j,j=ie),_(j)):a(j,V)}return function(j,V,H,ie){try{Sl=0;var Oe=pt(j,V,H,ie);return to=null,Oe}catch(Ce){if(Ce===eo||Ce===du)throw Ce;var tt=Ln(29,Ce,null,j.mode);return tt.lanes=ie,tt.return=j,tt}finally{}}}var oa=Wg(!0),Jg=Wg(!1),Wr=!1;function Gd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $d(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Jr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Zr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(rt&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=au(t),Lg(t,null,a),i}return su(t,l,i,a),au(t)}function Tl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Xo(t,a)}}function Yd(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Qd=!1;function Al(){if(Qd){var t=Za;if(t!==null)throw t}}function wl(t,i,a,l){Qd=!1;var h=t.updateQueue;Wr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var O=T,F=O.next;O.next=null,_===null?f=F:_.next=F,_=O;var Z=t.alternate;Z!==null&&(Z=Z.updateQueue,T=Z.lastBaseUpdate,T!==_&&(T===null?Z.firstBaseUpdate=F:T.next=F,Z.lastBaseUpdate=O))}if(f!==null){var re=h.baseState;_=0,Z=F=O=null,T=f;do{var Y=T.lane&-536870913,X=Y!==T.lane;if(X?(Qe&Y)===Y:(l&Y)===Y){Y!==0&&Y===Ja&&(Qd=!0),Z!==null&&(Z=Z.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var we=t,ke=T;Y=i;var pt=a;switch(ke.tag){case 1:if(we=ke.payload,typeof we=="function"){re=we.call(pt,re,Y);break e}re=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=ke.payload,Y=typeof we=="function"?we.call(pt,re,Y):we,Y==null)break e;re=E({},re,Y);break e;case 2:Wr=!0}}Y=T.callback,Y!==null&&(t.flags|=64,X&&(t.flags|=8192),X=h.callbacks,X===null?h.callbacks=[Y]:X.push(Y))}else X={lane:Y,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Z===null?(F=Z=X,O=re):Z=Z.next=X,_|=Y;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;X=T,T=X.next,X.next=null,h.lastBaseUpdate=X,h.shared.pending=null}}while(!0);Z===null&&(O=re),h.baseState=O,h.firstBaseUpdate=F,h.lastBaseUpdate=Z,f===null&&(h.shared.lanes=0),rs|=_,t.lanes=_,t.memoizedState=re}}function Zg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function ey(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Zg(a[t],i)}var no=M(null),gu=M(0);function ty(t,i){t=Sr,he(gu,t),he(no,i),Sr=t|i.baseLanes}function Kd(){he(gu,Sr),he(no,no.current)}function Xd(){Sr=gu.current,W(no),W(gu)}var Vn=M(null),ti=null;function es(t){var i=t.alternate;he(Nt,Nt.current&1),he(Vn,t),ti===null&&(i===null||no.current!==null||i.memoizedState!==null)&&(ti=t)}function Wd(t){he(Nt,Nt.current),he(Vn,t),ti===null&&(ti=t)}function ny(t){t.tag===22?(he(Nt,Nt.current),he(Vn,t),ti===null&&(ti=t)):ts()}function ts(){he(Nt,Nt.current),he(Vn,Vn.current)}function Pn(t){W(Vn),ti===t&&(ti=null),W(Nt)}var Nt=M(0);function yu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||rm(a)||sm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var fr=0,Be=null,ft=null,Bt=null,_u=!1,io=!1,la=!1,vu=0,xl=0,ro=null,s1=0;function wt(){throw Error(s(321))}function Jd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Mn(t[a],i[a]))return!1;return!0}function Zd(t,i,a,l,h,f){return fr=f,Be=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=t===null||t.memoizedState===null?jy:pf,la=!1,f=a(l,h),la=!1,io&&(f=ry(i,a,l,h)),iy(t),f}function iy(t){G.H=Il;var i=ft!==null&&ft.next!==null;if(fr=0,Bt=ft=Be=null,_u=!1,xl=0,ro=null,i)throw Error(s(300));t===null||qt||(t=t.dependencies,t!==null&&cu(t)&&(qt=!0))}function ry(t,i,a,l){Be=t;var h=0;do{if(io&&(ro=null),xl=0,io=!1,25<=h)throw Error(s(301));if(h+=1,Bt=ft=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}G.H=zy,f=i(a,l)}while(io);return f}function a1(){var t=G.H,i=t.useState()[0];return i=typeof i.then=="function"?Rl(i):i,t=t.useState()[0],(ft!==null?ft.memoizedState:null)!==t&&(Be.flags|=1024),i}function ef(){var t=vu!==0;return vu=0,t}function tf(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function nf(t){if(_u){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}_u=!1}fr=0,Bt=ft=Be=null,io=!1,xl=vu=0,ro=null}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?Be.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Ot(){if(ft===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=ft.next;var i=Bt===null?Be.memoizedState:Bt.next;if(i!==null)Bt=i,ft=t;else{if(t===null)throw Be.alternate===null?Error(s(467)):Error(s(310));ft=t,t={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},Bt===null?Be.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(t){var i=xl;return xl+=1,ro===null&&(ro=[]),t=Qg(ro,t,i),i=Be,(Bt===null?i.memoizedState:Bt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?jy:pf),t}function Su(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rl(t);if(t.$$typeof===$)return sn(t)}throw Error(s(438,String(t)))}function rf(t){var i=null,a=Be.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Be.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=bu(),Be.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=C;return i.index++,a}function mr(t,i){return typeof i=="function"?i(t):i}function Eu(t){var i=Ot();return sf(i,ft,t)}function sf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=_=null,O=null,F=i,Z=!1;do{var re=F.lane&-536870913;if(re!==F.lane?(Qe&re)===re:(fr&re)===re){var Y=F.revertLane;if(Y===0)O!==null&&(O=O.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),re===Ja&&(Z=!0);else if((fr&Y)===Y){F=F.next,Y===Ja&&(Z=!0);continue}else re={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(T=O=re,_=f):O=O.next=re,Be.lanes|=Y,rs|=Y;re=F.action,la&&a(f,re),f=F.hasEagerState?F.eagerState:a(f,re)}else Y={lane:re,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},O===null?(T=O=Y,_=f):O=O.next=Y,Be.lanes|=re,rs|=re;F=F.next}while(F!==null&&F!==i);if(O===null?_=f:O.next=T,!Mn(f,t.memoizedState)&&(qt=!0,Z&&(a=Za,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=O,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function af(t){var i=Ot(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Mn(f,i.memoizedState)||(qt=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function sy(t,i,a){var l=Be,h=Ot(),f=Ze;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Mn((ft||h).memoizedState,a);if(_&&(h.memoizedState=a,qt=!0),h=h.queue,cf(ly.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Bt!==null&&Bt.memoizedState.tag&1){if(l.flags|=2048,so(9,{destroy:void 0},oy.bind(null,l,h,a,i),null),gt===null)throw Error(s(349));f||(fr&127)!==0||ay(l,i,a)}return a}function ay(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Be.updateQueue,i===null?(i=bu(),Be.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function oy(t,i,a,l){i.value=a,i.getSnapshot=l,cy(i)&&uy(t)}function ly(t,i,a){return a(function(){cy(i)&&uy(t)})}function cy(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Mn(t,a)}catch{return!0}}function uy(t){var i=Zs(t,2);i!==null&&Rn(i,t,2)}function of(t){var i=vn();if(typeof t=="function"){var a=t;if(t=a(),la){Gn(!0);try{a()}finally{Gn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:t},i}function hy(t,i,a,l){return t.baseState=a,sf(t,ft,typeof l=="function"?l:mr)}function o1(t,i,a,l,h){if(wu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};G.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,dy(i,f)):(f.next=a.next,i.pending=a.next=f)}}function dy(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=G.T,_={};G.T=_;try{var T=a(h,l),O=G.S;O!==null&&O(_,T),fy(t,i,T)}catch(F){lf(t,i,F)}finally{f!==null&&_.types!==null&&(f.types=_.types),G.T=f}}else try{f=a(h,l),fy(t,i,f)}catch(F){lf(t,i,F)}}function fy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){my(t,i,l)},function(l){return lf(t,i,l)}):my(t,i,a)}function my(t,i,a){i.status="fulfilled",i.value=a,py(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,dy(t,a)))}function lf(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,py(i),i=i.next;while(i!==l)}t.action=null}function py(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function gy(t,i){return i}function yy(t,i){if(Ze){var a=gt.formState;if(a!==null){e:{var l=Be;if(Ze){if(_t){t:{for(var h=_t,f=ei;h.nodeType!==8;){if(!f){h=null;break t}if(h=ni(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){_t=ni(h.nextSibling),l=h.data==="F!";break e}}Kr(l)}l=!1}l&&(i=a[0])}}return a=vn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gy,lastRenderedState:i},a.queue=l,a=Vy.bind(null,Be,l),l.dispatch=a,l=of(!1),f=mf.bind(null,Be,!1,l.queue),l=vn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=o1.bind(null,Be,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function _y(t){var i=Ot();return vy(i,ft,t)}function vy(t,i,a){if(i=sf(t,i,gy)[0],t=Eu(mr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Rl(i)}catch(_){throw _===eo?du:_}else l=i;i=Ot();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Be.flags|=2048,so(9,{destroy:void 0},l1.bind(null,h,a),null)),[l,f,t]}function l1(t,i){t.action=i}function by(t){var i=Ot(),a=ft;if(a!==null)return vy(i,a,t);Ot(),i=i.memoizedState,a=Ot();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function so(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Be.updateQueue,i===null&&(i=bu(),Be.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Sy(){return Ot().memoizedState}function Tu(t,i,a,l){var h=vn();Be.flags|=t,h.memoizedState=so(1|i,{destroy:void 0},a,l===void 0?null:l)}function Au(t,i,a,l){var h=Ot();l=l===void 0?null:l;var f=h.memoizedState.inst;ft!==null&&l!==null&&Jd(l,ft.memoizedState.deps)?h.memoizedState=so(i,f,a,l):(Be.flags|=t,h.memoizedState=so(1|i,f,a,l))}function Ey(t,i){Tu(8390656,8,t,i)}function cf(t,i){Au(2048,8,t,i)}function c1(t){Be.flags|=4;var i=Be.updateQueue;if(i===null)i=bu(),Be.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Ty(t){var i=Ot().memoizedState;return c1({ref:i,nextImpl:t}),function(){if((rt&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ay(t,i){return Au(4,2,t,i)}function wy(t,i){return Au(4,4,t,i)}function xy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function Ry(t,i,a){a=a!=null?a.concat([t]):null,Au(4,4,xy.bind(null,i,t),a)}function uf(){}function Cy(t,i){var a=Ot();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Jd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Iy(t,i){var a=Ot();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Jd(i,l[1]))return l[0];if(l=t(),la){Gn(!0);try{t()}finally{Gn(!1)}}return a.memoizedState=[l,i],l}function hf(t,i,a){return a===void 0||(fr&1073741824)!==0&&(Qe&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=D0(),Be.lanes|=t,rs|=t,a)}function Dy(t,i,a,l){return Mn(a,i)?a:no.current!==null?(t=hf(t,a,l),Mn(t,i)||(qt=!0),t):(fr&42)===0||(fr&1073741824)!==0&&(Qe&261930)===0?(qt=!0,t.memoizedState=a):(t=D0(),Be.lanes|=t,rs|=t,i)}function Ny(t,i,a,l,h){var f=le.p;le.p=f!==0&&8>f?f:8;var _=G.T,T={};G.T=T,mf(t,!1,i,a);try{var O=h(),F=G.S;if(F!==null&&F(T,O),O!==null&&typeof O=="object"&&typeof O.then=="function"){var Z=r1(O,l);Cl(t,i,Z,zn(t))}else Cl(t,i,l,zn(t))}catch(re){Cl(t,i,{then:function(){},status:"rejected",reason:re},zn())}finally{le.p=f,_!==null&&T.types!==null&&(_.types=T.types),G.T=_}}function u1(){}function df(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Oy(t).queue;Ny(t,h,i,pe,a===null?u1:function(){return ky(t),a(l)})}function Oy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:pe},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:mr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function ky(t){var i=Oy(t);i.next===null&&(i=t.alternate.memoizedState),Cl(t,i.next.queue,{},zn())}function ff(){return sn(Gl)}function My(){return Ot().memoizedState}function Ly(){return Ot().memoizedState}function h1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=zn();t=Jr(a);var l=Zr(i,t,a);l!==null&&(Rn(l,i,a),Tl(l,i,a)),i={cache:Bd()},t.payload=i;return}i=i.return}}function d1(t,i,a){var l=zn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},wu(t)?Py(i,a):(a=Dd(t,i,a,l),a!==null&&(Rn(a,t,l),Uy(a,i,l)))}function Vy(t,i,a){var l=zn();Cl(t,i,a,l)}function Cl(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(wu(t))Py(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,T=f(_,a);if(h.hasEagerState=!0,h.eagerState=T,Mn(T,_))return su(t,i,h,0),gt===null&&ru(),!1}catch{}finally{}if(a=Dd(t,i,h,l),a!==null)return Rn(a,t,l),Uy(a,i,l),!0}return!1}function mf(t,i,a,l){if(l={lane:2,revertLane:$f(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},wu(t)){if(i)throw Error(s(479))}else i=Dd(t,a,l,2),i!==null&&Rn(i,t,2)}function wu(t){var i=t.alternate;return t===Be||i!==null&&i===Be}function Py(t,i){io=_u=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Uy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Xo(t,a)}}var Il={readContext:sn,use:Su,useCallback:wt,useContext:wt,useEffect:wt,useImperativeHandle:wt,useLayoutEffect:wt,useInsertionEffect:wt,useMemo:wt,useReducer:wt,useRef:wt,useState:wt,useDebugValue:wt,useDeferredValue:wt,useTransition:wt,useSyncExternalStore:wt,useId:wt,useHostTransitionStatus:wt,useFormState:wt,useActionState:wt,useOptimistic:wt,useMemoCache:wt,useCacheRefresh:wt};Il.useEffectEvent=wt;var jy={readContext:sn,use:Su,useCallback:function(t,i){return vn().memoizedState=[t,i===void 0?null:i],t},useContext:sn,useEffect:Ey,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Tu(4194308,4,xy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Tu(4194308,4,t,i)},useInsertionEffect:function(t,i){Tu(4,2,t,i)},useMemo:function(t,i){var a=vn();i=i===void 0?null:i;var l=t();if(la){Gn(!0);try{t()}finally{Gn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=vn();if(a!==void 0){var h=a(i);if(la){Gn(!0);try{a(i)}finally{Gn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=d1.bind(null,Be,t),[l.memoizedState,t]},useRef:function(t){var i=vn();return t={current:t},i.memoizedState=t},useState:function(t){t=of(t);var i=t.queue,a=Vy.bind(null,Be,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:uf,useDeferredValue:function(t,i){var a=vn();return hf(a,t,i)},useTransition:function(){var t=of(!1);return t=Ny.bind(null,Be,t.queue,!0,!1),vn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Be,h=vn();if(Ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),gt===null)throw Error(s(349));(Qe&127)!==0||ay(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Ey(ly.bind(null,l,f,t),[t]),l.flags|=2048,so(9,{destroy:void 0},oy.bind(null,l,f,a,i),null),a},useId:function(){var t=vn(),i=gt.identifierPrefix;if(Ze){var a=Gi,l=Fi;a=(l&~(1<<32-It(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=vu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=s1++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:ff,useFormState:yy,useActionState:yy,useOptimistic:function(t){var i=vn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=mf.bind(null,Be,!0,a),a.dispatch=i,[t,i]},useMemoCache:rf,useCacheRefresh:function(){return vn().memoizedState=h1.bind(null,Be)},useEffectEvent:function(t){var i=vn(),a={impl:t};return i.memoizedState=a,function(){if((rt&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},pf={readContext:sn,use:Su,useCallback:Cy,useContext:sn,useEffect:cf,useImperativeHandle:Ry,useInsertionEffect:Ay,useLayoutEffect:wy,useMemo:Iy,useReducer:Eu,useRef:Sy,useState:function(){return Eu(mr)},useDebugValue:uf,useDeferredValue:function(t,i){var a=Ot();return Dy(a,ft.memoizedState,t,i)},useTransition:function(){var t=Eu(mr)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:Rl(t),i]},useSyncExternalStore:sy,useId:My,useHostTransitionStatus:ff,useFormState:_y,useActionState:_y,useOptimistic:function(t,i){var a=Ot();return hy(a,ft,t,i)},useMemoCache:rf,useCacheRefresh:Ly};pf.useEffectEvent=Ty;var zy={readContext:sn,use:Su,useCallback:Cy,useContext:sn,useEffect:cf,useImperativeHandle:Ry,useInsertionEffect:Ay,useLayoutEffect:wy,useMemo:Iy,useReducer:af,useRef:Sy,useState:function(){return af(mr)},useDebugValue:uf,useDeferredValue:function(t,i){var a=Ot();return ft===null?hf(a,t,i):Dy(a,ft.memoizedState,t,i)},useTransition:function(){var t=af(mr)[0],i=Ot().memoizedState;return[typeof t=="boolean"?t:Rl(t),i]},useSyncExternalStore:sy,useId:My,useHostTransitionStatus:ff,useFormState:by,useActionState:by,useOptimistic:function(t,i){var a=Ot();return ft!==null?hy(a,ft,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:rf,useCacheRefresh:Ly};zy.useEffectEvent=Ty;function gf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:E({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var yf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=zn(),h=Jr(l);h.payload=i,a!=null&&(h.callback=a),i=Zr(t,h,l),i!==null&&(Rn(i,t,l),Tl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=zn(),h=Jr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Zr(t,h,l),i!==null&&(Rn(i,t,l),Tl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=zn(),l=Jr(a);l.tag=2,i!=null&&(l.callback=i),i=Zr(t,l,a),i!==null&&(Rn(i,t,a),Tl(i,t,a))}};function By(t,i,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):i.prototype&&i.prototype.isPureReactComponent?!pl(a,l)||!pl(h,f):!0}function qy(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&yf.enqueueReplaceState(i,i.state,null)}function ca(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=E({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function Hy(t){iu(t)}function Fy(t){console.error(t)}function Gy(t){iu(t)}function xu(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function $y(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function _f(t,i,a){return a=Jr(a),a.tag=3,a.payload={element:null},a.callback=function(){xu(t,i)},a}function Yy(t){return t=Jr(t),t.tag=3,t}function Qy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){$y(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){$y(i,a,l),typeof h!="function"&&(ss===null?ss=new Set([this]):ss.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function f1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Wa(i,a,h,!0),a=Vn.current,a!==null){switch(a.tag){case 31:case 13:return ti===null?Uu():a.alternate===null&&xt===0&&(xt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===fu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Hf(t,l,h)),!1;case 22:return a.flags|=65536,l===fu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Hf(t,l,h)),!1}throw Error(s(435,a.tag))}return Hf(t,l,h),Uu(),!1}if(Ze)return i=Vn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Vd&&(t=Error(s(422),{cause:l}),_l(Wn(t,a)))):(l!==Vd&&(i=Error(s(423),{cause:l}),_l(Wn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Wn(l,a),h=_f(t.stateNode,l,h),Yd(t,h),xt!==4&&(xt=2)),!1;var f=Error(s(520),{cause:l});if(f=Wn(f,a),Pl===null?Pl=[f]:Pl.push(f),xt!==4&&(xt=2),i===null)return!0;l=Wn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=_f(a.stateNode,l,t),Yd(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(ss===null||!ss.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Yy(h),Qy(h,t,a,l),Yd(a,h),!1}a=a.return}while(a!==null);return!1}var vf=Error(s(461)),qt=!1;function an(t,i,a,l){i.child=t===null?Jg(i,null,a,l):oa(i,t.child,a,l)}function Ky(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return ia(i),l=Zd(t,i,a,_,f,h),T=ef(),t!==null&&!qt?(tf(t,i,h),pr(t,i,h)):(Ze&&T&&Md(i),i.flags|=1,an(t,i,l,h),i.child)}function Xy(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Nd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Wy(t,i,f,l,h)):(t=ou(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!Rf(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:pl,a(_,l)&&t.ref===i.ref)return pr(t,i,h)}return i.flags|=1,t=cr(f,l),t.ref=i.ref,t.return=i,i.child=t}function Wy(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(pl(f,l)&&t.ref===i.ref)if(qt=!1,i.pendingProps=l=f,Rf(t,h))(t.flags&131072)!==0&&(qt=!0);else return i.lanes=t.lanes,pr(t,i,h)}return bf(t,i,a,l,h)}function Jy(t,i,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,i.child=null;return Zy(t,i,f,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&hu(i,f!==null?f.cachePool:null),f!==null?ty(i,f):Kd(),ny(i);else return l=i.lanes=536870912,Zy(t,i,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(hu(i,f.cachePool),ty(i,f),ts(),i.memoizedState=null):(t!==null&&hu(i,null),Kd(),ts());return an(t,i,h,a),i.child}function Dl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Zy(t,i,a,l,h){var f=Hd();return f=f===null?null:{parent:zt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&hu(i,null),Kd(),ny(i),t!==null&&Wa(t,i,l,!0),i.childLanes=h,null}function Ru(t,i){return i=Iu({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function e0(t,i,a){return oa(i,t.child,null,a),t=Ru(i,i.pendingProps),t.flags|=2,Pn(i),i.memoizedState=null,t}function m1(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(Ze){if(l.mode==="hidden")return t=Ru(i,l),i.lanes=536870912,Dl(null,t);if(Wd(i),(t=_t)?(t=d_(t,ei),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Yr!==null?{id:Fi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=Pg(t),a.return=i,i.child=a,rn=i,_t=null)):t=null,t===null)throw Kr(i);return i.lanes=536870912,null}return Ru(i,l)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Wd(i),h)if(i.flags&256)i.flags&=-257,i=e0(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(qt||Wa(t,i,a,!1),h=(a&t.childLanes)!==0,qt||h){if(l=gt,l!==null&&(_=Wo(l,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Zs(t,_),Rn(l,t,_),vf;Uu(),i=e0(t,i,a)}else t=f.treeContext,_t=ni(_.nextSibling),rn=i,Ze=!0,Qr=null,ei=!1,t!==null&&zg(i,t),i=Ru(i,l),i.flags|=4096;return i}return t=cr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function Cu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function bf(t,i,a,l,h){return ia(i),a=Zd(t,i,a,l,void 0,h),l=ef(),t!==null&&!qt?(tf(t,i,h),pr(t,i,h)):(Ze&&l&&Md(i),i.flags|=1,an(t,i,a,h),i.child)}function t0(t,i,a,l,h,f){return ia(i),i.updateQueue=null,a=ry(i,l,a,h),iy(t),l=ef(),t!==null&&!qt?(tf(t,i,f),pr(t,i,f)):(Ze&&l&&Md(i),i.flags|=1,an(t,i,a,f),i.child)}function n0(t,i,a,l,h){if(ia(i),i.stateNode===null){var f=Ya,_=a.contextType;typeof _=="object"&&_!==null&&(f=sn(_)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=yf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},Gd(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?sn(_):Ya,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(gf(i,a,_,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&yf.enqueueReplaceState(f,f.state,null),wl(i,l,f,h),Al(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,O=ca(a,T);f.props=O;var F=f.context,Z=a.contextType;_=Ya,typeof Z=="object"&&Z!==null&&(_=sn(Z));var re=a.getDerivedStateFromProps;Z=typeof re=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Z||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||F!==_)&&qy(i,f,l,_),Wr=!1;var Y=i.memoizedState;f.state=Y,wl(i,l,f,h),Al(),F=i.memoizedState,T||Y!==F||Wr?(typeof re=="function"&&(gf(i,a,re,l),F=i.memoizedState),(O=Wr||By(i,a,O,l,Y,F,_))?(Z||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=F),f.props=l,f.state=F,f.context=_,l=O):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,$d(t,i),_=i.memoizedProps,Z=ca(a,_),f.props=Z,re=i.pendingProps,Y=f.context,F=a.contextType,O=Ya,typeof F=="object"&&F!==null&&(O=sn(F)),T=a.getDerivedStateFromProps,(F=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==re||Y!==O)&&qy(i,f,l,O),Wr=!1,Y=i.memoizedState,f.state=Y,wl(i,l,f,h),Al();var X=i.memoizedState;_!==re||Y!==X||Wr||t!==null&&t.dependencies!==null&&cu(t.dependencies)?(typeof T=="function"&&(gf(i,a,T,l),X=i.memoizedState),(Z=Wr||By(i,a,Z,l,Y,X,O)||t!==null&&t.dependencies!==null&&cu(t.dependencies))?(F||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,X,O),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,X,O)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&Y===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Y===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=X),f.props=l,f.state=X,f.context=O,l=Z):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&Y===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Y===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,Cu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=oa(i,t.child,null,h),i.child=oa(i,null,a,h)):an(t,i,a,h),i.memoizedState=f.state,t=i.child):t=pr(t,i,h),t}function i0(t,i,a,l){return ta(),i.flags|=256,an(t,i,a,l),i.child}var Sf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ef(t){return{baseLanes:t,cachePool:$g()}}function Tf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=jn),t}function r0(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(Nt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(Ze){if(h?es(i):ts(),(t=_t)?(t=d_(t,ei),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Yr!==null?{id:Fi,overflow:Gi}:null,retryLane:536870912,hydrationErrors:null},a=Pg(t),a.return=i,i.child=a,rn=i,_t=null)):t=null,t===null)throw Kr(i);return sm(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(ts(),h=i.mode,T=Iu({mode:"hidden",children:T},h),l=ea(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Ef(a),l.childLanes=Tf(t,_,a),i.memoizedState=Sf,Dl(null,l)):(es(i),Af(i,T))}var O=t.memoizedState;if(O!==null&&(T=O.dehydrated,T!==null)){if(f)i.flags&256?(es(i),i.flags&=-257,i=wf(t,i,a)):i.memoizedState!==null?(ts(),i.child=t.child,i.flags|=128,i=null):(ts(),T=l.fallback,h=i.mode,l=Iu({mode:"visible",children:l.children},h),T=ea(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,oa(i,t.child,null,a),l=i.child,l.memoizedState=Ef(a),l.childLanes=Tf(t,_,a),i.memoizedState=Sf,i=Dl(null,l));else if(es(i),sm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var F=_.dgst;_=F,l=Error(s(419)),l.stack="",l.digest=_,_l({value:l,source:null,stack:null}),i=wf(t,i,a)}else if(qt||Wa(t,i,a,!1),_=(a&t.childLanes)!==0,qt||_){if(_=gt,_!==null&&(l=Wo(_,a),l!==0&&l!==O.retryLane))throw O.retryLane=l,Zs(t,l),Rn(_,t,l),vf;rm(T)||Uu(),i=wf(t,i,a)}else rm(T)?(i.flags|=192,i.child=t.child,i=null):(t=O.treeContext,_t=ni(T.nextSibling),rn=i,Ze=!0,Qr=null,ei=!1,t!==null&&zg(i,t),i=Af(i,l.children),i.flags|=4096);return i}return h?(ts(),T=l.fallback,h=i.mode,O=t.child,F=O.sibling,l=cr(O,{mode:"hidden",children:l.children}),l.subtreeFlags=O.subtreeFlags&65011712,F!==null?T=cr(F,T):(T=ea(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Dl(null,l),l=i.child,T=t.child.memoizedState,T===null?T=Ef(a):(h=T.cachePool,h!==null?(O=zt._currentValue,h=h.parent!==O?{parent:O,pool:O}:h):h=$g(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=Tf(t,_,a),i.memoizedState=Sf,Dl(t.child,l)):(es(i),a=t.child,t=a.sibling,a=cr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Af(t,i){return i=Iu({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Iu(t,i){return t=Ln(22,t,null,i),t.lanes=0,t}function wf(t,i,a){return oa(i,t.child,null,a),t=Af(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function s0(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),jd(t.return,i,a)}function xf(t,i,a,l,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function a0(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var _=Nt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,he(Nt,_),an(t,i,l,a),l=Ze?yl:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&s0(t,a,i);else if(t.tag===19)s0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&yu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),xf(i,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&yu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}xf(i,!0,a,null,f,l);break;case"together":xf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function pr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),rs|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Wa(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=cr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=cr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Rf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&cu(t)))}function p1(t,i,a){switch(i.tag){case 3:Tt(i,i.stateNode.containerInfo),Xr(i,zt,t.memoizedState.cache),ta();break;case 27:case 5:si(i);break;case 4:Tt(i,i.stateNode.containerInfo);break;case 10:Xr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Wd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(es(i),i.flags|=128,null):(a&i.child.childLanes)!==0?r0(t,i,a):(es(i),t=pr(t,i,a),t!==null?t.sibling:null);es(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Wa(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return a0(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),he(Nt,Nt.current),l)break;return null;case 22:return i.lanes=0,Jy(t,i,a,i.pendingProps);case 24:Xr(i,zt,t.memoizedState.cache)}return pr(t,i,a)}function o0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)qt=!0;else{if(!Rf(t,a)&&(i.flags&128)===0)return qt=!1,p1(t,i,a);qt=(t.flags&131072)!==0}else qt=!1,Ze&&(i.flags&1048576)!==0&&jg(i,yl,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=sa(i.elementType),i.type=t,typeof t=="function")Nd(t)?(l=ca(t,l),i.tag=1,i=n0(null,i,t,l,a)):(i.tag=0,i=bf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===me){i.tag=11,i=Ky(null,i,t,l,a);break e}else if(h===D){i.tag=14,i=Xy(null,i,t,l,a);break e}}throw i=ae(t)||t,Error(s(306,i,""))}}return i;case 0:return bf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ca(l,i.pendingProps),n0(t,i,l,h,a);case 3:e:{if(Tt(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,$d(t,i),wl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Xr(i,zt,l),l!==f.cache&&zd(i,[zt],a,!0),Al(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=i0(t,i,l,a);break e}else if(l!==h){h=Wn(Error(s(424)),i),_l(h),i=i0(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=ni(t.firstChild),rn=i,Ze=!0,Qr=null,ei=!0,a=Jg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ta(),l===h){i=pr(t,i,a);break e}an(t,i,l,a)}i=i.child}return i;case 26:return Cu(t,i),t===null?(a=__(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ze||(a=i.type,t=i.pendingProps,l=Gu(Le.current).createElement(a),l[Pt]=i,l[Xt]=t,on(l,a,t),Ut(l),i.stateNode=l):i.memoizedState=__(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return si(i),t===null&&Ze&&(l=i.stateNode=p_(i.type,i.pendingProps,Le.current),rn=i,ei=!0,h=_t,cs(i.type)?(am=h,_t=ni(l.firstChild)):_t=h),an(t,i,i.pendingProps.children,a),Cu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&Ze&&((h=l=_t)&&(l=G1(l,i.type,i.pendingProps,ei),l!==null?(i.stateNode=l,rn=i,_t=ni(l.firstChild),ei=!1,h=!0):h=!1),h||Kr(i)),si(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,tm(h,f)?l=null:_!==null&&tm(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Zd(t,i,a1,null,null,a),Gl._currentValue=h),Cu(t,i),an(t,i,l,a),i.child;case 6:return t===null&&Ze&&((t=a=_t)&&(a=$1(a,i.pendingProps,ei),a!==null?(i.stateNode=a,rn=i,_t=null,t=!0):t=!1),t||Kr(i)),null;case 13:return r0(t,i,a);case 4:return Tt(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=oa(i,null,l,a):an(t,i,l,a),i.child;case 11:return Ky(t,i,i.type,i.pendingProps,a);case 7:return an(t,i,i.pendingProps,a),i.child;case 8:return an(t,i,i.pendingProps.children,a),i.child;case 12:return an(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Xr(i,i.type,l.value),an(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,ia(i),h=sn(h),l=l(h),i.flags|=1,an(t,i,l,a),i.child;case 14:return Xy(t,i,i.type,i.pendingProps,a);case 15:return Wy(t,i,i.type,i.pendingProps,a);case 19:return a0(t,i,a);case 31:return m1(t,i,a);case 22:return Jy(t,i,a,i.pendingProps);case 24:return ia(i),l=sn(zt),t===null?(h=Hd(),h===null&&(h=gt,f=Bd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},Gd(i),Xr(i,zt,h)):((t.lanes&a)!==0&&($d(t,i),wl(i,null,null,a),Al()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),Xr(i,zt,l)):(l=f.cache,Xr(i,zt,l),l!==h.cache&&zd(i,[zt],a,!0))),an(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function gr(t){t.flags|=4}function Cf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(M0())t.flags|=8192;else throw aa=fu,Fd}else t.flags&=-16777217}function l0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!T_(i))if(M0())t.flags|=8192;else throw aa=fu,Fd}function Du(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Vc():536870912,t.lanes|=i,co|=i)}function Nl(t,i){if(!Ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function vt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function g1(t,i,a){var l=i.pendingProps;switch(Ld(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(i),null;case 1:return vt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),dr(zt),ot(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Xa(i)?gr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Pd())),vt(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(gr(i),f!==null?(vt(i),l0(i,f)):(vt(i),Cf(i,h,null,l,a))):f?f!==t.memoizedState?(gr(i),vt(i),l0(i,f)):(vt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&gr(i),vt(i),Cf(i,h,t,l,a)),null;case 27:if(Ai(i),a=Le.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&gr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return vt(i),null}t=ve.current,Xa(i)?Bg(i):(t=p_(h,l,a),i.stateNode=t,gr(i))}return vt(i),null;case 5:if(Ai(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&gr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return vt(i),null}if(f=ve.current,Xa(i))Bg(i);else{var _=Gu(Le.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}f[Pt]=i,f[Xt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(on(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&gr(i)}}return vt(i),Cf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&gr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Le.current,Xa(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=rn,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Pt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||r_(t.nodeValue,a)),t||Kr(i,!0)}else t=Gu(t).createTextNode(l),t[Pt]=i,i.stateNode=t}return vt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Xa(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Pt]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vt(i),t=!1}else a=Pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Pn(i),i):(Pn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return vt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Xa(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Pt]=i}else ta(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;vt(i),h=!1}else h=Pd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Pn(i),i):(Pn(i),null)}return Pn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Du(i,i.updateQueue),vt(i),null);case 4:return ot(),t===null&&Xf(i.stateNode.containerInfo),vt(i),null;case 10:return dr(i.type),vt(i),null;case 19:if(W(Nt),l=i.memoizedState,l===null)return vt(i),null;if(h=(i.flags&128)!==0,f=l.rendering,f===null)if(h)Nl(l,!1);else{if(xt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=yu(t),f!==null){for(i.flags|=128,Nl(l,!1),t=f.updateQueue,i.updateQueue=t,Du(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Vg(a,t),a=a.sibling;return he(Nt,Nt.current&1|2),Ze&&ur(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&Ge()>Lu&&(i.flags|=128,h=!0,Nl(l,!1),i.lanes=4194304)}else{if(!h)if(t=yu(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Du(i,t),Nl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ze)return vt(i),null}else 2*Ge()-l.renderingStartTime>Lu&&a!==536870912&&(i.flags|=128,h=!0,Nl(l,!1),i.lanes=4194304);l.isBackwards?(f.sibling=i.child,i.child=f):(t=l.last,t!==null?t.sibling=f:i.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ge(),t.sibling=null,a=Nt.current,he(Nt,h?a&1|2:a&1),Ze&&ur(i,l.treeForkCount),t):(vt(i),null);case 22:case 23:return Pn(i),Xd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(vt(i),i.subtreeFlags&6&&(i.flags|=8192)):vt(i),a=i.updateQueue,a!==null&&Du(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&W(ra),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),dr(zt),vt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function y1(t,i){switch(Ld(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return dr(zt),ot(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return Ai(i),null;case 31:if(i.memoizedState!==null){if(Pn(i),i.alternate===null)throw Error(s(340));ta()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Pn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));ta()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return W(Nt),null;case 4:return ot(),null;case 10:return dr(i.type),null;case 22:case 23:return Pn(i),Xd(),t!==null&&W(ra),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return dr(zt),null;case 25:return null;default:return null}}function c0(t,i){switch(Ld(i),i.tag){case 3:dr(zt),ot();break;case 26:case 27:case 5:Ai(i);break;case 4:ot();break;case 31:i.memoizedState!==null&&Pn(i);break;case 13:Pn(i);break;case 19:W(Nt);break;case 10:dr(i.type);break;case 22:case 23:Pn(i),Xd(),t!==null&&W(ra);break;case 24:dr(zt)}}function Ol(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){ht(i,i.return,T)}}function ns(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=i;var O=a,F=T;try{F()}catch(Z){ht(h,O,Z)}}}l=l.next}while(l!==f)}}catch(Z){ht(i,i.return,Z)}}function u0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{ey(i,a)}catch(l){ht(t,t.return,l)}}}function h0(t,i,a){a.props=ca(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){ht(t,i,l)}}function kl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){ht(t,i,h)}}function $i(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){ht(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ht(t,i,h)}else a.current=null}function d0(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){ht(t,t.return,h)}}function If(t,i,a){try{var l=t.stateNode;j1(l,t.type,a,i),l[Xt]=i}catch(h){ht(t,t.return,h)}}function f0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&cs(t.type)||t.tag===4}function Df(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||f0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&cs(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Nf(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ui));else if(l!==4&&(l===27&&cs(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Nf(t,i,a),t=t.sibling;t!==null;)Nf(t,i,a),t=t.sibling}function Nu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&cs(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Nu(t,i,a),t=t.sibling;t!==null;)Nu(t,i,a),t=t.sibling}function m0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);on(i,l,a),i[Pt]=t,i[Xt]=a}catch(f){ht(t,t.return,f)}}var yr=!1,Ht=!1,Of=!1,p0=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function _1(t,i){if(t=t.containerInfo,Zf=Ju,t=Rg(t),Ad(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,T=-1,O=-1,F=0,Z=0,re=t,Y=null;t:for(;;){for(var X;re!==a||h!==0&&re.nodeType!==3||(T=_+h),re!==f||l!==0&&re.nodeType!==3||(O=_+l),re.nodeType===3&&(_+=re.nodeValue.length),(X=re.firstChild)!==null;)Y=re,re=X;for(;;){if(re===t)break t;if(Y===a&&++F===h&&(T=_),Y===f&&++Z===l&&(O=_),(X=re.nextSibling)!==null)break;re=Y,Y=re.parentNode}re=X}a=T===-1||O===-1?null:{start:T,end:O}}else a=null}a=a||{start:0,end:0}}else a=null;for(em={focusedElem:t,selectionRange:a},Ju=!1,Jt=i;Jt!==null;)if(i=Jt,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Jt=t;else for(;Jt!==null;){switch(i=Jt,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var we=ca(a.type,h);t=l.getSnapshotBeforeUpdate(we,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(ke){ht(a,a.return,ke)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)im(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":im(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Jt=t;break}Jt=i.return}}function g0(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:vr(t,a),l&4&&Ol(5,a);break;case 1:if(vr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){ht(a,a.return,_)}else{var h=ca(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){ht(a,a.return,_)}}l&64&&u0(a),l&512&&kl(a,a.return);break;case 3:if(vr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{ey(t,i)}catch(_){ht(a,a.return,_)}}break;case 27:i===null&&l&4&&m0(a);case 26:case 5:vr(t,a),i===null&&l&4&&d0(a),l&512&&kl(a,a.return);break;case 12:vr(t,a);break;case 31:vr(t,a),l&4&&v0(t,a);break;case 13:vr(t,a),l&4&&b0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=R1.bind(null,a),Y1(t,a))));break;case 22:if(l=a.memoizedState!==null||yr,!l){i=i!==null&&i.memoizedState!==null||Ht,h=yr;var f=Ht;yr=l,(Ht=i)&&!f?br(t,a,(a.subtreeFlags&8772)!==0):vr(t,a),yr=h,Ht=f}break;case 30:break;default:vr(t,a)}}function y0(t){var i=t.alternate;i!==null&&(t.alternate=null,y0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ka(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Et=null,Tn=!1;function _r(t,i,a){for(a=a.child;a!==null;)_0(t,i,a),a=a.sibling}function _0(t,i,a){if(tn&&typeof tn.onCommitFiberUnmount=="function")try{tn.onCommitFiberUnmount(ai,a)}catch{}switch(a.tag){case 26:Ht||$i(a,i),_r(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Ht||$i(a,i);var l=Et,h=Tn;cs(a.type)&&(Et=a.stateNode,Tn=!1),_r(t,i,a),ql(a.stateNode),Et=l,Tn=h;break;case 5:Ht||$i(a,i);case 6:if(l=Et,h=Tn,Et=null,_r(t,i,a),Et=l,Tn=h,Et!==null)if(Tn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(a.stateNode)}catch(f){ht(a,i,f)}else try{Et.removeChild(a.stateNode)}catch(f){ht(a,i,f)}break;case 18:Et!==null&&(Tn?(t=Et,u_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),_o(t)):u_(Et,a.stateNode));break;case 4:l=Et,h=Tn,Et=a.stateNode.containerInfo,Tn=!0,_r(t,i,a),Et=l,Tn=h;break;case 0:case 11:case 14:case 15:ns(2,a,i),Ht||ns(4,a,i),_r(t,i,a);break;case 1:Ht||($i(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&h0(a,i,l)),_r(t,i,a);break;case 21:_r(t,i,a);break;case 22:Ht=(l=Ht)||a.memoizedState!==null,_r(t,i,a),Ht=l;break;default:_r(t,i,a)}}function v0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{_o(t)}catch(a){ht(i,i.return,a)}}}function b0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{_o(t)}catch(a){ht(i,i.return,a)}}function v1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new p0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new p0),i;default:throw Error(s(435,t.tag))}}function Ou(t,i){var a=v1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=C1.bind(null,t,l);l.then(h,h)}})}function An(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(cs(T.type)){Et=T.stateNode,Tn=!1;break e}break;case 5:Et=T.stateNode,Tn=!1;break e;case 3:case 4:Et=T.stateNode.containerInfo,Tn=!0;break e}T=T.return}if(Et===null)throw Error(s(160));_0(f,_,h),Et=null,Tn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)S0(i,t),i=i.sibling}var gi=null;function S0(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:An(i,t),wn(t),l&4&&(ns(3,t,t.return),Ol(3,t),ns(5,t,t.return));break;case 1:An(i,t),wn(t),l&512&&(Ht||a===null||$i(a,a.return)),l&64&&yr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=gi;if(An(i,t),wn(t),l&512&&(Ht||a===null||$i(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Oi]||f[Pt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),on(f,l,a),f[Pt]=t,Ut(f),l=f;break e;case"link":var _=S_("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}f=h.createElement(l),on(f,l,a),h.head.appendChild(f);break;case"meta":if(_=S_("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}f=h.createElement(l),on(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Pt]=t,Ut(f),l=f}t.stateNode=l}else E_(h,t.type,t.stateNode);else t.stateNode=b_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?E_(h,t.type,t.stateNode):b_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&If(t,t.memoizedProps,a.memoizedProps)}break;case 27:An(i,t),wn(t),l&512&&(Ht||a===null||$i(a,a.return)),a!==null&&l&4&&If(t,t.memoizedProps,a.memoizedProps);break;case 5:if(An(i,t),wn(t),l&512&&(Ht||a===null||$i(a,a.return)),t.flags&32){h=t.stateNode;try{En(h,"")}catch(we){ht(t,t.return,we)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,If(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Of=!0);break;case 6:if(An(i,t),wn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(we){ht(t,t.return,we)}}break;case 3:if(Qu=null,h=gi,gi=$u(i.containerInfo),An(i,t),gi=h,wn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{_o(i.containerInfo)}catch(we){ht(t,t.return,we)}Of&&(Of=!1,E0(t));break;case 4:l=gi,gi=$u(t.stateNode.containerInfo),An(i,t),wn(t),gi=l;break;case 12:An(i,t),wn(t);break;case 31:An(i,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ou(t,l)));break;case 13:An(i,t),wn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Mu=Ge()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ou(t,l)));break;case 22:h=t.memoizedState!==null;var O=a!==null&&a.memoizedState!==null,F=yr,Z=Ht;if(yr=F||h,Ht=Z||O,An(i,t),Ht=Z,yr=F,wn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||O||yr||Ht||ua(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){O=a=i;try{if(f=O.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=O.stateNode;var re=O.memoizedProps.style,Y=re!=null&&re.hasOwnProperty("display")?re.display:null;T.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(we){ht(O,O.return,we)}}}else if(i.tag===6){if(a===null){O=i;try{O.stateNode.nodeValue=h?"":O.memoizedProps}catch(we){ht(O,O.return,we)}}}else if(i.tag===18){if(a===null){O=i;try{var X=O.stateNode;h?h_(X,!0):h_(O.stateNode,!1)}catch(we){ht(O,O.return,we)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ou(t,a))));break;case 19:An(i,t),wn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ou(t,l)));break;case 30:break;case 21:break;default:An(i,t),wn(t)}}function wn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(f0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=Df(t);Nu(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(En(_,""),a.flags&=-33);var T=Df(t);Nu(t,T,_);break;case 3:case 4:var O=a.stateNode.containerInfo,F=Df(t);Nf(t,F,O);break;default:throw Error(s(161))}}catch(Z){ht(t,t.return,Z)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function E0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;E0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function vr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)g0(t,i.alternate,i),i=i.sibling}function ua(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:ns(4,i,i.return),ua(i);break;case 1:$i(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&h0(i,i.return,a),ua(i);break;case 27:ql(i.stateNode);case 26:case 5:$i(i,i.return),ua(i);break;case 22:i.memoizedState===null&&ua(i);break;case 30:ua(i);break;default:ua(i)}t=t.sibling}}function br(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:br(h,f,a),Ol(4,f);break;case 1:if(br(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){ht(l,l.return,F)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var O=h.shared.hiddenCallbacks;if(O!==null)for(h.shared.hiddenCallbacks=null,h=0;h<O.length;h++)Zg(O[h],T)}catch(F){ht(l,l.return,F)}}a&&_&64&&u0(f),kl(f,f.return);break;case 27:m0(f);case 26:case 5:br(h,f,a),a&&l===null&&_&4&&d0(f),kl(f,f.return);break;case 12:br(h,f,a);break;case 31:br(h,f,a),a&&_&4&&v0(h,f);break;case 13:br(h,f,a),a&&_&4&&b0(h,f);break;case 22:f.memoizedState===null&&br(h,f,a),kl(f,f.return);break;case 30:break;default:br(h,f,a)}i=i.sibling}}function kf(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&vl(a))}function Mf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&vl(t))}function yi(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)T0(t,i,a,l),i=i.sibling}function T0(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:yi(t,i,a,l),h&2048&&Ol(9,i);break;case 1:yi(t,i,a,l);break;case 3:yi(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&vl(t)));break;case 12:if(h&2048){yi(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(O){ht(i,i.return,O)}}else yi(t,i,a,l);break;case 31:yi(t,i,a,l);break;case 13:yi(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?yi(t,i,a,l):Ml(t,i):f._visibility&2?yi(t,i,a,l):(f._visibility|=2,ao(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&kf(_,i);break;case 24:yi(t,i,a,l),h&2048&&Mf(i.alternate,i);break;default:yi(t,i,a,l)}}function ao(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,T=a,O=l,F=_.flags;switch(_.tag){case 0:case 11:case 15:ao(f,_,T,O,h),Ol(8,_);break;case 23:break;case 22:var Z=_.stateNode;_.memoizedState!==null?Z._visibility&2?ao(f,_,T,O,h):Ml(f,_):(Z._visibility|=2,ao(f,_,T,O,h)),h&&F&2048&&kf(_.alternate,_);break;case 24:ao(f,_,T,O,h),h&&F&2048&&Mf(_.alternate,_);break;default:ao(f,_,T,O,h)}i=i.sibling}}function Ml(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Ml(a,l),h&2048&&kf(l.alternate,l);break;case 24:Ml(a,l),h&2048&&Mf(l.alternate,l);break;default:Ml(a,l)}i=i.sibling}}var Ll=8192;function oo(t,i,a){if(t.subtreeFlags&Ll)for(t=t.child;t!==null;)A0(t,i,a),t=t.sibling}function A0(t,i,a){switch(t.tag){case 26:oo(t,i,a),t.flags&Ll&&t.memoizedState!==null&&sA(a,gi,t.memoizedState,t.memoizedProps);break;case 5:oo(t,i,a);break;case 3:case 4:var l=gi;gi=$u(t.stateNode.containerInfo),oo(t,i,a),gi=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Ll,Ll=16777216,oo(t,i,a),Ll=l):oo(t,i,a));break;default:oo(t,i,a)}}function w0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Vl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Jt=l,R0(l,t)}w0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)x0(t),t=t.sibling}function x0(t){switch(t.tag){case 0:case 11:case 15:Vl(t),t.flags&2048&&ns(9,t,t.return);break;case 3:Vl(t);break;case 12:Vl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,ku(t)):Vl(t);break;default:Vl(t)}}function ku(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Jt=l,R0(l,t)}w0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:ns(8,i,i.return),ku(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,ku(i));break;default:ku(i)}t=t.sibling}}function R0(t,i){for(;Jt!==null;){var a=Jt;switch(a.tag){case 0:case 11:case 15:ns(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:vl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Jt=l;else e:for(a=t;Jt!==null;){l=Jt;var h=l.sibling,f=l.return;if(y0(l),l===a){Jt=null;break e}if(h!==null){h.return=f,Jt=h;break e}Jt=f}}}var b1={getCacheForType:function(t){var i=sn(zt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return sn(zt).controller.signal}},S1=typeof WeakMap=="function"?WeakMap:Map,rt=0,gt=null,$e=null,Qe=0,ut=0,Un=null,is=!1,lo=!1,Lf=!1,Sr=0,xt=0,rs=0,ha=0,Vf=0,jn=0,co=0,Pl=null,xn=null,Pf=!1,Mu=0,C0=0,Lu=1/0,Vu=null,ss=null,Qt=0,as=null,uo=null,Er=0,Uf=0,jf=null,I0=null,Ul=0,zf=null;function zn(){return(rt&2)!==0&&Qe!==0?Qe&-Qe:G.T!==null?$f():Pc()}function D0(){if(jn===0)if((Qe&536870912)===0||Ze){var t=Us;Us<<=1,(Us&3932160)===0&&(Us=262144),jn=t}else jn=536870912;return t=Vn.current,t!==null&&(t.flags|=32),jn}function Rn(t,i,a){(t===gt&&(ut===2||ut===9)||t.cancelPendingCommit!==null)&&(ho(t,0),os(t,Qe,jn,!1)),js(t,a),((rt&2)===0||t!==gt)&&(t===gt&&((rt&2)===0&&(ha|=a),xt===4&&os(t,Qe,jn,!1)),Yi(t))}function N0(t,i,a){if((rt&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||oi(t,i),h=l?A1(t,i):qf(t,i,!0),f=l;do{if(h===0){lo&&!l&&os(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!E1(a)){h=qf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=t;h=Pl;var O=T.current.memoizedState.isDehydrated;if(O&&(ho(T,_).flags|=256),_=qf(T,_,!1),_!==2){if(Lf&&!O){T.errorRecoveryDisabledLanes|=f,ha|=f,h=4;break e}f=xn,xn=h,f!==null&&(xn===null?xn=f:xn.push.apply(xn,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){ho(t,0),os(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:os(l,i,jn,!is);break e;case 2:xn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Mu+300-Ge(),10<h)){if(os(l,i,jn,!is),Ii(l,0,!0)!==0)break e;Er=i,l.timeoutHandle=l_(O0.bind(null,l,a,xn,Vu,Pf,i,jn,ha,co,is,f,"Throttled",-0,0),h);break e}O0(l,a,xn,Vu,Pf,i,jn,ha,co,is,f,null,-0,0)}}break}while(!0);Yi(t)}function O0(t,i,a,l,h,f,_,T,O,F,Z,re,Y,X){if(t.timeoutHandle=-1,re=i.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ui},A0(i,f,re);var we=(f&62914560)===f?Mu-Ge():(f&4194048)===f?C0-Ge():0;if(we=aA(re,we),we!==null){Er=f,t.cancelPendingCommit=we(z0.bind(null,t,i,f,a,l,h,_,T,O,Z,re,null,Y,X)),os(t,f,_,!F);return}}z0(t,i,f,a,l,h,_,T,O)}function E1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Mn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function os(t,i,a,l){i&=~Vf,i&=~ha,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-It(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&zs(t,a,i)}function Pu(){return(rt&6)===0?(jl(0),!1):!0}function Bf(){if($e!==null){if(ut===0)var t=$e.return;else t=$e,hr=na=null,nf(t),to=null,Sl=0,t=$e;for(;t!==null;)c0(t.alternate,t),t=t.return;$e=null}}function ho(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,q1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Er=0,Bf(),gt=t,$e=a=cr(t.current,null),Qe=i,ut=0,Un=null,is=!1,lo=oi(t,i),Lf=!1,co=jn=Vf=ha=rs=xt=0,xn=Pl=null,Pf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-It(l),f=1<<h;i|=t[h],l&=~f}return Sr=i,ru(),a}function k0(t,i){Be=null,G.H=Il,i===eo||i===du?(i=Kg(),ut=3):i===Fd?(i=Kg(),ut=4):ut=i===vf?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Un=i,$e===null&&(xt=1,xu(t,Wn(i,t.current)))}function M0(){var t=Vn.current;return t===null?!0:(Qe&4194048)===Qe?ti===null:(Qe&62914560)===Qe||(Qe&536870912)!==0?t===ti:!1}function L0(){var t=G.H;return G.H=Il,t===null?Il:t}function V0(){var t=G.A;return G.A=b1,t}function Uu(){xt=4,is||(Qe&4194048)!==Qe&&Vn.current!==null||(lo=!0),(rs&134217727)===0&&(ha&134217727)===0||gt===null||os(gt,Qe,jn,!1)}function qf(t,i,a){var l=rt;rt|=2;var h=L0(),f=V0();(gt!==t||Qe!==i)&&(Vu=null,ho(t,i)),i=!1;var _=xt;e:do try{if(ut!==0&&$e!==null){var T=$e,O=Un;switch(ut){case 8:Bf(),_=6;break e;case 3:case 2:case 9:case 6:Vn.current===null&&(i=!0);var F=ut;if(ut=0,Un=null,fo(t,T,O,F),a&&lo){_=0;break e}break;default:F=ut,ut=0,Un=null,fo(t,T,O,F)}}T1(),_=xt;break}catch(Z){k0(t,Z)}while(!0);return i&&t.shellSuspendCounter++,hr=na=null,rt=l,G.H=h,G.A=f,$e===null&&(gt=null,Qe=0,ru()),_}function T1(){for(;$e!==null;)P0($e)}function A1(t,i){var a=rt;rt|=2;var l=L0(),h=V0();gt!==t||Qe!==i?(Vu=null,Lu=Ge()+500,ho(t,i)):lo=oi(t,i);e:do try{if(ut!==0&&$e!==null){i=$e;var f=Un;t:switch(ut){case 1:ut=0,Un=null,fo(t,i,f,1);break;case 2:case 9:if(Yg(f)){ut=0,Un=null,U0(i);break}i=function(){ut!==2&&ut!==9||gt!==t||(ut=7),Yi(t)},f.then(i,i);break e;case 3:ut=7;break e;case 4:ut=5;break e;case 7:Yg(f)?(ut=0,Un=null,U0(i)):(ut=0,Un=null,fo(t,i,f,7));break;case 5:var _=null;switch($e.tag){case 26:_=$e.memoizedState;case 5:case 27:var T=$e;if(_?T_(_):T.stateNode.complete){ut=0,Un=null;var O=T.sibling;if(O!==null)$e=O;else{var F=T.return;F!==null?($e=F,ju(F)):$e=null}break t}}ut=0,Un=null,fo(t,i,f,5);break;case 6:ut=0,Un=null,fo(t,i,f,6);break;case 8:Bf(),xt=6;break e;default:throw Error(s(462))}}w1();break}catch(Z){k0(t,Z)}while(!0);return hr=na=null,G.H=l,G.A=h,rt=a,$e!==null?0:(gt=null,Qe=0,ru(),xt)}function w1(){for(;$e!==null&&!qe();)P0($e)}function P0(t){var i=o0(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,i===null?ju(t):$e=i}function U0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=t0(a,i,i.pendingProps,i.type,void 0,Qe);break;case 11:i=t0(a,i,i.pendingProps,i.type.render,i.ref,Qe);break;case 5:nf(i);default:c0(a,i),i=$e=Vg(i,Sr),i=o0(a,i,Sr)}t.memoizedProps=t.pendingProps,i===null?ju(t):$e=i}function fo(t,i,a,l){hr=na=null,nf(i),to=null,Sl=0;var h=i.return;try{if(f1(t,h,i,a,Qe)){xt=1,xu(t,Wn(a,t.current)),$e=null;return}}catch(f){if(h!==null)throw $e=h,f;xt=1,xu(t,Wn(a,t.current)),$e=null;return}i.flags&32768?(Ze||l===1?t=!0:lo||(Qe&536870912)!==0?t=!1:(is=t=!0,(l===2||l===9||l===3||l===6)&&(l=Vn.current,l!==null&&l.tag===13&&(l.flags|=16384))),j0(i,t)):ju(i)}function ju(t){var i=t;do{if((i.flags&32768)!==0){j0(i,is);return}t=i.return;var a=g1(i.alternate,i,Sr);if(a!==null){$e=a;return}if(i=i.sibling,i!==null){$e=i;return}$e=i=t}while(i!==null);xt===0&&(xt=5)}function j0(t,i){do{var a=y1(t.alternate,t);if(a!==null){a.flags&=32767,$e=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){$e=t;return}$e=t=a}while(t!==null);xt=6,$e=null}function z0(t,i,a,l,h,f,_,T,O){t.cancelPendingCommit=null;do zu();while(Qt!==0);if((rt&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Id,bd(t,a,f,_,T,O),t===gt&&($e=gt=null,Qe=0),uo=i,as=t,Er=a,Uf=f,jf=h,I0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,I1(xi,function(){return G0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=G.T,G.T=null,h=le.p,le.p=2,_=rt,rt|=4;try{_1(t,i,a)}finally{rt=_,le.p=h,G.T=l}}Qt=1,B0(),q0(),H0()}}function B0(){if(Qt===1){Qt=0;var t=as,i=uo,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=G.T,G.T=null;var l=le.p;le.p=2;var h=rt;rt|=4;try{S0(i,t);var f=em,_=Rg(t.containerInfo),T=f.focusedElem,O=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&xg(T.ownerDocument.documentElement,T)){if(O!==null&&Ad(T)){var F=O.start,Z=O.end;if(Z===void 0&&(Z=F),"selectionStart"in T)T.selectionStart=F,T.selectionEnd=Math.min(Z,T.value.length);else{var re=T.ownerDocument||document,Y=re&&re.defaultView||window;if(Y.getSelection){var X=Y.getSelection(),we=T.textContent.length,ke=Math.min(O.start,we),pt=O.end===void 0?ke:Math.min(O.end,we);!X.extend&&ke>pt&&(_=pt,pt=ke,ke=_);var j=wg(T,ke),V=wg(T,pt);if(j&&V&&(X.rangeCount!==1||X.anchorNode!==j.node||X.anchorOffset!==j.offset||X.focusNode!==V.node||X.focusOffset!==V.offset)){var H=re.createRange();H.setStart(j.node,j.offset),X.removeAllRanges(),ke>pt?(X.addRange(H),X.extend(V.node,V.offset)):(H.setEnd(V.node,V.offset),X.addRange(H))}}}}for(re=[],X=T;X=X.parentNode;)X.nodeType===1&&re.push({element:X,left:X.scrollLeft,top:X.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<re.length;T++){var ie=re[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Ju=!!Zf,em=Zf=null}finally{rt=h,le.p=l,G.T=a}}t.current=i,Qt=2}}function q0(){if(Qt===2){Qt=0;var t=as,i=uo,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=G.T,G.T=null;var l=le.p;le.p=2;var h=rt;rt|=4;try{g0(t,i.alternate,i)}finally{rt=h,le.p=l,G.T=a}}Qt=3}}function H0(){if(Qt===4||Qt===3){Qt=0,bt();var t=as,i=uo,a=Er,l=I0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Qt=5:(Qt=0,uo=as=null,F0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(ss=null),sr(a),i=i.stateNode,tn&&typeof tn.onCommitFiberRoot=="function")try{tn.onCommitFiberRoot(ai,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=G.T,h=le.p,le.p=2,G.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];f(T.value,{componentStack:T.stack})}}finally{G.T=i,le.p=h}}(Er&3)!==0&&zu(),Yi(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===zf?Ul++:(Ul=0,zf=t):Ul=0,jl(0)}}function F0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,vl(i)))}function zu(){return B0(),q0(),H0(),G0()}function G0(){if(Qt!==5)return!1;var t=as,i=Uf;Uf=0;var a=sr(Er),l=G.T,h=le.p;try{le.p=32>a?32:a,G.T=null,a=jf,jf=null;var f=as,_=Er;if(Qt=0,uo=as=null,Er=0,(rt&6)!==0)throw Error(s(331));var T=rt;if(rt|=4,x0(f.current),T0(f,f.current,_,a),rt=T,jl(0,!1),tn&&typeof tn.onPostCommitFiberRoot=="function")try{tn.onPostCommitFiberRoot(ai,f)}catch{}return!0}finally{le.p=h,G.T=l,F0(t,i)}}function $0(t,i,a){i=Wn(a,i),i=_f(t.stateNode,i,2),t=Zr(t,i,2),t!==null&&(js(t,2),Yi(t))}function ht(t,i,a){if(t.tag===3)$0(t,t,a);else for(;i!==null;){if(i.tag===3){$0(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ss===null||!ss.has(l))){t=Wn(a,t),a=Yy(2),l=Zr(i,a,2),l!==null&&(Qy(a,l,i,t),js(l,2),Yi(l));break}}i=i.return}}function Hf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new S1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Lf=!0,h.add(a),t=x1.bind(null,t,i,a),i.then(t,t))}function x1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,gt===t&&(Qe&a)===a&&(xt===4||xt===3&&(Qe&62914560)===Qe&&300>Ge()-Mu?(rt&2)===0&&ho(t,0):Vf|=a,co===Qe&&(co=0)),Yi(t)}function Y0(t,i){i===0&&(i=Vc()),t=Zs(t,i),t!==null&&(js(t,i),Yi(t))}function R1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),Y0(t,a)}function C1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),Y0(t,a)}function I1(t,i){return be(t,i)}var Bu=null,mo=null,Ff=!1,qu=!1,Gf=!1,ls=0;function Yi(t){t!==mo&&t.next===null&&(mo===null?Bu=mo=t:mo=mo.next=t),qu=!0,Ff||(Ff=!0,N1())}function jl(t,i){if(!Gf&&qu){Gf=!0;do for(var a=!1,l=Bu;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-It(42|t)+1)-1,f&=h&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,W0(l,f))}else f=Qe,f=Ii(l,l===gt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||oi(l,f)||(a=!0,W0(l,f));l=l.next}while(a);Gf=!1}}function D1(){Q0()}function Q0(){qu=Ff=!1;var t=0;ls!==0&&B1()&&(t=ls);for(var i=Ge(),a=null,l=Bu;l!==null;){var h=l.next,f=K0(l,i);f===0?(l.next=null,a===null?Bu=h:a.next=h,h===null&&(mo=a)):(a=l,(t!==0||(f&3)!==0)&&(qu=!0)),l=h}Qt!==0&&Qt!==5||jl(t),ls!==0&&(ls=0)}function K0(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-It(f),T=1<<_,O=h[_];O===-1?((T&a)===0||(T&l)!==0)&&(h[_]=vd(T,i)):O<=i&&(t.expiredLanes|=T),f&=~T}if(i=gt,a=Qe,a=Ii(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(ut===2||ut===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Ae(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||oi(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&Ae(l),sr(a)){case 2:case 8:a=Vr;break;case 32:a=xi;break;case 268435456:a=Pr;break;default:a=xi}return l=X0.bind(null,t),a=be(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&Ae(l),t.callbackPriority=2,t.callbackNode=null,2}function X0(t,i){if(Qt!==0&&Qt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(zu()&&t.callbackNode!==a)return null;var l=Qe;return l=Ii(t,t===gt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(N0(t,l,i),K0(t,Ge()),t.callbackNode!=null&&t.callbackNode===a?X0.bind(null,t):null)}function W0(t,i){if(zu())return null;N0(t,i,!0)}function N1(){H1(function(){(rt&6)!==0?be(Fn,D1):Q0()})}function $f(){if(ls===0){var t=Ja;t===0&&(t=Ri,Ri<<=1,(Ri&261888)===0&&(Ri=256)),ls=t}return ls}function J0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Pa(""+t)}function Z0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function O1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=J0((h[Xt]||null).action),_=l.submitter;_&&(i=(i=_[Xt]||null)?J0(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var T=new zi("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ls!==0){var O=_?Z0(h,_):new FormData(h);df(a,{pending:!0,data:O,method:h.method,action:f},null,O)}}else typeof f=="function"&&(T.preventDefault(),O=_?Z0(h,_):new FormData(h),df(a,{pending:!0,data:O,method:h.method,action:f},f,O))},currentTarget:h}]})}}for(var Yf=0;Yf<Cd.length;Yf++){var Qf=Cd[Yf],k1=Qf.toLowerCase(),M1=Qf[0].toUpperCase()+Qf.slice(1);pi(k1,"on"+M1)}pi(Dg,"onAnimationEnd"),pi(Ng,"onAnimationIteration"),pi(Og,"onAnimationStart"),pi("dblclick","onDoubleClick"),pi("focusin","onFocus"),pi("focusout","onBlur"),pi(XT,"onTransitionRun"),pi(WT,"onTransitionStart"),pi(JT,"onTransitionCancel"),pi(kg,"onTransitionEnd"),Vi("onMouseEnter",["mouseout","mouseover"]),Vi("onMouseLeave",["mouseout","mouseover"]),Vi("onPointerEnter",["pointerout","pointerover"]),Vi("onPointerLeave",["pointerout","pointerover"]),Li("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Li("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Li("onBeforeInput",["compositionend","keypress","textInput","paste"]),Li("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Li("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zl));function e_(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],O=T.instance,F=T.currentTarget;if(T=T.listener,O!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=F;try{f(h)}catch(Z){iu(Z)}h.currentTarget=null,f=O}else for(_=0;_<l.length;_++){if(T=l[_],O=T.instance,F=T.currentTarget,T=T.listener,O!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=F;try{f(h)}catch(Z){iu(Z)}h.currentTarget=null,f=O}}}}function Ye(t,i){var a=i[Oa];a===void 0&&(a=i[Oa]=new Set);var l=t+"__bubble";a.has(l)||(t_(i,t,2,!1),a.add(l))}function Kf(t,i,a){var l=0;i&&(l|=4),t_(a,t,l,i)}var Hu="_reactListening"+Math.random().toString(36).slice(2);function Xf(t){if(!t[Hu]){t[Hu]=!0,Jo.forEach(function(a){a!=="selectionchange"&&(L1.has(a)||Kf(a,!1,t),Kf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Hu]||(i[Hu]=!0,Kf("selectionchange",!1,i))}}function t_(t,i,a,l){switch(D_(i)){case 2:var h=cA;break;case 8:h=uA;break;default:h=hm}a=h.bind(null,i,a,t),h=void 0,!Gs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Wf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var O=_.tag;if((O===3||O===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=ki(T),_===null)return;if(O=_.tag,O===5||O===6||O===26||O===27){l=f=_;continue e}T=T.parentNode}}l=l.return}Hr(function(){var F=f,Z=Yn(a),re=[];e:{var Y=Mg.get(t);if(Y!==void 0){var X=zi,we=t;switch(t){case"keypress":if(Ys(a)===0)break e;case"keydown":case"keyup":X=eu;break;case"focusin":we="focus",X=Ks;break;case"focusout":we="blur",X=Ks;break;case"beforeblur":case"afterblur":X=Ks;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":X=hl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":X=Gc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":X=p;break;case Dg:case Ng:case Og:X=Yc;break;case kg:X=A;break;case"scroll":case"scrollend":X=ul;break;case"wheel":X=K;break;case"copy":case"cut":case"paste":X=Qc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":X=lr;break;case"toggle":case"beforetoggle":X=ze}var ke=(i&4)!==0,pt=!ke&&(t==="scroll"||t==="scrollend"),j=ke?Y!==null?Y+"Capture":null:Y;ke=[];for(var V=F,H;V!==null;){var ie=V;if(H=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||H===null||j===null||(ie=hi(V,j),ie!=null&&ke.push(Bl(V,ie,H))),pt)break;V=V.return}0<ke.length&&(Y=new X(Y,we,null,a,Z),re.push({event:Y,listeners:ke}))}}if((i&7)===0){e:{if(Y=t==="mouseover"||t==="pointerover",X=t==="mouseout"||t==="pointerout",Y&&a!==ol&&(we=a.relatedTarget||a.fromElement)&&(ki(we)||we[Ni]))break e;if((X||Y)&&(Y=Z.window===Z?Z:(Y=Z.ownerDocument)?Y.defaultView||Y.parentWindow:window,X?(we=a.relatedTarget||a.toElement,X=F,we=we?ki(we):null,we!==null&&(pt=c(we),ke=we.tag,we!==pt||ke!==5&&ke!==27&&ke!==6)&&(we=null)):(X=null,we=F),X!==we)){if(ke=hl,ie="onMouseLeave",j="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ke=lr,ie="onPointerLeave",j="onPointerEnter",V="pointer"),pt=X==null?Y:On(X),H=we==null?Y:On(we),Y=new ke(ie,V+"leave",X,a,Z),Y.target=pt,Y.relatedTarget=H,ie=null,ki(Z)===F&&(ke=new ke(j,V+"enter",we,a,Z),ke.target=H,ke.relatedTarget=pt,ie=ke),pt=ie,X&&we)t:{for(ke=V1,j=X,V=we,H=0,ie=j;ie;ie=ke(ie))H++;ie=0;for(var Oe=V;Oe;Oe=ke(Oe))ie++;for(;0<H-ie;)j=ke(j),H--;for(;0<ie-H;)V=ke(V),ie--;for(;H--;){if(j===V||V!==null&&j===V.alternate){ke=j;break t}j=ke(j),V=ke(V)}ke=null}else ke=null;X!==null&&n_(re,Y,X,ke,!1),we!==null&&pt!==null&&n_(re,pt,we,ke,!0)}}e:{if(Y=F?On(F):window,X=Y.nodeName&&Y.nodeName.toLowerCase(),X==="select"||X==="input"&&Y.type==="file")var tt=vg;else if(yg(Y))if(bg)tt=YT;else{tt=GT;var Ce=FT}else X=Y.nodeName,!X||X.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?F&&Va(F.elementType)&&(tt=vg):tt=$T;if(tt&&(tt=tt(t,F))){_g(re,tt,a,Z);break e}Ce&&Ce(t,Y,F),t==="focusout"&&F&&Y.type==="number"&&F.memoizedProps.value!=null&&rl(Y,"number",Y.value)}switch(Ce=F?On(F):window,t){case"focusin":(yg(Ce)||Ce.contentEditable==="true")&&(Fa=Ce,wd=F,gl=null);break;case"focusout":gl=wd=Fa=null;break;case"mousedown":xd=!0;break;case"contextmenu":case"mouseup":case"dragend":xd=!1,Cg(re,a,Z);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":Cg(re,a,Z)}var He;if(it)e:{switch(t){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Ha?Xs(t,a)&&(Ke="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ke="onCompositionStart");Ke&&(Hi&&a.locale!=="ko"&&(Ha||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Ha&&(He=cl()):(ji=Z,ll="value"in ji?ji.value:ji.textContent,Ha=!0)),Ce=Fu(F,Ke),0<Ce.length&&(Ke=new qi(Ke,t,null,a,Z),re.push({event:Ke,listeners:Ce}),He?Ke.data=He:(He=qa(a),He!==null&&(Ke.data=He)))),(He=Kn?zT(t,a):BT(t,a))&&(Ke=Fu(F,"onBeforeInput"),0<Ke.length&&(Ce=new qi("onBeforeInput","beforeinput",null,a,Z),re.push({event:Ce,listeners:Ke}),Ce.data=He)),O1(re,t,F,a,Z)}e_(re,i)})}function Bl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Fu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=hi(t,a),h!=null&&l.unshift(Bl(t,h,f)),h=hi(t,i),h!=null&&l.push(Bl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function V1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function n_(t,i,a,l,h){for(var f=i._reactName,_=[];a!==null&&a!==l;){var T=a,O=T.alternate,F=T.stateNode;if(T=T.tag,O!==null&&O===l)break;T!==5&&T!==26&&T!==27||F===null||(O=F,h?(F=hi(a,f),F!=null&&_.unshift(Bl(a,F,O))):h||(F=hi(a,f),F!=null&&_.push(Bl(a,F,O)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var P1=/\r\n?/g,U1=/\u0000|\uFFFD/g;function i_(t){return(typeof t=="string"?t:""+t).replace(P1,`
`).replace(U1,"")}function r_(t,i){return i=i_(i),i_(t)===i}function mt(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||En(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&En(t,""+l);break;case"className":kn(t,"class",l);break;case"tabIndex":kn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":kn(t,a,l);break;case"style":al(t,l,f);break;case"data":if(i!=="object"){kn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&mt(t,i,"name",h.name,h,null),mt(t,i,"formEncType",h.formEncType,h,null),mt(t,i,"formMethod",h.formMethod,h,null),mt(t,i,"formTarget",h.formTarget,h,null)):(mt(t,i,"encType",h.encType,h,null),mt(t,i,"method",h.method,h,null),mt(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Pa(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ui);break;case"onScroll":l!=null&&Ye("scroll",t);break;case"onScrollEnd":l!=null&&Ye("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Pa(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ye("beforetoggle",t),Ye("toggle",t),Ma(t,"popover",l);break;case"xlinkActuate":jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ma(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Fc.get(a)||a,Ma(t,a,l))}}function Jf(t,i,a,l,h,f){switch(a){case"style":al(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?En(t,l):(typeof l=="number"||typeof l=="bigint")&&En(t,""+l);break;case"onScroll":l!=null&&Ye("scroll",t);break;case"onScrollEnd":l!=null&&Ye("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ui);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zo.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Xt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ma(t,a,l)}}}function on(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",t),Ye("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:mt(t,i,f,_,a,null)}}h&&mt(t,i,"srcSet",a.srcSet,a,null),l&&mt(t,i,"src",a.src,a,null);return;case"input":Ye("invalid",t);var T=f=_=h=null,O=null,F=null;for(l in a)if(a.hasOwnProperty(l)){var Z=a[l];if(Z!=null)switch(l){case"name":h=Z;break;case"type":_=Z;break;case"checked":O=Z;break;case"defaultChecked":F=Z;break;case"value":f=Z;break;case"defaultValue":T=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,i));break;default:mt(t,i,l,Z,a,null)}}Bc(t,f,T,O,F,_,h,!1);return;case"select":Ye("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:mt(t,i,h,T,a,null)}i=f,a=_,t.multiple=!!l,i!=null?jr(t,!!l,i,!1):a!=null&&jr(t,!!l,a,!0);return;case"textarea":Ye("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:mt(t,i,_,T,a,null)}zr(t,l,h,f);return;case"option":for(O in a)if(a.hasOwnProperty(O)&&(l=a[O],l!=null))switch(O){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:mt(t,i,O,l,a,null)}return;case"dialog":Ye("beforetoggle",t),Ye("toggle",t),Ye("cancel",t),Ye("close",t);break;case"iframe":case"object":Ye("load",t);break;case"video":case"audio":for(l=0;l<zl.length;l++)Ye(zl[l],t);break;case"image":Ye("error",t),Ye("load",t);break;case"details":Ye("toggle",t);break;case"embed":case"source":case"link":Ye("error",t),Ye("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(l=a[F],l!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:mt(t,i,F,l,a,null)}return;default:if(Va(i)){for(Z in a)a.hasOwnProperty(Z)&&(l=a[Z],l!==void 0&&Jf(t,i,Z,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&mt(t,i,T,l,a,null))}function j1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,T=null,O=null,F=null,Z=null;for(X in a){var re=a[X];if(a.hasOwnProperty(X)&&re!=null)switch(X){case"checked":break;case"value":break;case"defaultValue":O=re;default:l.hasOwnProperty(X)||mt(t,i,X,null,l,re)}}for(var Y in l){var X=l[Y];if(re=a[Y],l.hasOwnProperty(Y)&&(X!=null||re!=null))switch(Y){case"type":f=X;break;case"name":h=X;break;case"checked":F=X;break;case"defaultChecked":Z=X;break;case"value":_=X;break;case"defaultValue":T=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(s(137,i));break;default:X!==re&&mt(t,i,Y,X,l,re)}}La(t,_,T,O,F,Z,f,h);return;case"select":X=_=T=Y=null;for(f in a)if(O=a[f],a.hasOwnProperty(f)&&O!=null)switch(f){case"value":break;case"multiple":X=O;default:l.hasOwnProperty(f)||mt(t,i,f,null,l,O)}for(h in l)if(f=l[h],O=a[h],l.hasOwnProperty(h)&&(f!=null||O!=null))switch(h){case"value":Y=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==O&&mt(t,i,h,f,l,O)}i=T,a=_,l=X,Y!=null?jr(t,!!a,Y,!1):!!l!=!!a&&(i!=null?jr(t,!!a,i,!0):jr(t,!!a,a?[]:"",!1));return;case"textarea":X=Y=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:mt(t,i,T,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":Y=h;break;case"defaultValue":X=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&mt(t,i,_,h,l,f)}qc(t,Y,X);return;case"option":for(var we in a)if(Y=a[we],a.hasOwnProperty(we)&&Y!=null&&!l.hasOwnProperty(we))switch(we){case"selected":t.selected=!1;break;default:mt(t,i,we,null,l,Y)}for(O in l)if(Y=l[O],X=a[O],l.hasOwnProperty(O)&&Y!==X&&(Y!=null||X!=null))switch(O){case"selected":t.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:mt(t,i,O,Y,l,X)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in a)Y=a[ke],a.hasOwnProperty(ke)&&Y!=null&&!l.hasOwnProperty(ke)&&mt(t,i,ke,null,l,Y);for(F in l)if(Y=l[F],X=a[F],l.hasOwnProperty(F)&&Y!==X&&(Y!=null||X!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:mt(t,i,F,Y,l,X)}return;default:if(Va(i)){for(var pt in a)Y=a[pt],a.hasOwnProperty(pt)&&Y!==void 0&&!l.hasOwnProperty(pt)&&Jf(t,i,pt,void 0,l,Y);for(Z in l)Y=l[Z],X=a[Z],!l.hasOwnProperty(Z)||Y===X||Y===void 0&&X===void 0||Jf(t,i,Z,Y,l,X);return}}for(var j in a)Y=a[j],a.hasOwnProperty(j)&&Y!=null&&!l.hasOwnProperty(j)&&mt(t,i,j,null,l,Y);for(re in l)Y=l[re],X=a[re],!l.hasOwnProperty(re)||Y===X||Y==null&&X==null||mt(t,i,re,Y,l,X)}function s_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function z1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,_=h.initiatorType,T=h.duration;if(f&&T&&s_(_)){for(_=0,T=h.responseEnd,l+=1;l<a.length;l++){var O=a[l],F=O.startTime;if(F>T)break;var Z=O.transferSize,re=O.initiatorType;Z&&s_(re)&&(O=O.responseEnd,_+=Z*(O<T?1:(T-F)/(O-F)))}if(--l,i+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Zf=null,em=null;function Gu(t){return t.nodeType===9?t:t.ownerDocument}function a_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function tm(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var nm=null;function B1(){var t=window.event;return t&&t.type==="popstate"?t===nm?!1:(nm=t,!0):(nm=null,!1)}var l_=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,H1=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(t){return c_.resolve(null).then(t).catch(F1)}:l_;function F1(t){setTimeout(function(){throw t})}function cs(t){return t==="head"}function u_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),_o(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")ql(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,ql(a);for(var f=a.firstChild;f;){var _=f.nextSibling,T=f.nodeName;f[Oi]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&ql(t.ownerDocument.body);a=h}while(a);_o(i)}function h_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function im(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":im(a),ka(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function G1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Oi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=ni(t.nextSibling),t===null)break}return null}function $1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=ni(t.nextSibling),t===null))return null;return t}function d_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ni(t.nextSibling),t===null))return null;return t}function rm(t){return t.data==="$?"||t.data==="$~"}function sm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Y1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function ni(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var am=null;function f_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return ni(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function m_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function p_(t,i,a){switch(i=Gu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function ql(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ka(t)}var ii=new Map,g_=new Set;function $u(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Tr=le.d;le.d={f:Q1,r:K1,D:X1,C:W1,L:J1,m:Z1,X:tA,S:eA,M:nA};function Q1(){var t=Tr.f(),i=Pu();return t||i}function K1(t){var i=$n(t);i!==null&&i.tag===5&&i.type==="form"?ky(i):Tr.r(t)}var po=typeof document>"u"?null:document;function y_(t,i,a){var l=po;if(l&&typeof i=="string"&&i){var h=Sn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),g_.has(h)||(g_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),on(i,"link",t),Ut(i),l.head.appendChild(i)))}}function X1(t){Tr.D(t),y_("dns-prefetch",t,null)}function W1(t,i){Tr.C(t,i),y_("preconnect",t,i)}function J1(t,i,a){Tr.L(t,i,a);var l=po;if(l&&t&&i){var h='link[rel="preload"][as="'+Sn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+Sn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+Sn(a.imageSizes)+'"]')):h+='[href="'+Sn(t)+'"]';var f=h;switch(i){case"style":f=go(t);break;case"script":f=yo(t)}ii.has(f)||(t=E({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),ii.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Hl(f))||i==="script"&&l.querySelector(Fl(f))||(i=l.createElement("link"),on(i,"link",t),Ut(i),l.head.appendChild(i)))}}function Z1(t,i){Tr.m(t,i);var a=po;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+Sn(l)+'"][href="'+Sn(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=yo(t)}if(!ii.has(f)&&(t=E({rel:"modulepreload",href:t},i),ii.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Fl(f)))return}l=a.createElement("link"),on(l,"link",t),Ut(l),a.head.appendChild(l)}}}function eA(t,i,a){Tr.S(t,i,a);var l=po;if(l&&t){var h=Mi(l).hoistableStyles,f=go(t);i=i||"default";var _=h.get(f);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Hl(f)))T.loading=5;else{t=E({rel:"stylesheet",href:t,"data-precedence":i},a),(a=ii.get(f))&&om(t,a);var O=_=l.createElement("link");Ut(O),on(O,"link",t),O._p=new Promise(function(F,Z){O.onload=F,O.onerror=Z}),O.addEventListener("load",function(){T.loading|=1}),O.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Yu(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(f,_)}}}function tA(t,i){Tr.X(t,i);var a=po;if(a&&t){var l=Mi(a).hoistableScripts,h=yo(t),f=l.get(h);f||(f=a.querySelector(Fl(h)),f||(t=E({src:t,async:!0},i),(i=ii.get(h))&&lm(t,i),f=a.createElement("script"),Ut(f),on(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function nA(t,i){Tr.M(t,i);var a=po;if(a&&t){var l=Mi(a).hoistableScripts,h=yo(t),f=l.get(h);f||(f=a.querySelector(Fl(h)),f||(t=E({src:t,async:!0,type:"module"},i),(i=ii.get(h))&&lm(t,i),f=a.createElement("script"),Ut(f),on(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function __(t,i,a,l){var h=(h=Le.current)?$u(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=go(a.href),a=Mi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=go(a.href);var f=Mi(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(Hl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),ii.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ii.set(t,a),f||iA(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=yo(a),a=Mi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function go(t){return'href="'+Sn(t)+'"'}function Hl(t){return'link[rel="stylesheet"]['+t+"]"}function v_(t){return E({},t,{"data-precedence":t.precedence,precedence:null})}function iA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),on(i,"link",a),Ut(i),t.head.appendChild(i))}function yo(t){return'[src="'+Sn(t)+'"]'}function Fl(t){return"script[async]"+t}function b_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+Sn(a.href)+'"]');if(l)return i.instance=l,Ut(l),l;var h=E({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ut(l),on(l,"style",h),Yu(l,a.precedence,t),i.instance=l;case"stylesheet":h=go(a.href);var f=t.querySelector(Hl(h));if(f)return i.state.loading|=4,i.instance=f,Ut(f),f;l=v_(a),(h=ii.get(h))&&om(l,h),f=(t.ownerDocument||t).createElement("link"),Ut(f);var _=f;return _._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),on(f,"link",l),i.state.loading|=4,Yu(f,a.precedence,t),i.instance=f;case"script":return f=yo(a.src),(h=t.querySelector(Fl(f)))?(i.instance=h,Ut(h),h):(l=a,(h=ii.get(f))&&(l=E({},a),lm(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ut(h),on(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Yu(l,a.precedence,t));return i.instance}function Yu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function om(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function lm(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Qu=null;function S_(t,i,a){if(Qu===null){var l=new Map,h=Qu=new Map;h.set(a,l)}else h=Qu,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Oi]||f[Pt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var T=l.get(_);T?T.push(f):l.set(_,[f])}}return l}function E_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function rA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function T_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function sA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=go(l.href),f=i.querySelector(Hl(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Ku.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,Ut(f);return}f=i.ownerDocument||i,l=v_(l),(h=ii.get(h))&&om(l,h),f=f.createElement("link"),Ut(f);var _=f;_._p=new Promise(function(T,O){_.onload=T,_.onerror=O}),on(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Ku.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var cm=0;function aA(t,i){return t.stylesheets&&t.count===0&&Wu(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&cm===0&&(cm=62500*z1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Wu(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>cm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Ku(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xu=null;function Wu(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xu=new Map,i.forEach(oA,t),Xu=null,Ku.call(t))}function oA(t,i){if(!(i.state.loading&4)){var a=Xu.get(t);if(a)var l=a.get(null);else{a=new Map,Xu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Ku.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Gl={$$typeof:$,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function lA(t,i,a,l,h,f,_,T,O){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Di(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Di(0),this.hiddenUpdates=Di(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function A_(t,i,a,l,h,f,_,T,O,F,Z,re){return t=new lA(t,i,a,_,O,F,Z,re,T),i=1,f===!0&&(i|=24),f=Ln(3,null,null,i),t.current=f,f.stateNode=t,i=Bd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},Gd(f),t}function w_(t){return t?(t=Ya,t):Ya}function x_(t,i,a,l,h,f){h=w_(h),l.context===null?l.context=h:l.pendingContext=h,l=Jr(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Zr(t,l,i),a!==null&&(Rn(a,t,i),Tl(a,t,i))}function R_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function um(t,i){R_(t,i),(t=t.alternate)&&R_(t,i)}function C_(t){if(t.tag===13||t.tag===31){var i=Zs(t,67108864);i!==null&&Rn(i,t,67108864),um(t,67108864)}}function I_(t){if(t.tag===13||t.tag===31){var i=zn();i=Bs(i);var a=Zs(t,i);a!==null&&Rn(a,t,i),um(t,i)}}var Ju=!0;function cA(t,i,a,l){var h=G.T;G.T=null;var f=le.p;try{le.p=2,hm(t,i,a,l)}finally{le.p=f,G.T=h}}function uA(t,i,a,l){var h=G.T;G.T=null;var f=le.p;try{le.p=8,hm(t,i,a,l)}finally{le.p=f,G.T=h}}function hm(t,i,a,l){if(Ju){var h=dm(l);if(h===null)Wf(t,i,l,Zu,a),N_(t,l);else if(dA(h,t,i,a,l))l.stopPropagation();else if(N_(t,l),i&4&&-1<hA.indexOf(t)){for(;h!==null;){var f=$n(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Ci(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var O=1<<31-It(_);T.entanglements[1]|=O,_&=~O}Yi(f),(rt&6)===0&&(Lu=Ge()+500,jl(0))}}break;case 31:case 13:T=Zs(f,2),T!==null&&Rn(T,f,2),Pu(),um(f,2)}if(f=dm(l),f===null&&Wf(t,i,l,Zu,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Wf(t,i,l,null,a)}}function dm(t){return t=Yn(t),fm(t)}var Zu=null;function fm(t){if(Zu=null,t=ki(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=y(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Zu=t,null}function D_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(en()){case Fn:return 2;case Vr:return 8;case xi:case Ko:return 32;case Pr:return 268435456;default:return 32}default:return 32}}var mm=!1,us=null,hs=null,ds=null,$l=new Map,Yl=new Map,fs=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N_(t,i){switch(t){case"focusin":case"focusout":us=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":ds=null;break;case"pointerover":case"pointerout":$l.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yl.delete(i.pointerId)}}function Ql(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=$n(i),i!==null&&C_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function dA(t,i,a,l,h){switch(i){case"focusin":return us=Ql(us,t,i,a,l,h),!0;case"dragenter":return hs=Ql(hs,t,i,a,l,h),!0;case"mouseover":return ds=Ql(ds,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return $l.set(f,Ql($l.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,Yl.set(f,Ql(Yl.get(f)||null,t,i,a,l,h)),!0}return!1}function O_(t){var i=ki(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,li(t.priority,function(){I_(a)});return}}else if(i===31){if(i=y(a),i!==null){t.blockedOn=i,li(t.priority,function(){I_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=dm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ol=l,a.target.dispatchEvent(l),ol=null}else return i=$n(a),i!==null&&C_(i),t.blockedOn=a,!1;i.shift()}return!0}function k_(t,i,a){eh(t)&&a.delete(i)}function fA(){mm=!1,us!==null&&eh(us)&&(us=null),hs!==null&&eh(hs)&&(hs=null),ds!==null&&eh(ds)&&(ds=null),$l.forEach(k_),Yl.forEach(k_)}function th(t,i){t.blockedOn===i&&(t.blockedOn=null,mm||(mm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,fA)))}var nh=null;function M_(t){nh!==t&&(nh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){nh===t&&(nh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(fm(l||a)===null)continue;break}var f=$n(a);f!==null&&(t.splice(i,3),i-=3,df(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function _o(t){function i(O){return th(O,t)}us!==null&&th(us,t),hs!==null&&th(hs,t),ds!==null&&th(ds,t),$l.forEach(i),Yl.forEach(i);for(var a=0;a<fs.length;a++){var l=fs[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<fs.length&&(a=fs[0],a.blockedOn===null);)O_(a),a.blockedOn===null&&fs.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[Xt]||null;if(typeof f=="function")_||M_(a);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Xt]||null)T=_.formAction;else if(fm(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),M_(a)}}}function L_(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function pm(t){this._internalRoot=t}ih.prototype.render=pm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=zn();x_(a,l,t,i,null,null)},ih.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;x_(t.current,2,null,t,null,null),Pu(),i[Ni]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var i=Pc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<fs.length&&i!==0&&i<fs[a].priority;a++);fs.splice(a,0,t),a===0&&O_(t)}};var V_=e.version;if(V_!=="19.2.0")throw Error(s(527,V_,"19.2.0"));le.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var mA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rh.isDisabled&&rh.supportsFiber)try{ai=rh.inject(mA),tn=rh}catch{}}return Xl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=Hy,f=Fy,_=Gy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=A_(t,1,!1,null,null,a,l,null,h,f,_,L_),t[Ni]=i.current,Xf(t),new pm(i)},Xl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=Hy,_=Fy,T=Gy,O=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(O=a.formState)),i=A_(t,1,!0,i,a??null,l,h,O,f,_,T,L_),i.context=w_(null),a=i.current,l=zn(),l=Bs(l),h=Jr(l),h.callback=null,Zr(a,h,l),a=l,i.current.lanes=a,js(i,a),Yi(i),t[Ni]=i.current,Xf(t),new ih(i)},Xl.version="19.2.0",Xl}var $_;function wA(){if($_)return _m.exports;$_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),_m.exports=AA(),_m.exports}var xA=wA();const RA=()=>{};var Y_={};const Qb=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},CA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],y=r[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Kb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,y=d?r[o+1]:0,g=o+2<r.length,m=g?r[o+2]:0,S=c>>2,E=(c&3)<<4|y>>4;let x=(y&15)<<2|m>>6,L=m&63;g||(L=64,d||(x=64)),s.push(n[S],n[E],n[x],n[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Qb(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):CA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],y=o<r.length?n[r.charAt(o)]:0;++o;const m=o<r.length?n[r.charAt(o)]:64;++o;const E=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||y==null||m==null||E==null)throw new IA;const x=c<<2|y>>4;if(s.push(x),m!==64){const L=y<<4&240|m>>2;if(s.push(L),E!==64){const P=m<<6&192|E;s.push(P)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class IA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DA=function(r){const e=Qb(r);return Kb.encodeByteArray(e,!0)},Rh=function(r){return DA(r).replace(/\./g,"")},Xb=function(r){try{return Kb.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OA=()=>NA().__FIREBASE_DEFAULTS__,kA=()=>{if(typeof process>"u"||typeof Y_>"u")return;const r=Y_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},MA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Xb(r[1]);return e&&JSON.parse(e)},$h=()=>{try{return RA()||OA()||kA()||MA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},Wb=r=>$h()?.emulatorHosts?.[r],LA=r=>{const e=Wb(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Jb=()=>$h()?.config,Zb=r=>$h()?.[`_${r}`];class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function zo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function eS(r){return(await fetch(r,{credentials:"include"})).ok}function PA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Rh(JSON.stringify(n)),Rh(JSON.stringify(d)),""].join(".")}const sc={};function UA(){const r={prod:[],emulator:[]};for(const e of Object.keys(sc))sc[e]?r.emulator.push(e):r.prod.push(e);return r}function jA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Q_=!1;function tS(r,e){if(typeof window>"u"||typeof document>"u"||!zo(window.location.host)||sc[r]===e||sc[r]||Q_)return;sc[r]=e;function n(x){return`__firebase__banner__${x}`}const s="__firebase__banner",c=UA().prod.length>0;function d(){const x=document.getElementById(s);x&&x.remove()}function y(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,L){x.setAttribute("width","24"),x.setAttribute("id",L),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function m(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Q_=!0,d()},x}function S(x,L){x.setAttribute("id",L),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function E(){const x=jA(s),L=n("text"),P=document.getElementById(L)||document.createElement("span"),z=n("learnmore"),q=document.getElementById(z)||document.createElement("a"),Q=n("preprendIcon"),ne=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const $=x.element;y($),S(q,z);const me=m();g(ne,Q),$.append(ne,P,q,me),document.body.appendChild($)}c?(P.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}function yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yn())}function BA(){const r=$h()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){const r=yn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function $A(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YA(){try{return typeof indexedDB=="object"}catch{return!1}}function QA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const KA="FirebaseError";class Lr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=KA,Object.setPrototypeOf(this,Lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ec.prototype.create)}}class Ec{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?XA(c,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new Lr(o,y,s)}}function XA(r,e){return r.replace(WA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const WA=/\{\$([^}]+)}/g;function JA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Dr(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(K_(c)&&K_(d)){if(!Dr(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function K_(r){return r!==null&&typeof r=="object"}function Tc(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ZA(r,e){const n=new ew(r,e);return n.subscribe.bind(n)}class ew{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");tw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Em),o.error===void 0&&(o.error=Em),o.complete===void 0&&(o.complete=Em);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Em(){}function Lt(r){return r&&r._delegate?r._delegate:r}class Sa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const fa="[DEFAULT]";class nw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new VA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rw(e))try{this.getOrInitializeService({instanceIdentifier:fa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=fa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=fa){return this.instances.has(e)}getOptions(e=fa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(c);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=fa){return this.component?this.component.multipleInstances?e:fa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(r){return r===fa?void 0:r}function rw(r){return r.instantiationMode==="EAGER"}class sw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Xe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Xe||(Xe={}));const aw={debug:Xe.DEBUG,verbose:Xe.VERBOSE,info:Xe.INFO,warn:Xe.WARN,error:Xe.ERROR,silent:Xe.SILENT},ow=Xe.INFO,lw={[Xe.DEBUG]:"log",[Xe.VERBOSE]:"log",[Xe.INFO]:"info",[Xe.WARN]:"warn",[Xe.ERROR]:"error"},cw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=lw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class mp{constructor(e){this.name=e,this._logLevel=ow,this._logHandler=cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Xe.DEBUG,...e),this._logHandler(this,Xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Xe.VERBOSE,...e),this._logHandler(this,Xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Xe.INFO,...e),this._logHandler(this,Xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Xe.WARN,...e),this._logHandler(this,Xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Xe.ERROR,...e),this._logHandler(this,Xe.ERROR,...e)}}const uw=(r,e)=>e.some(n=>r instanceof n);let X_,W_;function hw(){return X_||(X_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return W_||(W_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nS=new WeakMap,Bm=new WeakMap,iS=new WeakMap,Tm=new WeakMap,pp=new WeakMap;function fw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(Ts(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&nS.set(n,r)}).catch(()=>{}),pp.set(e,r),e}function mw(r){if(Bm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});Bm.set(r,e)}let qm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return Bm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||iS.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pw(r){qm=r(qm)}function gw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Am(this),e,...n);return iS.set(s,e.sort?e.sort():[e]),Ts(s)}:dw().includes(r)?function(...e){return r.apply(Am(this),e),Ts(nS.get(this))}:function(...e){return Ts(r.apply(Am(this),e))}}function yw(r){return typeof r=="function"?gw(r):(r instanceof IDBTransaction&&mw(r),uw(r,hw())?new Proxy(r,qm):r)}function Ts(r){if(r instanceof IDBRequest)return fw(r);if(Tm.has(r))return Tm.get(r);const e=yw(r);return e!==r&&(Tm.set(r,e),pp.set(e,r)),e}const Am=r=>pp.get(r);function _w(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),y=Ts(d);return s&&d.addEventListener("upgradeneeded",g=>{s(Ts(d.result),g.oldVersion,g.newVersion,Ts(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),y.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),y}const vw=["get","getKey","getAll","getAllKeys","count"],bw=["put","add","delete","clear"],wm=new Map;function J_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(wm.get(e))return wm.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=bw.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vw.includes(n)))return;const c=async function(d,...y){const g=this.transaction(d,o?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(y.shift())),(await Promise.all([m[n](...y),o&&g.done]))[0]};return wm.set(e,c),c}pw(r=>({...r,get:(e,n,s)=>J_(e,n)||r.get(e,n,s),has:(e,n)=>!!J_(e,n)||r.has(e,n)}));class Sw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ew(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Ew(r){return r.getComponent()?.type==="VERSION"}const Hm="@firebase/app",Z_="0.14.6";const Nr=new mp("@firebase/app"),Tw="@firebase/app-compat",Aw="@firebase/analytics-compat",ww="@firebase/analytics",xw="@firebase/app-check-compat",Rw="@firebase/app-check",Cw="@firebase/auth",Iw="@firebase/auth-compat",Dw="@firebase/database",Nw="@firebase/data-connect",Ow="@firebase/database-compat",kw="@firebase/functions",Mw="@firebase/functions-compat",Lw="@firebase/installations",Vw="@firebase/installations-compat",Pw="@firebase/messaging",Uw="@firebase/messaging-compat",jw="@firebase/performance",zw="@firebase/performance-compat",Bw="@firebase/remote-config",qw="@firebase/remote-config-compat",Hw="@firebase/storage",Fw="@firebase/storage-compat",Gw="@firebase/firestore",$w="@firebase/ai",Yw="@firebase/firestore-compat",Qw="firebase",Kw="12.6.0";const Fm="[DEFAULT]",Xw={[Hm]:"fire-core",[Tw]:"fire-core-compat",[ww]:"fire-analytics",[Aw]:"fire-analytics-compat",[Rw]:"fire-app-check",[xw]:"fire-app-check-compat",[Cw]:"fire-auth",[Iw]:"fire-auth-compat",[Dw]:"fire-rtdb",[Nw]:"fire-data-connect",[Ow]:"fire-rtdb-compat",[kw]:"fire-fn",[Mw]:"fire-fn-compat",[Lw]:"fire-iid",[Vw]:"fire-iid-compat",[Pw]:"fire-fcm",[Uw]:"fire-fcm-compat",[jw]:"fire-perf",[zw]:"fire-perf-compat",[Bw]:"fire-rc",[qw]:"fire-rc-compat",[Hw]:"fire-gcs",[Fw]:"fire-gcs-compat",[Gw]:"fire-fst",[Yw]:"fire-fst-compat",[$w]:"fire-vertex","fire-js":"fire-js",[Qw]:"fire-js-all"};const Ch=new Map,Ww=new Map,Gm=new Map;function ev(r,e){try{r.container.addComponent(e)}catch(n){Nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function Io(r){const e=r.name;if(Gm.has(e))return Nr.debug(`There were multiple attempts to register component ${e}.`),!1;Gm.set(e,r);for(const n of Ch.values())ev(n,r);for(const n of Ww.values())ev(n,r);return!0}function gp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function vi(r){return r==null?!1:r.settings!==void 0}const Jw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},As=new Ec("app","Firebase",Jw);class Zw{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Sa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw As.create("app-deleted",{appName:this._name})}}const Bo=Kw;function rS(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Fm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw As.create("bad-app-name",{appName:String(o)});if(n||(n=Jb()),!n)throw As.create("no-options");const c=Ch.get(o);if(c){if(Dr(n,c.options)&&Dr(s,c.config))return c;throw As.create("duplicate-app",{appName:o})}const d=new sw(o);for(const g of Gm.values())d.addComponent(g);const y=new Zw(n,s,d);return Ch.set(o,y),y}function sS(r=Fm){const e=Ch.get(r);if(!e&&r===Fm&&Jb())return rS();if(!e)throw As.create("no-app",{appName:r});return e}function ws(r,e,n){let s=Xw[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Nr.warn(d.join(" "));return}Io(new Sa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const ex="firebase-heartbeat-database",tx=1,dc="firebase-heartbeat-store";let xm=null;function aS(){return xm||(xm=_w(ex,tx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(dc)}catch(n){console.warn(n)}}}}).catch(r=>{throw As.create("idb-open",{originalErrorMessage:r.message})})),xm}async function nx(r){try{const n=(await aS()).transaction(dc),s=await n.objectStore(dc).get(oS(r));return await n.done,s}catch(e){if(e instanceof Lr)Nr.warn(e.message);else{const n=As.create("idb-get",{originalErrorMessage:e?.message});Nr.warn(n.message)}}}async function tv(r,e){try{const s=(await aS()).transaction(dc,"readwrite");await s.objectStore(dc).put(e,oS(r)),await s.done}catch(n){if(n instanceof Lr)Nr.warn(n.message);else{const s=As.create("idb-set",{originalErrorMessage:n?.message});Nr.warn(s.message)}}}function oS(r){return`${r.name}!${r.options.appId}`}const ix=1024,rx=30;class sx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ox(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=nv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>rx){const o=lx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=nv(),{heartbeatsToSend:n,unsentEntries:s}=ax(this._heartbeatsCache.heartbeats),o=Rh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Nr.warn(e),""}}}function nv(){return new Date().toISOString().substring(0,10)}function ax(r,e=ix){const n=[];let s=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),iv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),iv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ox{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YA()?QA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return tv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function iv(r){return Rh(JSON.stringify({version:2,heartbeats:r})).length}function lx(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function cx(r){Io(new Sa("platform-logger",e=>new Sw(e),"PRIVATE")),Io(new Sa("heartbeat",e=>new sx(e),"PRIVATE")),ws(Hm,Z_,r),ws(Hm,Z_,"esm2020"),ws("fire-js","")}cx("");function lS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ux=lS,cS=new Ec("auth","Firebase",lS());const Ih=new mp("@firebase/auth");function hx(r,...e){Ih.logLevel<=Xe.WARN&&Ih.warn(`Auth (${Bo}): ${r}`,...e)}function gh(r,...e){Ih.logLevel<=Xe.ERROR&&Ih.error(`Auth (${Bo}): ${r}`,...e)}function nr(r,...e){throw _p(r,...e)}function Si(r,...e){return _p(r,...e)}function yp(r,e,n){const s={...ux(),[e]:n};return new Ec("auth","Firebase",s).create(e,{appName:r.name})}function _a(r){return yp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dx(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&nr(r,"argument-error"),yp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _p(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return cS.create(r,...e)}function Ve(r,e,...n){if(!r)throw _p(e,...n)}function Cr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw gh(e),new Error(e)}function Or(r,e){r||Cr(e)}function $m(){return typeof self<"u"&&self.location?.href||""}function fx(){return rv()==="http:"||rv()==="https:"}function rv(){return typeof self<"u"&&self.location?.protocol||null}function mx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fx()||HA()||"connection"in navigator)?navigator.onLine:!0}function px(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class Ac{constructor(e,n){this.shortDelay=e,this.longDelay=n,Or(n>e,"Short delay should be less than long delay!"),this.isMobile=zA()||FA()}get(){return mx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function vp(r,e){Or(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class uS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_x=new Ac(3e4,6e4);function bp(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function qo(r,e,n,s,o={}){return hS(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const y=Tc({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const m={method:e,headers:g,...c};return qA()||(m.referrerPolicy="no-referrer"),r.emulatorConfig&&zo(r.emulatorConfig.host)&&(m.credentials="include"),uS.fetch()(await dS(r,r.config.apiHost,n,y),m)})}async function hS(r,e,n){r._canInitEmulator=!1;const s={...gx,...e};try{const o=new bx(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw sh(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const y=c.ok?d.errorMessage:d.error.message,[g,m]=y.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw sh(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw sh(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw sh(r,"user-disabled",d);const S=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw yp(r,S,m);nr(r,S)}}catch(o){if(o instanceof Lr)throw o;nr(r,"network-request-failed",{message:String(o)})}}async function vx(r,e,n,s,o={}){const c=await qo(r,e,n,s,o);return"mfaPendingCredential"in c&&nr(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function dS(r,e,n,s){const o=`${e}${n}?${s}`,c=r,d=c.config.emulator?vp(r.config,o):`${r.config.apiScheme}://${o}`;return yx.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class bx{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Si(this.auth,"network-request-failed")),_x.get())})}}function sh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Si(r,e,s);return o.customData._tokenResponse=n,o}async function Sx(r,e){return qo(r,"POST","/v1/accounts:delete",e)}async function Dh(r,e){return qo(r,"POST","/v1/accounts:lookup",e)}function ac(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Ex(r,e=!1){const n=Lt(r),s=await n.getIdToken(e),o=Sp(s);Ve(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:ac(Rm(o.auth_time)),issuedAtTime:ac(Rm(o.iat)),expirationTime:ac(Rm(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function Rm(r){return Number(r)*1e3}function Sp(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return gh("JWT malformed, contained fewer than 3 sections"),null;try{const o=Xb(n);return o?JSON.parse(o):(gh("Failed to decode base64 JWT payload"),null)}catch(o){return gh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function sv(r){const e=Sp(r);return Ve(e,"internal-error"),Ve(typeof e.exp<"u","internal-error"),Ve(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function fc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Lr&&Tx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Tx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Ax{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Ym{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ac(this.lastLoginAt),this.creationTime=ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Nh(r){const e=r.auth,n=await r.getIdToken(),s=await fc(r,Dh(e,{idToken:n}));Ve(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?fS(o.providerUserInfo):[],d=xx(r.providerData,c),y=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!d?.length,m=y?g:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new Ym(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(r,S)}async function wx(r){const e=Lt(r);await Nh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function fS(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Rx(r,e){const n=await hS(r,{},async()=>{const s=Tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await dS(r,o,"/v1/token",`key=${c}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:y,body:s};return r.emulatorConfig&&zo(r.emulatorConfig.host)&&(g.credentials="include"),uS.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Cx(r,e){return qo(r,"POST","/v2/accounts:revokeToken",bp(r,e))}class Ao{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ve(e.idToken,"internal-error"),Ve(typeof e.idToken<"u","internal-error"),Ve(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ve(e.length!==0,"internal-error");const n=sv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ve(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await Rx(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Ao;return s&&(Ve(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Ve(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Ve(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ao,this.toJSON())}_performRefresh(){return Cr("not implemented")}}function ps(r,e){Ve(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class bi{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Ax(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ym(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await fc(this,this.stsTokenManager.getToken(this.auth,e));return Ve(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Ex(this,e)}reload(){return wx(this)}_assign(e){this!==e&&(Ve(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new bi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ve(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Nh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vi(this.auth.app))return Promise.reject(_a(this.auth));const e=await this.getIdToken();return await fc(this,Sx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,g=n._redirectEventId??void 0,m=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:E,emailVerified:x,isAnonymous:L,providerData:P,stsTokenManager:z}=n;Ve(E&&z,e,"internal-error");const q=Ao.fromJSON(this.name,z);Ve(typeof E=="string",e,"internal-error"),ps(s,e.name),ps(o,e.name),Ve(typeof x=="boolean",e,"internal-error"),Ve(typeof L=="boolean",e,"internal-error"),ps(c,e.name),ps(d,e.name),ps(y,e.name),ps(g,e.name),ps(m,e.name),ps(S,e.name);const Q=new bi({uid:E,auth:e,email:o,emailVerified:x,displayName:s,isAnonymous:L,photoURL:d,phoneNumber:c,tenantId:y,stsTokenManager:q,createdAt:m,lastLoginAt:S});return P&&Array.isArray(P)&&(Q.providerData=P.map(ne=>({...ne}))),g&&(Q._redirectEventId=g),Q}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ao;o.updateFromServerResponse(n);const c=new bi({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Nh(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Ve(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?fS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,y=new Ao;y.updateFromIdToken(s);const g=new bi({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ym(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,m),g}}const av=new Map;function Ir(r){Or(r instanceof Function,"Expected a class definition");let e=av.get(r);return e?(Or(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,av.set(r,e),e)}class mS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}mS.type="NONE";const ov=mS;function yh(r,e,n){return`firebase:${r}:${e}:${n}`}class wo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=yh(this.userKey,o.apiKey,c),this.fullPersistenceKey=yh("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Dh(this.auth,{idToken:e}).catch(()=>{});return n?bi._fromGetAccountInfoResponse(this.auth,n,e):null}return bi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new wo(Ir(ov),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let c=o[0]||Ir(ov);const d=yh(s,e.config.apiKey,e.name);let y=null;for(const m of n)try{const S=await m._get(d);if(S){let E;if(typeof S=="string"){const x=await Dh(e,{idToken:S}).catch(()=>{});if(!x)break;E=await bi._fromGetAccountInfoResponse(e,x,S)}else E=bi._fromJSON(e,S);m!==c&&(y=E),c=m;break}}catch{}const g=o.filter(m=>m._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new wo(c,e,s):(c=g[0],y&&await c._set(d,y.toJSON()),await Promise.all(n.map(async m=>{if(m!==c)try{await m._remove(d)}catch{}})),new wo(c,e,s))}}function lv(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_S(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(pS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bS(e))return"Blackberry";if(SS(e))return"Webos";if(gS(e))return"Safari";if((e.includes("chrome/")||yS(e))&&!e.includes("edge/"))return"Chrome";if(vS(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function pS(r=yn()){return/firefox\//i.test(r)}function gS(r=yn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function yS(r=yn()){return/crios\//i.test(r)}function _S(r=yn()){return/iemobile/i.test(r)}function vS(r=yn()){return/android/i.test(r)}function bS(r=yn()){return/blackberry/i.test(r)}function SS(r=yn()){return/webos/i.test(r)}function Ep(r=yn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Ix(r=yn()){return Ep(r)&&!!window.navigator?.standalone}function Dx(){return GA()&&document.documentMode===10}function ES(r=yn()){return Ep(r)||vS(r)||SS(r)||bS(r)||/windows phone/i.test(r)||_S(r)}function TS(r,e=[]){let n;switch(r){case"Browser":n=lv(yn());break;case"Worker":n=`${lv(yn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Bo}/${s}`}class Nx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,y)=>{try{const g=e(c);d(g)}catch(g){y(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Ox(r,e={}){return qo(r,"GET","/v2/passwordPolicy",bp(r,e))}const kx=6;class Mx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??kx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Lx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cv(this),this.idTokenSubscription=new cv(this),this.beforeStateQueue=new Nx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Ir(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await wo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dh(this,{idToken:e}),s=await bi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(vi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!c||c===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ve(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=px()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vi(this.app))return Promise.reject(_a(this));const n=e?Lt(e):null;return n&&Ve(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ve(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vi(this.app)?Promise.reject(_a(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vi(this.app)?Promise.reject(_a(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ir(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ox(this),n=new Mx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ec("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Cx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Ir(e)||this._popupRedirectResolver;Ve(n,this,"argument-error"),this.redirectPersistenceManager=await wo.create(this,[Ir(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ve(y,this,"internal-error"),y.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ve(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Yh(r){return Lt(r)}class cv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(n=>this.observer=n)}get next(){return Ve(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vx(r){Tp=r}function Px(r){return Tp.loadJS(r)}function Ux(){return Tp.gapiScript}function jx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function zx(r,e){const n=gp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Dr(c,e??{}))return o;nr(o,"already-initialized")}return n.initialize({options:e})}function Bx(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Ir);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function qx(r,e,n){const s=Yh(r);Ve(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=AS(e),{host:d,port:y}=Hx(e),g=y===null?"":`:${y}`,m={url:`${c}//${d}${g}/`},S=Object.freeze({host:d,port:y,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Ve(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Ve(Dr(m,s.config.emulator)&&Dr(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,zo(d)?(eS(`${c}//${d}${g}`),tS("Auth",!0)):Fx()}function AS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Hx(r){const e=AS(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:uv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:uv(d)}}}function uv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Fx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class wS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Cr("not implemented")}_getIdTokenResponse(e){return Cr("not implemented")}_linkToIdToken(e,n){return Cr("not implemented")}_getReauthenticationResolver(e){return Cr("not implemented")}}async function xo(r,e){return vx(r,"POST","/v1/accounts:signInWithIdp",bp(r,e))}const Gx="http://localhost";class Ea extends wS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new Ea(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,xo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:Gx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tc(n)}return e}}class Ap{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class wc extends Ap{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class _s extends wc{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:_s.PROVIDER_ID,signInMethod:_s.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return _s.credentialFromTaggedObject(e)}static credentialFromError(e){return _s.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return _s.credential(e.oauthAccessToken)}catch{return null}}}_s.FACEBOOK_SIGN_IN_METHOD="facebook.com";_s.PROVIDER_ID="facebook.com";class Rr extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ea._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Rr.credential(n,s)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";class vs extends wc{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:vs.PROVIDER_ID,signInMethod:vs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return vs.credentialFromTaggedObject(e)}static credentialFromError(e){return vs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return vs.credential(e.oauthAccessToken)}catch{return null}}}vs.GITHUB_SIGN_IN_METHOD="github.com";vs.PROVIDER_ID="github.com";class bs extends wc{constructor(){super("twitter.com")}static credential(e,n){return Ea._fromParams({providerId:bs.PROVIDER_ID,signInMethod:bs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return bs.credentialFromTaggedObject(e)}static credentialFromError(e){return bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return bs.credential(n,s)}catch{return null}}}bs.TWITTER_SIGN_IN_METHOD="twitter.com";bs.PROVIDER_ID="twitter.com";class Do{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await bi._fromIdTokenResponse(e,s,o),d=hv(s);return new Do({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=hv(s);return new Do({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function hv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Oh extends Lr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Oh(e,n,s,o)}}function xS(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(r,c,e,s):c})}async function $x(r,e,n=!1){const s=await fc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return Do._forOperation(r,"link",s)}async function Yx(r,e,n=!1){const{auth:s}=r;if(vi(s.app))return Promise.reject(_a(s));const o="reauthenticate";try{const c=await fc(r,xS(s,o,e,r),n);Ve(c.idToken,s,"internal-error");const d=Sp(c.idToken);Ve(d,s,"internal-error");const{sub:y}=d;return Ve(r.uid===y,s,"user-mismatch"),Do._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&nr(s,"user-mismatch"),c}}async function Qx(r,e,n=!1){if(vi(r.app))return Promise.reject(_a(r));const s="signIn",o=await xS(r,s,e),c=await Do._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}function Kx(r,e,n,s){return Lt(r).onIdTokenChanged(e,n,s)}function Xx(r,e,n){return Lt(r).beforeAuthStateChanged(e,n)}function Wx(r,e,n,s){return Lt(r).onAuthStateChanged(e,n,s)}function Jx(r){return Lt(r).signOut()}const kh="__sak";class RS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zx=1e3,eR=10;class CS extends RS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ES(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Dx()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,eR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Zx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}CS.type="LOCAL";const tR=CS;class IS extends RS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IS.type="SESSION";const DS=IS;function nR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Qh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Qh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async m=>m(n.origin,c)),g=await nR(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Qh.receivers=[];function wp(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class iR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((y,g)=>{const m=wp("",20);o.port1.start();const S=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(E){const x=E;if(x.data.eventId===m)switch(x.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),y(x.data.response);break;default:clearTimeout(S),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function Xi(){return window}function rR(r){Xi().location.href=r}function NS(){return typeof Xi().WorkerGlobalScope<"u"&&typeof Xi().importScripts=="function"}async function sR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aR(){return navigator?.serviceWorker?.controller||null}function oR(){return NS()?self:null}const OS="firebaseLocalStorageDb",lR=1,Mh="firebaseLocalStorage",kS="fbase_key";class xc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Kh(r,e){return r.transaction([Mh],e?"readwrite":"readonly").objectStore(Mh)}function cR(){const r=indexedDB.deleteDatabase(OS);return new xc(r).toPromise()}function Qm(){const r=indexedDB.open(OS,lR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Mh,{keyPath:kS})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Mh)?e(s):(s.close(),await cR(),e(await Qm()))})})}async function dv(r,e,n){const s=Kh(r,!0).put({[kS]:e,value:n});return new xc(s).toPromise()}async function uR(r,e){const n=Kh(r,!1).get(e),s=await new xc(n).toPromise();return s===void 0?null:s.value}function fv(r,e){const n=Kh(r,!0).delete(e);return new xc(n).toPromise()}const hR=800,dR=3;class MS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>dR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qh._getInstance(oR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sR(),!this.activeServiceWorker)return;this.sender=new iR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qm();return await dv(e,kh,"1"),await fv(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>dv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Kh(o,!1).getAll();return new xc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MS.type="LOCAL";const fR=MS;new Ac(3e4,6e4);function LS(r,e){return e?Ir(e):(Ve(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class xp extends wS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mR(r){return Qx(r.auth,new xp(r),r.bypassAuthState)}function pR(r){const{auth:e,user:n}=r;return Ve(n,e,"internal-error"),Yx(n,new xp(r),r.bypassAuthState)}async function gR(r){const{auth:e,user:n}=r;return Ve(n,e,"internal-error"),$x(n,new xp(r),r.bypassAuthState)}class VS{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:y}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(g))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return gR;case"reauthViaPopup":case"reauthViaRedirect":return pR;default:nr(this.auth,"internal-error")}}resolve(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yR=new Ac(2e3,1e4);async function _R(r,e,n){if(vi(r.app))return Promise.reject(Si(r,"operation-not-supported-in-this-environment"));const s=Yh(r);dx(r,e,Ap);const o=LS(s,n);return new pa(s,"signInViaPopup",e,o).executeNotNull()}class pa extends VS{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,pa.currentPopupAction&&pa.currentPopupAction.cancel(),pa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ve(e,this.auth,"internal-error"),e}async onExecution(){Or(this.filter.length===1,"Popup operations only handle one event");const e=wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pa.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}pa.currentPopupAction=null;const vR="pendingRedirect",_h=new Map;class bR extends VS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=_h.get(this.auth._key());if(!e){try{const s=await SR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}_h.set(this.auth._key(),e)}return this.bypassAuthState||_h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SR(r,e){const n=AR(e),s=TR(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function ER(r,e){_h.set(r._key(),e)}function TR(r){return Ir(r._redirectPersistence)}function AR(r){return yh(vR,r.config.apiKey,r.name)}async function wR(r,e,n=!1){if(vi(r.app))return Promise.reject(_a(r));const s=Yh(r),o=LS(s,e),d=await new bR(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const xR=600*1e3;class RR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!PS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Si(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xR&&this.cachedEventUids.clear(),this.cachedEventUids.has(mv(e))}saveEventToCache(e){this.cachedEventUids.add(mv(e)),this.lastProcessedEventTime=Date.now()}}function mv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function PS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function CR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return PS(r);default:return!1}}async function IR(r,e={}){return qo(r,"GET","/v1/projects",e)}const DR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NR=/^https?/;async function OR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await IR(r);for(const n of e)try{if(kR(n))return}catch{}nr(r,"unauthorized-domain")}function kR(r){const e=$m(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!NR.test(n))return!1;if(DR.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const MR=new Ac(3e4,6e4);function pv(){const r=Xi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function LR(r){return new Promise((e,n)=>{function s(){pv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{pv(),n(Si(r,"network-request-failed"))},timeout:MR.get()})}if(Xi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Xi().gapi?.load)s();else{const o=jx("iframefcb");return Xi()[o]=()=>{gapi.load?s():n(Si(r,"network-request-failed"))},Px(`${Ux()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw vh=null,e})}let vh=null;function VR(r){return vh=vh||LR(r),vh}const PR=new Ac(5e3,15e3),UR="__/auth/iframe",jR="emulator/auth/iframe",zR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qR(r){const e=r.config;Ve(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?vp(e,jR):`https://${r.config.authDomain}/${UR}`,s={apiKey:e.apiKey,appName:r.name,v:Bo},o=BR.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Tc(s).slice(1)}`}async function HR(r){const e=await VR(r),n=Xi().gapi;return Ve(n,r,"internal-error"),e.open({where:document.body,url:qR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zR,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=Si(r,"network-request-failed"),y=Xi().setTimeout(()=>{c(d)},PR.get());function g(){Xi().clearTimeout(y),o(s)}s.ping(g).then(g,()=>{c(d)})}))}const FR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GR=500,$R=600,YR="_blank",QR="http://localhost";class gv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KR(r,e,n,s=GR,o=$R){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const g={...FR,width:s.toString(),height:o.toString(),top:c,left:d},m=yn().toLowerCase();n&&(y=yS(m)?YR:n),pS(m)&&(e=e||QR,g.scrollbars="yes");const S=Object.entries(g).reduce((x,[L,P])=>`${x}${L}=${P},`,"");if(Ix(m)&&y!=="_self")return XR(e||"",y),new gv(null);const E=window.open(e||"",y,S);Ve(E,r,"popup-blocked");try{E.focus()}catch{}return new gv(E)}function XR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const WR="__/auth/handler",JR="emulator/auth/handler",ZR=encodeURIComponent("fac");async function yv(r,e,n,s,o,c){Ve(r.config.authDomain,r,"auth-domain-config-required"),Ve(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Bo,eventId:o};if(e instanceof Ap){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",JA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,E]of Object.entries({}))d[S]=E}if(e instanceof wc){const S=e.getScopes().filter(E=>E!=="");S.length>0&&(d.scopes=S.join(","))}r.tenantId&&(d.tid=r.tenantId);const y=d;for(const S of Object.keys(y))y[S]===void 0&&delete y[S];const g=await r._getAppCheckToken(),m=g?`#${ZR}=${encodeURIComponent(g)}`:"";return`${eC(r)}?${Tc(y).slice(1)}${m}`}function eC({config:r}){return r.emulator?vp(r,JR):`https://${r.authDomain}/${WR}`}const Cm="webStorageSupport";class tC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=DS,this._completeRedirectFn=wR,this._overrideRedirectResult=ER}async _openPopup(e,n,s,o){Or(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await yv(e,n,s,$m(),o);return KR(e,c,wp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await yv(e,n,s,$m(),o);return rR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(Or(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await HR(e),s=new RR(e);return n.register("authEvent",o=>(Ve(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Cm,{type:Cm},o=>{const c=o?.[0]?.[Cm];c!==void 0&&n(!!c),nr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return ES()||gS()||Ep()}}const nC=tC;var _v="@firebase/auth",vv="1.11.1";class iC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ve(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sC(r){Io(new Sa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;Ve(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TS(r)},m=new Lx(s,o,c,g);return Bx(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Io(new Sa("auth-internal",e=>{const n=Yh(e.getProvider("auth").getImmediate());return(s=>new iC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ws(_v,vv,rC(r)),ws(_v,vv,"esm2020")}const aC=300,oC=Zb("authIdTokenMaxAge")||aC;let bv=null;const lC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>oC)return;const o=n?.token;bv!==o&&(bv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cC(r=sS()){const e=gp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zx(r,{popupRedirectResolver:nC,persistence:[fR,tR,DS]}),s=Zb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=lC(c.toString());Xx(n,d,()=>d(n.currentUser)),Kx(n,y=>d(y))}}const o=Wb("auth");return o&&qx(n,`http://${o}`),n}function uC(){return document.getElementsByTagName("head")?.[0]??document}Vx({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=Si("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",uC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sC("Browser");var hC="firebase",dC="12.6.0";ws(hC,dC,"app");var Sv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xs,US;(function(){var r;function e(D,w){function R(){}R.prototype=w.prototype,D.F=w.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(C,N,k){for(var I=Array(arguments.length-2),ae=2;ae<arguments.length;ae++)I[ae-2]=arguments[ae];return w.prototype[N].apply(C,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,w,R){R||(R=0);const C=Array(16);if(typeof w=="string")for(var N=0;N<16;++N)C[N]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(N=0;N<16;++N)C[N]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=D.g[0],R=D.g[1],N=D.g[2];let k=D.g[3],I;I=w+(k^R&(N^k))+C[0]+3614090360&4294967295,w=R+(I<<7&4294967295|I>>>25),I=k+(N^w&(R^N))+C[1]+3905402710&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(R^k&(w^R))+C[2]+606105819&4294967295,N=k+(I<<17&4294967295|I>>>15),I=R+(w^N&(k^w))+C[3]+3250441966&4294967295,R=N+(I<<22&4294967295|I>>>10),I=w+(k^R&(N^k))+C[4]+4118548399&4294967295,w=R+(I<<7&4294967295|I>>>25),I=k+(N^w&(R^N))+C[5]+1200080426&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(R^k&(w^R))+C[6]+2821735955&4294967295,N=k+(I<<17&4294967295|I>>>15),I=R+(w^N&(k^w))+C[7]+4249261313&4294967295,R=N+(I<<22&4294967295|I>>>10),I=w+(k^R&(N^k))+C[8]+1770035416&4294967295,w=R+(I<<7&4294967295|I>>>25),I=k+(N^w&(R^N))+C[9]+2336552879&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(R^k&(w^R))+C[10]+4294925233&4294967295,N=k+(I<<17&4294967295|I>>>15),I=R+(w^N&(k^w))+C[11]+2304563134&4294967295,R=N+(I<<22&4294967295|I>>>10),I=w+(k^R&(N^k))+C[12]+1804603682&4294967295,w=R+(I<<7&4294967295|I>>>25),I=k+(N^w&(R^N))+C[13]+4254626195&4294967295,k=w+(I<<12&4294967295|I>>>20),I=N+(R^k&(w^R))+C[14]+2792965006&4294967295,N=k+(I<<17&4294967295|I>>>15),I=R+(w^N&(k^w))+C[15]+1236535329&4294967295,R=N+(I<<22&4294967295|I>>>10),I=w+(N^k&(R^N))+C[1]+4129170786&4294967295,w=R+(I<<5&4294967295|I>>>27),I=k+(R^N&(w^R))+C[6]+3225465664&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^R&(k^w))+C[11]+643717713&4294967295,N=k+(I<<14&4294967295|I>>>18),I=R+(k^w&(N^k))+C[0]+3921069994&4294967295,R=N+(I<<20&4294967295|I>>>12),I=w+(N^k&(R^N))+C[5]+3593408605&4294967295,w=R+(I<<5&4294967295|I>>>27),I=k+(R^N&(w^R))+C[10]+38016083&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^R&(k^w))+C[15]+3634488961&4294967295,N=k+(I<<14&4294967295|I>>>18),I=R+(k^w&(N^k))+C[4]+3889429448&4294967295,R=N+(I<<20&4294967295|I>>>12),I=w+(N^k&(R^N))+C[9]+568446438&4294967295,w=R+(I<<5&4294967295|I>>>27),I=k+(R^N&(w^R))+C[14]+3275163606&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^R&(k^w))+C[3]+4107603335&4294967295,N=k+(I<<14&4294967295|I>>>18),I=R+(k^w&(N^k))+C[8]+1163531501&4294967295,R=N+(I<<20&4294967295|I>>>12),I=w+(N^k&(R^N))+C[13]+2850285829&4294967295,w=R+(I<<5&4294967295|I>>>27),I=k+(R^N&(w^R))+C[2]+4243563512&4294967295,k=w+(I<<9&4294967295|I>>>23),I=N+(w^R&(k^w))+C[7]+1735328473&4294967295,N=k+(I<<14&4294967295|I>>>18),I=R+(k^w&(N^k))+C[12]+2368359562&4294967295,R=N+(I<<20&4294967295|I>>>12),I=w+(R^N^k)+C[5]+4294588738&4294967295,w=R+(I<<4&4294967295|I>>>28),I=k+(w^R^N)+C[8]+2272392833&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^R)+C[11]+1839030562&4294967295,N=k+(I<<16&4294967295|I>>>16),I=R+(N^k^w)+C[14]+4259657740&4294967295,R=N+(I<<23&4294967295|I>>>9),I=w+(R^N^k)+C[1]+2763975236&4294967295,w=R+(I<<4&4294967295|I>>>28),I=k+(w^R^N)+C[4]+1272893353&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^R)+C[7]+4139469664&4294967295,N=k+(I<<16&4294967295|I>>>16),I=R+(N^k^w)+C[10]+3200236656&4294967295,R=N+(I<<23&4294967295|I>>>9),I=w+(R^N^k)+C[13]+681279174&4294967295,w=R+(I<<4&4294967295|I>>>28),I=k+(w^R^N)+C[0]+3936430074&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^R)+C[3]+3572445317&4294967295,N=k+(I<<16&4294967295|I>>>16),I=R+(N^k^w)+C[6]+76029189&4294967295,R=N+(I<<23&4294967295|I>>>9),I=w+(R^N^k)+C[9]+3654602809&4294967295,w=R+(I<<4&4294967295|I>>>28),I=k+(w^R^N)+C[12]+3873151461&4294967295,k=w+(I<<11&4294967295|I>>>21),I=N+(k^w^R)+C[15]+530742520&4294967295,N=k+(I<<16&4294967295|I>>>16),I=R+(N^k^w)+C[2]+3299628645&4294967295,R=N+(I<<23&4294967295|I>>>9),I=w+(N^(R|~k))+C[0]+4096336452&4294967295,w=R+(I<<6&4294967295|I>>>26),I=k+(R^(w|~N))+C[7]+1126891415&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~R))+C[14]+2878612391&4294967295,N=k+(I<<15&4294967295|I>>>17),I=R+(k^(N|~w))+C[5]+4237533241&4294967295,R=N+(I<<21&4294967295|I>>>11),I=w+(N^(R|~k))+C[12]+1700485571&4294967295,w=R+(I<<6&4294967295|I>>>26),I=k+(R^(w|~N))+C[3]+2399980690&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~R))+C[10]+4293915773&4294967295,N=k+(I<<15&4294967295|I>>>17),I=R+(k^(N|~w))+C[1]+2240044497&4294967295,R=N+(I<<21&4294967295|I>>>11),I=w+(N^(R|~k))+C[8]+1873313359&4294967295,w=R+(I<<6&4294967295|I>>>26),I=k+(R^(w|~N))+C[15]+4264355552&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~R))+C[6]+2734768916&4294967295,N=k+(I<<15&4294967295|I>>>17),I=R+(k^(N|~w))+C[13]+1309151649&4294967295,R=N+(I<<21&4294967295|I>>>11),I=w+(N^(R|~k))+C[4]+4149444226&4294967295,w=R+(I<<6&4294967295|I>>>26),I=k+(R^(w|~N))+C[11]+3174756917&4294967295,k=w+(I<<10&4294967295|I>>>22),I=N+(w^(k|~R))+C[2]+718787259&4294967295,N=k+(I<<15&4294967295|I>>>17),I=R+(k^(N|~w))+C[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(N+(I<<21&4294967295|I>>>11))&4294967295,D.g[2]=D.g[2]+N&4294967295,D.g[3]=D.g[3]+k&4294967295}s.prototype.v=function(D,w){w===void 0&&(w=D.length);const R=w-this.blockSize,C=this.C;let N=this.h,k=0;for(;k<w;){if(N==0)for(;k<=R;)o(this,D,k),k+=this.blockSize;if(typeof D=="string"){for(;k<w;)if(C[N++]=D.charCodeAt(k++),N==this.blockSize){o(this,C),N=0;break}}else for(;k<w;)if(C[N++]=D[k++],N==this.blockSize){o(this,C),N=0;break}}this.h=N,this.o+=w},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,R=0;R<4;++R)for(let C=0;C<32;C+=8)D[w++]=this.g[R]>>>C&255;return D};function c(D,w){var R=y;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=w(D)}function d(D,w){this.h=w;const R=[];let C=!0;for(let N=D.length-1;N>=0;N--){const k=D[N]|0;C&&k==w||(R[N]=k,C=!1)}this.g=R}var y={};function g(D){return-128<=D&&D<128?c(D,function(w){return new d([w|0],w<0?-1:0)}):new d([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return E;if(D<0)return q(m(-D));const w=[];let R=1;for(let C=0;D>=R;C++)w[C]=D/R|0,R*=4294967296;return new d(w,0)}function S(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return q(S(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(w,8));let C=E;for(let k=0;k<D.length;k+=8){var N=Math.min(8,D.length-k);const I=parseInt(D.substring(k,k+N),w);N<8?(N=m(Math.pow(w,N)),C=C.j(N).add(m(I))):(C=C.j(R),C=C.add(m(I)))}return C}var E=g(0),x=g(1),L=g(16777216);r=d.prototype,r.m=function(){if(z(this))return-q(this).m();let D=0,w=1;for(let R=0;R<this.g.length;R++){const C=this.i(R);D+=(C>=0?C:4294967296+C)*w,w*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(P(this))return"0";if(z(this))return"-"+q(this).toString(D);const w=m(Math.pow(D,6));var R=this;let C="";for(;;){const N=me(R,w).g;R=Q(R,N.j(w));let k=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=N,P(R))return k+C;for(;k.length<6;)k="0"+k;C=k+C}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function P(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function z(D){return D.h==-1}r.l=function(D){return D=Q(this,D),z(D)?-1:P(D)?0:1};function q(D){const w=D.g.length,R=[];for(let C=0;C<w;C++)R[C]=~D.g[C];return new d(R,~D.h).add(x)}r.abs=function(){return z(this)?q(this):this},r.add=function(D){const w=Math.max(this.g.length,D.g.length),R=[];let C=0;for(let N=0;N<=w;N++){let k=C+(this.i(N)&65535)+(D.i(N)&65535),I=(k>>>16)+(this.i(N)>>>16)+(D.i(N)>>>16);C=I>>>16,k&=65535,I&=65535,R[N]=I<<16|k}return new d(R,R[R.length-1]&-2147483648?-1:0)};function Q(D,w){return D.add(q(w))}r.j=function(D){if(P(this)||P(D))return E;if(z(this))return z(D)?q(this).j(q(D)):q(q(this).j(D));if(z(D))return q(this.j(q(D)));if(this.l(L)<0&&D.l(L)<0)return m(this.m()*D.m());const w=this.g.length+D.g.length,R=[];for(var C=0;C<2*w;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(let N=0;N<D.g.length;N++){const k=this.i(C)>>>16,I=this.i(C)&65535,ae=D.i(N)>>>16,xe=D.i(N)&65535;R[2*C+2*N]+=I*xe,ne(R,2*C+2*N),R[2*C+2*N+1]+=k*xe,ne(R,2*C+2*N+1),R[2*C+2*N+1]+=I*ae,ne(R,2*C+2*N+1),R[2*C+2*N+2]+=k*ae,ne(R,2*C+2*N+2)}for(D=0;D<w;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=w;D<2*w;D++)R[D]=0;return new d(R,0)};function ne(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function $(D,w){this.g=D,this.h=w}function me(D,w){if(P(w))throw Error("division by zero");if(P(D))return new $(E,E);if(z(D))return w=me(q(D),w),new $(q(w.g),q(w.h));if(z(w))return w=me(D,q(w)),new $(q(w.g),w.h);if(D.g.length>30){if(z(D)||z(w))throw Error("slowDivide_ only works with positive integers.");for(var R=x,C=w;C.l(D)<=0;)R=fe(R),C=fe(C);var N=Se(R,1),k=Se(C,1);for(C=Se(C,2),R=Se(R,2);!P(C);){var I=k.add(C);I.l(D)<=0&&(N=N.add(R),k=I),C=Se(C,1),R=Se(R,1)}return w=Q(D,N.j(w)),new $(N,w)}for(N=E;D.l(w)>=0;){for(R=Math.max(1,Math.floor(D.m()/w.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),k=m(R),I=k.j(w);z(I)||I.l(D)>0;)R-=C,k=m(R),I=k.j(w);P(k)&&(k=x),N=N.add(k),D=Q(D,I)}return new $(N,D)}r.B=function(D){return me(this,D).h},r.and=function(D){const w=Math.max(this.g.length,D.g.length),R=[];for(let C=0;C<w;C++)R[C]=this.i(C)&D.i(C);return new d(R,this.h&D.h)},r.or=function(D){const w=Math.max(this.g.length,D.g.length),R=[];for(let C=0;C<w;C++)R[C]=this.i(C)|D.i(C);return new d(R,this.h|D.h)},r.xor=function(D){const w=Math.max(this.g.length,D.g.length),R=[];for(let C=0;C<w;C++)R[C]=this.i(C)^D.i(C);return new d(R,this.h^D.h)};function fe(D){const w=D.g.length+1,R=[];for(let C=0;C<w;C++)R[C]=D.i(C)<<1|D.i(C-1)>>>31;return new d(R,D.h)}function Se(D,w){const R=w>>5;w%=32;const C=D.g.length-R,N=[];for(let k=0;k<C;k++)N[k]=w>0?D.i(k+R)>>>w|D.i(k+R+1)<<32-w:D.i(k+R);return new d(N,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,US=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=m,d.fromString=S,xs=d}).apply(typeof Sv<"u"?Sv:typeof self<"u"?self:typeof window<"u"?window:{});var ah=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var jS,ec,zS,bh,Km,BS,qS,HS;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ah=="object"&&ah];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,p){if(p)e:{var v=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var B=u[A];if(!(B in v))break e;v=v[B]}u=u[u.length-1],A=v[u],p=p(A),p!=A&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});var c=c||{},d=this||self;function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,v){return u.call.apply(u.bind,arguments)}function m(u,p,v){return m=g,m.apply(null,arguments)}function S(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function E(u,p){function v(){}v.prototype=p.prototype,u.Z=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,B,K){for(var ge=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)ge[ze-2]=arguments[ze];return p.prototype[B].apply(A,ge)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const p=u.length;if(p>0){const v=Array(p);for(let A=0;A<p;A++)v[A]=u[A];return v}return[]}function P(u,p){for(let A=1;A<arguments.length;A++){const B=arguments[A];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=u.length||0;const K=B.length||0;u.length=v+K;for(let ge=0;ge<K;ge++)u[v+ge]=B[ge]}else u.push(B)}}class z{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function q(u){d.setTimeout(()=>{throw u},0)}function Q(){var u=D;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class ne{constructor(){this.h=this.g=null}add(p,v){const A=$.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new z(()=>new me,u=>u.reset());class me{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,Se=!1,D=new ne,w=()=>{const u=Promise.resolve(void 0);fe=()=>{u.then(R)}};function R(){for(var u;u=Q();){try{u.h.call(u.g)}catch(v){q(v)}var p=$;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}Se=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var k=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,p),d.removeEventListener("test",v,p)}catch{}return u})();function I(u){return/^[\s\xa0]*$/.test(u)}function ae(u,p){N.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}E(ae,N),ae.prototype.init=function(u,p){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ae.Z.h.call(this)},ae.prototype.h=function(){ae.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var xe="closure_listenable_"+(Math.random()*1e6|0),G=0;function le(u,p,v,A,B){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=B,this.key=++G,this.da=this.fa=!1}function pe(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Ee(u,p,v){for(const A in u)p.call(v,u[A],A,u)}function Re(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function M(u){const p={};for(const v in u)p[v]=u[v];return p}const W="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(u,p){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)u[v]=A[v];for(let K=0;K<W.length;K++)v=W[K],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function ve(u){this.src=u,this.g={},this.h=0}ve.prototype.add=function(u,p,v,A,B){const K=u.toString();u=this.g[K],u||(u=this.g[K]=[],this.h++);const ge=Le(u,p,A,B);return ge>-1?(p=u[ge],v||(p.fa=!1)):(p=new le(p,this.src,K,!!A,B),p.fa=v,u.push(p)),p};function Ne(u,p){const v=p.type;if(v in u.g){var A=u.g[v],B=Array.prototype.indexOf.call(A,p,void 0),K;(K=B>=0)&&Array.prototype.splice.call(A,B,1),K&&(pe(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Le(u,p,v,A){for(let B=0;B<u.length;++B){const K=u[B];if(!K.da&&K.listener==p&&K.capture==!!v&&K.ha==A)return B}return-1}var Fe="closure_lm_"+(Math.random()*1e6|0),Tt={};function ot(u,p,v,A,B){if(Array.isArray(p)){for(let K=0;K<p.length;K++)ot(u,p[K],v,A,B);return null}return v=oe(v),u&&u[xe]?u.J(p,v,y(A)?!!A.capture:!1,B):si(u,p,v,!1,A,B)}function si(u,p,v,A,B,K){if(!p)throw Error("Invalid event type");const ge=y(B)?!!B.capture:!!B;let ze=ue(u);if(ze||(u[Fe]=ze=new ve(u)),v=ze.add(p,v,A,ge,K),v.proxy)return v;if(A=Ai(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)k||(B=ge),B===void 0&&(B=!1),u.addEventListener(p.toString(),A,B);else if(u.attachEvent)u.attachEvent(ee(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Ai(){function u(v){return p.call(u.src,u.listener,v)}const p=de;return u}function wi(u,p,v,A,B){if(Array.isArray(p))for(var K=0;K<p.length;K++)wi(u,p[K],v,A,B);else A=y(A)?!!A.capture:!!A,v=oe(v),u&&u[xe]?(u=u.i,K=String(p).toString(),K in u.g&&(p=u.g[K],v=Le(p,v,A,B),v>-1&&(pe(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete u.g[K],u.h--)))):u&&(u=ue(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Le(p,v,A,B)),(v=u>-1?p[u]:null)&&te(v))}function te(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[xe])Ne(p.i,u);else{var v=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(v,A,u.capture):p.detachEvent?p.detachEvent(ee(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=ue(p))?(Ne(v,u),v.h==0&&(v.src=null,p[Fe]=null)):pe(u)}}}function ee(u){return u in Tt?Tt[u]:Tt[u]="on"+u}function de(u,p){if(u.da)u=!0;else{p=new ae(p,this);const v=u.listener,A=u.ha||u.src;u.fa&&te(u),u=v.call(A,p)}return u}function ue(u){return u=u[Fe],u instanceof ve?u:null}var ce="__closure_events_fn_"+(Math.random()*1e9>>>0);function oe(u){return typeof u=="function"?u:(u[ce]||(u[ce]=function(p){return u.handleEvent(p)}),u[ce])}function _e(){C.call(this),this.i=new ve(this),this.M=this,this.G=null}E(_e,C),_e.prototype[xe]=!0,_e.prototype.removeEventListener=function(u,p,v,A){wi(this,u,p,v,A)};function be(u,p){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new N(p,u);else if(p instanceof N)p.target=p.target||u;else{var B=p;p=new N(A,u),he(p,B)}B=!0;let K,ge;if(v)for(ge=v.length-1;ge>=0;ge--)K=p.g=v[ge],B=Ae(K,A,!0,p)&&B;if(K=p.g=u,B=Ae(K,A,!0,p)&&B,B=Ae(K,A,!1,p)&&B,v)for(ge=0;ge<v.length;ge++)K=p.g=v[ge],B=Ae(K,A,!1,p)&&B}_e.prototype.N=function(){if(_e.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const v=u.g[p];for(let A=0;A<v.length;A++)pe(v[A]);delete u.g[p],u.h--}}this.G=null},_e.prototype.J=function(u,p,v,A){return this.i.add(String(u),p,!1,v,A)},_e.prototype.K=function(u,p,v,A){return this.i.add(String(u),p,!0,v,A)};function Ae(u,p,v,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let B=!0;for(let K=0;K<p.length;++K){const ge=p[K];if(ge&&!ge.da&&ge.capture==v){const ze=ge.listener,Dt=ge.ha||ge.src;ge.fa&&Ne(u.i,ge),B=ze.call(Dt,A)!==!1&&B}}return B&&!A.defaultPrevented}function qe(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:d.setTimeout(u,p||0)}function bt(u){u.g=qe(()=>{u.g=null,u.i&&(u.i=!1,bt(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class Ge extends C{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:bt(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function en(u){C.call(this),this.h=u,this.g={}}E(en,C);var Fn=[];function Vr(u){Ee(u.g,function(p,v){this.g.hasOwnProperty(v)&&te(p)},u),u.g={}}en.prototype.N=function(){en.Z.N.call(this),Vr(this)},en.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xi=d.JSON.stringify,Ko=d.JSON.parse,Pr=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Ps(){}function Da(){}var ai={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function tn(){N.call(this,"d")}E(tn,N);function Gn(){N.call(this,"c")}E(Gn,N);var It={},Mc=null;function Na(){return Mc=Mc||new _e}It.Ia="serverreachability";function Lc(u){N.call(this,It.Ia,u)}E(Lc,N);function Ri(u){const p=Na();be(p,new Lc(p))}It.STAT_EVENT="statevent";function Us(u,p){N.call(this,It.STAT_EVENT,u),this.stat=p}E(Us,N);function Vt(u){const p=Na();be(p,new Us(p,u))}It.Ja="timingevent";function Ci(u,p){N.call(this,It.Ja,u),this.size=p}E(Ci,N);function Ii(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},p)}function oi(){this.g=!0}oi.prototype.ua=function(){this.g=!1};function vd(u,p,v,A,B,K){u.info(function(){if(u.g)if(K){var ge="",ze=K.split("&");for(let it=0;it<ze.length;it++){var Dt=ze[it].split("=");if(Dt.length>1){const St=Dt[0];Dt=Dt[1];const Kn=St.split("_");ge=Kn.length>=2&&Kn[1]=="type"?ge+(St+"="+Dt+"&"):ge+(St+"=redacted&")}}}else ge=null;else ge=K;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+p+`
`+v+`
`+ge})}function Vc(u,p,v,A,B,K,ge){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+p+`
`+v+`
`+K+" "+ge})}function Di(u,p,v,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+bd(u,v)+(A?" "+A:"")})}function js(u,p){u.info(function(){return"TIMEOUT: "+p})}oi.prototype.info=function(){};function bd(u,p){if(!u.g)return p;if(!p)return null;try{const K=JSON.parse(p);if(K){for(u=0;u<K.length;u++)if(Array.isArray(K[u])){var v=K[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let ge=1;ge<A.length;ge++)A[ge]=""}}}}return xi(K)}catch{return p}}var zs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Xo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Wo;function Bs(){}E(Bs,Ps),Bs.prototype.g=function(){return new XMLHttpRequest},Wo=new Bs;function sr(u){return encodeURIComponent(String(u))}function Pc(u){var p=1;u=u.split(":");const v=[];for(;p>0&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function li(u,p,v,A){this.j=u,this.i=p,this.l=v,this.S=A||1,this.V=new en(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ci}function ci(){this.i=null,this.g="",this.h=!1}var Pt={},Xt={};function Ni(u,p,v){u.M=1,u.A=qs(jt(p)),u.u=v,u.R=!0,Oa(u,null)}function Oa(u,p){u.F=Date.now(),Oi(u),u.B=jt(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Va(v.i,"t",A),u.C=0,v=u.j.L,u.h=new ci,u.g=Jc(u.j,v?p:null,!u.u),u.P>0&&(u.O=new Ge(m(u.Y,u,u.g),u.P)),p=u.V,v=u.g,A=u.ba;var B="readystatechange";Array.isArray(B)||(B&&(Fn[0]=B.toString()),B=Fn);for(let K=0;K<B.length;K++){const ge=ot(v,B[K],A||p.handleEvent,!1,p.h||p);if(!ge)break;p.g[ge.key]=ge}p=u.J?M(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),Ri(),vd(u.i,u.v,u.B,u.l,u.S,u.u)}li.prototype.ba=function(u){u=u.target;const p=this.O;p&&di(u)==3?p.j():this.Y(u)},li.prototype.Y=function(u){try{if(u==this.g)e:{const ze=di(this.g),Dt=this.g.ya(),it=this.g.ca();if(!(ze<3)&&(ze!=3||this.g&&(this.h.h||this.g.la()||nn(this.g)))){this.K||ze!=4||Dt==7||(Dt==8||it<=0?Ri(3):Ri(2)),ki(this);var p=this.g.ca();this.X=p;var v=Sd(this);if(this.o=p==200,Vc(this.i,this.v,this.B,this.l,this.S,ze,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(A)){var K=A;break t}}K=null}if(u=K)Di(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Mi(this,u);else{this.o=!1,this.m=3,Vt(12),On(this),$n(this);break e}}if(this.R){u=!0;let St;for(;!this.K&&this.C<v.length;)if(St=jc(this,v),St==Xt){ze==4&&(this.m=4,Vt(14),u=!1),Di(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Pt){this.m=4,Vt(15),Di(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else Di(this.i,this.l,St,null),Mi(this,St);if(Uc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ze!=4||v.length!=0||this.h.h||(this.m=1,Vt(16),u=!1),this.o=this.o&&u,!u)Di(this.i,this.l,v,"[Invalid Chunked Response]"),On(this),$n(this);else if(v.length>0&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.aa&&!ge.P&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),dl(ge),ge.P=!0,Vt(11))}}else Di(this.i,this.l,v,null),Mi(this,v);ze==4&&On(this),this.o&&!this.K&&(ze==4?Qc(this.j,this):(this.o=!1,Oi(this)))}else or(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Vt(12)):(this.m=0,Vt(13)),On(this),$n(this)}}}catch{}finally{}};function Sd(u){if(!Uc(u))return u.g.la();const p=nn(u.g);if(p==="")return"";let v="";const A=p.length,B=di(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return On(u),$n(u),"";u.h.i=new d.TextDecoder}for(let K=0;K<A;K++)u.h.h=!0,v+=u.h.i.decode(p[K],{stream:!(B&&K==A-1)});return p.length=0,u.h.g+=v,u.C=0,u.h.g}function Uc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function jc(u,p){var v=u.C,A=p.indexOf(`
`,v);return A==-1?Xt:(v=Number(p.substring(v,A)),isNaN(v)?Pt:(A+=1,A+v>p.length?Xt:(p=p.slice(A,A+v),u.C=A+v,p)))}li.prototype.cancel=function(){this.K=!0,On(this)};function Oi(u){u.T=Date.now()+u.H,ka(u,u.H)}function ka(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Ii(m(u.aa,u),p)}function ki(u){u.D&&(d.clearTimeout(u.D),u.D=null)}li.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(js(this.i,this.B),this.M!=2&&(Ri(),Vt(17)),On(this),this.m=2,$n(this)):ka(this,this.T-u)};function $n(u){u.j.I==0||u.K||Qc(u.j,u)}function On(u){ki(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,Vr(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function Mi(u,p){try{var v=u.j;if(v.I!=0&&(v.g==u||Vi(v.h,u))){if(!u.L&&Vi(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)Ba(v),Gr(v);else break e;Ks(v),Vt(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Ii(m(v.Va,v),6e3));Li(v.h)<=1&&v.ta&&(v.ta=void 0)}else qi(v,11)}else if((u.L||v.g==u)&&Ba(v),!I(p))for(B=v.Ba.g.parse(p),p=0;p<B.length;p++){let it=B[p];const St=it[0];if(!(St<=v.K))if(v.K=St,it=it[1],v.I==2)if(it[0]=="c"){v.M=it[1],v.ba=it[2];const Kn=it[3];Kn!=null&&(v.ka=Kn,v.j.info("VER="+v.ka));const Hi=it[4];Hi!=null&&(v.za=Hi,v.j.info("SVER="+v.za));const fi=it[5];fi!=null&&typeof fi=="number"&&fi>0&&(A=1.5*fi,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const mi=u.g;if(mi){const Xs=mi.g?mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xs){var K=A.h;K.g||Xs.indexOf("spdy")==-1&&Xs.indexOf("quic")==-1&&Xs.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(el(K,K.h),K.h=null))}if(A.G){const qa=mi.g?mi.g.getResponseHeader("X-HTTP-Session-Id"):null;qa&&(A.wa=qa,ct(A.J,A.G,qa))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var ge=u;if(A.na=Wc(A,A.L?A.ba:null,A.W),ge.L){tl(A.h,ge);var ze=ge,Dt=A.O;Dt&&(ze.H=Dt),ze.D&&(ki(ze),Oi(ze)),A.g=ge}else $c(A);v.i.length>0&&Bi(v)}else it[0]!="stop"&&it[0]!="close"||qi(v,7);else v.I==3&&(it[0]=="stop"||it[0]=="close"?it[0]=="stop"?qi(v,7):ul(v):it[0]!="noop"&&v.l&&v.l.qa(it),v.A=0)}}Ri(4)}catch{}}var Ut=class{constructor(u,p){this.g=u,this.map=p}};function Jo(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zo(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Li(u){return u.h?1:u.g?u.g.size:0}function Vi(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function el(u,p){u.g?u.g.add(p):u.h=p}function tl(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Jo.prototype.cancel=function(){if(this.i=nl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function nl(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.G);return p}return L(u.i)}var zc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ma(u,p){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let B,K=null;A>=0?(B=u[v].substring(0,A),K=u[v].substring(A+1)):B=u[v],p(B,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function kn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof kn?(this.l=u.l,Wt(this,u.j),this.o=u.o,this.g=u.g,Ur(this,u.u),this.h=u.h,il(this,Fc(u.i)),this.m=u.m):u&&(p=String(u).match(zc))?(this.l=!1,Wt(this,p[1]||"",!0),this.o=Pi(p[2]||""),this.g=Pi(p[3]||"",!0),Ur(this,p[4]),this.h=Pi(p[5]||"",!0),il(this,p[6]||"",!0),this.m=Pi(p[7]||"")):(this.l=!1,this.i=new zr(null,this.l))}kn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Hs(p,La,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Hs(p,La,!0),"@"),u.push(sr(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Hs(v,v.charAt(0)=="/"?rl:Bc,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Hs(v,qc)),u.join("")},kn.prototype.resolve=function(u){const p=jt(this);let v=!!u.j;v?Wt(p,u.j):v=!!u.o,v?p.o=u.o:v=!!u.g,v?p.g=u.g:v=u.u!=null;var A=u.h;if(v)Ur(p,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=p.h.lastIndexOf("/");B!=-1&&(A=p.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const K=[];for(let ge=0;ge<B.length;){const ze=B[ge++];ze=="."?A&&ge==B.length&&K.push(""):ze==".."?((K.length>1||K.length==1&&K[0]!="")&&K.pop(),A&&ge==B.length&&K.push("")):(K.push(ze),A=!0)}A=K.join("/")}else A=B}return v?p.h=A:v=u.i.toString()!=="",v?il(p,Fc(u.i)):v=!!u.m,v&&(p.m=u.m),p};function jt(u){return new kn(u)}function Wt(u,p,v){u.j=v?Pi(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Ur(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function il(u,p,v){p instanceof zr?(u.i=p,Pa(u.i,u.l)):(v||(p=Hs(p,jr)),u.i=new zr(p,u.l))}function ct(u,p,v){u.i.set(p,v)}function qs(u){return ct(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Pi(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Hs(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,Sn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Sn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var La=/[#\/\?@]/g,Bc=/[#\?:]/g,rl=/[#\?]/g,jr=/[#\?@]/g,qc=/#/g;function zr(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function En(u){u.g||(u.g=new Map,u.h=0,u.i&&Ma(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=zr.prototype,r.add=function(u,p){En(this),this.i=null,u=Br(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Hc(u,p){En(u),p=Br(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function sl(u,p){return En(u),p=Br(u,p),u.g.has(p)}r.forEach=function(u,p){En(this),this.g.forEach(function(v,A){v.forEach(function(B){u.call(p,B,A,this)},this)},this)};function al(u,p){En(u);let v=[];if(typeof p=="string")sl(u,p)&&(v=v.concat(u.g.get(Br(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)v=v.concat(u[p]);return v}r.set=function(u,p){return En(this),this.i=null,u=Br(this,u),sl(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=al(this,u),u.length>0?String(u[0]):p):p};function Va(u,p,v){Hc(u,p),v.length>0&&(u.i=null,u.g.set(Br(u,p),L(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];const B=sr(v);v=al(this,v);for(let K=0;K<v.length;K++){let ge=B;v[K]!==""&&(ge+="="+sr(v[K])),u.push(ge)}}return this.i=u.join("&")};function Fc(u){const p=new zr;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Br(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Pa(u,p){p&&!u.j&&(En(u),u.i=null,u.g.forEach(function(v,A){const B=A.toLowerCase();A!=B&&(Hc(this,A),Va(this,B,v))},u)),u.j=p}function ui(u,p){const v=new oi;if(d.Image){const A=new Image;A.onload=S(Yn,v,"TestLoadImage: loaded",!0,p,A),A.onerror=S(Yn,v,"TestLoadImage: error",!1,p,A),A.onabort=S(Yn,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=S(Yn,v,"TestLoadImage: timeout",!1,p,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function ol(u,p){const v=new oi,A=new AbortController,B=setTimeout(()=>{A.abort(),Yn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(K=>{clearTimeout(B),K.ok?Yn(v,"TestPingServer: ok",!0,p):Yn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(B),Yn(v,"TestPingServer: error",!1,p)})}function Yn(u,p,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function qr(){this.g=new Pr}function Ui(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ui,Ps),Ui.prototype.g=function(){return new Fs(this.i,this.h)};function Fs(u,p){_e.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Fs,_e),r=Fs.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,hi(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||d).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Hr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,hi(this)),this.g&&(this.readyState=3,hi(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ua(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ua(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Hr(this):hi(this),this.readyState==3&&Ua(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Hr(this))},r.Na=function(u){this.g&&(this.response=u,Hr(this))},r.ga=function(){this.g&&Hr(this)};function Hr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,hi(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function hi(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Fs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Qn(u){let p="";return Ee(u,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function Gs(u,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Qn(v),typeof u=="string"?v!=null&&sr(v):ct(u,p,v))}function dt(u){_e.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(dt,_e);var ji=/^https?$/i,ll=["POST","PUT"];r=dt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Wo.g(),this.g.onreadystatechange=x(m(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(K){$s(this,K);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const K of A.keys())v.set(K,A.get(K));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(K=>K.toLowerCase()=="content-type"),B=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(ll,p,void 0)>=0)||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ge]of v)this.g.setRequestHeader(K,ge);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(K){$s(this,K)}};function $s(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,cl(u),ar(u)}function cl(u){u.A||(u.A=!0,be(u,"complete"),be(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,be(this,"complete"),be(this,"abort"),ar(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),dt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Ys(this):this.Xa())},r.Xa=function(){Ys(this)};function Ys(u){if(u.h&&typeof c<"u"){if(u.v&&di(u)==4)setTimeout(u.Ca.bind(u),0);else if(be(u,"readystatechange"),di(u)==4){u.h=!1;try{const K=u.ca();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=K===0){let ge=String(u.D).match(zc)[1]||null;!ge&&d.self&&d.self.location&&(ge=d.self.location.protocol.slice(0,-1)),A=!ji.test(ge?ge.toLowerCase():"")}v=A}if(v)be(u,"complete"),be(u,"success");else{u.o=6;try{var B=di(u)>2?u.g.statusText:""}catch{B=""}u.l=B+" ["+u.ca()+"]",cl(u)}}finally{ar(u)}}}}function ar(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,p||be(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function di(u){return u.g?u.g.readyState:0}r.ca=function(){try{return di(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Ko(p)}};function nn(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function or(u){const p={};u=(u.g&&di(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(I(u[A]))continue;var v=Pc(u[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const K=p[B]||[];p[B]=K,K.push(v)}Re(p,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zi(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Fr(u){this.za=0,this.i=[],this.j=new oi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zi("baseRetryDelayMs",5e3,u),this.Za=zi("retryDelaySeedMs",1e4,u),this.Ta=zi("forwardChannelMaxRetries",2,u),this.va=zi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Jo(u&&u.concurrentRequestLimit),this.Ba=new qr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Fr.prototype,r.ka=8,r.I=1,r.connect=function(u,p,v,A){Vt(0),this.W=u,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Wc(this,null,this.W),Bi(this)};function ul(u){if(ja(u),u.I==3){var p=u.V++,v=jt(u.J);if(ct(v,"SID",u.M),ct(v,"RID",p),ct(v,"TYPE","terminate"),Qs(u,v),p=new li(u,u.j,p),p.M=2,p.A=qs(jt(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=p.A,v=!0),v||(p.g=Jc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Oi(p)}Xc(u)}function Gr(u){u.g&&(dl(u),u.g.cancel(),u.g=null)}function ja(u){Gr(u),u.v&&(d.clearTimeout(u.v),u.v=null),Ba(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Bi(u){if(!Zo(u.h)&&!u.m){u.m=!0;var p=u.Ea;fe||w(),Se||(fe(),Se=!0),D.add(p,u),u.D=0}}function za(u,p){return Li(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Ii(m(u.Ea,u,p),Kc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const B=new li(this,this.j,u);let K=this.o;if(this.U&&(K?(K=M(K),he(K,this.U)):K=this.U),this.u!==null||this.R||(B.J=K,K=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Gc(this,B,p),v=jt(this.J),ct(v,"RID",u),ct(v,"CVER",22),this.G&&ct(v,"X-HTTP-Session-Id",this.G),Qs(this,v),K&&(this.R?p="headers="+sr(Qn(K))+"&"+p:this.u&&Gs(v,this.u,K)),el(this.h,B),this.Ra&&ct(v,"TYPE","init"),this.S?(ct(v,"$req",p),ct(v,"SID","null"),B.U=!0,Ni(B,v,null)):Ni(B,v,p),this.I=2}}else this.I==3&&(u?hl(this,u):this.i.length==0||Zo(this.h)||hl(this))};function hl(u,p){var v;p?v=p.l:v=u.V++;const A=jt(u.J);ct(A,"SID",u.M),ct(A,"RID",v),ct(A,"AID",u.K),Qs(u,A),u.u&&u.o&&Gs(A,u.u,u.o),v=new li(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Gc(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),el(u.h,v),Ni(v,A,p)}function Qs(u,p){u.H&&Ee(u.H,function(v,A){ct(p,A,v)}),u.l&&Ee({},function(v,A){ct(p,A,v)})}function Gc(u,p,v){v=Math.min(u.i.length,v);const A=u.l?m(u.l.Ka,u.l,u):null;e:{var B=u.i;let ze=-1;for(;;){const Dt=["count="+v];ze==-1?v>0?(ze=B[0].g,Dt.push("ofs="+ze)):ze=0:Dt.push("ofs="+ze);let it=!0;for(let St=0;St<v;St++){var K=B[St].g;const Kn=B[St].map;if(K-=ze,K<0)ze=Math.max(0,B[St].g-100),it=!1;else try{K="req"+K+"_"||"";try{var ge=Kn instanceof Map?Kn:Object.entries(Kn);for(const[Hi,fi]of ge){let mi=fi;y(fi)&&(mi=xi(fi)),Dt.push(K+Hi+"="+encodeURIComponent(mi))}}catch(Hi){throw Dt.push(K+"type="+encodeURIComponent("_badmap")),Hi}}catch{A&&A(Kn)}}if(it){ge=Dt.join("&");break e}}ge=void 0}return u=u.i.splice(0,v),p.G=u,ge}function $c(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;fe||w(),Se||(fe(),Se=!0),D.add(p,u),u.A=0}}function Ks(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Ii(m(u.Da,u),Kc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Yc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Ii(m(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Vt(10),Gr(this),Yc(this))};function dl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Yc(u){u.g=new li(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=jt(u.na);ct(p,"RID","rpc"),ct(p,"SID",u.M),ct(p,"AID",u.K),ct(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&ct(p,"TO",u.ia),ct(p,"TYPE","xmlhttp"),Qs(u,p),u.u&&u.o&&Gs(p,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=qs(jt(p)),v.u=null,v.R=!0,Oa(v,u)}r.Va=function(){this.C!=null&&(this.C=null,Gr(this),Ks(this),Vt(19))};function Ba(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function Qc(u,p){var v=null;if(u.g==p){Ba(u),dl(u),u.g=null;var A=2}else if(Vi(u.h,p))v=p.G,tl(u.h,p),A=1;else return;if(u.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var B=u.D;A=Na(),be(A,new Ci(A,v)),Bi(u)}else $c(u);else if(B=p.m,B==3||B==0&&p.X>0||!(A==1&&za(u,p)||A==2&&Ks(u)))switch(v&&v.length>0&&(p=u.h,p.i=p.i.concat(v)),B){case 1:qi(u,5);break;case 4:qi(u,10);break;case 3:qi(u,6);break;default:qi(u,2)}}}function Kc(u,p){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*p}function qi(u,p){if(u.j.info("Error code "+p),p==2){var v=m(u.bb,u),A=u.Ua;const B=!A;A=new kn(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Wt(A,"https"),qs(A),B?ui(A.toString(),v):ol(A.toString(),v)}else Vt(2);u.I=0,u.l&&u.l.pa(p),Xc(u),ja(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),Vt(2)):(this.j.info("Failed to ping google.com"),Vt(1))};function Xc(u){if(u.I=0,u.ja=[],u.l){const p=nl(u.h);(p.length!=0||u.i.length!=0)&&(P(u.ja,p),P(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Wc(u,p,v){var A=v instanceof kn?jt(v):new kn(v);if(A.g!="")p&&(A.g=p+"."+A.g),Ur(A,A.u);else{var B=d.location;A=B.protocol,p=p?p+"."+B.hostname:B.hostname,B=+B.port;const K=new kn(null);A&&Wt(K,A),p&&(K.g=p),B&&Ur(K,B),v&&(K.h=v),A=K}return v=u.G,p=u.wa,v&&p&&ct(A,v,p),ct(A,"VER",u.ka),Qs(u,A),A}function Jc(u,p,v){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new dt(new Ui({ab:v})):new dt(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zc(){}r=Zc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function $r(){}$r.prototype.g=function(u,p){return new _n(u,p)};function _n(u,p){_e.call(this),this.g=new Fr(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!I(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new lr(this)}E(_n,_e),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){ul(this.g)},_n.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=xi(u),u=v);p.i.push(new Ut(p.Ya++,u)),p.I==3&&Bi(p)},_n.prototype.N=function(){this.g.l=null,delete this.j,ul(this.g),delete this.g,_n.Z.N.call(this)};function eu(u){tn.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}E(eu,tn);function tu(){Gn.call(this),this.status=1}E(tu,Gn);function lr(u){this.g=u}E(lr,Zc),lr.prototype.ra=function(){be(this.g,"a")},lr.prototype.qa=function(u){be(this.g,new eu(u))},lr.prototype.pa=function(u){be(this.g,new tu)},lr.prototype.oa=function(){be(this.g,"b")},$r.prototype.createWebChannel=$r.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,HS=function(){return new $r},qS=function(){return Na()},BS=It,Km={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},zs.NO_ERROR=0,zs.TIMEOUT=8,zs.HTTP_ERROR=6,bh=zs,Xo.COMPLETE="complete",zS=Xo,Da.EventType=ai,ai.OPEN="a",ai.CLOSE="b",ai.ERROR="c",ai.MESSAGE="d",_e.prototype.listen=_e.prototype.J,ec=Da,dt.prototype.listenOnce=dt.prototype.K,dt.prototype.getLastError=dt.prototype.Ha,dt.prototype.getLastErrorCode=dt.prototype.ya,dt.prototype.getStatus=dt.prototype.ca,dt.prototype.getResponseJson=dt.prototype.La,dt.prototype.getResponseText=dt.prototype.la,dt.prototype.send=dt.prototype.ea,dt.prototype.setWithCredentials=dt.prototype.Fa,jS=dt}).apply(typeof ah<"u"?ah:typeof self<"u"?self:typeof window<"u"?window:{});const Ev="@firebase/firestore",Tv="4.9.2";class mn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mn.UNAUTHENTICATED=new mn(null),mn.GOOGLE_CREDENTIALS=new mn("google-credentials-uid"),mn.FIRST_PARTY=new mn("first-party-uid"),mn.MOCK_USER=new mn("mock-user");let Ho="12.3.0";const Ta=new mp("@firebase/firestore");function bo(){return Ta.logLevel}function Te(r,...e){if(Ta.logLevel<=Xe.DEBUG){const n=e.map(Rp);Ta.debug(`Firestore (${Ho}): ${r}`,...n)}}function kr(r,...e){if(Ta.logLevel<=Xe.ERROR){const n=e.map(Rp);Ta.error(`Firestore (${Ho}): ${r}`,...n)}}function No(r,...e){if(Ta.logLevel<=Xe.WARN){const n=e.map(Rp);Ta.warn(`Firestore (${Ho}): ${r}`,...n)}}function Rp(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function Me(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,FS(r,s,n)}function FS(r,e,n){let s=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw kr(s),new Error(s)}function at(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||FS(e,o,s)}function Pe(r,e){return r}const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Lr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Wi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class GS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(mn.UNAUTHENTICATED)))}shutdown(){}}class mC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pC{constructor(e){this.t=e,this.currentUser=mn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){at(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Wi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Wi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},y=g=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>y(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?y(g):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Wi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(at(typeof s.accessToken=="string",31837,{l:s}),new GS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return at(e===null||typeof e=="string",2055,{h:e}),new mn(e)}}class gC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=mn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new gC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(mn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Av{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){at(this.o===void 0,3512);const s=c=>{c.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,Te("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Av(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(at(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Av(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Cp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=vC(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function We(r,e){return r<e?-1:r>e?1:0}function Xm(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return Im(o)===Im(c)?We(o,c):Im(o)?1:-1}return We(r.length,e.length)}const bC=55296,SC=57343;function Im(r){const e=r.charCodeAt(0);return e>=bC&&e<=SC}function Oo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const wv="__name__";class Qi{constructor(e,n,s){n===void 0?n=0:n>e.length&&Me(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&Me(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Qi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=Qi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return We(e.length,n.length)}static compareSegments(e,n){const s=Qi.isNumericId(e),o=Qi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Qi.extractNumericId(e).compare(Qi.extractNumericId(n)):Xm(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class yt extends Qi{construct(e,n,s){return new yt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ye(J.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new yt(n)}static emptyPath(){return new yt([])}}const EC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class un extends Qi{construct(e,n,s){return new un(e,n,s)}static isValidIdentifier(e){return EC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),un.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wv}static keyField(){return new un([wv])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new ye(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new ye(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ye(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(c(),o++)}if(c(),d)throw new ye(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new un(n)}static emptyPath(){return new un([])}}class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(yt.fromString(e))}static fromName(e){return new Ie(yt.fromString(e).popFirst(5))}static empty(){return new Ie(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return yt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new yt(e.slice()))}}function $S(r,e,n){if(!n)throw new ye(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function TC(r,e,n,s){if(e===!0&&s===!0)throw new ye(J.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function xv(r){if(!Ie.isDocumentKey(r))throw new ye(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function Rv(r){if(Ie.isDocumentKey(r))throw new ye(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function YS(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Xh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Me(12329,{type:typeof r})}function gn(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ye(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(r);throw new ye(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function AC(r,e){if(e<=0)throw new ye(J.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function Yt(r,e){const n={typeString:r};return e&&(n.value=e),n}function Rc(r,e){if(!YS(r))throw new ye(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new ye(J.INVALID_ARGUMENT,n);return!0}const Cv=-62135596800,Iv=1e6;class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Iv);return new lt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ye(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Cv)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Iv}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:lt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,lt._jsonSchema))return new lt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Cv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}lt._jsonSchemaVersion="firestore/timestamp/1.0",lt._jsonSchema={type:Yt("string",lt._jsonSchemaVersion),seconds:Yt("number"),nanoseconds:Yt("number")};class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new lt(0,0))}static max(){return new Ue(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const mc=-1;function wC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ue.fromTimestamp(s===1e9?new lt(n+1,0):new lt(n,s));return new Is(o,Ie.empty(),e)}function xC(r){return new Is(r.readTime,r.key,mc)}class Is{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Is(Ue.min(),Ie.empty(),mc)}static max(){return new Is(Ue.max(),Ie.empty(),mc)}}function RC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Ie.comparator(r.documentKey,e.documentKey),n!==0?n:We(r.largestBatchId,e.largestBatchId))}const CC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Fo(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==CC)throw r;Te("LocalStore","Unexpectedly lost primary lease")}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new se(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof se?n:se.resolve(n)}catch(n){return se.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):se.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):se.reject(n)}static resolve(e){return new se(((n,s)=>{n(e)}))}static reject(e){return new se(((n,s)=>{s(e)}))}static waitFor(e){return new se(((n,s)=>{let o=0,c=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=se.resolve(!1);for(const s of e)n=n.next((o=>o?se.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new se(((s,o)=>{const c=e.length,d=new Array(c);let y=0;for(let g=0;g<c;g++){const m=g;n(e[m]).next((S=>{d[m]=S,++y,y===c&&s(d)}),(S=>o(S)))}}))}static doWhile(e,n){return new se(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function DC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Go(r){return r.name==="IndexedDbTransactionError"}class Wh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Wh.ce=-1;const Ip=-1;function Jh(r){return r==null}function Lh(r){return r===0&&1/r==-1/0}function NC(r){return typeof r=="number"&&Number.isInteger(r)&&!Lh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const QS="";function OC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Dv(e)),e=kC(r.get(n),e);return Dv(e)}function kC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case QS:n+="";break;default:n+=c}}return n}function Dv(r){return r+QS+""}function Nv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ls(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function MC(r,e){const n=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.push(e(r[s],s,r));return n}function KS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class At{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??cn.RED,this.left=o??cn.EMPTY,this.right=c??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new cn(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return cn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Kt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ov(this.data.getIterator())}getIteratorFrom(e){return new Ov(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof Kt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Kt(this.comparator);return n.data=e,n}}class Ov{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Hn{constructor(e){this.fields=e,e.sort(un.comparator)}static empty(){return new Hn([])}unionWith(e){let n=new Kt(un.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class XS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new XS("Invalid base64 string: "+c):c}})(e);return new hn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new hn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const LC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ds(r){if(at(!!r,39018),typeof r=="string"){let e=0;const n=LC.exec(r);if(at(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:Mt(r.seconds),nanos:Mt(r.nanos)}}function Mt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function Ns(r){return typeof r=="string"?hn.fromBase64String(r):hn.fromUint8Array(r)}const WS="server_timestamp",JS="__type__",ZS="__previous_value__",eE="__local_write_time__";function Zh(r){return(r?.mapValue?.fields||{})[JS]?.stringValue===WS}function ed(r){const e=r.mapValue.fields[ZS];return Zh(e)?ed(e):e}function pc(r){const e=Ds(r.mapValue.fields[eE].timestampValue);return new lt(e.seconds,e.nanos)}class VC{constructor(e,n,s,o,c,d,y,g,m,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=S}}const Vh="(default)";class gc{constructor(e,n){this.projectId=e,this.database=n||Vh}static empty(){return new gc("","")}get isDefaultDatabase(){return this.database===Vh}isEqual(e){return e instanceof gc&&e.projectId===this.projectId&&e.database===this.database}}const tE="__type__",PC="__max__",lh={mapValue:{}},nE="__vector__",Ph="value";function Os(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Zh(r)?4:jC(r)?9007199254740991:UC(r)?10:11:Me(28295,{value:r})}function ir(r,e){if(r===e)return!0;const n=Os(r);if(n!==Os(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return pc(r).isEqual(pc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=Ds(o.timestampValue),y=Ds(c.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return Ns(o.bytesValue).isEqual(Ns(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return Mt(o.geoPointValue.latitude)===Mt(c.geoPointValue.latitude)&&Mt(o.geoPointValue.longitude)===Mt(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return Mt(o.integerValue)===Mt(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=Mt(o.doubleValue),y=Mt(c.doubleValue);return d===y?Lh(d)===Lh(y):isNaN(d)&&isNaN(y)}return!1})(r,e);case 9:return Oo(r.arrayValue.values||[],e.arrayValue.values||[],ir);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},y=c.mapValue.fields||{};if(Nv(d)!==Nv(y))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(y[g]===void 0||!ir(d[g],y[g])))return!1;return!0})(r,e);default:return Me(52216,{left:r})}}function yc(r,e){return(r.values||[]).find((n=>ir(n,e)))!==void 0}function ko(r,e){if(r===e)return 0;const n=Os(r),s=Os(e);if(n!==s)return We(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return We(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const y=Mt(c.integerValue||c.doubleValue),g=Mt(d.integerValue||d.doubleValue);return y<g?-1:y>g?1:y===g?0:isNaN(y)?isNaN(g)?0:-1:1})(r,e);case 3:return kv(r.timestampValue,e.timestampValue);case 4:return kv(pc(r),pc(e));case 5:return Xm(r.stringValue,e.stringValue);case 6:return(function(c,d){const y=Ns(c),g=Ns(d);return y.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const y=c.split("/"),g=d.split("/");for(let m=0;m<y.length&&m<g.length;m++){const S=We(y[m],g[m]);if(S!==0)return S}return We(y.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const y=We(Mt(c.latitude),Mt(d.latitude));return y!==0?y:We(Mt(c.longitude),Mt(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Mv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const y=c.fields||{},g=d.fields||{},m=y[Ph]?.arrayValue,S=g[Ph]?.arrayValue,E=We(m?.values?.length||0,S?.values?.length||0);return E!==0?E:Mv(m,S)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===lh.mapValue&&d===lh.mapValue)return 0;if(c===lh.mapValue)return 1;if(d===lh.mapValue)return-1;const y=c.fields||{},g=Object.keys(y),m=d.fields||{},S=Object.keys(m);g.sort(),S.sort();for(let E=0;E<g.length&&E<S.length;++E){const x=Xm(g[E],S[E]);if(x!==0)return x;const L=ko(y[g[E]],m[S[E]]);if(L!==0)return L}return We(g.length,S.length)})(r.mapValue,e.mapValue);default:throw Me(23264,{he:n})}}function kv(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return We(r,e);const n=Ds(r),s=Ds(e),o=We(n.seconds,s.seconds);return o!==0?o:We(n.nanos,s.nanos)}function Mv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=ko(n[o],s[o]);if(c)return c}return We(n.length,s.length)}function Mo(r){return Wm(r)}function Wm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=Ds(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return Ns(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Ie.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Wm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${Wm(n.fields[d])}`;return o+"}"})(r.mapValue):Me(61005,{value:r})}function Sh(r){switch(Os(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ed(r);return e?16+Sh(e):16;case 5:return 2*r.stringValue.length;case 6:return Ns(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+Sh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ls(s.fields,((c,d)=>{o+=c.length+Sh(d)})),o})(r.mapValue);default:throw Me(13486,{value:r})}}function Uh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Jm(r){return!!r&&"integerValue"in r}function Dp(r){return!!r&&"arrayValue"in r}function Lv(r){return!!r&&"nullValue"in r}function Vv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Eh(r){return!!r&&"mapValue"in r}function UC(r){return(r?.mapValue?.fields||{})[tE]?.stringValue===nE}function oc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ls(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=oc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oc(r.arrayValue.values[n]);return e}return{...r}}function jC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PC}class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oc(n)}setAll(e){let n=un.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=oc(d):o.push(y.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ls(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new Dn(oc(this.value))}}function iE(r){const e=[];return Ls(r.fields,((n,s)=>{const o=new un([n]);if(Eh(s)){const c=iE(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Hn(e)}class pn{constructor(e,n,s,o,c,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=y}static newInvalidDocument(e){return new pn(e,0,Ue.min(),Ue.min(),Ue.min(),Dn.empty(),0)}static newFoundDocument(e,n,s,o){return new pn(e,1,n,Ue.min(),s,o,0)}static newNoDocument(e,n){return new pn(e,2,n,Ue.min(),Ue.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new pn(e,3,n,Ue.min(),Ue.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lo{constructor(e,n){this.position=e,this.inclusive=n}}function Pv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?s=Ie.comparator(Ie.fromName(d.referenceValue),n.key):s=ko(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Uv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!ir(r.position[n],e.position[n]))return!1;return!0}class _c{constructor(e,n="asc"){this.field=e,this.dir=n}}function zC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class rE{}class $t extends rE{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new qC(e,n,s):n==="array-contains"?new GC(e,s):n==="in"?new $C(e,s):n==="not-in"?new YC(e,s):n==="array-contains-any"?new QC(e,s):new $t(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new HC(e,s):new FC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ko(n,this.value)):n!==null&&Os(this.value)===Os(n)&&this.matchesComparison(ko(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ei extends rE{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Ei(e,n)}matches(e){return sE(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sE(r){return r.op==="and"}function aE(r){return BC(r)&&sE(r)}function BC(r){for(const e of r.filters)if(e instanceof Ei)return!1;return!0}function Zm(r){if(r instanceof $t)return r.field.canonicalString()+r.op.toString()+Mo(r.value);if(aE(r))return r.filters.map((e=>Zm(e))).join(",");{const e=r.filters.map((n=>Zm(n))).join(",");return`${r.op}(${e})`}}function oE(r,e){return r instanceof $t?(function(s,o){return o instanceof $t&&s.op===o.op&&s.field.isEqual(o.field)&&ir(s.value,o.value)})(r,e):r instanceof Ei?(function(s,o){return o instanceof Ei&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,y)=>c&&oE(d,o.filters[y])),!0):!1})(r,e):void Me(19439)}function lE(r){return r instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`})(r):r instanceof Ei?(function(n){return n.op.toString()+" {"+n.getFilters().map(lE).join(" ,")+"}"})(r):"Filter"}class qC extends $t{constructor(e,n,s){super(e,n,s),this.key=Ie.fromName(s.referenceValue)}matches(e){const n=Ie.comparator(e.key,this.key);return this.matchesComparison(n)}}class HC extends $t{constructor(e,n){super(e,"in",n),this.keys=cE("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FC extends $t{constructor(e,n){super(e,"not-in",n),this.keys=cE("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function cE(r,e){return(e.arrayValue?.values||[]).map((n=>Ie.fromName(n.referenceValue)))}class GC extends $t{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dp(n)&&yc(n.arrayValue,this.value)}}class $C extends $t{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&yc(this.value.arrayValue,n)}}class YC extends $t{constructor(e,n){super(e,"not-in",n)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!yc(this.value.arrayValue,n)}}class QC extends $t{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>yc(this.value.arrayValue,s)))}}class KC{constructor(e,n=null,s=[],o=[],c=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=y,this.Te=null}}function jv(r,e=null,n=[],s=[],o=null,c=null,d=null){return new KC(r,e,n,s,o,c,d)}function Np(r){const e=Pe(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Zm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Jh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>Mo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>Mo(s))).join(",")),e.Te=n}return e.Te}function Op(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!zC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!oE(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Uv(r.startAt,e.startAt)&&Uv(r.endAt,e.endAt)}function ep(r){return Ie.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class wa{constructor(e,n=null,s=[],o=[],c=null,d="F",y=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=y,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XC(r,e,n,s,o,c,d,y){return new wa(r,e,n,s,o,c,d,y)}function td(r){return new wa(r)}function zv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function kp(r){return r.collectionGroup!==null}function Ro(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new Kt(un.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(y=y.add(m.field))}))})),y})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new _c(c,s))})),n.has(un.keyField().canonicalString())||e.Ie.push(new _c(un.keyField(),s))}return e.Ie}function Ji(r){const e=Pe(r);return e.Ee||(e.Ee=uE(e,Ro(r))),e.Ee}function WC(r){const e=Pe(r);return e.de||(e.de=uE(e,r.explicitOrderBy)),e.de}function uE(r,e){if(r.limitType==="F")return jv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new _c(o.field,c)}));const n=r.endAt?new Lo(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Lo(r.startAt.position,r.startAt.inclusive):null;return jv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function tp(r,e){const n=r.filters.concat([e]);return new wa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function jh(r,e,n){return new wa(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function nd(r,e){return Op(Ji(r),Ji(e))&&r.limitType===e.limitType}function hE(r){return`${Np(Ji(r))}|lt:${r.limitType}`}function So(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>lE(o))).join(", ")}]`),Jh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>Mo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>Mo(o))).join(",")),`Target(${s})`})(Ji(r))}; limitType=${r.limitType})`}function id(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Ie.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of Ro(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,g){const m=Pv(d,y,g);return d.inclusive?m<=0:m<0})(s.startAt,Ro(s),o)||s.endAt&&!(function(d,y,g){const m=Pv(d,y,g);return d.inclusive?m>=0:m>0})(s.endAt,Ro(s),o))})(r,e)}function JC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function dE(r){return(e,n)=>{let s=!1;for(const o of Ro(r)){const c=ZC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function ZC(r,e,n){const s=r.field.isKeyField()?Ie.comparator(e.key,n.key):(function(c,d,y){const g=d.data.field(c),m=y.data.field(c);return g!==null&&m!==null?ko(g,m):Me(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Me(19790,{direction:r.dir})}}class xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ls(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return KS(this.inner)}size(){return this.innerSize}}const e2=new At(Ie.comparator);function Mr(){return e2}const fE=new At(Ie.comparator);function tc(...r){let e=fE;for(const n of r)e=e.insert(n.key,n);return e}function mE(r){let e=fE;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ga(){return lc()}function pE(){return lc()}function lc(){return new xa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const t2=new At(Ie.comparator),n2=new Kt(Ie.comparator);function Je(...r){let e=n2;for(const n of r)e=e.add(n);return e}const i2=new Kt(We);function r2(){return i2}function Mp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function gE(r){return{integerValue:""+r}}function yE(r,e){return NC(e)?gE(e):Mp(r,e)}class rd{constructor(){this._=void 0}}function s2(r,e,n){return r instanceof vc?(function(o,c){const d={fields:{[JS]:{stringValue:WS},[eE]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Zh(c)&&(c=ed(c)),c&&(d.fields[ZS]=c),{mapValue:d}})(n,e):r instanceof Vo?vE(r,e):r instanceof Po?bE(r,e):(function(o,c){const d=_E(o,c),y=Bv(d)+Bv(o.Ae);return Jm(d)&&Jm(o.Ae)?gE(y):Mp(o.serializer,y)})(r,e)}function a2(r,e,n){return r instanceof Vo?vE(r,e):r instanceof Po?bE(r,e):n}function _E(r,e){return r instanceof bc?(function(s){return Jm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class vc extends rd{}class Vo extends rd{constructor(e){super(),this.elements=e}}function vE(r,e){const n=SE(e);for(const s of r.elements)n.some((o=>ir(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Po extends rd{constructor(e){super(),this.elements=e}}function bE(r,e){let n=SE(e);for(const s of r.elements)n=n.filter((o=>!ir(o,s)));return{arrayValue:{values:n}}}class bc extends rd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Bv(r){return Mt(r.integerValue||r.doubleValue)}function SE(r){return Dp(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class sd{constructor(e,n){this.field=e,this.transform=n}}function o2(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Vo&&o instanceof Vo||s instanceof Po&&o instanceof Po?Oo(s.elements,o.elements,ir):s instanceof bc&&o instanceof bc?ir(s.Ae,o.Ae):s instanceof vc&&o instanceof vc})(r.transform,e.transform)}class l2{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Th(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class ad{}function EE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new od(r.key,bn.none()):new Cc(r.key,r.data,bn.none());{const n=r.data,s=Dn.empty();let o=new Kt(un.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new Vs(r.key,s,new Hn(o.toArray()),bn.none())}}function c2(r,e,n){r instanceof Cc?(function(o,c,d){const y=o.value.clone(),g=Hv(o.fieldTransforms,c,d.transformResults);y.setAll(g),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,n):r instanceof Vs?(function(o,c,d){if(!Th(o.precondition,c))return void c.convertToUnknownDocument(d.version);const y=Hv(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(TE(o)),g.setAll(y),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function cc(r,e,n,s){return r instanceof Cc?(function(c,d,y,g){if(!Th(c.precondition,d))return y;const m=c.value.clone(),S=Fv(c.fieldTransforms,g,d);return m.setAll(S),d.convertToFoundDocument(d.version,m).setHasLocalMutations(),null})(r,e,n,s):r instanceof Vs?(function(c,d,y,g){if(!Th(c.precondition,d))return y;const m=Fv(c.fieldTransforms,g,d),S=d.data;return S.setAll(TE(c)),S.setAll(m),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),y===null?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(r,e,n,s):(function(c,d,y){return Th(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(r,e,n)}function u2(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=_E(s.transform,o||null);c!=null&&(n===null&&(n=Dn.empty()),n.set(s.field,c))}return n||null}function qv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Oo(s,o,((c,d)=>o2(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Cc extends ad{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Vs extends ad{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function TE(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function Hv(r,e,n){const s=new Map;at(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,y=e.data.field(c.field);s.set(c.field,a2(d,y,n[o]))}return s}function Fv(r,e,n){const s=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);s.set(o.field,s2(c,d,e))}return s}class od extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends ad{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class d2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&c2(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=cc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=cc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=pE();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let y=this.applyToLocalView(d,c.mutatedFields);y=n.has(o.key)?null:y;const g=EE(d,y);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(Ue.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Je())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,((n,s)=>qv(n,s)))&&Oo(this.baseMutations,e.baseMutations,((n,s)=>qv(n,s)))}}class Lp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){at(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return t2})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new Lp(e,n,s,o)}}class f2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class m2{constructor(e,n,s){this.alias=e,this.aggregateType=n,this.fieldPath=s}}class p2{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ft,et;function g2(r){switch(r){case J.OK:return Me(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Me(15467,{code:r})}}function AE(r){if(r===void 0)return kr("GRPC error has no .code"),J.UNKNOWN;switch(r){case Ft.OK:return J.OK;case Ft.CANCELLED:return J.CANCELLED;case Ft.UNKNOWN:return J.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return J.INTERNAL;case Ft.UNAVAILABLE:return J.UNAVAILABLE;case Ft.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ft.NOT_FOUND:return J.NOT_FOUND;case Ft.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ft.ABORTED:return J.ABORTED;case Ft.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ft.DATA_LOSS:return J.DATA_LOSS;default:return Me(39323,{code:r})}}(et=Ft||(Ft={}))[et.OK=0]="OK",et[et.CANCELLED=1]="CANCELLED",et[et.UNKNOWN=2]="UNKNOWN",et[et.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",et[et.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",et[et.NOT_FOUND=5]="NOT_FOUND",et[et.ALREADY_EXISTS=6]="ALREADY_EXISTS",et[et.PERMISSION_DENIED=7]="PERMISSION_DENIED",et[et.UNAUTHENTICATED=16]="UNAUTHENTICATED",et[et.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",et[et.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",et[et.ABORTED=10]="ABORTED",et[et.OUT_OF_RANGE=11]="OUT_OF_RANGE",et[et.UNIMPLEMENTED=12]="UNIMPLEMENTED",et[et.INTERNAL=13]="INTERNAL",et[et.UNAVAILABLE=14]="UNAVAILABLE",et[et.DATA_LOSS=15]="DATA_LOSS";function y2(){return new TextEncoder}const _2=new xs([4294967295,4294967295],0);function Gv(r){const e=y2().encode(r),n=new US;return n.update(e),new Uint8Array(n.digest())}function $v(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new xs([n,s],0),new xs([o,c],0)]}class Vp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new nc(`Invalid padding: ${n}`);if(s<0)throw new nc(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new nc(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new nc(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(xs.fromNumber(s)));return o.compare(_2)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Gv(e),[s,o]=$v(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Vp(c,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=Gv(e),[s,o]=$v(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class nc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ld{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ic.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ld(Ue.min(),o,new At(We),Mr(),Je())}}class Ic{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ic(s,n,Je(),Je(),Je())}}class Ah{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class wE{constructor(e,n){this.targetId=e,this.Ce=n}}class xE{constructor(e,n,s=hn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class Yv{constructor(){this.ve=0,this.Fe=Qv(),this.Me=hn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Je(),n=Je(),s=Je();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:Me(38017,{changeType:c})}})),new Ic(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Qv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,at(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Mr(),this.Je=ch(),this.He=ch(),this.Ye=new At(We)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(ep(c))if(s===0){const d=new Ie(c.path);this.et(n,d,pn.newNoDocument(d,Ue.min()))}else at(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),g=y?this.ct(y,e,d):1;if(g!==0){this.it(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,y;try{d=Ns(s).toUint8Array()}catch(g){if(g instanceof XS)return No("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{y=new Vp(d,o,c)}catch(g){return No(g instanceof nc?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(y)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const y=this.ot(d);if(y){if(c.current&&ep(y.target)){const g=new Ie(y.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,pn.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Je();this.He.forEach(((c,d)=>{let y=!0;d.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new ld(e,n,this.Ye,this.je,s);return this.je=Mr(),this.Je=ch(),this.He=ch(),this.Ye=new At(We),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Yv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new Kt(We),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new Kt(We),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Te("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Yv),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ch(){return new At(Ie.comparator)}function Qv(){return new At(Ie.comparator)}const b2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},E2={and:"AND",or:"OR"};class T2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function np(r,e){return r.useProto3Json||Jh(e)?e:{value:e}}function zh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function A2(r,e){return zh(r,e.toTimestamp())}function Zi(r){return at(!!r,49232),Ue.fromTimestamp((function(n){const s=Ds(n);return new lt(s.seconds,s.nanos)})(r))}function Pp(r,e){return ip(r,e).canonicalString()}function ip(r,e){const n=(function(o){return new yt(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function CE(r){const e=yt.fromString(r);return at(ME(e),10190,{key:e.toString()}),e}function rp(r,e){return Pp(r.databaseId,e.path)}function Dm(r,e){const n=CE(e);if(n.get(1)!==r.databaseId.projectId)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ye(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Ie(DE(n))}function IE(r,e){return Pp(r.databaseId,e)}function w2(r){const e=CE(r);return e.length===4?yt.emptyPath():DE(e)}function sp(r){return new yt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function DE(r){return at(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Kv(r,e,n){return{name:rp(r,e),fields:n.value.mapValue.fields}}function x2(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Me(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(m,S){return m.useProto3Json?(at(S===void 0||typeof S=="string",58123),hn.fromBase64String(S||"")):(at(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),hn.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(m){const S=m.code===void 0?J.UNKNOWN:AE(m.code);return new ye(S,m.message||"")})(d);n=new xE(s,o,c,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Dm(r,s.document.name),c=Zi(s.document.updateTime),d=s.document.createTime?Zi(s.document.createTime):Ue.min(),y=new Dn({mapValue:{fields:s.document.fields}}),g=pn.newFoundDocument(o,c,d,y),m=s.targetIds||[],S=s.removedTargetIds||[];n=new Ah(m,S,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Dm(r,s.document),c=s.readTime?Zi(s.readTime):Ue.min(),d=pn.newNoDocument(o,c),y=s.removedTargetIds||[];n=new Ah([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Dm(r,s.document),c=s.removedTargetIds||[];n=new Ah([],c,o,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new p2(o,c),y=s.targetId;n=new wE(y,d)}}return n}function R2(r,e){let n;if(e instanceof Cc)n={update:Kv(r,e.key,e.value)};else if(e instanceof od)n={delete:rp(r,e.key)};else if(e instanceof Vs)n={update:Kv(r,e.key,e.data),updateMask:V2(e.fieldMask)};else{if(!(e instanceof h2))return Me(16599,{Vt:e.type});n={verify:rp(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const y=d.transform;if(y instanceof vc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Vo)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Po)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof bc)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw Me(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:A2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Me(27497)})(r,e.precondition)),n}function C2(r,e){return r&&r.length>0?(at(e!==void 0,14353),r.map((n=>(function(o,c){let d=o.updateTime?Zi(o.updateTime):Zi(c);return d.isEqual(Ue.min())&&(d=Zi(c)),new l2(d,o.transformResults||[])})(n,e)))):[]}function I2(r,e){return{documents:[IE(r,e.path)]}}function NE(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=IE(r,o);const c=(function(m){if(m.length!==0)return kE(Ei.create(m,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(m){if(m.length!==0)return m.map((S=>(function(x){return{field:Ss(x.field),direction:k2(x.dir)}})(S)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=np(r,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function D2(r,e,n,s){const{ft:o,parent:c}=NE(r,e),d={},y=[];let g=0;return n.forEach((m=>{const S="aggregate_"+g++;d[S]=m.alias,m.aggregateType==="count"?y.push({alias:S,count:{}}):m.aggregateType==="avg"?y.push({alias:S,avg:{field:Ss(m.fieldPath)}}):m.aggregateType==="sum"&&y.push({alias:S,sum:{field:Ss(m.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:y,structuredQuery:o.structuredQuery},parent:o.parent},gt:d,parent:c}}function N2(r){let e=w2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){at(s===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=(function(E){const x=OE(E);return x instanceof Ei&&aE(x)?x.getFilters():[x]})(n.where));let d=[];n.orderBy&&(d=(function(E){return E.map((x=>(function(P){return new _c(Eo(P.field),(function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(P.direction))})(x)))})(n.orderBy));let y=null;n.limit&&(y=(function(E){let x;return x=typeof E=="object"?E.value:E,Jh(x)?null:x})(n.limit));let g=null;n.startAt&&(g=(function(E){const x=!!E.before,L=E.values||[];return new Lo(L,x)})(n.startAt));let m=null;return n.endAt&&(m=(function(E){const x=!E.before,L=E.values||[];return new Lo(L,x)})(n.endAt)),XC(e,o,d,c,y,"F",g,m)}function O2(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function OE(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Eo(n.unaryFilter.field);return $t.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Eo(n.unaryFilter.field);return $t.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Eo(n.unaryFilter.field);return $t.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Eo(n.unaryFilter.field);return $t.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(r):r.fieldFilter!==void 0?(function(n){return $t.create(Eo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return Ei.create(n.compositeFilter.filters.map((s=>OE(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(n.compositeFilter.op))})(r):Me(30097,{filter:r})}function k2(r){return b2[r]}function M2(r){return S2[r]}function L2(r){return E2[r]}function Ss(r){return{fieldPath:r.canonicalString()}}function Eo(r){return un.fromServerFormat(r.fieldPath)}function kE(r){return r instanceof $t?(function(n){if(n.op==="=="){if(Vv(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NAN"}};if(Lv(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Vv(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NAN"}};if(Lv(n.value))return{unaryFilter:{field:Ss(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ss(n.field),op:M2(n.op),value:n.value}}})(r):r instanceof Ei?(function(n){const s=n.getFilters().map((o=>kE(o)));return s.length===1?s[0]:{compositeFilter:{op:L2(n.op),filters:s}}})(r):Me(54877,{filter:r})}function V2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ME(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class Es{constructor(e,n,s,o,c=Ue.min(),d=Ue.min(),y=hn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=g}withSequenceNumber(e){return new Es(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Es(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class P2{constructor(e){this.yt=e}}function U2(r){const e=N2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?jh(e,e.limit,"L"):e}class j2{constructor(){this.Cn=new z2}addToCollectionParentIndex(e,n){return this.Cn.add(n),se.resolve()}getCollectionParents(e,n){return se.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return se.resolve()}deleteFieldIndex(e,n){return se.resolve()}deleteAllFieldIndexes(e){return se.resolve()}createTargetIndexes(e,n){return se.resolve()}getDocumentsMatchingTarget(e,n){return se.resolve(null)}getIndexType(e,n){return se.resolve(0)}getFieldIndexes(e,n){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,n){return se.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,n){return se.resolve(Is.min())}updateCollectionGroup(e,n,s){return se.resolve()}updateIndexEntries(e,n){return se.resolve()}}class z2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new Kt(yt.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Kt(yt.comparator)).toArray()}}const Xv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LE=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(LE,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);class Uo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Uo(0)}static cr(){return new Uo(-1)}}const Wv="LruGarbageCollector",B2=1048576;function Jv([r,e],[n,s]){const o=We(r,n);return o===0?We(e,s):o}class q2{constructor(e){this.Ir=e,this.buffer=new Kt(Jv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Jv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(Wv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Go(n)?Te(Wv,"Ignoring IndexedDB error during garbage collection: ",n):await Fo(n)}await this.Vr(3e5)}))}}class F2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return se.resolve(Wh.ce);const s=new q2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Xv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,y,g,m;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,d=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,y=Date.now(),this.removeTargets(e,s,n)))).next((E=>(c=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(m=Date.now(),bo()<=Xe.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${c} targets in `+(g-y)+`ms
	Removed ${E} documents in `+(m-g)+`ms
Total Duration: ${m-S}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:E}))))}}function G2(r,e){return new F2(r,e)}class $2{constructor(){this.changes=new xa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?se.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Q2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&cc(s.mutation,o,Hn.empty(),lt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Je()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Je()){const o=ga();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=tc();return c.forEach(((y,g)=>{d=d.insert(y,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=ga();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Je())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let c=Mr();const d=lc(),y=(function(){return lc()})();return n.forEach(((g,m)=>{const S=s.get(m.key);o.has(m.key)&&(S===void 0||S.mutation instanceof Vs)?c=c.insert(m.key,m):S!==void 0?(d.set(m.key,S.mutation.getFieldMask()),cc(S.mutation,m,S.mutation.getFieldMask(),lt.now())):d.set(m.key,Hn.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((m,S)=>d.set(m,S))),n.forEach(((m,S)=>y.set(m,new Y2(S,d.get(m)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=lc();let o=new At(((d,y)=>d-y)),c=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((g=>{const m=n.get(g);if(m===null)return;let S=s.get(g)||Hn.empty();S=y.applyToLocalView(m,S),s.set(g,S);const E=(o.get(y.batchId)||Je()).add(g);o=o.insert(y.batchId,E)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const g=y.getNext(),m=g.key,S=g.value,E=pE();S.forEach((x=>{if(!c.has(x)){const L=EE(n.get(x),s.get(x));L!==null&&E.set(x,L),c=c.add(x)}})),d.push(this.documentOverlayCache.saveOverlays(e,m,E))}return se.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Ie.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):kp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):se.resolve(ga());let y=mc,g=c;return d.next((m=>se.forEach(m,((S,E)=>(y<E.largestBatchId&&(y=E.largestBatchId),c.get(S)?se.resolve():this.remoteDocumentCache.getEntry(e,S).next((x=>{g=g.insert(S,x)}))))).next((()=>this.populateOverlays(e,m,c))).next((()=>this.computeViews(e,g,m,Je()))).next((S=>({batchId:y,changes:mE(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Ie(n)).next((s=>{let o=tc();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=tc();return this.indexManager.getCollectionParents(e,c).next((y=>se.forEach(y,(g=>{const m=(function(E,x){return new wa(x,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((S=>{S.forEach(((E,x)=>{d=d.insert(E,x)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,m)=>{const S=m.getKey();d.get(S)===null&&(d=d.insert(S,pn.newInvalidDocument(S)))}));let y=tc();return d.forEach(((g,m)=>{const S=c.get(g);S!==void 0&&cc(S.mutation,m,Hn.empty(),lt.now()),id(n,m)&&(y=y.insert(g,m))})),y}))}}class K2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return se.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Zi(o.createTime)}})(n)),se.resolve()}getNamedQuery(e,n){return se.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:U2(o.bundledQuery),readTime:Zi(o.readTime)}})(n)),se.resolve()}}class X2{constructor(){this.overlays=new At(Ie.comparator),this.qr=new Map}getOverlay(e,n){return se.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ga();return se.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),se.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),se.resolve()}getOverlaysForCollection(e,n,s){const o=ga(),c=n.length+1,d=new Ie(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const g=y.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return se.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new At(((m,S)=>m-S));const d=this.overlays.getIterator();for(;d.hasNext();){const m=d.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let S=c.get(m.largestBatchId);S===null&&(S=ga(),c=c.insert(m.largestBatchId,S)),S.set(m.getKey(),m)}}const y=ga(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,S)=>y.set(m,S))),!(y.size()>=o)););return se.resolve(y)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new f2(n,s));let c=this.qr.get(n);c===void 0&&(c=Je(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class W2{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return se.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,se.resolve()}}class Up{constructor(){this.Qr=new Kt(Zt.$r),this.Ur=new Kt(Zt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Zt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Zt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Ie(new yt([])),s=new Zt(n,e),o=new Zt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Ie(new yt([])),s=new Zt(n,e),o=new Zt(n,e+1);let c=Je();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Zt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Zt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Ie.comparator(e.key,n.key)||We(e.Yr,n.Yr)}static Kr(e,n){return We(e.Yr,n.Yr)||Ie.comparator(e.key,n.key)}}class J2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Kt(Zt.$r)}checkEmpty(e){return se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new d2(c,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Zt(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return se.resolve(d)}lookupMutationBatch(e,n){return se.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return se.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(this.mutationQueue.length===0?Ip:this.tr-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Zt(n,0),o=new Zt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const y=this.Xr(d.Yr);c.push(y)})),se.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new Kt(We);return n.forEach((o=>{const c=new Zt(o,0),d=new Zt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(y=>{s=s.add(y.Yr)}))})),se.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Ie.isDocumentKey(c)||(c=c.child(""));const d=new Zt(new Ie(c),0);let y=new Kt(We);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(y=y.add(g.Yr)),!0)}),d),se.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){at(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return se.forEach(n.mutations,(o=>{const c=new Zt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Zt(n,0),o=this.Zr.firstAfterOrEqual(s);return se.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,se.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Z2{constructor(e){this.ri=e,this.docs=(function(){return new At(Ie.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return se.resolve(s?s.document.mutableCopy():pn.newInvalidDocument(n))}getEntries(e,n){let s=Mr();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():pn.newInvalidDocument(o))})),se.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Mr();const d=n.path,y=new Ie(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(y);for(;g.hasNext();){const{key:m,value:{document:S}}=g.getNext();if(!d.isPrefixOf(m.path))break;m.path.length>d.length+1||RC(xC(S),s)<=0||(o.has(S.key)||id(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return se.resolve(c)}getAllFromCollectionGroup(e,n,s,o){Me(9500)}ii(e,n){return se.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new eI(this)}getSize(e){return se.resolve(this.size)}}class eI extends $2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),se.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class tI{constructor(e){this.persistence=e,this.si=new xa((n=>Np(n)),Op),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=Uo.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),se.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Uo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,se.resolve()}updateTargetData(e,n){return this.Pr(n),se.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),se.waitFor(c).next((()=>o))}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return se.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),se.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),se.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),se.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return se.resolve(s)}containsKey(e,n){return se.resolve(this._i.containsKey(n))}}class VE{constructor(e,n){this.ui={},this.overlays={},this.ci=new Wh(0),this.li=!1,this.li=!0,this.hi=new W2,this.referenceDelegate=e(this),this.Pi=new tI(this),this.indexManager=new j2,this.remoteDocumentCache=(function(o){return new Z2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new P2(n),this.Ii=new K2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new J2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){Te("MemoryPersistence","Starting transaction:",e);const o=new nI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return se.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class nI extends IC{constructor(e){super(),this.currentSequenceNumber=e}}class jp{constructor(e){this.persistence=e,this.Ri=new Up,this.Vi=null}static mi(e){return new jp(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),se.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),se.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),se.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.fi,(s=>{const o=Ie.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,Ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return se.or([()=>se.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Bh{constructor(e,n){this.persistence=e,this.pi=new xa((s=>OC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=G2(this,n)}static mi(e,n){return new Bh(e,n)}Ei(){}di(e){return se.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return se.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?se.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(s++,c.removeEntry(d,Ue.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),se.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),se.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Sh(e.data.value)),n}br(e,n,s){return se.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return se.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class zp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Je(),o=Je();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new zp(e,n.fromCache,s,o)}}class iI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $A()?8:DC(yn())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new iI;return this.Ss(e,n,d).next((y=>{if(c.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(bo()<=Xe.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",So(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),se.resolve()):(bo()<=Xe.DEBUG&&Te("QueryEngine","Query:",So(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(bo()<=Xe.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",So(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ji(n))):se.resolve())}ys(e,n){if(zv(n))return se.resolve(null);let s=Ji(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=jh(n,null,"F"),s=Ji(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Je(...c);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((g=>{const m=this.Ds(n,y);return this.Cs(n,m,d,g.readTime)?this.ys(e,jh(n,null,"F")):this.vs(e,m,n,g)}))))})))))}ws(e,n,s,o){return zv(n)||o.isEqual(Ue.min())?se.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?se.resolve(null):(bo()<=Xe.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),So(n)),this.vs(e,d,n,wC(o,mc)).next((y=>y)))}))}Ds(e,n){let s=new Kt(dE(e));return n.forEach(((o,c)=>{id(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return bo()<=Xe.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",So(n)),this.ps.getDocumentsMatchingQuery(e,n,Is.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const Bp="LocalStore",sI=3e8;class aI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new At(We),this.xs=new xa((c=>Np(c)),Op),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function oI(r,e,n,s){return new aI(r,e,n,s)}async function PE(r,e){const n=Pe(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],y=[];let g=Je();for(const m of o){d.push(m.batchId);for(const S of m.mutations)g=g.add(S.key)}for(const m of c){y.push(m.batchId);for(const S of m.mutations)g=g.add(S.key)}return n.localDocuments.getDocuments(s,g).next((m=>({Ls:m,removedBatchIds:d,addedBatchIds:y})))}))}))}function lI(r,e){const n=Pe(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,g,m,S){const E=m.batch,x=E.keys();let L=se.resolve();return x.forEach((P=>{L=L.next((()=>S.getEntry(g,P))).next((z=>{const q=m.docVersions.get(P);at(q!==null,48541),z.version.compareTo(q)<0&&(E.applyToRemoteDocument(z,m),z.isValidDocument()&&(z.setReadTime(m.commitVersion),S.addEntry(z)))}))})),L.next((()=>y.mutationQueue.removeMutationBatch(g,E)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let g=Je();for(let m=0;m<y.mutationResults.length;++m)y.mutationResults[m].transformResults.length>0&&(g=g.add(y.batch.mutations[m].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function UE(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function cI(r,e){const n=Pe(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((S,E)=>{const x=o.get(E);if(!x)return;y.push(n.Pi.removeMatchingKeys(c,S.removedDocuments,E).next((()=>n.Pi.addMatchingKeys(c,S.addedDocuments,E))));let L=x.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(hn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):S.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(S.resumeToken,s)),o=o.insert(E,L),(function(z,q,Q){return z.resumeToken.approximateByteSize()===0||q.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=sI?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(x,L,S)&&y.push(n.Pi.updateTargetData(c,L))}));let g=Mr(),m=Je();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))})),y.push(uI(c,d,e.documentUpdates).next((S=>{g=S.ks,m=S.qs}))),!s.isEqual(Ue.min())){const S=n.Pi.getLastRemoteSnapshotVersion(c).next((E=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));y.push(S)}return se.waitFor(y).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,m))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function uI(r,e,n){let s=Je(),o=Je();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Mr();return n.forEach(((y,g)=>{const m=c.get(y);g.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(y)),g.isNoDocument()&&g.version.isEqual(Ue.min())?(e.removeEntry(y,g.readTime),d=d.insert(y,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),d=d.insert(y,g)):Te(Bp,"Ignoring outdated watch update for ",y,". Current version:",m.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function hI(r,e){const n=Pe(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function dI(r,e){const n=Pe(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,se.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new Es(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function ap(r,e,n){const s=Pe(r),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Go(d))throw d;Te(Bp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Zv(r,e,n){const s=Pe(r);let o=Ue.min(),c=Je();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,m,S){const E=Pe(g),x=E.xs.get(S);return x!==void 0?se.resolve(E.Ms.get(x)):E.Pi.getTargetData(m,S)})(s,d,Ji(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:Ue.min(),n?c:Je()))).next((y=>(fI(s,JC(e),y),{documents:y,Qs:c})))))}function fI(r,e,n){let s=r.Os.get(e)||Ue.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class eb{constructor(){this.activeTargetIds=r2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mI{constructor(){this.Mo=new eb,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new eb,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pI{Oo(e){}shutdown(){}}const tb="ConnectivityMonitor";class nb{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(tb,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(tb,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let uh=null;function op(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}const Nm="RestConnection",gI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Vh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=op(),y=this.zo(e,n.toUriEncodedString());Te(Nm,`Sending RPC '${e}' ${d}:`,y,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:m}=new URL(y),S=zo(m);return this.Jo(e,y,g,s,S).then((E=>(Te(Nm,`Received RPC '${e}' ${d}: `,E),E)),(E=>{throw No(Nm,`RPC '${e}' ${d} failed with error: `,E,"url: ",y,"request:",s),E}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ho})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=gI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class _I{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const fn="WebChannelConnection";class vI extends yI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=op();return new Promise(((y,g)=>{const m=new jS;m.setWithCredentials(!0),m.listenOnce(zS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case bh.NO_ERROR:const E=m.getResponseJson();Te(fn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(E)),y(E);break;case bh.TIMEOUT:Te(fn,`RPC '${e}' ${d} timed out`),g(new ye(J.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const x=m.getStatus();if(Te(fn,`RPC '${e}' ${d} failed with status:`,x,"response text:",m.getResponseText()),x>0){let L=m.getResponseJson();Array.isArray(L)&&(L=L[0]);const P=L?.error;if(P&&P.status&&P.message){const z=(function(Q){const ne=Q.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(ne)>=0?ne:J.UNKNOWN})(P.status);g(new ye(z,P.message))}else g(new ye(J.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new ye(J.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:d,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Te(fn,`RPC '${e}' ${d} completed.`)}}));const S=JSON.stringify(o);Te(fn,`RPC '${e}' ${d} sending request:`,o),m.send(n,"POST",S,s,15)}))}T_(e,n,s){const o=op(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=HS(),y=qS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const S=c.join("");Te(fn,`Creating RPC '${e}' stream ${o}: ${S}`,g);const E=d.createWebChannel(S,g);this.I_(E);let x=!1,L=!1;const P=new _I({Yo:q=>{L?Te(fn,`Not sending because RPC '${e}' stream ${o} is closed:`,q):(x||(Te(fn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),x=!0),Te(fn,`RPC '${e}' stream ${o} sending:`,q),E.send(q))},Zo:()=>E.close()}),z=(q,Q,ne)=>{q.listen(Q,($=>{try{ne($)}catch(me){setTimeout((()=>{throw me}),0)}}))};return z(E,ec.EventType.OPEN,(()=>{L||(Te(fn,`RPC '${e}' stream ${o} transport opened.`),P.o_())})),z(E,ec.EventType.CLOSE,(()=>{L||(L=!0,Te(fn,`RPC '${e}' stream ${o} transport closed`),P.a_(),this.E_(E))})),z(E,ec.EventType.ERROR,(q=>{L||(L=!0,No(fn,`RPC '${e}' stream ${o} transport errored. Name:`,q.name,"Message:",q.message),P.a_(new ye(J.UNAVAILABLE,"The operation could not be completed")))})),z(E,ec.EventType.MESSAGE,(q=>{if(!L){const Q=q.data[0];at(!!Q,16349);const ne=Q,$=ne?.error||ne[0]?.error;if($){Te(fn,`RPC '${e}' stream ${o} received error:`,$);const me=$.status;let fe=(function(w){const R=Ft[w];if(R!==void 0)return AE(R)})(me),Se=$.message;fe===void 0&&(fe=J.INTERNAL,Se="Unknown error status: "+me+" with message "+$.message),L=!0,P.a_(new ye(fe,Se)),E.close()}else Te(fn,`RPC '${e}' stream ${o} received:`,Q),P.u_(Q)}})),z(y,BS.STAT_EVENT,(q=>{q.stat===Km.PROXY?Te(fn,`RPC '${e}' stream ${o} detected buffering proxy`):q.stat===Km.NOPROXY&&Te(fn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{P.__()}),0),P}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Om(){return typeof document<"u"?document:null}function cd(r){return new T2(r,!0)}class jE{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&Te("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const ib="PersistentStream";class zE{constructor(e,n,s,o,c,d,y,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jE(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(kr(n.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ye(J.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(ib,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(Te(ib,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bI extends zE{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=x2(this.serializer,e),s=(function(c){if(!("targetChange"in c))return Ue.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ue.min():d.readTime?Zi(d.readTime):Ue.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=sp(this.serializer),n.addTarget=(function(c,d){let y;const g=d.target;if(y=ep(g)?{documents:I2(c,g)}:{query:NE(c,g).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=RE(c,d.resumeToken);const m=np(c,d.expectedCount);m!==null&&(y.expectedCount=m)}else if(d.snapshotVersion.compareTo(Ue.min())>0){y.readTime=zh(c,d.snapshotVersion.toTimestamp());const m=np(c,d.expectedCount);m!==null&&(y.expectedCount=m)}return y})(this.serializer,e);const s=O2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=sp(this.serializer),n.removeTarget=e,this.q_(n)}}class SI extends zE{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return at(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,at(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){at(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=C2(e.writeResults,e.commitTime),s=Zi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=sp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>R2(this.serializer,s)))};this.q_(n)}}class EI{}class TI extends EI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,ip(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ye(J.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,ip(n,s),o,d,y,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ye(J.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(kr(n),this.aa=!1):Te("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Aa="RemoteStore";class wI{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Ra(this)&&(Te(Aa,"Restarting streams for network reachability change."),await(async function(g){const m=Pe(g);m.Ea.add(4),await Dc(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ud(m)})(this))}))})),this.Ra=new AI(s,o)}}async function ud(r){if(Ra(r))for(const e of r.da)await e(!0)}async function Dc(r){for(const e of r.da)await e(!1)}function BE(r,e){const n=Pe(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Gp(n)?Fp(n):$o(n).O_()&&Hp(n,e))}function qp(r,e){const n=Pe(r),s=$o(n);n.Ia.delete(e),s.O_()&&qE(n,e),n.Ia.size===0&&(s.O_()?s.L_():Ra(n)&&n.Ra.set("Unknown"))}function Hp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}$o(r).Y_(e)}function qE(r,e){r.Va.Ue(e),$o(r).Z_(e)}function Fp(r){r.Va=new v2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),$o(r).start(),r.Ra.ua()}function Gp(r){return Ra(r)&&!$o(r).x_()&&r.Ia.size>0}function Ra(r){return Pe(r).Ea.size===0}function HE(r){r.Va=void 0}async function xI(r){r.Ra.set("Online")}async function RI(r){r.Ia.forEach(((e,n)=>{Hp(r,e)}))}async function CI(r,e){HE(r),Gp(r)?(r.Ra.ha(e),Fp(r)):r.Ra.set("Unknown")}async function II(r,e,n){if(r.Ra.set("Online"),e instanceof xE&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const y of c.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(r,e)}catch(s){Te(Aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await qh(r,s)}else if(e instanceof Ah?r.Va.Ze(e):e instanceof wE?r.Va.st(e):r.Va.tt(e),!n.isEqual(Ue.min()))try{const s=await UE(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const y=c.Va.Tt(d);return y.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const S=c.Ia.get(m);S&&c.Ia.set(m,S.withResumeToken(g.resumeToken,d))}})),y.targetMismatches.forEach(((g,m)=>{const S=c.Ia.get(g);if(!S)return;c.Ia.set(g,S.withResumeToken(hn.EMPTY_BYTE_STRING,S.snapshotVersion)),qE(c,g);const E=new Es(S.target,g,m,S.sequenceNumber);Hp(c,E)})),c.remoteSyncer.applyRemoteEvent(y)})(r,n)}catch(s){Te(Aa,"Failed to raise snapshot:",s),await qh(r,s)}}async function qh(r,e,n){if(!Go(e))throw e;r.Ea.add(1),await Dc(r),r.Ra.set("Offline"),n||(n=()=>UE(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{Te(Aa,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await ud(r)}))}function FE(r,e){return e().catch((n=>qh(r,n,e)))}async function hd(r){const e=Pe(r),n=ks(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Ip;for(;DI(e);)try{const o=await hI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,NI(e,o)}catch(o){await qh(e,o)}GE(e)&&$E(e)}function DI(r){return Ra(r)&&r.Ta.length<10}function NI(r,e){r.Ta.push(e);const n=ks(r);n.O_()&&n.X_&&n.ea(e.mutations)}function GE(r){return Ra(r)&&!ks(r).x_()&&r.Ta.length>0}function $E(r){ks(r).start()}async function OI(r){ks(r).ra()}async function kI(r){const e=ks(r);for(const n of r.Ta)e.ea(n.mutations)}async function MI(r,e,n){const s=r.Ta.shift(),o=Lp.from(s,e,n);await FE(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await hd(r)}async function LI(r,e){e&&ks(r).X_&&await(async function(s,o){if((function(d){return g2(d)&&d!==J.ABORTED})(o.code)){const c=s.Ta.shift();ks(s).B_(),await FE(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await hd(s)}})(r,e),GE(r)&&$E(r)}async function rb(r,e){const n=Pe(r);n.asyncQueue.verifyOperationInProgress(),Te(Aa,"RemoteStore received new credentials");const s=Ra(n);n.Ea.add(3),await Dc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ud(n)}async function VI(r,e){const n=Pe(r);e?(n.Ea.delete(2),await ud(n)):e||(n.Ea.add(2),await Dc(n),n.Ra.set("Unknown"))}function $o(r){return r.ma||(r.ma=(function(n,s,o){const c=Pe(n);return c.sa(),new bI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:xI.bind(null,r),t_:RI.bind(null,r),r_:CI.bind(null,r),H_:II.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Gp(r)?Fp(r):r.Ra.set("Unknown")):(await r.ma.stop(),HE(r))}))),r.ma}function ks(r){return r.fa||(r.fa=(function(n,s,o){const c=Pe(n);return c.sa(),new SI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:OI.bind(null,r),r_:LI.bind(null,r),ta:kI.bind(null,r),na:MI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await hd(r)):(await r.fa.stop(),r.Ta.length>0&&(Te(Aa,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class $p{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,y=new $p(e,n,d,o,c);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(r,e){if(kr("AsyncQueue",`${e}: ${r}`),Go(r))return new ye(J.UNAVAILABLE,`${e}: ${r}`);throw r}class Co{static emptySet(e){return new Co(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Ie.comparator(n.key,s.key):(n,s)=>Ie.comparator(n.key,s.key),this.keyedMap=tc(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Co)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Co;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class sb{constructor(){this.ga=new At(Ie.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class jo{constructor(e,n,s,o,c,d,y,g,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new jo(e,n,Co.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&nd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class PI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UI{constructor(){this.queries=ab(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Pe(n),c=o.queries;o.queries=ab(),c.forEach(((d,y)=>{for(const g of y.Sa)g.onError(s)}))})(this,new ye(J.ABORTED,"Firestore shutting down"))}}function ab(){return new xa((r=>hE(r)),nd)}async function Qp(r,e){const n=Pe(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new PI,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=Yp(d,`Initialization of query '${So(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Xp(n)}async function Kp(r,e){const n=Pe(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jI(r,e){const n=Pe(r);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const y of d.Sa)y.Fa(o)&&(s=!0);d.wa=o}}s&&Xp(n)}function zI(r,e,n){const s=Pe(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function Xp(r){r.Ca.forEach((e=>{e.next()}))}var lp,ob;(ob=lp||(lp={})).Ma="default",ob.Cache="cache";class Wp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new jo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=jo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==lp.Cache}}class YE{constructor(e){this.key=e}}class QE{constructor(e){this.key=e}}class BI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Je(),this.mutatedKeys=Je(),this.eu=dE(e),this.tu=new Co(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new sb,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,E)=>{const x=o.get(S),L=id(this.query,E)?E:null,P=!!x&&this.mutatedKeys.has(x.key),z=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let q=!1;x&&L?x.data.isEqual(L.data)?P!==z&&(s.track({type:3,doc:L}),q=!0):this.su(x,L)||(s.track({type:2,doc:L}),q=!0,(g&&this.eu(L,g)>0||m&&this.eu(L,m)<0)&&(y=!0)):!x&&L?(s.track({type:0,doc:L}),q=!0):x&&!L&&(s.track({type:1,doc:x}),q=!0,(g||m)&&(y=!0)),q&&(L?(d=d.add(L),c=z?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:d,iu:s,Cs:y,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((S,E)=>(function(L,P){const z=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:q})}};return z(L)-z(P)})(S.type,E.type)||this.eu(S.doc,E.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,m=g!==this.Za;return this.Za=g,d.length!==0||m?{snapshot:new jo(this.query,e.tu,c,d,e.mutatedKeys,g===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sb,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Je(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new QE(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new YE(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Je();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return jo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Jp="SyncEngine";class qI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HI{constructor(e){this.key=e,this.hu=!1}}class FI{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new xa((y=>hE(y)),nd),this.Iu=new Map,this.Eu=new Set,this.du=new At(Ie.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=Uo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GI(r,e,n=!0){const s=eT(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await KE(s,e,n,!0),o}async function $I(r,e){const n=eT(r);await KE(n,e,!0,!1)}async function KE(r,e,n,s){const o=await dI(r.localStore,Ji(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let y;return s&&(y=await YI(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&BE(r.remoteStore,o),y}async function YI(r,e,n,s,o){r.pu=(E,x,L)=>(async function(z,q,Q,ne){let $=q.view.ru(Q);$.Cs&&($=await Zv(z.localStore,q.query,!1).then((({documents:D})=>q.view.ru(D,$))));const me=ne&&ne.targetChanges.get(q.targetId),fe=ne&&ne.targetMismatches.get(q.targetId)!=null,Se=q.view.applyChanges($,z.isPrimaryClient,me,fe);return cb(z,q.targetId,Se.au),Se.snapshot})(r,E,x,L);const c=await Zv(r.localStore,e,!0),d=new BI(e,c.Qs),y=d.ru(c.documents),g=Ic.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),m=d.applyChanges(y,r.isPrimaryClient,g);cb(r,n,m.au);const S=new qI(e,n,d);return r.Tu.set(e,S),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),m.snapshot}async function QI(r,e,n){const s=Pe(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!nd(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ap(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&qp(s.remoteStore,o.targetId),cp(s,o.targetId)})).catch(Fo)):(cp(s,o.targetId),await ap(s.localStore,o.targetId,!0))}async function KI(r,e){const n=Pe(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function XI(r,e,n){const s=iD(r);try{const o=await(function(d,y){const g=Pe(d),m=lt.now(),S=y.reduce(((L,P)=>L.add(P.key)),Je());let E,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let P=Mr(),z=Je();return g.Ns.getEntries(L,S).next((q=>{P=q,P.forEach(((Q,ne)=>{ne.isValidDocument()||(z=z.add(Q))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,P))).next((q=>{E=q;const Q=[];for(const ne of y){const $=u2(ne,E.get(ne.key).overlayedDocument);$!=null&&Q.push(new Vs(ne.key,$,iE($.value.mapValue),bn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,m,Q,y)})).next((q=>{x=q;const Q=q.applyToLocalDocumentSet(E,z);return g.documentOverlayCache.saveOverlays(L,q.batchId,Q)}))})).then((()=>({batchId:x.batchId,changes:mE(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,g){let m=d.Vu[d.currentUser.toKey()];m||(m=new At(We)),m=m.insert(y,g),d.Vu[d.currentUser.toKey()]=m})(s,o.batchId,n),await Nc(s,o.changes),await hd(s.remoteStore)}catch(o){const c=Yp(o,"Failed to persist write");n.reject(c)}}async function XE(r,e){const n=Pe(r);try{const s=await cI(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(at(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?at(d.hu,14607):o.removedDocuments.size>0&&(at(d.hu,42227),d.hu=!1))})),await Nc(n,s,e)}catch(s){await Fo(s)}}function lb(r,e,n){const s=Pe(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const g=Pe(d);g.onlineState=y;let m=!1;g.queries.forEach(((S,E)=>{for(const x of E.Sa)x.va(y)&&(m=!0)})),m&&Xp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WI(r,e,n){const s=Pe(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new At(Ie.comparator);d=d.insert(c,pn.newNoDocument(c,Ue.min()));const y=Je().add(c),g=new ld(Ue.min(),new Map,new At(We),d,y);await XE(s,g),s.du=s.du.remove(c),s.Au.delete(e),Zp(s)}else await ap(s.localStore,e,!1).then((()=>cp(s,e,n))).catch(Fo)}async function JI(r,e){const n=Pe(r),s=e.batch.batchId;try{const o=await lI(n.localStore,e);JE(n,s,null),WE(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await Nc(n,o)}catch(o){await Fo(o)}}async function ZI(r,e,n){const s=Pe(r);try{const o=await(function(d,y){const g=Pe(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let S;return g.mutationQueue.lookupMutationBatch(m,y).next((E=>(at(E!==null,37113),S=E.keys(),g.mutationQueue.removeMutationBatch(m,E)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,S,y))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,S))).next((()=>g.localDocuments.getDocuments(m,S)))}))})(s.localStore,e);JE(s,e,n),WE(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await Nc(s,o)}catch(o){await Fo(o)}}function WE(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function JE(r,e,n){const s=Pe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function cp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||ZE(r,s)}))}function ZE(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(qp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Zp(r))}function cb(r,e,n){for(const s of n)s instanceof YE?(r.Ru.addReference(s.key,e),eD(r,s)):s instanceof QE?(Te(Jp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||ZE(r,s.key)):Me(19791,{wu:s})}function eD(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(Te(Jp,"New document in limbo: "+n),r.Eu.add(s),Zp(r))}function Zp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Ie(yt.fromString(e)),s=r.fu.next();r.Au.set(s,new HI(n)),r.du=r.du.insert(n,s),BE(r.remoteStore,new Es(Ji(td(n.path)),s,"TargetPurposeLimboResolution",Wh.ce))}}async function Nc(r,e,n){const s=Pe(r),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,g)=>{d.push(s.pu(g,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const S=m?!m.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(m){o.push(m);const S=zp.As(g.targetId,m);c.push(S)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,m){const S=Pe(g);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>se.forEach(m,(x=>se.forEach(x.Es,(L=>S.persistence.referenceDelegate.addReference(E,x.targetId,L))).next((()=>se.forEach(x.ds,(L=>S.persistence.referenceDelegate.removeReference(E,x.targetId,L)))))))))}catch(E){if(!Go(E))throw E;Te(Bp,"Failed to update sequence numbers: "+E)}for(const E of m){const x=E.targetId;if(!E.fromCache){const L=S.Ms.get(x),P=L.snapshotVersion,z=L.withLastLimboFreeSnapshotVersion(P);S.Ms=S.Ms.insert(x,z)}}})(s.localStore,c))}async function tD(r,e){const n=Pe(r);if(!n.currentUser.isEqual(e)){Te(Jp,"User change. New user:",e.toKey());const s=await PE(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((y=>{y.forEach((g=>{g.reject(new ye(J.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Nc(n,s.Ls)}}function nD(r,e){const n=Pe(r),s=n.Au.get(e);if(s&&s.hu)return Je().add(s.key);{let o=Je();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function eT(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=XE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.Pu.H_=jI.bind(null,e.eventManager),e.Pu.yu=zI.bind(null,e.eventManager),e}function iD(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,e),e}class Hh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oI(this.persistence,new rI,e.initialUser,this.serializer)}Cu(e){return new VE(jp.mi,this.serializer)}Du(e){return new mI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Hh.provider={build:()=>new Hh};class rD extends Hh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){at(this.persistence.referenceDelegate instanceof Bh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new H2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new VE((s=>Bh.mi(s,n)),this.serializer)}}class up{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>lb(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,this.syncEngine),await VI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=cd(e.databaseInfo.databaseId),s=(function(c){return new vI(c)})(e.databaseInfo);return(function(c,d,y,g){return new TI(c,d,y,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,y){return new wI(s,o,c,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>lb(this.syncEngine,n,0)),(function(){return nb.v()?new nb:new pI})())}createSyncEngine(e,n){return(function(o,c,d,y,g,m,S){const E=new FI(o,c,d,y,g,m);return S&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Pe(n);Te(Aa,"RemoteStore shutting down."),s.Ea.add(5),await Dc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}up.provider={build:()=>new up};class eg{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):kr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Ms="FirestoreClient";class sD{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=mn.UNAUTHENTICATED,this.clientId=Cp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{Te(Ms,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(Te(Ms,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Yp(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function km(r,e){r.asyncQueue.verifyOperationInProgress(),Te(Ms,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await PE(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function ub(r,e){r.asyncQueue.verifyOperationInProgress();const n=await aD(r);Te(Ms,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>rb(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>rb(e.remoteStore,o))),r._onlineComponents=e}async function aD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Te(Ms,"Using user provided OfflineComponentProvider");try{await km(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===J.FAILED_PRECONDITION||o.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;No("Error using user provided cache. Falling back to memory cache: "+n),await km(r,new Hh)}}else Te(Ms,"Using default OfflineComponentProvider"),await km(r,new rD(void 0));return r._offlineComponents}async function tg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Te(Ms,"Using user provided OnlineComponentProvider"),await ub(r,r._uninitializedComponentsProvider._online)):(Te(Ms,"Using default OnlineComponentProvider"),await ub(r,new up))),r._onlineComponents}function oD(r){return tg(r).then((e=>e.syncEngine))}function lD(r){return tg(r).then((e=>e.datastore))}async function Fh(r){const e=await tg(r),n=e.eventManager;return n.onListen=GI.bind(null,e.syncEngine),n.onUnlisten=QI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KI.bind(null,e.syncEngine),n}function cD(r,e,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,y,g,m){const S=new eg({next:x=>{S.Nu(),d.enqueueAndForget((()=>Kp(c,E)));const L=x.docs.has(y);!L&&x.fromCache?m.reject(new ye(J.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&x.fromCache&&g&&g.source==="server"?m.reject(new ye(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(x)},error:x=>m.reject(x)}),E=new Wp(td(y.path),S,{includeMetadataChanges:!0,qa:!0});return Qp(c,E)})(await Fh(r),r.asyncQueue,e,n,s))),s.promise}function uD(r,e,n={}){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,y,g,m){const S=new eg({next:x=>{S.Nu(),d.enqueueAndForget((()=>Kp(c,E))),x.fromCache&&g.source==="server"?m.reject(new ye(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(x)},error:x=>m.reject(x)}),E=new Wp(y,S,{includeMetadataChanges:!0,qa:!0});return Qp(c,E)})(await Fh(r),r.asyncQueue,e,n,s))),s.promise}function hD(r,e,n){const s=new Wi;return r.asyncQueue.enqueueAndForget((async()=>{try{const o=await lD(r);s.resolve((async function(d,y,g){const m=Pe(d),{request:S,gt:E,parent:x}=D2(m.serializer,WC(y),g);m.connection.$o||delete S.parent;const L=(await m.Ho("RunAggregationQuery",m.serializer.databaseId,x,S,1)).filter((z=>!!z.result));at(L.length===1,64727);const P=L[0].result?.aggregateFields;return Object.keys(P).reduce(((z,q)=>(z[E[q]]=P[q],z)),{})})(o,e,n))}catch(o){s.reject(o)}})),s.promise}function tT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const hb=new Map;const nT="firestore.googleapis.com",db=!0;class fb{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=nT,this.ssl=db}else this.host=e.host,this.ssl=e.ssl??db;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B2)throw new ye(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=tT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ye(J.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class dd{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new fC;switch(s.type){case"firstParty":return new yC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ye(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=hb.get(n);s&&(Te("ComponentProvider","Removing Datastore"),hb.delete(n),s.terminate())})(this),Promise.resolve()}}function dD(r,e,n,s={}){r=gn(r,dd);const o=zo(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${n}`;o&&(eS(`https://${y}`),tS("Firestore",!0)),c.host!==nT&&c.host!==y&&No("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:y,ssl:o,emulatorOptions:s};if(!Dr(g,d)&&(r._setSettings(g),s.mockUserToken)){let m,S;if(typeof s.mockUserToken=="string")m=s.mockUserToken,S=mn.MOCK_USER;else{m=PA(s.mockUserToken,r._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ye(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new mn(E)}r._authCredentials=new mC(new GS(m,S))}}class rr{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new rr(this.firestore,e,this._query)}}class Ct{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}toJSON(){return{type:Ct._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Rc(n,Ct._jsonSchema))return new Ct(e,s||null,new Ie(yt.fromString(n.referencePath)))}}Ct._jsonSchemaVersion="firestore/documentReference/1.0",Ct._jsonSchema={type:Yt("string",Ct._jsonSchemaVersion),referencePath:Yt("string")};class Rs extends rr{constructor(e,n,s){super(e,n,td(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new Ie(e))}withConverter(e){return new Rs(this.firestore,e,this._path)}}function Rt(r,e,...n){if(r=Lt(r),$S("collection","path",e),r instanceof dd){const s=yt.fromString(e,...n);return Rv(s),new Rs(r,null,s)}{if(!(r instanceof Ct||r instanceof Rs))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(yt.fromString(e,...n));return Rv(s),new Rs(r.firestore,null,s)}}function kt(r,e,...n){if(r=Lt(r),arguments.length===1&&(e=Cp.newId()),$S("doc","path",e),r instanceof dd){const s=yt.fromString(e,...n);return xv(s),new Ct(r,null,new Ie(s))}{if(!(r instanceof Ct||r instanceof Rs))throw new ye(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(yt.fromString(e,...n));return xv(s),new Ct(r.firestore,r instanceof Rs?r.converter:null,new Ie(s))}}const mb="AsyncQueue";class pb{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jE(this,"async_queue_retry"),this._c=()=>{const s=Om();s&&Te(mb,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Om();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Om();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Wi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Go(e))throw e;Te(mb,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,kr("INTERNAL UNHANDLED ERROR: ",gb(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=$p.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&Me(47125,{Pc:gb(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gb(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function yb(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class Ti extends dd{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new pb,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pb(e),this._firestoreClient=void 0,await e}}}function fD(r,e){const n=typeof r=="object"?r:sS(),s=typeof r=="string"?r:Vh,o=gp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=LA("firestore");c&&dD(o,...c)}return o}function Yo(r){if(r._terminated)throw new ye(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||mD(r),r._firestoreClient}function mD(r){const e=r._freezeSettings(),n=(function(o,c,d,y){return new VC(o,c,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,tT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new sD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class pD{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class gD{constructor(e,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class ri{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ri(hn.fromBase64String(e))}catch(n){throw new ye(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ri(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ri._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,ri._jsonSchema))return ri.fromBase64String(e.bytes)}}ri._jsonSchemaVersion="firestore/bytes/1.0",ri._jsonSchema={type:Yt("string",ri._jsonSchemaVersion),bytes:Yt("string")};class Oc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ye(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new un(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Ca{constructor(e){this._methodName=e}}class er{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ye(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ye(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:er._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,er._jsonSchema))return new er(e.latitude,e.longitude)}}er._jsonSchemaVersion="firestore/geoPoint/1.0",er._jsonSchema={type:Yt("string",er._jsonSchemaVersion),latitude:Yt("number"),longitude:Yt("number")};class tr{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new tr(e.vectorValues);throw new ye(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tr._jsonSchemaVersion="firestore/vectorValue/1.0",tr._jsonSchema={type:Yt("string",tr._jsonSchemaVersion),vectorValues:Yt("object")};const yD=/^__.*__$/;class _D{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new Cc(e,this.data,n,this.fieldTransforms)}}class iT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function rT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:r})}}class fd{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(rT(this.Ac)&&yD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||cd(e)}Cc(e,n,s,o=!1){return new fd({Ac:e,methodName:n,Dc:s,path:un.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qo(r){const e=r._freezeSettings(),n=cd(r._databaseId);return new vD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function ng(r,e,n,s,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);og("Data must be an object, but it was:",d,s);const y=cT(s,d);let g,m;if(c.merge)g=new Hn(d.fieldMask),m=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const E of c.mergeFields){const x=hp(e,E,n);if(!d.contains(x))throw new ye(J.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);hT(S,x)||S.push(x)}g=new Hn(S),m=d.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,m=d.fieldTransforms;return new _D(new Dn(y),g,m)}class md extends Ca{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof md}}function sT(r,e,n){return new fd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ig extends Ca{_toFieldTransform(e){return new sd(e.path,new vc)}isEqual(e){return e instanceof ig}}class rg extends Ca{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=sT(this,e,!0),s=this.vc.map((c=>Ia(c,n))),o=new Vo(s);return new sd(e.path,o)}isEqual(e){return e instanceof rg&&Dr(this.vc,e.vc)}}class sg extends Ca{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=sT(this,e,!0),s=this.vc.map((c=>Ia(c,n))),o=new Po(s);return new sd(e.path,o)}isEqual(e){return e instanceof sg&&Dr(this.vc,e.vc)}}class ag extends Ca{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new bc(e.serializer,yE(e.serializer,this.Fc));return new sd(e.path,n)}isEqual(e){return e instanceof ag&&this.Fc===e.Fc}}function aT(r,e,n,s){const o=r.Cc(1,e,n);og("Data must be an object, but it was:",o,s);const c=[],d=Dn.empty();Ls(s,((g,m)=>{const S=lg(e,g,n);m=Lt(m);const E=o.yc(S);if(m instanceof md)c.push(S);else{const x=Ia(m,E);x!=null&&(c.push(S),d.set(S,x))}}));const y=new Hn(c);return new iT(d,y,o.fieldTransforms)}function oT(r,e,n,s,o,c){const d=r.Cc(1,e,n),y=[hp(e,s,n)],g=[o];if(c.length%2!=0)throw new ye(J.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<c.length;x+=2)y.push(hp(e,c[x])),g.push(c[x+1]);const m=[],S=Dn.empty();for(let x=y.length-1;x>=0;--x)if(!hT(m,y[x])){const L=y[x];let P=g[x];P=Lt(P);const z=d.yc(L);if(P instanceof md)m.push(L);else{const q=Ia(P,z);q!=null&&(m.push(L),S.set(L,q))}}const E=new Hn(m);return new iT(S,E,d.fieldTransforms)}function lT(r,e,n,s=!1){return Ia(n,r.Cc(s?4:3,e))}function Ia(r,e){if(uT(r=Lt(r)))return og("Unsupported field value:",e,r),cT(r,e);if(r instanceof Ca)return(function(s,o){if(!rT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const y of s){let g=Ia(y,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=Lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return yE(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=lt.fromDate(s);return{timestampValue:zh(o.serializer,c)}}if(s instanceof lt){const c=new lt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:zh(o.serializer,c)}}if(s instanceof er)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof ri)return{bytesValue:RE(o.serializer,s._byteString)};if(s instanceof Ct){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Pp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof tr)return(function(d,y){return{mapValue:{fields:{[tE]:{stringValue:nE},[Ph]:{arrayValue:{values:d.toArray().map((m=>{if(typeof m!="number")throw y.Sc("VectorValues must only contain numeric values.");return Mp(y.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Xh(s)}`)})(r,e)}function cT(r,e){const n={};return KS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ls(r,((s,o)=>{const c=Ia(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function uT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof lt||r instanceof er||r instanceof ri||r instanceof Ct||r instanceof Ca||r instanceof tr)}function og(r,e,n){if(!uT(n)||!YS(n)){const s=Xh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function hp(r,e,n){if((e=Lt(e))instanceof Oc)return e._internalPath;if(typeof e=="string")return lg(r,e);throw Gh("Field path arguments must be of type string or ",r,!1,void 0,n)}const bD=new RegExp("[~\\*/\\[\\]]");function lg(r,e,n){if(e.search(bD)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Oc(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Gh(r,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new ye(J.INVALID_ARGUMENT,y+r+g)}function hT(r,e){return r.some((n=>n.isEqual(e)))}class cg{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(pd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SD extends cg{data(){return super.data()}}function pd(r,e){return typeof e=="string"?lg(r,e):e instanceof Oc?e._internalPath:e._delegate._internalPath}function dT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ye(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class ug{}class gd extends ug{}function Bn(r,e,...n){let s=[];e instanceof ug&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof hg)).length,y=c.filter((g=>g instanceof yd)).length;if(d>1||d>0&&y>0)throw new ye(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class yd extends gd{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new yd(e,n,s)}_apply(e){const n=this._parse(e);return fT(e._query,n),new rr(e.firestore,e.converter,tp(e._query,n))}_parse(e){const n=Qo(e.firestore);return(function(c,d,y,g,m,S,E){let x;if(m.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new ye(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){vb(E,S);const P=[];for(const z of E)P.push(_b(g,c,z));x={arrayValue:{values:P}}}else x=_b(g,c,E)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||vb(E,S),x=lT(y,d,E,S==="in"||S==="not-in");return $t.create(m,S,x)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function vo(r,e,n){const s=e,o=pd("where",r);return yd._create(o,s,n)}class hg extends ug{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new hg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:Ei.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const y=c.getFlattenedFilters();for(const g of y)fT(d,g),d=tp(d,g)})(e._query,n),new rr(e.firestore,e.converter,tp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class dg extends gd{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new dg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new ye(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ye(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new _c(c,d)})(e._query,this._field,this._direction);return new rr(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new wa(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function xr(r,e="asc"){const n=e,s=pd("orderBy",r);return dg._create(s,n)}class fg extends gd{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new fg(e,n,s)}_apply(e){return new rr(e.firestore,e.converter,jh(e._query,this._limit,this._limitType))}}function _i(r){return AC("limit",r),fg._create("limit",r,"F")}class mg extends gd{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new mg(e,n,s)}_apply(e){const n=TD(e,this.type,this._docOrFields,this._inclusive);return new rr(e.firestore,e.converter,(function(o,c){return new wa(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)})(e._query,n))}}function ED(...r){return mg._create("startAfter",r,!1)}function TD(r,e,n,s){if(n[0]=Lt(n[0]),n[0]instanceof cg)return(function(c,d,y,g,m){if(!g)throw new ye(J.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const S=[];for(const E of Ro(c))if(E.field.isKeyField())S.push(Uh(d,g.key));else{const x=g.data.field(E.field);if(Zh(x))throw new ye(J.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(x===null){const L=E.field.canonicalString();throw new ye(J.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}S.push(x)}return new Lo(S,m)})(r._query,r.firestore._databaseId,e,n[0]._document,s);{const o=Qo(r.firestore);return(function(d,y,g,m,S,E){const x=d.explicitOrderBy;if(S.length>x.length)throw new ye(J.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let P=0;P<S.length;P++){const z=S[P];if(x[P].field.isKeyField()){if(typeof z!="string")throw new ye(J.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof z}`);if(!kp(d)&&z.indexOf("/")!==-1)throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${z}' contains a slash.`);const q=d.path.child(yt.fromString(z));if(!Ie.isDocumentKey(q))throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${q}' is not because it contains an odd number of segments.`);const Q=new Ie(q);L.push(Uh(y,Q))}else{const q=lT(g,m,z);L.push(q)}}return new Lo(L,E)})(r._query,r.firestore._databaseId,o,e,n,s)}}function _b(r,e,n){if(typeof(n=Lt(n))=="string"){if(n==="")throw new ye(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kp(e)&&n.indexOf("/")!==-1)throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(yt.fromString(n));if(!Ie.isDocumentKey(s))throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Uh(r,new Ie(s))}if(n instanceof Ct)return Uh(r,n._key);throw new ye(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(n)}.`)}function vb(r,e){if(!Array.isArray(r)||r.length===0)throw new ye(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fT(r,e){const n=(function(o,c){for(const d of o)for(const y of d.getFlattenedFilters())if(c.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ye(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AD{convertValue(e,n="none"){switch(Os(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ns(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ls(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Ph].arrayValue?.values?.map((s=>Mt(s.doubleValue)));return new tr(n)}convertGeoPoint(e){return new er(Mt(e.latitude),Mt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ed(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(pc(e));default:return null}}convertTimestamp(e){const n=Ds(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=yt.fromString(e);at(ME(s),9688,{name:e});const o=new gc(s.get(1),s.get(3)),c=new Ie(s.popFirst(5));return o.isEqual(n)||kr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function pg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}function wD(){return new pD("count")}class ic{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class va extends cg{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new wh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(pd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=va._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}va._jsonSchemaVersion="firestore/documentSnapshot/1.0",va._jsonSchema={type:Yt("string",va._jsonSchemaVersion),bundleSource:Yt("string","DocumentSnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class wh extends va{data(e={}){return super.data(e)}}class ba{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new ic(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new wh(this._firestore,this._userDataWriter,s.key,s,new ic(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ye(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const g=new wh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new ic(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>c||y.type!==3)).map((y=>{const g=new wh(o._firestore,o._userDataWriter,y.doc.key,y.doc,new ic(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,S=-1;return y.type!==0&&(m=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),S=d.indexOf(y.doc.key)),{type:xD(y.type),doc:g,oldIndex:m,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Cp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:r})}}function da(r){r=gn(r,Ct);const e=gn(r.firestore,Ti);return cD(Yo(e),r._key).then((n=>mT(e,r,n)))}ba._jsonSchemaVersion="firestore/querySnapshot/1.0",ba._jsonSchema={type:Yt("string",ba._jsonSchemaVersion),bundleSource:Yt("string","QuerySnapshot"),bundleName:Yt("string"),bundle:Yt("string")};class _d extends AD{constructor(e){super(),this.firestore=e}convertBytes(e){return new ri(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function Ki(r){r=gn(r,rr);const e=gn(r.firestore,Ti),n=Yo(e),s=new _d(e);return dT(r._query),uD(n,r._query).then((o=>new ba(e,s,r,o)))}function Mm(r,e,n){r=gn(r,Ct);const s=gn(r.firestore,Ti),o=pg(r.converter,e,n);return kc(s,[ng(Qo(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,bn.none())])}function Ar(r,e,n,...s){r=gn(r,Ct);const o=gn(r.firestore,Ti),c=Qo(o);let d;return d=typeof(e=Lt(e))=="string"||e instanceof Oc?oT(c,"updateDoc",r._key,e,n,s):aT(c,"updateDoc",r._key,e),kc(o,[d.toMutation(r._key,bn.exists(!0))])}function RD(r){return kc(gn(r.firestore,Ti),[new od(r._key,bn.none())])}function ma(r,e){const n=gn(r.firestore,Ti),s=kt(r),o=pg(r.converter,e);return kc(n,[ng(Qo(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,bn.exists(!1))]).then((()=>s))}function dp(r,...e){r=Lt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||yb(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(yb(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,y;if(r instanceof Ct)d=gn(r.firestore,Ti),y=td(r._key.path),c={next:g=>{e[s]&&e[s](mT(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=gn(r,rr);d=gn(g.firestore,Ti),y=g._query;const m=new _d(d);c={next:S=>{e[s]&&e[s](new ba(d,m,g,S))},error:e[s+1],complete:e[s+2]},dT(r._query)}return(function(m,S,E,x){const L=new eg(x),P=new Wp(S,L,E);return m.asyncQueue.enqueueAndForget((async()=>Qp(await Fh(m),P))),()=>{L.Nu(),m.asyncQueue.enqueueAndForget((async()=>Kp(await Fh(m),P)))}})(Yo(d),y,o,c)}function kc(r,e){return(function(s,o){const c=new Wi;return s.asyncQueue.enqueueAndForget((async()=>XI(await oD(s),o,c))),c.promise})(Yo(r),e)}function mT(r,e,n){const s=n.docs.get(e._key),o=new _d(r);return new va(r,o,e._key,s,new ic(n.hasPendingWrites,n.fromCache),e.converter)}function CD(r){return ID(r,{count:wD()})}function ID(r,e){const n=gn(r.firestore,Ti),s=Yo(n),o=MC(e,((c,d)=>new m2(d,c.aggregateType,c._internalFieldPath)));return hD(s,r._query,o).then((c=>(function(y,g,m){const S=new _d(y);return new gD(g,S,m)})(n,r,c)))}class DD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Qo(e)}set(e,n,s){this._verifyNotCommitted();const o=Lm(e,this._firestore),c=pg(o.converter,n,s),d=ng(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,bn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const c=Lm(e,this._firestore);let d;return d=typeof(n=Lt(n))=="string"||n instanceof Oc?oT(this._dataReader,"WriteBatch.update",c._key,n,s,o):aT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,bn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Lm(e,this._firestore);return this._mutations=this._mutations.concat(new od(n._key,bn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ye(J.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lm(r,e){if((r=Lt(r)).firestore!==e)throw new ye(J.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function st(){return new ig("serverTimestamp")}function Vm(...r){return new rg("arrayUnion",r)}function Pm(...r){return new sg("arrayRemove",r)}function uc(r){return new ag("increment",r)}function ys(r){return Yo(r=gn(r,Ti)),new DD(r,(e=>kc(r,e)))}(function(e,n=!0){(function(o){Ho=o})(Bo),Io(new Sa("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),y=new Ti(new pC(s.getProvider("auth-internal")),new _C(d,s.getProvider("app-check-internal")),(function(m,S){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ye(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gc(m.options.projectId,S)})(d,o),d);return c={useFetchStreams:n,...c},y._setSettings(c),y}),"PUBLIC").setMultipleInstances(!0)),ws(Ev,Tv,e),ws(Ev,Tv,"esm2020")})();const ND={apiKey:"AIzaSyCTVENg8F8uHy7gtSWe987TMj3QUKMxols",authDomain:"limitless-df63b.firebaseapp.com",projectId:"limitless-df63b",storageBucket:"limitless-df63b.firebasestorage.app",messagingSenderId:"92343669520",appId:"1:92343669520:web:54c21a2ff237fb14564b95"},pT=rS(ND),Um=cC(pT),OD=new Rr,De=fD(pT),gT=U.createContext(),Nn=()=>{const r=U.useContext(gT);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},kD=({children:r})=>{const[e,n]=U.useState(null),[s,o]=U.useState(!0),[c,d]=U.useState([]),[y,g]=U.useState(null),[m,S]=U.useState({}),[E,x]=U.useState(!1),[L,P]=U.useState([]),[z,q]=U.useState(0),[Q,ne]=U.useState(!1),$=U.useCallback((te,ee)=>!te||typeof te!="string"?"":te.length>ee?te.substring(0,ee)+"...":te,[]),me=U.useCallback(te=>{const ee=new Date;return ee.setDate(ee.getDate()+te),ee},[]),fe=U.useCallback(async te=>{try{const ee=kt(De,"experiences",te),de=await da(ee);return de.exists()?{id:de.id,...de.data()}:null}catch(ee){return console.error("Error getting experience:",ee),null}},[]),Se=U.useCallback(async(te,ee)=>{try{const de=kt(De,"experiences",te,"comments",ee),ue=await da(de);return ue.exists()?{id:ue.id,...ue.data()}:null}catch(de){return console.error("Error getting comment:",de),null}},[]),D=U.useCallback(async te=>{if(e?.uid)try{const ee=kt(De,"notifications",e.uid,"userNotifications",te);await Ar(ee,{isRead:!0,readAt:st()})}catch(ee){console.error("Error marking notification as read:",ee)}},[e]),w=U.useCallback(async()=>{if(e?.uid)try{const te=Rt(De,"notifications",e.uid,"userNotifications"),ee=Bn(te,vo("isRead","==",!1),_i(50)),de=await Ki(ee),ue=ys(De);de.docs.forEach(ce=>{const oe=ce.ref;ue.update(oe,{isRead:!0,readAt:st()})}),await ue.commit()}catch(te){console.error("Error marking all notifications as read:",te)}},[e]),R=async({experienceId:te,experienceOwnerId:ee,likerId:de,likerName:ue,likerPhotoURL:ce,experienceContent:oe})=>{try{if(ee===de)return;console.log(" Creating like notification:",{experienceOwnerId:ee,likerId:de,likerName:ue});const _e={type:"like_experience",senderId:de,senderName:ue,senderPhotoURL:ce,experienceId:te,experiencePreview:$(oe,50),message:`${ue} liked your life experience`,isRead:!1,createdAt:st(),expiresAt:lt.fromDate(me(30))},be=Rt(De,"notifications",ee,"userNotifications");await ma(be,_e),console.log(" Like notification created successfully")}catch(_e){console.error(" Error creating like notification:",_e)}},C=async({experienceId:te,experienceOwnerId:ee,commenterId:de,commenterName:ue,commenterPhotoURL:ce,commentContent:oe,experienceContent:_e})=>{try{if(ee===de)return;console.log(" Creating comment notification:",{experienceOwnerId:ee,commenterId:de,commenterName:ue});const be={type:"comment_experience",senderId:de,senderName:ue,senderPhotoURL:ce,experienceId:te,commentPreview:$(oe,40),experiencePreview:$(_e,30),message:`${ue} commented on your life experience`,isRead:!1,createdAt:st(),expiresAt:lt.fromDate(me(30))},Ae=Rt(De,"notifications",ee,"userNotifications");await ma(Ae,be),console.log(" Comment notification created successfully")}catch(be){console.error(" Error creating comment notification:",be)}},N=async({experienceId:te,originalCommenterId:ee,replierId:de,replierName:ue,replierPhotoURL:ce,replyContent:oe,parentCommentId:_e,experienceContent:be})=>{try{if(ee===de)return;console.log(" Creating reply notification:",{originalCommenterId:ee,replierId:de,replierName:ue});const Ae={type:"reply_comment",senderId:de,senderName:ue,senderPhotoURL:ce,experienceId:te,parentCommentId:_e,replyPreview:$(oe,40),experiencePreview:$(be,30),message:`${ue} replied to your comment`,isRead:!1,createdAt:st(),expiresAt:lt.fromDate(me(30))},qe=Rt(De,"notifications",ee,"userNotifications");await ma(qe,Ae),console.log(" Reply notification created successfully")}catch(Ae){console.error(" Error creating reply notification:",Ae)}},k=U.useCallback(async()=>{if(!e?.uid)return;console.log(" DEBUG: Checking notifications...");const te=Rt(De,"notifications",e.uid,"userNotifications"),ee=Bn(te,_i(5));try{const de=await Ki(ee);console.log(` DEBUG: Found ${de.size} notifications for user ${e.uid}`),de.forEach((ue,ce)=>{console.log(`  ${ce+1}. ${ue.id}:`,ue.data())}),de.size===0&&console.log(" No notifications found.")}catch(de){console.error(" DEBUG: Error checking notifications:",de)}},[e]),I=async()=>{if(!e)return;console.log(" Testing notification creation...");const te={type:"test",senderId:e.uid,senderName:"Test User",senderPhotoURL:e.photoURL,experienceId:"test-123",message:"This is a test notification",isRead:!1,createdAt:st(),expiresAt:lt.fromDate(me(30))};try{const ee=Rt(De,"notifications",e.uid,"userNotifications");await ma(ee,te),console.log(" Test notification created!")}catch(ee){console.error(" Test notification failed:",ee)}},ae=()=>_R(Um,OD),xe=()=>(g(null),d([]),S({}),P([]),q(0),Jx(Um)),G=async te=>{if(!e)throw new Error("User must be logged in");const ee={...te,thoughtOfTheDay:te.thoughtOfTheDay||"",shareLifeExperience:te.shareLifeExperience||"",thoughtLikes:0,thoughtLikers:[],experienceLikes:0,commentCount:0,experienceLikers:[],userId:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:st(),updatedAt:st()};await Mm(kt(De,"profiles",e.uid),ee),ee.shareLifeExperience&&ee.shareLifeExperience.trim()!==""&&await Ee(ee);const de={id:e.uid,...ee};g(de);const ue={id:e.uid,displayName:ee.displayName,photoURL:ee.photoURL,location:ee.location||"",thoughtOfTheDay:ee.thoughtOfTheDay||"",shareLifeExperience:ee.shareLifeExperience||"",thoughtLikes:0,experienceLikes:0};return d(ce=>{const oe=ce.findIndex(_e=>_e.id===e.uid);if(oe>=0){const _e=[...ce];return _e[oe]=ue,_e}return[...ce,ue]}),await he(),ee},le=async()=>{if(!e)throw new Error("User must be logged in");try{return await RD(kt(De,"profiles",e.uid)),g(null),d(te=>te.filter(ee=>ee.id!==e.uid)),!0}catch(te){throw console.error("Error deleting profile:",te),te}},pe=async te=>{try{const ee=Bn(Rt(De,"experiences"),vo("userId","==",te),vo("isActive","==",!0),_i(1)),de=await Ki(ee);if(!de.empty){const ue=de.docs[0];return{id:ue.id,...ue.data()}}return null}catch(ee){return console.error("Error getting user experience:",ee),null}},Ee=async te=>{if(!e)throw new Error("User must be logged in");if(!te.shareLifeExperience||te.shareLifeExperience.trim()==="")return null;const ee=await pe(e.uid);if(ee){const de=kt(De,"experiences",ee.id);return await Ar(de,{content:te.shareLifeExperience,updatedAt:st(),userDisplayName:e.displayName,userPhotoURL:e.photoURL}),ee.id}else{const de={userId:e.uid,userDisplayName:e.displayName,userPhotoURL:e.photoURL,content:te.shareLifeExperience,createdAt:st(),updatedAt:st(),likeCount:0,commentCount:0,isActive:!0};try{const ue=await ma(Rt(De,"experiences"),de);return y&&await Ar(kt(De,"profiles",e.uid),{experienceId:ue.id,updatedAt:st()}),ue.id}catch(ue){throw console.error("Error adding experience:",ue),ue}}},Re=async(te=20,ee=null,de="newest")=>{try{console.log(" DEBUG fetchExperiences:",{limitCount:te,sortBy:de,hasLastDoc:!!ee}),console.log(" DEBUG fetchExperiences - Sorting by:",de),console.log(" DEBUG - Will order by field:",de==="most_commented"?"comments":de==="most_liked"?"likeCount":"createdAt");let ue,ce="createdAt",oe="desc";switch(de){case"most_liked":ce="likeCount",oe="desc";break;case"most_commented":ce="commentCount",oe="desc";break;case"newest":default:ce="createdAt",oe="desc";break}ee?ue=Bn(Rt(De,"experiences"),vo("isActive","==",!0),xr(ce,oe),ED(ee),_i(te)):ue=Bn(Rt(De,"experiences"),vo("isActive","==",!0),xr(ce,oe),_i(te)),console.log(" DEBUG: Query created with order:",ce,oe);const _e=await Ki(ue);console.log(` DEBUG: Query returned ${_e.size} documents`);const be=[];let Ae=null;return _e.forEach((qe,bt)=>{const Ge=qe.data();console.log(` DEBUG ${bt+1}. ${qe.id}:`,{userId:Ge.userId,userDisplayName:Ge.userDisplayName,content:Ge.content?.substring(0,50)+"...",likeCount:Ge.likeCount,commentCount:Ge.commentCount,createdAt:Ge.createdAt});const en=Ge.createdAt?.toDate?Ge.createdAt.toDate():Ge.createdAt;be.push({id:qe.id,...Ge,createdAt:en,likeCount:Number(Ge.likeCount)||0,commentCount:Number(Ge.commentCount)||0}),Ae=qe}),console.log(` DEBUG: Returning ${be.length} experiences`),console.log(` DEBUG: Has more? ${be.length===te}`),{experiences:be,lastDoc:Ae,hasMore:be.length===te}}catch(ue){return console.error(" ERROR fetchExperiences:",ue),console.error("Error code:",ue.code),console.error("Error message:",ue.message),ue.code==="failed-precondition"&&(console.error(" FIREBASE INDEX ERROR DETECTED!"),console.error("You need to create composite indexes in Firebase Console:"),console.error("1. Collection: experiences, Fields: isActive (Ascending), createdAt (Descending)"),console.error("2. Collection: experiences, Fields: isActive (Ascending), likeCount (Descending)"),console.error("3. Collection: experiences, Fields: isActive (Ascending), commentCount (Descending)")),{experiences:[],lastDoc:null,hasMore:!1}}},M=te=>{const ee=Bn(Rt(De,"experiences"),vo("isActive","==",!0),xr("createdAt","desc"),_i(50));return dp(ee,de=>{const ue=de.docs.map(ce=>({id:ce.id,...ce.data()}));te(ue)})},W=U.useCallback(async te=>{if(m[te])return m[te];try{const ee=kt(De,"profiles",te),de=await da(ee);if(de.exists()){const ue=de.data(),ce={id:te,...ue,thoughtLikes:ue.thoughtLikes||0,thoughtLikers:ue.thoughtLikers||[],experienceLikes:ue.experienceLikes||0,experienceLikers:ue.experienceLikers||[]};return S(oe=>({...oe,[te]:ce})),ce}}catch(ee){console.error("Error fetching full profile:",ee)}return null},[m]),he=U.useCallback(async()=>{x(!0);try{const te=Rt(De,"profiles"),ee=Bn(te,xr("createdAt"),_i(1e4)),ue=(await Ki(ee)).docs.map(ce=>{const oe=ce.data();return{id:ce.id,displayName:oe.displayName||"Anonymous",photoURL:oe.photoURL||"https://i.pravatar.cc/150?u=default",location:oe.location||"",thoughtOfTheDay:oe.thoughtOfTheDay||"",shareLifeExperience:oe.shareLifeExperience||"",thoughtLikes:oe.thoughtLikes||0,thoughtLikers:oe.thoughtLikers||[],experienceLikes:oe.experienceLikes||0,experienceLikers:oe.experienceLikers||[]}});d(ue)}catch(te){console.error("Error loading profiles:",te)}finally{x(!1)}},[]),ve=async()=>{if(c.length===0)return 0;try{x(!0);const te=ys(De),ee=Math.min(c.length,500),de=c.slice(0,ee);return de.forEach(ue=>{const ce=kt(De,"profiles",ue.id);te.delete(ce)}),await te.commit(),d([]),S({}),de.length}catch(te){throw console.error("Error clearing profiles:",te),te}finally{x(!1)}},Ne=async te=>{if(!e)throw new Error("User must be logged in");try{const ee=kt(De,"profiles",te),de=await da(ee);if(!de.exists())throw new Error("Profile not found");const ue=de.data(),oe=(ue.thoughtLikers||[]).includes(e.uid),_e={thoughtLikers:oe?Pm(e.uid):Vm(e.uid)},be=ue.thoughtLikes||0;return _e.thoughtLikes=oe?be-1:be+1,_e.updatedAt=st(),await Ar(ee,_e),te===e.uid&&y&&g(Ae=>({...Ae,thoughtLikers:oe?Ae.thoughtLikers.filter(qe=>qe!==e.uid):[...Ae.thoughtLikers,e.uid],thoughtLikes:oe?Ae.thoughtLikes-1:Ae.thoughtLikes+1})),d(Ae=>Ae.map(qe=>qe.id===te?{...qe,thoughtLikers:oe?(qe.thoughtLikers||[]).filter(bt=>bt!==e.uid):[...qe.thoughtLikers||[],e.uid],thoughtLikes:oe?(qe.thoughtLikes||1)-1:(qe.thoughtLikes||0)+1}:qe)),m[te]&&S(Ae=>({...Ae,[te]:{...Ae[te],thoughtLikers:oe?Ae[te].thoughtLikers.filter(qe=>qe!==e.uid):[...Ae[te].thoughtLikers,e.uid],thoughtLikes:oe?Ae[te].thoughtLikes-1:Ae[te].thoughtLikes+1}})),console.log(` Thought ${oe?"unliked":"liked"} for user ${te}`),!oe}catch(ee){throw console.error("Error toggling thought like:",ee),ee}},Le=async te=>{if(!e)throw new Error("User must be logged in");try{const ee=kt(De,"experiences",te),de=await da(ee);if(!de.exists())throw new Error("Experience not found");const ue=de.data(),ce=ue.likedBy?.includes(e.uid)||!1,oe={likedBy:ce?Pm(e.uid):Vm(e.uid),likeCount:uc(ce?-1:1),updatedAt:st()};return await Ar(ee,oe),!ce&&ue.userId!==e.uid&&(console.log(" Creating like notification for experience owner:",ue.userId),await R({experienceId:te,experienceOwnerId:ue.userId,likerId:e.uid,likerName:e.displayName,likerPhotoURL:e.photoURL,experienceContent:ue.content})),!ce}catch(ee){throw console.error("Error toggling experience like:",ee),ee}},Fe=async(te,ee,de=null)=>{if(!e)throw new Error("User must be logged in");try{const ue=await ma(Rt(De,"experiences",te,"comments"),{userId:e.uid,userDisplayName:e.displayName,userPhotoURL:e.photoURL,content:ee,createdAt:st(),parentCommentId:de,depth:de?1:0,likeCount:0,likedBy:[]}),ce=kt(De,"experiences",te);await Ar(ce,{commentCount:uc(1),updatedAt:st()});const oe=await fe(te);if(oe&&(!de&&oe.userId!==e.uid&&await C({experienceId:te,experienceOwnerId:oe.userId,commenterId:e.uid,commenterName:e.displayName,commenterPhotoURL:e.photoURL,commentContent:ee,experienceContent:oe.content}),de)){const _e=await Se(te,de);_e&&_e.userId!==e.uid&&await N({experienceId:te,originalCommenterId:_e.userId,replierId:e.uid,replierName:e.displayName,replierPhotoURL:e.photoURL,replyContent:ee,parentCommentId:de,experienceContent:oe.content})}return{id:ue.id,userId:e.uid,userDisplayName:e.displayName,userPhotoURL:e.photoURL,content:ee,createdAt:new Date,parentCommentId:de,depth:de?1:0,likeCount:0,likedBy:[]}}catch(ue){throw console.error("Error adding comment:",ue),ue}},Tt=async(te,ee=10,de=null)=>{try{console.log(`Fetching comments for experience: ${te}, limit: ${ee}`);let ue=Bn(Rt(De,"experiences",te,"comments"),xr("createdAt","asc"),_i(ee));const ce=await Ki(ue),oe=[];let _e=null;return ce.forEach(be=>{const Ae=be.data(),qe={id:be.id,userId:Ae.userId||"unknown_user",userDisplayName:Ae.userDisplayName||"Anonymous",userPhotoURL:Ae.userPhotoURL||"https://i.pravatar.cc/150",content:Ae.content||"",createdAt:Ae.createdAt,parentCommentId:Ae.parentCommentId||null,depth:Ae.depth||0,likeCount:Ae.likeCount||0,likedBy:Ae.likedBy||[],...Ae};oe.push(qe),_e=be}),console.log(`Found ${oe.length} comments for experience ${te}`),{comments:oe,lastDoc:_e}}catch(ue){return console.error("Error fetching comments:",ue),{comments:[],lastDoc:null}}},ot=async(te,ee)=>{if(!e)throw new Error("User must be logged in");try{const de=kt(De,"experiences",te,"comments",ee),ue=await da(de);if(!ue.exists())throw console.log("Comment not found:",{experienceId:te,commentId:ee}),new Error("Comment not found");const oe=ue.data().likedBy?.includes(e.uid)||!1,_e={likedBy:oe?Pm(e.uid):Vm(e.uid),likeCount:uc(oe?-1:1),updatedAt:st()};return await Ar(de,_e),!oe}catch(de){throw console.error("Error toggling comment like:",de,{experienceId:te,commentId:ee}),de}},si=async()=>{const te=`test_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,ee=["Alex Johnson","Maria Garcia","James Smith","Sarah Chen","Mike Brown","Lisa Wang","David Kim","Emma Davis"],de=["New York, USA","London, UK","Tokyo, Japan","Sydney, Australia","Berlin, Germany","Toronto, Canada"],ue=["Programming, Hiking, Music","Photography, Travel, Food","Gaming, AI, Robotics","Art, Design, Fashion","Sports, Cooking, Reading"],ce=["The only way to do great work is to love what you do.","Innovation distinguishes between a leader and a follower.","The future belongs to those who believe in the beauty of their dreams.","Don't watch the clock; do what it does. Keep going.","The best time to plant a tree was 20 years ago. The second best time is now."],oe=["Traveled across Asia for 6 months, learning about different cultures and philosophies. The journey taught me that happiness comes from within.","Built my first startup at 22, failed, but learned invaluable lessons about resilience and perseverance that shaped my career.","Survived a hiking accident in the Andes that taught me the true meaning of teamwork and trusting others in difficult situations.","Volunteered in a remote village in Africa for a year, which completely changed my perspective on what really matters in life.","Overcame a serious illness that made me appreciate every single day and find joy in the smallest moments."],_e=ee[Math.floor(Math.random()*ee.length)],be=de[Math.floor(Math.random()*de.length)],Ae=ue[Math.floor(Math.random()*ue.length)],qe=ce[Math.floor(Math.random()*ce.length)],bt=oe[Math.floor(Math.random()*oe.length)],Ge={userId:te,email:`${_e.toLowerCase().replace(" ",".")}@test.com`,displayName:_e,photoURL:`https://i.pravatar.cc/150?u=${te}`,thoughtOfTheDay:qe,shareLifeExperience:bt,thoughtLikes:Math.floor(Math.random()*20),thoughtLikers:[],experienceLikes:Math.floor(Math.random()*15),experienceLikers:[],website:"https://example.com",location:be,interests:Ae,commentCount:0,createdAt:st(),updatedAt:st(),isTest:!0};if(await Mm(kt(De,"profiles",te),Ge),bt&&bt.trim()!==""){const en=`exp_${te}`,Fn={userId:te,userDisplayName:_e,userPhotoURL:`https://i.pravatar.cc/150?u=${te}`,content:bt,createdAt:st(),updatedAt:st(),likeCount:Ge.experienceLikes||0,commentCount:0,likedBy:[],isActive:!0};await Mm(kt(De,"experiences",en),Fn),await Ar(kt(De,"profiles",te),{experienceId:en,updatedAt:st()})}return await he(),Ge},Ai=async te=>{x(!0);let ee=ys(De),de=ys(De);const ue=Math.min(te,1e3);console.log(`Starting bulk creation of ${ue} profiles with experiences...`);let ce=0,oe=0;const _e=[];for(let be=0;be<ue;be++){const Ae=`test_bulk_${Date.now()}_${be}`,qe=["Alex","Maria","James","Sarah","Mike","Lisa","David","Emma"],bt=["Johnson","Garcia","Smith","Chen","Brown","Wang","Kim","Davis"],Ge=["New York","London","Tokyo","Sydney","Berlin","Toronto"],en=["The only way to do great work is to love what you do.","Innovation distinguishes between a leader and a follower.","The future belongs to those who believe in the beauty of their dreams."],Fn=["Traveled across Asia for 6 months, learning about different cultures and philosophies. The journey taught me that happiness comes from within.","Built my first startup at 22, failed, but learned invaluable lessons about resilience and perseverance that shaped my career.","Survived a hiking accident in the Andes that taught me the true meaning of teamwork and trusting others in difficult situations.","Volunteered in a remote village in Africa for a year, which completely changed my perspective on what really matters in life.","Overcame a serious illness that made me appreciate every single day and find joy in the smallest moments.","Moved to a new country without knowing anyone, forcing me to grow and become more independent than I ever thought possible.","Learned a new language in my 30s, proving that it's never too late to challenge yourself and acquire new skills.","Witnessed the birth of my first child, an experience that redefined my understanding of love and responsibility.","Failed an important exam multiple times before finally passing, teaching me that persistence is more important than talent.","Helped a stranger in need during a storm, which led to a lifelong friendship and taught me about the value of human connection."],Vr=`${qe[Math.floor(Math.random()*qe.length)]} ${bt[Math.floor(Math.random()*bt.length)]}`,xi=`${Ge[Math.floor(Math.random()*Ge.length)]}, ${["USA","UK","Japan","Australia","Germany","Canada"][Math.floor(Math.random()*6)]}`,Ko=en[Math.floor(Math.random()*en.length)],Pr=Fn[Math.floor(Math.random()*Fn.length)],Ps={userId:Ae,email:`${Vr.toLowerCase().replace(" ",".")}@test.com`,displayName:Vr,photoURL:`https://i.pravatar.cc/150?u=${Ae}`,thoughtOfTheDay:Ko,shareLifeExperience:Pr,thoughtLikes:Math.floor(Math.random()*30),thoughtLikers:[],experienceLikes:Math.floor(Math.random()*20),experienceLikers:[],website:"https://example.com",location:xi,interests:"Programming, Technology",commentCount:0,createdAt:st(),updatedAt:st(),isTest:!0},Da=kt(De,"profiles",Ae);ee.set(Da,Ps),ce++,Pr&&Pr.trim()!==""&&_e.push({profileId:Ae,profileData:Ps}),ce%100===0&&(await ee.commit(),ee=ys(De),console.log(`Committed ${ce} profiles...`))}ce%100!==0&&await ee.commit(),console.log(` Successfully created ${ce} test profiles!`),console.log(`Creating experiences for ${_e.length} profiles...`);for(let be=0;be<_e.length;be++){const{profileId:Ae,profileData:qe}=_e[be],bt=`exp_${Ae}`,Ge={userId:Ae,userDisplayName:qe.displayName,userPhotoURL:qe.photoURL,content:qe.shareLifeExperience,createdAt:st(),updatedAt:st(),likeCount:qe.experienceLikes||0,commentCount:0,likedBy:[],isActive:!0},en=kt(De,"experiences",bt);de.set(en,Ge),oe++;const Fn=kt(De,"profiles",Ae);await Ar(Fn,{experienceId:bt,updatedAt:st()}),oe%100===0&&(await de.commit(),de=ys(De),console.log(`Committed ${oe} experiences...`))}return oe%100!==0&&await de.commit(),console.log(` Successfully created ${ce} test profiles with ${oe} experiences!`),await he(),ce};U.useEffect(()=>{let te=null;if(e?.uid){console.log(" Setting up real-time notifications listener for user:",e.uid),ne(!0);const ee=Rt(De,"notifications",e.uid,"userNotifications"),de=Bn(ee,xr("createdAt","desc"),_i(20));te=dp(de,ue=>{const ce=[];let oe=0;ue.forEach(_e=>{const be=_e.data(),Ae={id:_e.id,...be,createdAt:be.createdAt?.toDate?be.createdAt.toDate():new Date,expiresAt:be.expiresAt?.toDate?be.expiresAt.toDate():null};ce.push(Ae),Ae.isRead||oe++}),console.log(` Real-time notifications updated: ${ce.length} total, ${oe} unread`),P(ce),q(oe),ne(!1)},ue=>{console.error(" Error in real-time notifications:",ue),ne(!1)})}else console.log(" No user, clearing notifications"),P([]),q(0);return()=>{te&&(console.log(" Cleaning up notifications listener"),te())}},[e]),U.useEffect(()=>Wx(Um,async ee=>{if(n(ee),ee)try{const de=kt(De,"profiles",ee.uid),ue=await da(de);if(ue.exists()){const ce=ue.data();g({id:ee.uid,...ce})}}catch(de){console.error("Error fetching user profile:",de)}else g(null);o(!1)}),[]),U.useEffect(()=>{(async()=>{!E&&e!==null&&await he()})()},[e]),U.useEffect(()=>{he()},[he]);const wi={user:e,userProfile:y,profiles:c,profilesLoading:E,notifications:L,unreadCount:z,loadingNotifications:Q,markNotificationAsRead:D,markAllNotificationsAsRead:w,debugNotifications:k,testNotification:I,signInWithGoogle:ae,logout:xe,createUserProfile:G,deleteUserProfile:le,fetchFullProfile:W,clearAllProfiles:ve,loadProfiles:he,likeThought:Ne,likeExperience:Le,fetchExperiences:Re,subscribeToExperiences:M,addUserExperience:Ee,addComment:Fe,fetchComments:Tt,likeComment:ot,addTestProfile:si,createBulkTestProfiles:Ai};return b.jsx(gT.Provider,{value:wi,children:!s&&r})},MD=()=>{const{user:r,unreadCount:e,notifications:n,loadingNotifications:s,markNotificationAsRead:o,markAllNotificationsAsRead:c}=Nn(),[d,y]=U.useState(!1),[g,m]=U.useState(!1),S=U.useRef(null),E=U.useRef(0);U.useEffect(()=>{e>E.current&&(m(!0),setTimeout(()=>m(!1),1e3)),E.current=e},[e]),U.useEffect(()=>{const $=me=>{S.current&&!S.current.contains(me.target)&&y(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const x=()=>{y(!d)},L=async $=>{$.isRead||await o($.id),$.experienceId&&window.dispatchEvent(new CustomEvent("navigateToExperience",{detail:{experienceId:$.experienceId}})),y(!1)},P=async()=>{await c()},z=()=>{window.dispatchEvent(new CustomEvent("showAllNotifications")),y(!1)},q=$=>{switch($){case"like_experience":return"";case"comment_experience":return"";case"reply_comment":return"";default:return""}},Q=$=>{switch($){case"like_experience":return"#e74c3c";case"comment_experience":return"#3498db";case"reply_comment":return"#2ecc71";default:return"#95a5a6"}},ne=$=>{if(!$)return"Just now";const fe=new Date-$,Se=Math.floor(fe/6e4),D=Math.floor(fe/36e5),w=Math.floor(fe/864e5);return Se<1?"Just now":Se<60?`${Se}m ago`:D<24?`${D}h ago`:w<7?`${w}d ago`:$.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return r?b.jsxs("div",{style:LD,ref:S,children:[b.jsxs("button",{onClick:x,style:{...VD,backgroundColor:d?"rgba(52, 152, 219, 0.2)":"transparent",animation:g?"pulse 0.6s ease-in-out":"none"},title:e>0?`${e} unread notifications`:"Notifications",children:[b.jsx("span",{style:PD,children:""}),e>0&&b.jsx("span",{style:UD,children:e>99?"99+":e})]}),d&&b.jsxs("div",{style:jD,children:[b.jsxs("div",{style:zD,children:[b.jsxs("h4",{style:BD,children:[" Notifications ",e>0&&`(${e})`]}),e>0&&b.jsx("button",{onClick:P,style:qD,title:"Mark all as read",children:"Mark all read"})]}),b.jsx("div",{style:HD,children:s?b.jsxs("div",{style:ZD,children:[b.jsx("div",{style:e5}),b.jsx("div",{children:"Loading notifications..."})]}):n.length===0?b.jsxs("div",{style:t5,children:[b.jsx("div",{style:n5,children:""}),b.jsx("div",{style:i5,children:"No notifications yet"}),b.jsx("div",{style:r5,children:"Your notifications will appear here"})]}):b.jsxs(b.Fragment,{children:[n.slice(0,10).map($=>b.jsxs("div",{onClick:()=>L($),style:{...FD,backgroundColor:$.isRead?"transparent":"rgba(52, 152, 219, 0.08)",borderLeft:`4px solid ${Q($.type)}`},children:[b.jsxs("div",{style:GD,children:[b.jsx("div",{style:$D,children:q($.type)}),b.jsxs("div",{style:YD,children:[b.jsx("div",{style:QD,children:$.message}),$.commentPreview&&b.jsxs("div",{style:KD,children:['"',$.commentPreview,'"']}),b.jsxs("div",{style:XD,children:[ne($.createdAt),!$.isRead&&b.jsx("span",{style:WD,children:""})]})]})]}),$.senderPhotoURL&&b.jsx("img",{src:$.senderPhotoURL,alt:$.senderName,style:JD})]},$.id)),n.length>10&&b.jsxs("button",{onClick:z,style:s5,children:["View all notifications (",n.length,")"]})]})})]}),b.jsx("style",{children:`
          @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
          }
          
          @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
          }
        `})]}):null},LD={position:"relative",display:"inline-block"},VD={position:"relative",background:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"1.3rem",width:"44px",height:"44px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.1)",color:"#3498db",transform:"scale(1.05)"}},PD={fontSize:"1.3rem"},UD={position:"absolute",top:"4px",right:"4px",backgroundColor:"#e74c3c",color:"white",borderRadius:"50%",minWidth:"18px",height:"18px",fontSize:"0.65rem",fontWeight:"700",display:"flex",alignItems:"center",justifyContent:"center",animation:"pulse 0.6s ease-in-out"},jD={position:"absolute",top:"calc(100% + 8px)",right:0,width:"360px",maxHeight:"500px",backgroundColor:"rgba(20, 25, 45, 0.98)",backdropFilter:"blur(20px)",border:"1px solid #34495e",borderRadius:"12px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",zIndex:1e3,overflow:"hidden",animation:"fadeIn 0.2s ease"},zD={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.2rem",borderBottom:"1px solid #34495e",backgroundColor:"rgba(44, 62, 80, 0.5)"},BD={margin:0,fontSize:"1rem",color:"#FFD700",fontWeight:"600"},qD={backgroundColor:"transparent",border:"1px solid #34495e",color:"#95a5a6",padding:"0.3rem 0.8rem",borderRadius:"18px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.1)",color:"#3498db"}},HD={maxHeight:"400px",overflowY:"auto","&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"rgba(52, 73, 94, 0.3)",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{background:"#3498db",borderRadius:"3px"}},FD={display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"1rem 1.2rem",borderBottom:"1px solid rgba(52, 73, 94, 0.3)",cursor:"pointer",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.1)"}},GD={display:"flex",gap:"0.8rem",flex:1},$D={fontSize:"1.2rem",marginTop:"2px"},YD={flex:1},QD={color:"#ecf0f1",fontSize:"0.9rem",fontWeight:"500",marginBottom:"0.3rem",lineHeight:"1.4"},KD={color:"#bdc3c7",fontSize:"0.8rem",fontStyle:"italic",margin:"0.2rem 0",backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"0.3rem 0.5rem",borderRadius:"6px",borderLeft:"2px solid #3498db"},XD={color:"#95a5a6",fontSize:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},WD={color:"#3498db",fontSize:"0.6rem",animation:"pulse 1s infinite"},JD={width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db",marginLeft:"0.8rem"},ZD={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",color:"#95a5a6",gap:"1rem"},e5={width:"30px",height:"30px",border:"3px solid rgba(52, 152, 219, 0.2)",borderTop:"3px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},t5={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem",color:"#95a5a6",textAlign:"center"},n5={fontSize:"2.5rem",marginBottom:"1rem",opacity:.5},i5={fontSize:"1rem",fontWeight:"600",marginBottom:"0.5rem",color:"#bdc3c7"},r5={fontSize:"0.85rem",opacity:.7,maxWidth:"200px"},s5={width:"100%",backgroundColor:"rgba(52, 73, 94, 0.5)",border:"1px solid #34495e",color:"#bdc3c7",padding:"0.8rem",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 73, 94, 0.8)",color:"#ecf0f1"}},a5=({activeTab:r,setActiveTab:e})=>{const{user:n,userProfile:s,profiles:o,signInWithGoogle:c,logout:d}=Nn(),[y,g]=U.useState(!1),m=U.useRef(null),S=U.useRef(null),E=async()=>{try{await c()}catch(ne){console.error("Error signing in:",ne)}},x=async()=>{try{await d()}catch(ne){console.error("Error signing out:",ne)}},L=()=>{g(!y)},P=()=>{window.dispatchEvent(new CustomEvent("showDonationPopup"))},z=()=>{window.dispatchEvent(new CustomEvent("showTestPanel"))};U.useEffect(()=>{const ne=$=>{m.current&&S.current&&!m.current.contains($.target)&&!S.current.contains($.target)&&g(!1)};return y&&document.addEventListener("mousedown",ne),()=>{document.removeEventListener("mousedown",ne)}},[y]);const Q=(()=>{if(o.length===0)return null;const ne=window.innerWidth,$=window.innerHeight-80;let me=1,fe=0,Se=1/0;for(let w=1;w<=Math.min(o.length,100);w++){const R=Math.ceil(o.length/w),C=ne/w,N=$/R,k=Math.min(C,N),I=Math.abs(ne-w*k)+Math.abs($-R*k);I<Se&&(Se=I,me=w,fe=k)}const D=Math.ceil(o.length/me);return{members:o.length.toLocaleString(),tileSize:Math.floor(fe),grid:`${me}${D}`,density:(o.length/(me*D)).toFixed(2)}})();return b.jsx("header",{style:o5,children:b.jsxs("div",{style:l5,children:[b.jsxs("div",{style:c5,children:[b.jsx("div",{style:u5,children:b.jsx("h1",{style:h5,children:" Limitless"})}),b.jsxs("div",{style:d5,children:[b.jsx("button",{onClick:()=>e("galaxy"),style:{...bb,backgroundColor:r==="galaxy"?"rgba(52, 152, 219, 0.2)":"transparent",color:r==="galaxy"?"#FFD700":"#bdc3c7",borderBottom:r==="galaxy"?"3px solid #FFD700":"3px solid transparent"},children:" Galaxy"}),b.jsx("button",{onClick:()=>e("experiences"),style:{...bb,backgroundColor:r==="experiences"?"rgba(52, 152, 219, 0.2)":"transparent",color:r==="experiences"?"#FFD700":"#bdc3c7",borderBottom:r==="experiences"?"3px solid #FFD700":"3px solid transparent"},children:" Life Experiences"})]})]}),b.jsxs("div",{style:f5,children:[Q&&b.jsxs("div",{style:m5,children:[b.jsxs("button",{ref:S,onClick:L,style:p5,title:"Show grid information",children:[" ",Q.members," stars"]}),y&&b.jsxs("div",{ref:m,style:b5,children:[b.jsxs("div",{style:S5,children:[b.jsx("h4",{style:E5,children:"Galaxy Stats"}),b.jsx("button",{onClick:()=>g(!1),style:T5,children:""})]}),b.jsxs("div",{style:A5,children:[b.jsxs("div",{style:hh,children:[b.jsx("span",{style:dh,children:"Total Stars:"}),b.jsx("span",{style:fh,children:Q.members})]}),b.jsxs("div",{style:hh,children:[b.jsx("span",{style:dh,children:"Star Size:"}),b.jsxs("span",{style:fh,children:[Q.tileSize,"px"]})]}),b.jsxs("div",{style:hh,children:[b.jsx("span",{style:dh,children:"Galaxy Layout:"}),b.jsx("span",{style:fh,children:Q.grid})]}),b.jsxs("div",{style:hh,children:[b.jsx("span",{style:dh,children:"Star Density:"}),b.jsx("span",{style:fh,children:Q.density})]})]})]})]}),b.jsx("button",{onClick:P,style:g5,title:"Support the galaxy",children:" Donate"}),b.jsx("button",{onClick:z,style:y5,title:"Open test panel",children:" Test"}),n&&b.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("showCreateProfile",{detail:{mode:s?"edit":"create"}})),style:s?v5:_5,title:s?"Edit your profile":"Create your profile",children:s?" Edit":" Create"})]}),b.jsx("div",{children:b.jsx(MD,{})}),b.jsx("div",{style:w5,children:n?b.jsxs("div",{style:x5,children:[b.jsx("img",{src:n.photoURL,alt:n.displayName,style:R5}),b.jsxs("div",{style:C5,children:[b.jsx("span",{style:I5,children:n.displayName}),s&&b.jsx("span",{style:D5,title:"You have a profile",children:""})]}),b.jsx("button",{onClick:x,style:O5,children:"Sign Out"})]}):b.jsx("button",{onClick:E,style:N5,children:" Sign In"})})]})})},o5={position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(44, 62, 80, 0.95)",color:"white",padding:"0.75rem 0",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",width:"100vw",borderBottom:"1px solid #34495e",zIndex:1e3,backdropFilter:"blur(10px)"},l5={width:"100%",maxWidth:"1400px",margin:"0 auto",padding:"0 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},c5={display:"flex",alignItems:"center",gap:"2rem",flexShrink:0},u5={flexShrink:0},h5={margin:0,fontSize:"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},d5={display:"flex",gap:"0.5rem",height:"100%"},bb={padding:"0.5rem 1.25rem",border:"none",background:"transparent",color:"#bdc3c7",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.5rem"},f5={display:"flex",alignItems:"center",gap:"1rem",flex:1,justifyContent:"center"},m5={position:"relative"},p5={backgroundColor:"#34495e",color:"#bdc3c7",border:"1px solid #2c3e50",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},g5={backgroundColor:"#FFD700",color:"#2c3e50",border:"none",padding:"0.5rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 2px 10px rgba(255, 215, 0, 0.3)"},y5={backgroundColor:"#9b59b6",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},_5={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.5rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},v5={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.5rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},b5={position:"absolute",top:"calc(100% + 10px)",left:"50%",transform:"translateX(-50%)",backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"12px",padding:"1rem",width:"280px",boxShadow:"0 8px 30px rgba(0,0,0,0.4)",zIndex:2e3,animation:"fadeIn 0.2s ease"},S5={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid #34495e"},E5={margin:0,fontSize:"1rem",color:"#ecf0f1",fontWeight:"600"},T5={background:"none",border:"none",color:"#95a5a6",fontSize:"1.2rem",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},A5={display:"flex",flexDirection:"column",gap:"0.75rem"},hh={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.25rem 0"},dh={fontSize:"0.85rem",color:"#bdc3c7",fontWeight:"500"},fh={fontSize:"0.9rem",color:"#ecf0f1",fontWeight:"600",backgroundColor:"#34495e",padding:"0.25rem 0.5rem",borderRadius:"4px",minWidth:"60px",textAlign:"center"},w5={display:"flex",alignItems:"center",flexShrink:0},x5={display:"flex",alignItems:"center",gap:"0.75rem"},R5={width:"36px",height:"36px",borderRadius:"50%",border:"2px solid #3498db"},C5={display:"flex",alignItems:"center",gap:"0.5rem"},I5={fontWeight:"500",color:"#ecf0f1",fontSize:"0.9rem"},D5={color:"#FFD700",fontSize:"1rem"},N5={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},O5={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"0.4rem 0.8rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease"},yT=document.createElement("style");yT.innerText=`
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}
`;document.head.appendChild(yT);const qn={DURATION_MS:5e3,FADE_IN_MS:500,MIN_STAR_SIZE_FOR_TOOLTIP:3,TOOLTIP_OFFSET:50,MAX_TOOLTIP_WIDTH:300},Sb={MAX_THOUGHT_LENGTH:500,MAX_LIFE_EXPERIENCE_LENGTH:1e3},wr={STAR_PULSE:2e3,GLOW_TRANSITION:500},ln={STAR_GLOW:"#FFFF00",STAR_NORMAL:"rgba(255, 255, 255, 0.9)",TOOLTIP_BG:"rgba(20, 25, 45, 0.95)",TOOLTIP_BORDER:"#FFFF00",TOOLTIP_TEXT:"rgba(240, 240, 255, 0.95)"},k5={INITIAL_LOAD_COUNT:10},mh={NEWEST:"newest",MOST_LIKED:"most_liked",MOST_COMMENTED:"most_commented"};console.log("Spotlight duration configured:",qn.DURATION_MS,"ms");console.log("Experience infinite scroll: Initial load",k5.INITIAL_LOAD_COUNT);const M5=({isOpen:r,onClose:e})=>{const{user:n,userProfile:s,createUserProfile:o,deleteUserProfile:c}=Nn(),[d,y]=U.useState("create"),[g,m]=U.useState({thoughtOfTheDay:"",shareLifeExperience:"",website:"",location:"",interests:""}),[S,E]=U.useState(!1),[x,L]=U.useState(!1);U.useEffect(()=>{r&&(s?(y("edit"),m({thoughtOfTheDay:s.thoughtOfTheDay||"",shareLifeExperience:s.shareLifeExperience||"",website:s.website||"",location:s.location||"",interests:s.interests||""})):(y("create"),m({thoughtOfTheDay:"",shareLifeExperience:"",website:"",location:"",interests:""})))},[r,s]);const P=async Q=>{if(Q.preventDefault(),!!n){E(!0);try{await o(g),e()}catch(ne){console.error(`Error ${d==="create"?"creating":"updating"} profile:`,ne)}finally{E(!1)}}},z=Q=>{m({...g,[Q.target.name]:Q.target.value})},q=async()=>{if(window.confirm("Are you sure you want to delete your profile? This action cannot be undone.")){E(!0);try{await c(),e()}catch(Q){console.error("Error deleting profile:",Q)}finally{E(!1),L(!1)}}};return r?b.jsx("div",{style:L5,onClick:e,children:b.jsxs("div",{style:V5,onClick:Q=>Q.stopPropagation(),children:[b.jsxs("div",{style:P5,children:[b.jsx("h2",{children:d==="create"?"Create Your Profile":"Edit Your Profile"}),b.jsx("button",{onClick:e,style:U5,children:""})]}),d==="edit"&&s&&b.jsxs("div",{style:j5,children:[b.jsx("p",{style:z5,children:"You already have a profile! Update your information below."}),b.jsxs("div",{style:B5,children:[b.jsx("img",{src:n.photoURL,alt:n.displayName,style:q5}),b.jsxs("div",{style:H5,children:[b.jsx("strong",{style:F5,children:n.displayName}),b.jsx("p",{style:G5,children:n.email}),b.jsx("button",{onClick:()=>L(!0),style:$5,type:"button",children:" Delete Profile"})]})]})]}),x&&b.jsx("div",{style:Y5,children:b.jsxs("div",{style:Q5,children:[b.jsx("h3",{style:K5,children:"Delete Profile?"}),b.jsx("p",{style:X5,children:"Are you sure you want to delete your profile? This will remove you from the community grid. This action cannot be undone."}),b.jsxs("div",{style:W5,children:[b.jsx("button",{onClick:()=>L(!1),style:J5,disabled:S,type:"button",children:"Cancel"}),b.jsx("button",{onClick:q,style:Z5,disabled:S,type:"button",children:S?"Deleting...":"Yes, Delete Profile"})]})]})}),b.jsxs("form",{onSubmit:P,style:eN,children:[b.jsxs("div",{style:Wl,children:[b.jsxs("label",{style:Jl,children:["What are you thinking today? ",b.jsx("span",{style:Zl,children:"(Optional)"})]}),b.jsx("textarea",{name:"thoughtOfTheDay",value:g.thoughtOfTheDay,onChange:z,placeholder:"Tell us about your thought or mood of the day...",style:Eb,rows:"4",maxLength:Sb.MAX_THOUGHT_LENGTH}),b.jsxs("div",{style:Tb,children:[g.thoughtOfTheDay.length,"/500 characters"]})]}),b.jsxs("div",{style:Wl,children:[b.jsxs("label",{style:Jl,children:["Share a Life Experience ",b.jsx("span",{style:Zl,children:"(Optional)"})]}),b.jsx("textarea",{name:"shareLifeExperience",value:g.shareLifeExperience,onChange:z,placeholder:"Tell us about a meaningful experience that shaped who you are...",style:Eb,rows:"4",maxLength:Sb.MAX_LIFE_EXPERIENCE_LENGTH}),b.jsxs("div",{style:Tb,children:[g.shareLifeExperience.length,"/1000 characters"]}),b.jsx("div",{style:Ab,children:"Share something impactful - a journey, challenge, achievement, or lesson learned"})]}),b.jsxs("div",{style:Wl,children:[b.jsxs("label",{style:Jl,children:["Website ",b.jsx("span",{style:Zl,children:"(Optional)"})]}),b.jsx("input",{type:"url",name:"website",value:g.website,onChange:z,placeholder:"https://yourwebsite.com",style:xh})]}),b.jsxs("div",{style:Wl,children:[b.jsxs("label",{style:Jl,children:["Location ",b.jsx("span",{style:Zl,children:"(Optional)"})]}),b.jsx("input",{type:"text",name:"location",value:g.location,onChange:z,placeholder:"Your city and country",style:xh})]}),b.jsxs("div",{style:Wl,children:[b.jsxs("label",{style:Jl,children:["Interests ",b.jsx("span",{style:Zl,children:"(Optional)"})]}),b.jsx("input",{type:"text",name:"interests",value:g.interests,onChange:z,placeholder:"e.g., Programming, Design, Music, Hiking",style:xh}),b.jsx("div",{style:Ab,children:"Separate multiple interests with commas"})]}),b.jsxs("div",{style:tN,children:[b.jsx("div",{style:nN,children:d==="edit"&&b.jsx("button",{type:"button",onClick:()=>L(!0),style:rN,disabled:S,children:"Delete Profile"})}),b.jsxs("div",{style:iN,children:[b.jsx("button",{type:"button",onClick:e,style:sN,disabled:S,children:"Cancel"}),b.jsx("button",{type:"submit",style:d==="create"?_T:aN,disabled:S,children:S?b.jsxs("span",{style:oN,children:[b.jsx("span",{style:lN})," Processing..."]}):d==="create"?"Create Profile":"Update Profile"})]})]})]}),b.jsx("div",{style:cN,children:b.jsxs("p",{style:uN,children:["Your profile photo and name are automatically imported from Google.",d==="edit"&&" Changes will be reflected immediately in the community grid."]})})]})}):null},L5={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,padding:"1rem"},V5={backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"modalFadeIn 0.3s ease"},P5={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #34495e"},U5={background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#95a5a6",padding:"0.25rem",borderRadius:"4px",lineHeight:1},j5={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",borderLeft:"4px solid #3498db"},z5={margin:"0 0 0.75rem 0",color:"#bdc3c7",fontSize:"0.9rem"},B5={display:"flex",alignItems:"center",gap:"1rem"},q5={width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},H5={flex:1},F5={display:"block",color:"#ecf0f1",marginBottom:"0.25rem"},G5={margin:"0 0 0.5rem 0",fontSize:"0.85rem",color:"#95a5a6"},$5={backgroundColor:"transparent",color:"#e74c3c",border:"1px solid #e74c3c",padding:"0.25rem 0.75rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s ease"},Y5={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:12e3},Q5={backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"400px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},K5={margin:"0 0 1rem 0",color:"#e74c3c",fontSize:"1.5rem"},X5={margin:"0 0 1.5rem 0",color:"#bdc3c7",lineHeight:"1.5",fontSize:"0.95rem"},W5={display:"flex",gap:"1rem",justifyContent:"flex-end"},J5={padding:"0.75rem 1.5rem",border:"1px solid #34495e",borderRadius:"8px",backgroundColor:"transparent",color:"#bdc3c7",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},Z5={padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",backgroundColor:"#e74c3c",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},eN={display:"flex",flexDirection:"column",gap:"1.5rem"},Wl={display:"flex",flexDirection:"column"},Jl={marginBottom:"0.5rem",fontWeight:"600",color:"#ecf0f1",fontSize:"0.95rem"},Zl={color:"#95a5a6",fontWeight:"normal",fontSize:"0.85rem"},xh={padding:"0.75rem",border:"1px solid #34495e",borderRadius:"8px",backgroundColor:"#1a252f",color:"#ecf0f1",fontSize:"1rem",transition:"border-color 0.2s ease"},Eb={...xh,resize:"vertical",minHeight:"100px",fontFamily:"inherit"},Tb={textAlign:"right",fontSize:"0.8rem",color:"#95a5a6",marginTop:"0.25rem"},Ab={fontSize:"0.8rem",color:"#95a5a6",fontStyle:"italic",marginTop:"0.25rem"},tN={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",gap:"1rem"},nN={flex:1},iN={display:"flex",gap:"1rem"},rN={padding:"0.75rem 1.5rem",border:"1px solid #e74c3c",borderRadius:"8px",backgroundColor:"transparent",color:"#e74c3c",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.2s ease"},sN={padding:"0.75rem 1.5rem",border:"1px solid #34495e",borderRadius:"8px",backgroundColor:"transparent",color:"#bdc3c7",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.2s ease"},_T={padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",backgroundColor:"#27ae60",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s ease"},aN={..._T,backgroundColor:"#3498db"},oN={display:"flex",alignItems:"center",gap:"0.5rem"},lN={display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"},cN={marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #34495e"},uN={margin:0,fontSize:"0.85rem",color:"#95a5a6",lineHeight:"1.4"},vT=document.createElement("style");vT.innerText=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
`;document.head.appendChild(vT);const hN=({profile:r,isOpen:e,onClose:n})=>{const{user:s,likeThought:o,likeExperience:c}=Nn(),[d,y]=U.useState(!1),[g,m]=U.useState(r),[S,E]=U.useState(!1),[x,L]=U.useState(!1);U.useEffect(()=>{m(r)},[r]),U.useEffect(()=>{const ne=$=>{$.key==="Escape"&&n()};return e&&(document.addEventListener("keydown",ne),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",ne),document.body.style.overflow="unset"}},[e,n]);const P=async()=>{if(!(!s||S)){E(!0);try{const ne=await o(r.id);m($=>{const me=$.thoughtLikers?.includes(s.uid);return{...$,thoughtLikers:me?$.thoughtLikers.filter(fe=>fe!==s.uid):[...$.thoughtLikers||[],s.uid],thoughtLikes:me?$.thoughtLikes-1:($.thoughtLikes||0)+1}}),console.log(`Thought ${ne?"liked":"unliked"}`)}catch(ne){console.error("Failed to like thought:",ne)}finally{E(!1)}}},z=async()=>{if(!(!s||x)){L(!0);try{const ne=await c(r.id);m($=>{const me=$.experienceLikers?.includes(s.uid);return{...$,experienceLikers:me?$.experienceLikers.filter(fe=>fe!==s.uid):[...$.experienceLikers||[],s.uid],experienceLikes:me?$.experienceLikes-1:($.experienceLikes||0)+1}}),console.log(`Experience ${ne?"liked":"unliked"}`)}catch(ne){console.error("Failed to like experience:",ne)}finally{L(!1)}}},q=s&&g?.thoughtLikers?.includes(s.uid),Q=s&&g?.experienceLikers?.includes(s.uid);return!e||!r?null:b.jsx("div",{style:dN,onClick:n,children:b.jsxs("div",{style:fN,onClick:ne=>ne.stopPropagation(),children:[b.jsxs("div",{style:mN,children:[b.jsxs("div",{style:pN,children:[b.jsx("img",{src:r.photoURL,alt:r.displayName,style:gN}),b.jsxs("div",{children:[b.jsx("h2",{style:yN,children:r.displayName}),r.location&&b.jsxs("p",{style:_N,children:[" ",r.location]}),b.jsx("p",{style:vN,children:r.email}),r.website&&b.jsxs("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",style:MN,children:[" ",r.website.replace(/^https?:\/\//,"")]})]})]}),b.jsx("button",{onClick:n,style:bN,children:""})]}),b.jsxs("div",{style:SN,children:[r.thoughtOfTheDay&&b.jsxs("div",{style:Rb,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("h3",{style:Cb,children:" Thought of the Day"}),s?b.jsx(wb,{onClick:P,isLiked:q,count:g?.thoughtLikes||0,disabled:d,label:q?"Unlike this thought":"Like this thought",isLoading:S}):b.jsx(xb,{})]}),b.jsx("p",{style:EN,children:r.thoughtOfTheDay})]}),r.shareLifeExperience&&b.jsxs("div",{style:Rb,children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[b.jsx("h3",{style:Cb,children:" Life Experience"}),s?b.jsx(wb,{onClick:z,isLiked:Q,count:g?.experienceLikes||0,disabled:d,label:Q?"Unlike this experience":"Like this experience",isLoading:x}):b.jsx(xb,{})]}),b.jsx("p",{style:TN,children:r.shareLifeExperience})]}),b.jsx("div",{style:AN,children:r.interests&&b.jsxs("div",{style:wN,children:[b.jsx("h4",{style:xN,children:" Interests"}),b.jsx("div",{style:RN,children:r.interests.split(",").map((ne,$)=>b.jsx("span",{style:CN,children:ne.trim()},$))})]})}),b.jsxs("div",{style:IN,children:[b.jsxs("div",{style:Ib,children:[b.jsx("span",{style:Db,children:" Member Since:"}),b.jsx("span",{style:Nb,children:r.createdAt?new Date(r.createdAt.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Recently"})]}),r.updatedAt&&b.jsxs("div",{style:Ib,children:[b.jsx("span",{style:Db,children:" Last Updated:"}),b.jsx("span",{style:Nb,children:new Date(r.updatedAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),r.isTest&&b.jsxs("div",{style:DN,children:[b.jsx("span",{style:NN,children:""}),b.jsx("span",{children:"Test Profile"})]}),r.isSimulated&&b.jsxs("div",{style:ON,children:[b.jsx("span",{style:kN,children:""}),b.jsx("span",{children:"Simulated Profile (in-memory only)"})]})]})]})})},wb=({onClick:r,isLiked:e,count:n,disabled:s,label:o,isLoading:c})=>{const d=e?"#2c3e50":"#FFD700",y=e?"rgba(44, 62, 80, 0.3)":"rgba(255, 215, 0, 0.3)";return b.jsx("button",{onClick:r,disabled:s||c,style:{...LN,backgroundColor:c?e?"rgba(255, 215, 0, 0.3)":"rgba(52, 73, 94, 0.7)":e?"#FFD700":"rgba(52, 73, 94, 0.5)",color:c?e?"#2c3e50":"#bdc3c7":e?"#2c3e50":"#ecf0f1",border:c?`2px solid ${e?"rgba(255, 215, 0, 0.5)":"#34495e"}`:e?"2px solid #FFD700":"2px solid #34495e",minWidth:"80px",opacity:s||c?.8:1,cursor:s||c?"not-allowed":"pointer",position:"relative"},title:c?"Processing...":o,children:c?b.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[b.jsx("div",{style:{width:"16px",height:"16px",border:`2px solid ${y}`,borderTop:`2px solid ${d}`,borderRadius:"50%",animation:"spin 1s linear infinite"}}),b.jsx("span",{style:{fontSize:"14px",color:e?"#2c3e50":"#ecf0f1"},children:e?"Unliking...":"Liking..."})]}):b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[b.jsx("span",{style:{fontSize:"18px"},children:e?"":""}),n>0&&b.jsx("span",{style:{backgroundColor:e?"rgba(44, 62, 80, 0.2)":"rgba(255, 255, 255, 0.1)",padding:"2px 8px",borderRadius:"10px",fontSize:"14px",fontWeight:"600"},children:n})]})})},xb=()=>b.jsx("div",{style:VN,children:b.jsx("span",{children:" Sign in to like content"})}),dN={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"1rem"},fN={backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"modalFadeIn 0.3s ease"},mN={display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"2rem 2rem 1.5rem 2rem",borderBottom:"1px solid #34495e",backgroundColor:"#1a252f"},pN={display:"flex",alignItems:"center",gap:"1.5rem",flex:1},gN={width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"4px solid #3498db"},yN={margin:"0 0 0.5rem 0",fontSize:"1.8rem",color:"#ecf0f1",fontWeight:"700"},_N={margin:"0 0 0.25rem 0",fontSize:"1rem",color:"#bdc3c7"},vN={margin:0,fontSize:"0.9rem",color:"#95a5a6"},bN={background:"none",border:"none",color:"#95a5a6",fontSize:"1.5rem",cursor:"pointer",padding:"0.5rem",borderRadius:"4px",marginLeft:"1rem"},SN={padding:"2rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},Rb={marginBottom:"2rem"},Cb={margin:0,fontSize:"1.2rem",color:"#3498db",fontWeight:"600"},EN={margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#bdc3c7"},TN={margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ecf0f1",backgroundColor:"rgba(26, 37, 47, 0.7)",padding:"1.25rem",borderRadius:"10px",borderLeft:"4px solid #FFD700",boxShadow:"inset 0 2px 10px rgba(0,0,0,0.2)"},AN={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},wN={backgroundColor:"#34495e",padding:"1.25rem",borderRadius:"10px",border:"1px solid #2c3e50"},xN={margin:"0 0 0.75rem 0",fontSize:"1rem",color:"#3498db",fontWeight:"600"},RN={display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"8px"},CN={backgroundColor:"rgba(52, 152, 219, 0.2)",color:"#3498db",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},IN={marginTop:"1.5rem",padding:"1rem",backgroundColor:"rgba(52, 73, 94, 0.2)",borderRadius:"8px",border:"1px solid rgba(52, 73, 94, 0.5)"},Ib={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(52, 73, 94, 0.3)"},Db={color:"#bdc3c7",fontSize:"14px",fontWeight:"500"},Nb={color:"#ecf0f1",fontSize:"14px",fontWeight:"600"},DN={display:"flex",alignItems:"center",gap:"8px",marginTop:"1rem",padding:"8px 12px",backgroundColor:"rgba(243, 156, 18, 0.2)",border:"1px solid rgba(243, 156, 18, 0.3)",borderRadius:"6px",color:"#f39c12",fontSize:"14px",fontWeight:"500"},NN={fontSize:"16px"},ON={display:"flex",alignItems:"center",gap:"8px",marginTop:"1rem",padding:"8px 12px",backgroundColor:"rgba(155, 89, 182, 0.2)",border:"1px solid rgba(155, 89, 182, 0.3)",borderRadius:"6px",color:"#9b59b6",fontSize:"14px",fontWeight:"500"},kN={fontSize:"16px"},MN={color:"#3498db",fontSize:"1rem",textDecoration:"none",wordBreak:"break-all"},LN={display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"25px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",border:"none","&:hover:not(:disabled)":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},VN={display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"rgba(52, 152, 219, 0.1)",color:"#3498db",borderRadius:"25px",fontSize:"14px",fontWeight:"500",border:"1px solid rgba(52, 152, 219, 0.3)"},bT=document.createElement("style");bT.textContent=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes likePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.liking {
  animation: likePulse 0.3s ease;
}
`;document.head.appendChild(bT);const ST=U.memo(({profile:r,baseSize:e,onProfileClick:n,isSpotlight:s=!1})=>{const[o,c]=U.useState(!1),[d,y]=U.useState(0),g=U.useRef(null);U.useEffect(()=>{s&&console.log(`Star ${r.displayName} is now in spotlight!`)},[s,r.displayName]),U.useEffect(()=>{if(s){let L=null;const P=z=>{L||(L=z);const Q=(z-L)%wr.STAR_PULSE/wr.STAR_PULSE;y(Q),g.current=requestAnimationFrame(P)};return g.current=requestAnimationFrame(P),()=>{g.current&&cancelAnimationFrame(g.current),y(0)}}},[s]);const m=U.useCallback(()=>{n&&n(r)},[r,n]),S=()=>s?.5+.5*Math.sin(d*Math.PI*2):0,E=()=>{const L=e,P=S(),z=s&&P>.7,q=z?ln.STAR_GLOW:ln.STAR_NORMAL;if(L<=2)return b.jsx("div",{style:{width:"70%",height:"70%",backgroundColor:q,borderRadius:"50%",margin:"15%",opacity:.8,animation:s?`pulseGlow ${wr.STAR_PULSE}ms infinite alternate`:"none",filter:z?`brightness(${1+P})`:"none",transition:`filter ${wr.GLOW_TRANSITION}ms ease`}});if(L<=5)return b.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",opacity:.7,animation:s?`pulseGlow ${wr.STAR_PULSE}ms infinite alternate`:"none",filter:z?`brightness(${1+P})`:"none",transition:`filter ${wr.GLOW_TRANSITION}ms ease`},children:[b.jsx("div",{style:{position:"absolute",top:"20%",left:"45%",width:"10%",height:"60%",backgroundColor:q,borderRadius:"1px"}}),b.jsx("div",{style:{position:"absolute",top:"45%",left:"20%",width:"60%",height:"10%",backgroundColor:q,borderRadius:"1px"}})]});{const Q=z?ln.STAR_GLOW.replace("0.9",`${.9+P*.1}`):ln.STAR_NORMAL;return b.jsx("div",{style:{width:"100%",height:"100%",position:"relative",opacity:.9,transform:o?"scale(1.2)":s?`scale(${1+P*.2})`:"scale(1)",transition:`transform ${wr.GLOW_TRANSITION}ms ease, filter ${wr.GLOW_TRANSITION}ms ease`,animation:s?`starPulse ${wr.STAR_PULSE}ms infinite ease-in-out`:"none",filter:z?`brightness(${1+P}) drop-shadow(0 0 ${5+P*10}px ${ln.STAR_GLOW.replace("0.9",`${.3+P*.5}`)})`:"none"},children:b.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",style:{position:"absolute",top:0,left:0},children:b.jsx("polygon",{points:"50,10 61,35 88,35 66,52 72,78 50,63 28,78 34,52 12,35 39,35",fill:Q,stroke:z?ln.STAR_GLOW.replace("0.9","0.8"):"rgba(255, 255, 255, 0.5)",strokeWidth:z?"3":"2"})})})}},x={width:"100%",height:"100%",cursor:"pointer",position:"relative",zIndex:o||s?1e3:1,display:"flex",alignItems:"center",justifyContent:"center"};return b.jsx("div",{style:x,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:m,title:e>10?r.displayName||"User":"",children:E()})}),ET=document.createElement("style");ET.textContent=`
@keyframes pulseGlow {
  0% { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 255, 255, 0.3)); }
  50% { filter: brightness(1.8) drop-shadow(0 0 15px rgba(255, 215, 0, 0.8)); }
  100% { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 255, 255, 0.3)); }
}

@keyframes starPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}
`;document.head.appendChild(ET);ST.displayName="StarTile";const PN=({profile:r,starPosition:e,starIndex:n,onClick:s})=>{const[o,c]=U.useState({}),[d,y]=U.useState({}),[g,m]=U.useState(!1),S=U.useRef(null),E=()=>{if(!e||!e.x||!e.y)return{position:{top:100,left:"50%",transform:"translateX(-50%)"},arrow:{display:"none"}};const P=e.x,z=e.y,q=qn.MAX_TOOLTIP_WIDTH,Q=180,ne=qn.TOOLTIP_OFFSET,$=window.innerWidth,me=window.innerHeight,fe=20,Se=[()=>{const D=Math.max(fe,Math.min(P-q/2,$-q-fe)),w=z-Q-ne,R=Math.min(q-20,Math.max(20,P-D));return{position:{top:w,left:D},arrow:{bottom:"-10px",left:`${R}px`}}},()=>{const D=Math.max(fe,Math.min(P-q/2,$-q-fe)),w=z+ne,R=Math.min(q-20,Math.max(20,P-D));return{position:{top:w,left:D},arrow:{top:"-10px",left:`${R}px`}}},()=>{const D=P+ne,w=Math.max(fe,Math.min(z-Q/2,me-Q-fe)),R=Math.min(Q-20,Math.max(20,z-w));return{position:{top:w,left:D},arrow:{left:"-10px",top:`${R}px`}}},()=>{const D=P-q-ne,w=Math.max(fe,Math.min(z-Q/2,me-Q-fe)),R=Math.min(Q-20,Math.max(20,z-w));return{position:{top:w,left:D},arrow:{right:"-10px",top:`${R}px`}}}];for(const D of Se){const w=D(),{position:R}=w;if(R.top>=fe&&R.top+Q<=me-fe&&R.left>=fe&&R.left+q<=$-fe)return w}return{position:{top:me/2-Q/2,left:$/2-q/2},arrow:{display:"none"}}},x=P=>{if(!e)return"0deg";const z=P.left+qn.MAX_TOOLTIP_WIDTH/2,q=P.top+90,Q=e.x-z,ne=e.y-q;return`${Math.atan2(ne,Q)*(180/Math.PI)+90}deg`};U.useEffect(()=>{const{position:P,arrow:z}=E(),q=x(P);c({position:"fixed",top:`${P.top}px`,left:`${P.left}px`,width:`${qn.MAX_TOOLTIP_WIDTH}px`,zIndex:9999}),y({position:"absolute",width:"20px",height:"20px",backgroundColor:ln.TOOLTIP_BG,borderRight:`2px solid ${ln.TOOLTIP_BORDER}`,borderBottom:`2px solid ${ln.TOOLTIP_BORDER}`,transform:`rotate(${q})`,...z});const Q=setTimeout(()=>m(!0),qn.FADE_IN_MS);return()=>clearTimeout(Q)},[e]);const L=(P,z=100)=>P?P.length<=z?P:P.substring(0,z)+"...":"";return g?b.jsxs("div",{ref:S,style:{...o,backgroundColor:ln.TOOLTIP_BG,backdropFilter:"blur(10px)",border:`2px solid ${ln.TOOLTIP_BORDER}`,borderRadius:"12px",padding:"16px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3)",cursor:"pointer",opacity:g?1:0,transition:`opacity ${qn.FADE_IN_MS}ms ease-out, transform ${qn.FADE_IN_MS}ms ease-out`,transform:g?"translateY(0) scale(1)":"translateY(10px) scale(0.95)"},onClick:s,onMouseEnter:P=>{P.currentTarget.style.transform="translateY(-2px) scale(1.02)",P.currentTarget.style.boxShadow="0 15px 40px rgba(0, 0, 0, 0.6), 0 0 40px rgba(255, 215, 0, 0.4)"},onMouseLeave:P=>{P.currentTarget.style.transform="translateY(0) scale(1)",P.currentTarget.style.boxShadow="0 10px 30px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3)"},children:[b.jsx("div",{style:d}),b.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",paddingBottom:"10px",borderBottom:`1px solid ${ln.TOOLTIP_BORDER}`},children:[b.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",overflow:"hidden",marginRight:"12px",border:`3px solid ${ln.TOOLTIP_BORDER}`,padding:"2px",background:"rgba(255, 255, 255, 0.1)"},children:b.jsx("img",{src:r.photoURL,alt:r.displayName,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}})}),b.jsxs("div",{children:[b.jsxs("h4",{style:{margin:0,color:ln.STAR_GLOW,fontSize:"18px",fontWeight:"700",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)"},children:[" ",r.displayName]}),r.location&&b.jsxs("p",{style:{margin:"6px 0 0 0",color:"rgba(200, 220, 255, 0.9)",fontSize:"14px",fontWeight:"500"},children:[" ",r.location]})]})]}),b.jsx("div",{style:{marginBottom:"12px"},children:b.jsx("p",{style:{margin:0,color:ln.TOOLTIP_TEXT,fontSize:"14px",lineHeight:"1.6",fontStyle:r.thoughtOfTheDay?"normal":"italic"},children:L(r.thoughtOfTheDay)||"No thought shared today."})}),r.shareLifeExperience&&b.jsx("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"rgba(255, 215, 0, 0.1)",borderRadius:"8px",borderLeft:"3px solid rgba(255, 215, 0, 0.3)"},children:b.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.9)",fontSize:"13px",lineHeight:"1.5",fontStyle:"italic"},children:[" ",L(r.shareLifeExperience,120)]})}),b.jsxs("div",{style:{paddingTop:"10px",borderTop:`1px solid ${ln.TOOLTIP_BORDER.replace("0.5","0.2")}`,display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"rgba(255, 215, 0, 0.8)",fontWeight:"600"},children:[b.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[b.jsx("span",{style:{fontSize:"16px"},children:""})," Spotlight #",n+1]}),b.jsx("div",{style:{width:"60px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:b.jsx("div",{style:{height:"100%",width:"100%",backgroundColor:ln.STAR_GLOW.replace("0.9","0.7"),animation:`timer ${qn.DURATION_MS}ms linear forwards`}})})]})]}):null},TT=document.createElement("style");TT.textContent=`
@keyframes timer {
  from { width: 100%; }
  to { width: 0%; }
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
`;document.head.appendChild(TT);const UN=({profiles:r,containerRef:e,gridConfig:n,onSpotlightChange:s})=>{const{fetchFullProfile:o}=Nn(),[c,d]=U.useState(null),[y,g]=U.useState(null),[m,S]=U.useState(-1),[E,x]=U.useState({x:0,y:0}),[L,P]=U.useState(!1),z=U.useRef(null),q=U.useRef(null),Q=U.useRef(!0),ne=U.useRef(-1);console.log("SpotlightManager: Profiles count:",r?.length);const $=U.useCallback((C,N=!1)=>{if(!e.current||!n||!n.cols||!r)return console.log("Cannot calculate position: missing container or grid config"),{x:0,y:0};try{const k=e.current;setTimeout(()=>{let I=null;if(I=k.querySelector(`div[data-index="${C}"]`),!I){const le=k.querySelectorAll("div");for(const pe of le)if(pe.style.position==="absolute"&&pe.style.top&&pe.style.left&&pe.querySelectorAll("*").length>0){I=pe;break}}if(!I){console.log(` Could not find star element for index ${C}`);const le=Math.floor(C/n.cols),pe=C%n.cols,Ee=k.getBoundingClientRect(),Re=Ee.left+pe*n.tileSize+n.tileSize/2,M=Ee.top+le*n.tileSize+n.tileSize/2;console.log(` Calculated mathematically: x=${Re.toFixed(1)}, y=${M.toFixed(1)}`),x({x:Re,y:M}),P(!0);return}const ae=I.getBoundingClientRect(),xe=ae.left+ae.width/2,G=ae.top+ae.height/2;console.log(` Star ${C} position: x=${xe.toFixed(1)}, y=${G.toFixed(1)}`),x({x:xe,y:G}),P(!0)},100)}catch(k){console.error("Error calculating star position:",k)}},[n,r]),me=U.useCallback(()=>{if(!r||r.length===0)return console.log("No profiles to choose from"),-1;let C;const N=10;let k=0;do if(C=Math.floor(Math.random()*r.length),k++,k>=N)break;while(C===m&&r.length>1);return console.log(` Chose random star index: ${C}`),C},[r,m]),fe=U.useCallback(async C=>{if(!r||C<0||C>=r.length){console.log(`Invalid index for spotlight: ${C}`);return}const N=r[C];console.log(` Loading spotlight profile: ${N.displayName} (index: ${C})`),P(!1);try{const k=await o(N.id);k&&Q.current&&(console.log(` Successfully loaded profile: ${N.displayName}`),ne.current=m,g(k),d(N),S(C),s&&s(C),setTimeout(()=>{console.log(` Calculating position for new spotlight index: ${C}`),$(C,!0)},100),console.log(` Spotlight ACTIVE for ${N.displayName} at index ${C}`))}catch(k){console.error("Error loading spotlight profile:",k)}},[r,o,$,s,m]),Se=U.useCallback(()=>{if(!Q.current){console.log("Component not mounted, skipping spotlight");return}if(!r||r.length===0){console.log("No profiles available for spotlight");return}console.log(" Starting new spotlight...");const C=me();C>=0&&fe(C)},[r,me,fe]);U.useEffect(()=>{if(Q.current=!0,!r||r.length===0){console.log("No profiles, skipping spotlight setup");return}return console.log(` Setting up spotlight interval for ${qn.DURATION_MS}ms (${qn.DURATION_MS/1e3}s)`),z.current&&(clearTimeout(z.current),z.current=null),q.current&&(clearInterval(q.current),q.current=null),z.current=setTimeout(()=>{console.log(" Initial spotlight starting..."),Se(),q.current=setInterval(()=>{console.log(" Spotlight interval triggered - switching stars"),Se()},qn.DURATION_MS)},2e3),()=>{console.log(" Cleaning up spotlight timers"),Q.current=!1,z.current&&(clearTimeout(z.current),z.current=null),q.current&&(clearInterval(q.current),q.current=null)}},[r]),U.useEffect(()=>{const C=()=>{m>=0&&L&&(console.log("Window resized, updating spotlight position"),$(m))};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[m,$,L]),U.useEffect(()=>{m!==-1&&m!==ne.current&&(console.log(` Spotlight index changed: ${ne.current}  ${m}`),console.log(`   Profile: ${c?.displayName}`),console.log(`   Position calculated: ${L?"YES":"NO"}`),ne.current=m)},[m,c,L]);const D=()=>{c&&y&&(console.log("Tooltip clicked, opening profile modal"),window.dispatchEvent(new CustomEvent("openProfileModal",{detail:{profile:y}})))},w=n&&n.tileSize>=qn.MIN_STAR_SIZE_FOR_TOOLTIP,R=w&&c&&y&&L;return console.log("SpotlightManager render:",{spotlightIndex:m,prevIndex:ne.current,profileName:c?.displayName,positionCalculated:L,canShowTooltip:R,tileSize:n?.tileSize}),R?(console.log(` RENDERING tooltip for index ${m}:`,c.displayName),b.jsx(PN,{profile:y,starPosition:E,starIndex:m,onClick:D})):(console.log(" Not rendering spotlight tooltip:",{reason:c?y?w?L?"Unknown":"Position not calculated yet":"Star too small":"No full profile data":"No spotlight profile"}),null)},AT=U.memo(({onProfileClick:r})=>{const{profiles:e}=Nn(),n=U.useRef(null),[s,o]=U.useState(-1),[c,d]=U.useState({tileSize:60,cols:1,rows:1,actualWidth:0}),{profilesLoading:y}=Nn(),g=U.useCallback(()=>{if(!n.current||e.length===0)return{tileSize:60,cols:1,rows:1,actualWidth:0};const S=n.current,{width:E,height:x}=S.getBoundingClientRect();if(E===0||x===0)return{tileSize:60,cols:1,rows:1,actualWidth:0};const L=e.length;let P=1,z=0,q=1/0;const Q=Math.min(100,Math.ceil(E/10)),ne=Math.max(1,Math.floor(E/200));for(let fe=ne;fe<=Q;fe++){const Se=Math.ceil(L/fe),D=E/fe,w=x/Se,R=Math.min(D,w),C=fe*R,N=Se*R,k=E-C,I=x-N,ae=Math.abs(k)+Math.abs(I);if(ae<q&&(q=ae,P=fe,z=Se),Math.abs(k)<1)break}P=Math.max(1,P),z=Math.max(1,Math.ceil(L/P));const $=E/P,me=P*$;return console.log(`Grid calculation: cols=${P}, rows=${z}, tileSize=${$.toFixed(1)}px, actualWidth=${me.toFixed(1)}px, containerWidth=${E.toFixed(1)}px`),{tileSize:$,cols:P,rows:z,actualWidth:me}},[e.length]);U.useEffect(()=>{const S=()=>{d(g())},E=setTimeout(S,100);return window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S),clearTimeout(E)}},[g]),U.useEffect(()=>{const S=setTimeout(()=>{d(g())},100);return()=>clearTimeout(S)},[e.length,g]),U.useEffect(()=>{const S=E=>{r&&r(E.detail.profile)};return window.addEventListener("openProfileModal",S),()=>{window.removeEventListener("openProfileModal",S)}},[r]);const m=U.useCallback(S=>{console.log(`Spotlight changed to index: ${S}`),o(S)},[]);return y?b.jsxs("div",{style:BN,children:[b.jsx("div",{style:qN}),b.jsx("div",{children:"Loading the galaxy..."})]}):e.length===0?b.jsxs("div",{style:HN,children:[b.jsx("div",{style:FN,children:""}),b.jsx("h3",{style:GN,children:"No Stars Yet"}),b.jsx("p",{style:$N,children:"Be the first to create a profile and shine in the galaxy!"})]}):b.jsxs("div",{ref:n,style:jN,children:[e.length>0&&c.cols>0&&b.jsx(UN,{profiles:e,containerRef:n,gridConfig:c,onSpotlightChange:m}),b.jsx("div",{style:{...zN,width:`${c.actualWidth}px`},children:e.map((S,E)=>{const x=Math.floor(E/c.cols),L=E%c.cols,P=x*c.tileSize,z=L*c.tileSize;return b.jsx("div",{style:{position:"absolute",top:`${P}px`,left:`${z}px`,width:`${c.tileSize}px`,height:`${c.tileSize}px`,padding:"0px"},"data-index":E,children:b.jsx(ST,{profile:S,baseSize:c.tileSize,onProfileClick:r,isSpotlight:E===s})},`${S.id}-${E}`)})})]})}),jN={position:"absolute",top:0,left:0,right:0,bottom:0,width:"100vw",height:"calc(100vh - 80px)",backgroundColor:"transparent",overflow:"hidden",margin:0,padding:0,display:"flex",justifyContent:"center"},zN={position:"relative",height:"100%",margin:"0 auto",padding:0},BN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"3rem 1rem",color:"#bdc3c7",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(26, 37, 47, 0.8)",backdropFilter:"blur(10px)",borderRadius:"16px",maxWidth:"500px"},qN={width:"50px",height:"50px",border:"5px solid rgba(52, 152, 219, 0.3)",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"},HN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"3rem 1rem",color:"#bdc3c7",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(26, 37, 47, 0.8)",backdropFilter:"blur(10px)",borderRadius:"16px",maxWidth:"500px"},FN={fontSize:"4rem",marginBottom:"1rem",opacity:.5,animation:"twinkle 3s infinite alternate"},GN={fontSize:"1.8rem",margin:"0 0 0.75rem 0",color:"#FFD700",fontWeight:"700"},$N={fontSize:"1.1rem",margin:0,opacity:.7},wT=document.createElement("style");wT.textContent=`
@keyframes twinkle {
  0% { opacity: 0.3; transform: scale(0.95); }
  100% { opacity: 0.7; transform: scale(1.05); }
}

@keyframes spin {  /* ADD THIS */
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  width: 100vw;
  height: 100vh;
}

/* Ensure no horizontal scroll */
* {
  box-sizing: border-box;
}
`;document.head.appendChild(wT);AT.displayName="UserGrid";const YN=()=>{const r=U.useRef(null);return U.useEffect(()=>{const e=r.current,n=e.getContext("2d");let s;const o=()=>{e.width=window.innerWidth,e.height=window.innerHeight};o(),window.addEventListener("resize",o);const c=[],d=Math.min(200,Math.floor(window.innerWidth*window.innerHeight/5e3));for(let m=0;m<d;m++)c.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:Math.random()*.3+.1,opacity:Math.random()*.5+.3,speed:Math.random()*.2+.05,twinkleSpeed:Math.random()*.02+.01});let y=0;const g=()=>{n.clearRect(0,0,e.width,e.height);const m=n.createLinearGradient(0,0,0,e.height);m.addColorStop(0,"#0a0a1a"),m.addColorStop(.5,"#0a0a0a"),m.addColorStop(1,"#000010"),n.fillStyle=m,n.fillRect(0,0,e.width,e.height),y+=.016,c.forEach(S=>{const E=Math.sin(y*S.twinkleSpeed)*.3+.7;n.beginPath(),n.arc(S.x,S.y,S.radius,0,Math.PI*2),n.fillStyle=`rgba(255, 255, 255, ${S.opacity*E})`,n.fill(),S.x-=S.speed,S.x<-10&&(S.x=e.width+10,S.y=Math.random()*e.height)}),s=requestAnimationFrame(g)};return g(),()=>{window.removeEventListener("resize",o),cancelAnimationFrame(s)}},[]),b.jsx("canvas",{ref:r,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1}})},hc={MAX_DEPTH:4,AVATAR_SIZE:32},xT=({comment:r,experienceId:e,depth:n=0,replies:s=[],onReply:o})=>{const{user:c,likeComment:d}=Nn(),[y,g]=U.useState(r.likedBy?.includes(c?.uid)||!1),[m,S]=U.useState(r.likeCount||0),[E,x]=U.useState(!1),[L,P]=U.useState(!1),[z,q]=U.useState(""),[Q,ne]=U.useState(!1),[$,me]=U.useState(!1),fe=n<hc.MAX_DEPTH,Se=Ee=>{if(!Ee)return"Just now";const Re=Ee.toDate?Ee.toDate():new Date(Ee),W=new Date-Re,he=Math.floor(W/6e4),ve=Math.floor(W/36e5),Ne=Math.floor(W/864e5);return he<1?"Just now":he<60?`${he}m ago`:ve<24?`${ve}h ago`:Ne<7?`${Ne}d ago`:Re.toLocaleDateString("en-US",{month:"short",day:"numeric"})},D=async()=>{if(c){x(!0);try{const Ee=await d(e,r.id);g(Ee),S(Re=>Ee?Re+1:Math.max(0,Re-1))}catch(Ee){console.error("Error liking comment:",Ee)}finally{x(!1)}}},w=async Ee=>{if(Ee.preventDefault(),!(!z.trim()||!c||Q)){ne(!0);try{o&&(await o(z,r.id),q(""),P(!1))}catch(Re){console.error("Error posting reply:",Re)}finally{ne(!1)}}},R=()=>{me(!$)},C=n===0,N=n>0,k=s&&s.length>0,I=N&&n>0,ae=N,xe={display:"flex",flexDirection:"column",position:"relative",marginLeft:C?0:`${hc.AVATAR_SIZE/2}px`,paddingLeft:C?0:`${hc.AVATAR_SIZE/2+8}px`,borderLeft:I?"2px solid rgba(52, 152, 219, 0.3)":"none"},G={backgroundColor:C?"rgba(52, 73, 94, 0.6)":"rgba(52, 73, 94, 0.4)",border:"1px solid #2c3e50",borderRadius:"12px",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s ease",position:"relative",width:"100%",...xe},le=$?{maxHeight:"60px",overflow:"hidden",opacity:.8}:{},pe=`comment-${r.id}-depth-${n}`;return b.jsxs("div",{style:{...G,...le},children:[I&&b.jsx("div",{style:QN,children:b.jsx("div",{style:KN})}),k&&b.jsx("button",{onClick:R,style:XN,title:$?"Expand thread":"Collapse thread",children:$?"":""}),ae&&b.jsxs("div",{style:WN,children:[b.jsx("span",{style:JN,children:""}),b.jsxs("span",{style:ZN,children:["Replying to ",b.jsx("strong",{children:r.userDisplayName})]})]}),b.jsxs("div",{style:t4,children:[b.jsxs("div",{style:n4,children:[b.jsx("img",{src:r.userPhotoURL,alt:r.userDisplayName,style:i4}),b.jsx("div",{style:r4})]}),b.jsxs("div",{style:s4,children:[b.jsxs("div",{style:a4,children:[r.userDisplayName,N&&b.jsxs("span",{style:e4,children:["Reply #",n]})]}),b.jsx("div",{style:o4,children:Se(r.createdAt)})]})]}),b.jsx("div",{style:l4,children:b.jsx("p",{style:c4,children:r.content})}),b.jsxs("div",{style:u4,children:[b.jsxs("button",{onClick:D,style:{...jm,color:y?"#e74c3c":"#bdc3c7",backgroundColor:y?"rgba(231, 76, 60, 0.1)":"transparent",fontWeight:y?"600":"normal"},disabled:E,title:y?"Unlike":"Like",children:[E?b.jsx("span",{style:h4}):y?"":"",m>0&&` ${m}`]}),fe&&b.jsx("button",{onClick:()=>P(!L),style:{...jm,backgroundColor:L?"rgba(52, 152, 219, 0.1)":"transparent",fontWeight:L?"600":"normal"},title:"Reply to this comment",children:L?" Cancel":" Reply"}),b.jsx("button",{style:jm,title:"Share comment",children:" Share"})]}),L&&fe&&b.jsxs("form",{onSubmit:w,style:f4,children:[b.jsxs("div",{style:m4,children:[b.jsx("img",{src:c?.photoURL,alt:c?.displayName,style:p4}),b.jsxs("div",{style:g4,children:[b.jsx("div",{style:y4,children:c?.displayName}),b.jsxs("div",{style:_4,children:["Replying to ",r.userDisplayName]})]})]}),b.jsx("textarea",{value:z,onChange:Ee=>q(Ee.target.value),placeholder:`Reply to ${r.userDisplayName}...`,style:v4,rows:"3",maxLength:"500",disabled:Q}),b.jsxs("div",{style:b4,children:[b.jsx("button",{type:"button",onClick:()=>{P(!1),q("")},style:E4,disabled:Q,children:"Cancel"}),b.jsx("button",{type:"submit",style:S4,disabled:Q||!z.trim(),children:Q?b.jsxs(b.Fragment,{children:[b.jsx("div",{style:d4}),"Posting..."]}):"Reply"})]})]}),!$&&k&&b.jsx("div",{style:T4,children:s.map((Ee,Re)=>b.jsx(xT,{comment:Ee,experienceId:e,depth:n+1,replies:Ee.replies||[],onReply:o},`reply-${Ee.id}-${Re}`))}),$&&k&&b.jsxs("button",{onClick:R,style:A4,children:[" Show ",s.length," ",s.length===1?"reply":"replies"]})]},pe)},QN={position:"absolute",left:"-1px",top:"0",bottom:"0",width:"2px",display:"flex",alignItems:"center",justifyContent:"center"},KN={width:"2px",height:"100%",background:"linear-gradient(to bottom, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.1))"},XN={position:"absolute",top:"10px",right:"10px",backgroundColor:"rgba(52, 73, 94, 0.8)",border:"1px solid #34495e",color:"#bdc3c7",width:"24px",height:"24px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",zIndex:2,transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.3)",color:"#ecf0f1"}},WN={display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",padding:"0.4rem 0.8rem",backgroundColor:"rgba(52, 152, 219, 0.1)",borderRadius:"6px",fontSize:"0.85rem",color:"#3498db",fontStyle:"italic",borderLeft:"3px solid #3498db"},JN={fontSize:"0.9rem"},ZN={fontWeight:"500"},e4={fontSize:"0.7rem",backgroundColor:"rgba(52, 152, 219, 0.2)",color:"#3498db",padding:"2px 8px",borderRadius:"10px",marginLeft:"0.75rem",fontWeight:"600"},t4={display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},n4={position:"relative",width:`${hc.AVATAR_SIZE}px`,height:`${hc.AVATAR_SIZE}px`},i4={width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},r4={position:"absolute",bottom:"0",right:"0",width:"8px",height:"8px",backgroundColor:"#27ae60",borderRadius:"50%",border:"2px solid #2c3e50"},s4={flex:1},a4={fontWeight:"600",color:"#ecf0f1",fontSize:"0.95rem",marginBottom:"0.1rem",display:"flex",alignItems:"center",gap:"0.75rem"},o4={color:"#95a5a6",fontSize:"0.8rem"},l4={marginBottom:"0.75rem"},c4={color:"#bdc3c7",fontSize:"0.95rem",lineHeight:"1.5",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},u4={display:"flex",gap:"0.75rem",alignItems:"center",paddingTop:"0.75rem",borderTop:"1px solid rgba(52, 73, 94, 0.5)"},jm={backgroundColor:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.4rem 0.8rem",borderRadius:"15px",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(52, 73, 94, 0.8)",color:"#ecf0f1",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},h4={width:"14px",height:"14px",border:"2px solid rgba(231, 76, 60, 0.3)",borderTop:"2px solid #e74c3c",borderRadius:"50%",animation:"spin 1s linear infinite"},d4={width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid #27ae60",borderRadius:"50%",animation:"spin 1s linear infinite"},f4={marginTop:"1rem",padding:"1rem",backgroundColor:"rgba(26, 37, 47, 0.5)",borderRadius:"8px",border:"1px solid #34495e"},m4={display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},p4={width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},g4={flex:1},y4={fontWeight:"600",color:"#ecf0f1",fontSize:"0.9rem",marginBottom:"0.1rem"},_4={color:"#95a5a6",fontSize:"0.8rem",fontStyle:"italic"},v4={width:"100%",backgroundColor:"rgba(26, 37, 47, 0.8)",border:"1px solid #2c3e50",borderRadius:"6px",color:"#ecf0f1",padding:"0.75rem",fontSize:"0.9rem",resize:"vertical",marginBottom:"0.75rem",minHeight:"80px",fontFamily:"inherit","&:focus":{outline:"none",borderColor:"#3498db",boxShadow:"0 0 0 2px rgba(52, 152, 219, 0.2)"},"&:disabled":{opacity:.6,cursor:"not-allowed"}},b4={display:"flex",gap:"0.75rem",justifyContent:"flex-end",alignItems:"center"},S4={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem","&:hover:not(:disabled)":{backgroundColor:"#229954",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},E4={backgroundColor:"transparent",color:"#95a5a6",border:"1px solid #95a5a6",padding:"0.6rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(149, 165, 166, 0.1)",color:"#ecf0f1"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},T4={marginTop:"1rem",position:"relative"},A4={backgroundColor:"transparent",border:"none",color:"#3498db",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",padding:"0.5rem 0.75rem",borderRadius:"6px",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.1)"}},RT=document.createElement("style");RT.textContent=`
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}

.comment-enter {
  animation: fadeIn 0.3s ease;
}

/* Thread line animation */
@keyframes drawLine {
  from { height: 0; }
  to { height: 100%; }
}

.thread-line {
  animation: drawLine 0.5s ease-out;
}
`;document.head.appendChild(RT);const CT=U.memo(({experience:r,currentUserId:e,isFullScreen:n=!1,onInteraction:s})=>{const{user:o,addComment:c,fetchComments:d,likeComment:y,likeExperience:g}=Nn(),[m,S]=U.useState(r),[E,x]=U.useState(n),[L,P]=U.useState(""),[z,q]=U.useState(!1),[Q,ne]=U.useState(r.likedBy?.includes(e)||!1),[$,me]=U.useState(r.likeCount||0),[fe,Se]=U.useState([]),[D,w]=U.useState(!1),[R,C]=U.useState(!0),[N,k]=U.useState(null),[I,ae]=U.useState(!1),xe=U.useRef(!0),G=U.useRef(r),le=U.useRef(E),pe=U.useRef(!1);U.useEffect(()=>{G.current=r,S(r),Se([]),ae(!1),k(null)},[r]),U.useEffect(()=>{le.current=E},[E]),U.useEffect(()=>(xe.current=!0,()=>{xe.current=!1,pe.current=!1}),[]),U.useEffect(()=>{n&&fe.length===0&&!D&&!I&&W(!0)},[n,fe.length,D,I]);const Ee=U.useCallback(ce=>{if(!ce)return"Just now";const oe=ce.toDate?ce.toDate():new Date(ce),be=new Date-oe,Ae=Math.floor(be/6e4),qe=Math.floor(be/36e5),bt=Math.floor(be/864e5);return Ae<1?"Just now":Ae<60?`${Ae}m ago`:qe<24?`${qe}h ago`:bt<7?`${bt}d ago`:oe.toLocaleDateString("en-US",{month:"short",day:"numeric"})},[]),Re=U.useCallback(ce=>{if(!ce||ce.length===0)return[];const oe=new Map,_e=[];return ce.forEach(be=>{oe.set(be.id,{...be,replies:[],visited:!1})}),ce.forEach(be=>{const Ae=oe.get(be.id);if(be.parentCommentId){const qe=oe.get(be.parentCommentId);qe&&!qe.replies.some(bt=>bt.id===be.id)&&(qe.replies.push(Ae),Ae.visited=!0)}else Ae.visited||(_e.push(Ae),Ae.visited=!0)}),_e.forEach(be=>M(be)),_e},[]),M=ce=>{delete ce.visited,ce.replies&&ce.replies.forEach(oe=>M(oe))},W=U.useCallback(async(ce=!1)=>{if(!(!xe.current||pe.current)){pe.current=!0,w(!0);try{const oe=await d(G.current.id,10,ce?null:N);console.log("Loaded comments:",oe?.comments?.length||0);const _e=oe?.comments||oe||[];Se(ce?_e:be=>[...be||[],..._e]),k(oe?.lastDoc||null),C(_e.length===10),ae(!0)}catch(oe){console.error("Error loading comments:",oe),xe.current&&(Se([]),ae(!0))}finally{xe.current&&(w(!1),pe.current=!1)}}},[d,N]);U.useEffect(()=>{E&&fe.length===0&&!D&&!I&&W(!0)},[E,fe.length,D,I,W]);const he=U.useCallback(async()=>{if(e)try{const ce=await g(m.id);ne(ce),me(oe=>ce?oe+1:Math.max(0,oe-1)),S(oe=>({...oe,likeCount:ce?(oe.likeCount||0)+1:Math.max(0,(oe.likeCount||1)-1)}))}catch(ce){console.error("Error liking experience:",ce)}},[e,m.id,g]),ve=U.useCallback(async ce=>{if(ce.preventDefault(),!(!e||!L.trim())){q(!0);try{const oe=await c(m.id,L);P(""),Se(_e=>[oe,..._e]),S(_e=>({..._e,commentCount:(_e.commentCount||0)+1}))}catch(oe){console.error("Error submitting comment:",oe)}finally{xe.current&&q(!1)}}},[e,L,c,m.id]),Ne=U.useCallback(async(ce,oe)=>{try{const _e=await c(m.id,ce,oe);return Se(be=>[_e,...be]),S(be=>({...be,commentCount:(be.commentCount||0)+1})),_e}catch(_e){throw console.error("Error posting reply:",_e),_e}},[c,m.id]),Le=U.useCallback(()=>{x(ce=>!ce),s&&s()},[s]),Fe=U.useCallback(ce=>{P(ce.target.value)},[]),Tt=U.useCallback(()=>{s&&s()},[s]),ot=fe&&fe.length>0?Re(fe):[];console.log("ExperienceCard debug:",{experienceId:m.id,showComments:E,isFullScreen:n,commentsCount:fe.length,commentTreeCount:ot.length,commentCount:m.commentCount,hasLoadedComments:I,loadingComments:D});const si=n?{transform:"scale(0.97)",transformOrigin:"top center",fontSize:"0.95rem",lineHeight:"1.4",padding:"1.2rem 1.5rem",marginBottom:"1rem"}:{},Ai=n?{width:"100%",maxWidth:"none",margin:"0",backgroundColor:"rgba(10, 25, 41, 0.9)",border:"1px solid rgba(52, 152, 219, 0.2)",borderRadius:"12px"}:{},wi=n?{padding:"0.6rem 0",marginBottom:"0.8rem"}:{},te=n?{fontSize:"0.95rem",lineHeight:"1.5",marginBottom:"1rem"}:{},ee=n?{paddingTop:"0.8rem"}:{},de=n?{marginTop:"1.5rem",paddingTop:"1rem",maxHeight:"350px",overflowY:"auto"}:{},ue=n?{padding:"1rem",marginBottom:"1rem"}:{};return b.jsxs("div",{style:{...x4,...Ai,...si},onClick:Tt,children:[b.jsxs("div",{style:{...R4,...wi},children:[b.jsxs("div",{style:C4,children:[b.jsx("img",{src:m.userPhotoURL,alt:m.userDisplayName,style:I4}),b.jsxs("div",{style:D4,children:[b.jsx("div",{style:N4,children:m.userDisplayName}),b.jsx("div",{style:O4,children:Ee(m.createdAt)})]})]}),b.jsxs("button",{onClick:he,style:{...k4,color:Q?"#e74c3c":"#bdc3c7",backgroundColor:Q?"rgba(231, 76, 60, 0.1)":"transparent"},title:Q?"Unlike":"Like",children:[Q?"":"",$>0&&` ${$}`]})]}),b.jsx("div",{style:{...M4,...te},children:b.jsx("p",{style:L4,children:m.content})}),b.jsxs("div",{style:{...V4,...ee},children:[b.jsxs("button",{onClick:he,style:{...Ob,color:Q?"#e74c3c":"#bdc3c7"},title:Q?"Unlike":"Like",children:[Q?"":"",$>0?` ${$}`:" Like"]}),b.jsxs("button",{onClick:Le,style:{...Ob,backgroundColor:E?"rgba(52, 152, 219, 0.1)":"transparent"},title:E?"Hide comments":"Show comments",children:[" ",m.commentCount||0]})]}),(E||n)&&b.jsxs("div",{style:{...P4,...de},children:[e?b.jsxs("form",{onSubmit:ve,style:{...U4,...ue},children:[b.jsxs("div",{style:j4,children:[b.jsx("img",{src:o?.photoURL,alt:o?.displayName,style:z4}),b.jsx("div",{style:B4,children:b.jsx("div",{style:q4,children:o?.displayName})})]}),b.jsx("textarea",{value:L,onChange:Fe,placeholder:"Share your thoughts on this story...",style:H4,rows:"2",maxLength:"500",disabled:z}),b.jsxs("div",{style:F4,children:[b.jsxs("div",{style:G4,children:[L.length,"/500 characters"]}),b.jsx("button",{type:"submit",style:$4,disabled:z||!L.trim(),children:z?b.jsxs(b.Fragment,{children:[b.jsx("div",{style:kb}),"Posting..."]}):"Post Comment"})]})]}):b.jsxs("div",{style:Y4,children:[b.jsxs("div",{style:{textAlign:"center",flex:1},children:[b.jsx("div",{style:Q4,children:"Sign in to join the conversation"}),b.jsx("div",{style:K4,children:"Share your thoughts and connect with others"})]}),b.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("showSignInPrompt")),style:{...X4,padding:"0.4rem 0.8rem",fontSize:"0.85rem"},children:" Sign In"})]}),b.jsx("div",{style:W4,children:D&&fe.length===0?b.jsxs("div",{style:w4,children:[b.jsx("div",{style:kb}),b.jsx("div",{children:"Loading comments..."})]}):ot.length>0?b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:J4,children:[b.jsxs("h4",{style:Z4,children:[" Comments (",m.commentCount||0,")"]}),R&&b.jsx("button",{onClick:()=>W(!1),style:eO,disabled:D,children:D?"Loading...":"Load More"})]}),ot.map(ce=>b.jsx(xT,{comment:ce,experienceId:m.id,depth:0,replies:ce.replies||[],onReply:Ne},ce.id))]}):!D&&b.jsxs("div",{style:tO,children:[b.jsx("div",{style:nO,children:""}),b.jsx("div",{style:iO,children:"No comments yet. Be the first to share your thoughts!"})]})})]}),!n&&!E&&b.jsxs("div",{style:rO,onClick:Le,children:[b.jsx("span",{style:sO,children:""}),b.jsx("span",{style:aO,children:m.commentCount>0?`Show ${m.commentCount} ${m.commentCount===1?"comment":"comments"}`:"View experience & add comments"}),b.jsx("span",{style:oO,children:""})]})]})},(r,e)=>r.experience.id===e.experience.id&&r.experience.likeCount===e.experience.likeCount&&r.experience.commentCount===e.experience.commentCount&&r.currentUserId===e.currentUserId&&r.isFullScreen===e.isFullScreen),w4={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem 1rem",color:"#95a5a6",gap:"0.8rem"},x4={backgroundColor:"rgba(44, 62, 80, 0.9)",border:"1px solid #34495e",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",transition:"all 0.3s ease",width:"100%"},R4={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"0.8rem"},C4={display:"flex",alignItems:"center",gap:"0.8rem",flex:1},I4={width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},D4={flex:1},N4={fontWeight:"700",color:"#ecf0f1",fontSize:"1.1rem",marginBottom:"0.2rem"},O4={color:"#95a5a6",fontSize:"0.85rem"},k4={backgroundColor:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1rem",borderRadius:"22px",transition:"all 0.2s ease",fontWeight:"600",border:"2px solid rgba(52, 73, 94, 0.5)","&:hover":{backgroundColor:"rgba(52, 73, 94, 0.3)"}},M4={marginBottom:"1.2rem",lineHeight:"1.6"},L4={color:"#ecf0f1",fontSize:"1rem",lineHeight:"1.6",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},V4={display:"flex",gap:"0.8rem",paddingTop:"1rem",borderTop:"1px solid #34495e"},Ob={backgroundColor:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1rem",borderRadius:"22px",transition:"all 0.2s ease",fontWeight:"600","&:hover":{backgroundColor:"rgba(52, 73, 94, 0.5)",color:"#ecf0f1"}},P4={marginTop:"1.8rem",paddingTop:"1.2rem",borderTop:"1px solid #34495e"},U4={marginBottom:"1.2rem",backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1.2rem",borderRadius:"10px",border:"1px solid #2c3e50"},j4={display:"flex",alignItems:"flex-start",gap:"0.8rem",marginBottom:"0.8rem"},z4={width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},B4={flex:1},q4={fontWeight:"600",color:"#ecf0f1",fontSize:"0.9rem",marginBottom:"0.3rem"},H4={width:"100%",backgroundColor:"rgba(26, 37, 47, 0.8)",border:"1px solid #2c3e50",borderRadius:"8px",color:"#ecf0f1",padding:"0.6rem 0.75rem",fontSize:"0.95rem",resize:"vertical",fontFamily:"inherit","&:focus":{outline:"none",borderColor:"#3498db"},"&:disabled":{opacity:.6,cursor:"not-allowed"}},F4={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"0.8rem"},G4={fontSize:"0.8rem",color:"#95a5a6",fontWeight:"500"},$4={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem","&:hover:not(:disabled)":{backgroundColor:"#229954",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},kb={width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},Y4={backgroundColor:"rgba(52, 152, 219, 0.1)",border:"1px solid rgba(52, 152, 219, 0.3)",color:"#3498db",padding:"1rem",borderRadius:"10px",marginBottom:"1.2rem",fontSize:"0.95rem",display:"flex",alignItems:"center",gap:"0.8rem",justifyContent:"space-between",textAlign:"center"},Q4={fontWeight:"600",color:"#3498db",fontSize:"1rem",marginBottom:"0.2rem"},K4={fontSize:"0.85rem",color:"#bdc3c7"},X4={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.6rem 1.2rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem","&:hover":{backgroundColor:"#2980b9",transform:"translateY(-1px)"}},W4={width:"100%"},J4={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.2rem",paddingBottom:"0.8rem",borderBottom:"2px solid #34495e"},Z4={margin:0,fontSize:"1.1rem",color:"#FFD700",fontWeight:"700"},eO={backgroundColor:"rgba(52, 73, 94, 0.5)",border:"1px solid #34495e",color:"#bdc3c7",padding:"0.6rem 1.2rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(52, 73, 94, 0.8)",color:"#ecf0f1",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},tO={textAlign:"center",padding:"2rem 1rem",color:"#95a5a6",backgroundColor:"rgba(52, 73, 94, 0.3)",borderRadius:"10px",border:"2px dashed #34495e"},nO={fontSize:"2.5rem",marginBottom:"0.8rem",opacity:.5},iO={fontStyle:"italic",fontSize:"1rem",maxWidth:"380px",margin:"0 auto"},rO={marginTop:"1.2rem",padding:"0.8rem",backgroundColor:"rgba(52, 152, 219, 0.1)",border:"1px solid rgba(52, 152, 219, 0.2)",borderRadius:"8px",color:"#3498db",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.6rem",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.2)",transform:"translateY(-1px)"}},sO={fontSize:"1.1rem"},aO={fontWeight:"600",fontSize:"0.95rem"},oO={fontSize:"0.85rem",opacity:.7};CT.displayName="ExperienceCard";const IT=rc.memo(()=>{const{user:r,fetchExperiences:e}=Nn(),[n,s]=U.useState([]),[o,c]=U.useState(!1),[d,y]=U.useState(mh.NEWEST),[g,m]=U.useState(0),[S,E]=U.useState(!1),[x,L]=U.useState(!1),[P,z]=U.useState(!0),[q,Q]=U.useState(null),[ne,$]=U.useState(!1),me=U.useRef(null),fe=U.useRef([]),[Se,D]=U.useState(null),w=U.useCallback(async()=>{console.log(" loadInitialExperiences called"),c(!0);try{console.log(" Fetching experiences with sort:",d);const ae=await e(20,null,d);console.log(" Fetch successful, got:",ae.experiences?.length||0,"experiences"),s(ae.experiences||[]),Q(ae.lastDoc),z(ae.hasMore),E(!0),ae.experiences?.[0]&&D(ae.experiences[0].id)}catch(ae){console.error(" Error loading experiences:",ae),s([]),E(!0)}finally{console.log(" Setting loading to false"),c(!1)}},[e,d]),R=U.useCallback(async()=>{if(!(!P||ne||!q)){$(!0);try{console.log(" Loading more experiences...");const ae=await e(20,q,d);s(xe=>[...xe,...ae.experiences]),Q(ae.lastDoc),z(ae.hasMore),console.log(` Added ${ae.experiences.length} more experiences`)}catch(ae){console.error("Error loading more experiences:",ae)}finally{$(!1)}}},[e,P,ne,q,d]);U.useEffect(()=>{console.log(" Component mounted, starting initial load"),!S&&!o&&w()},[]),U.useEffect(()=>{console.log(" Sort changed to:",d,"- Reloading..."),s([]),Q(null),z(!0),E(!1),m(0),w()},[d]),U.useEffect(()=>{const ae=()=>{if(!me.current||ne||!P||o)return;const G=me.current;G.scrollHeight-G.scrollTop-G.clientHeight<300&&R()},xe=me.current;if(xe)return xe.addEventListener("scroll",ae),()=>xe.removeEventListener("scroll",ae)},[ne,P,R,o]);const C=U.useCallback(ae=>{fe.current[ae]&&me.current&&(L(!0),fe.current[ae].scrollIntoView({behavior:"smooth",block:"start"}),m(ae),n[ae]&&D(n[ae].id),setTimeout(()=>{L(!1)},500))},[n]);U.useEffect(()=>{const ae=xe=>{if(!(document.activeElement.tagName==="TEXTAREA"||document.activeElement.tagName==="INPUT"||document.activeElement.isContentEditable)&&!(n.length===0||x)){if(xe.key==="ArrowDown"){xe.preventDefault();const le=Math.min(g+1,n.length-1);C(le)}else if(xe.key==="ArrowUp"){xe.preventDefault();const le=Math.max(g-1,0);C(le)}else if(xe.key===" "&&xe.target===document.body){xe.preventDefault();const le=Math.min(g+1,n.length-1);C(le)}}};return window.addEventListener("keydown",ae),()=>window.removeEventListener("keydown",ae)},[g,C,n.length,x]),U.useEffect(()=>{const ae=G=>{if(n.length===0||x||!me.current)return;const pe=me.current.clientHeight,Ee=fe.current[g];if(Ee){const Re=Ee.getBoundingClientRect(),M=Re.top,W=Re.height;if(W>pe){const ve=M+W-pe;if(G.deltaY>0&&M>-100||G.deltaY<0&&ve>100)return}}if(Math.abs(G.deltaY)>30)if(G.deltaY>0){const Re=Math.min(g+1,n.length-1);Re!==g&&(G.preventDefault(),C(Re),Re>=n.length-5&&P&&!ne&&R())}else{const Re=Math.max(g-1,0);Re!==g&&(G.preventDefault(),C(Re))}},xe=me.current;if(xe)return xe.addEventListener("wheel",ae,{passive:!1}),()=>xe.removeEventListener("wheel",ae)},[g,C,n.length,x,P,ne,R]),U.useEffect(()=>{const ae=()=>{if(!me.current||x)return;const G=me.current,le=G.clientHeight;for(let pe=0;pe<n.length;pe++){const Ee=fe.current[pe];if(Ee){const Re=Ee.getBoundingClientRect(),M=G.getBoundingClientRect();if(Re.top<=M.top+le*.4&&Re.bottom>=M.top+le*.6){pe!==g&&(m(pe),D(n[pe].id));break}}}},xe=me.current;if(xe)return xe.addEventListener("scroll",ae),()=>xe.removeEventListener("scroll",ae)},[g,n,x]);const N=()=>{if(!r){window.dispatchEvent(new CustomEvent("showSignInPrompt"));return}window.dispatchEvent(new CustomEvent("showCreateProfile",{detail:{mode:"edit"}}))},k=U.useCallback(ae=>{D(ae)},[]),I=U.useMemo(()=>n,[n]);return console.log(" LifeExperiencesTab state:",{loading:o,hasLoaded:S,experiencesCount:n.length,sortBy:d,hasMore:P}),b.jsxs("div",{style:lO,children:[b.jsx("div",{style:cO,children:b.jsxs("div",{style:uO,children:[b.jsxs("div",{style:hO,children:[b.jsx("h2",{style:dO,children:" Life Experiences"}),b.jsxs("p",{style:fO,children:["Scroll to explore stories. Press  or Space to navigate.",P&&` (Loaded ${n.length}, more available)`]})]}),b.jsxs("div",{style:mO,children:[b.jsxs("div",{style:pO,children:[b.jsx("label",{style:gO,children:"Sort:"}),b.jsxs("select",{value:d,onChange:ae=>y(ae.target.value),style:yO,title:"Sort experiences",children:[b.jsx("option",{value:mh.NEWEST,children:"Newest"}),b.jsx("option",{value:mh.MOST_LIKED,children:"Most Liked"}),b.jsx("option",{value:mh.MOST_COMMENTED,children:"Most Discussed"})]})]}),b.jsx("button",{onClick:N,style:_O,title:"Share your life experience",children:" Share Your Story"}),I.length>0&&b.jsxs("div",{style:vO,children:[b.jsxs("span",{style:bO,children:[g+1," / ",I.length,P&&"+"]}),b.jsxs("div",{style:SO,children:[b.jsx("button",{onClick:()=>C(Math.max(g-1,0)),disabled:g===0,style:Mb,title:"Previous story",children:""}),b.jsx("button",{onClick:()=>{const ae=Math.min(g+1,I.length-1);C(ae),ae>=I.length-3&&P&&!ne&&R()},disabled:g===I.length-1&&!P,style:Mb,title:"Next story",children:""})]})]})]})]})}),b.jsx("div",{ref:me,style:EO,className:"experiences-container",children:I.length>0?b.jsxs(b.Fragment,{children:[I.map((ae,xe)=>b.jsxs("div",{ref:G=>fe.current[xe]=G,style:TO,"data-index":xe,"data-experience-id":ae.id,className:Se===ae.id?"active-experience":"",children:[b.jsx(CT,{experience:ae,currentUserId:r?.uid,isFullScreen:!0,onInteraction:()=>k(ae.id)}),xe===0&&I.length>1&&b.jsxs("div",{style:AO,children:[b.jsx("div",{style:wO,children:""}),b.jsx("div",{style:xO,children:"Scroll down for more stories"})]})]},`exp-${ae.id}-${xe}`)),ne&&b.jsxs("div",{style:RO,children:[b.jsx("div",{style:CO}),b.jsx("div",{children:"Loading more stories..."})]}),!P&&I.length>0&&b.jsxs("div",{style:IO,children:[b.jsx("div",{style:DO,children:""}),b.jsx("div",{style:NO,children:"You've reached the end of the stories"}),b.jsxs("div",{style:OO,children:[I.length," stories loaded",r&&!I.some(ae=>ae.userId===r.uid)&&" (Your story might be in a different sort order)"]})]})]}):o?b.jsxs("div",{style:kO,children:[b.jsx("div",{style:MO}),b.jsx("p",{children:"Loading life experiences..."})]}):b.jsxs("div",{style:BO,children:[b.jsx("div",{style:LO,children:""}),b.jsx("h3",{style:VO,children:"No Experiences Shared Yet"}),b.jsx("p",{style:PO,children:"Be the first to share your life experience and inspire others with your story."}),r?b.jsx("button",{onClick:N,style:UO,children:" Share Your First Experience"}):b.jsxs("div",{style:jO,children:[b.jsx("p",{children:"Sign in to share your life experience"}),b.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("showSignInPrompt")),style:zO,children:" Sign In"})]})]})})]})}),lO={position:"fixed",top:"80px",left:0,right:0,bottom:0,width:"100vw",height:"calc(100vh - 80px)",backgroundColor:"#0a1929",overflow:"hidden",zIndex:1},cO={position:"absolute",top:0,left:0,right:0,backgroundColor:"rgba(10, 25, 41, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(52, 152, 219, 0.2)",zIndex:1e3,padding:"0.8rem 1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},uO={maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1.5rem",flexWrap:"wrap"},hO={flex:1,minWidth:"250px"},dO={fontSize:"1.6rem",color:"#FFD700",margin:"0 0 0.2rem 0",fontWeight:"700"},fO={fontSize:"0.85rem",color:"#bdc3c7",margin:0,opacity:.8},mO={display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},pO={display:"flex",alignItems:"center",gap:"0.4rem",backgroundColor:"rgba(52, 73, 94, 0.7)",padding:"0.3rem 0.6rem",borderRadius:"18px",border:"1px solid #34495e",backdropFilter:"blur(5px)"},gO={color:"#bdc3c7",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap"},yO={backgroundColor:"rgba(26, 37, 47, 0.8)",color:"#ecf0f1",border:"1px solid #3498db",borderRadius:"12px",padding:"0.25rem 0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",minWidth:"110px"},_O={backgroundColor:"#FFD700",color:"#2c3e50",border:"none",padding:"0.5rem 1rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem",whiteSpace:"nowrap",boxShadow:"0 4px 15px rgba(255, 215, 0, 0.3)"},vO={display:"flex",alignItems:"center",gap:"0.8rem",backgroundColor:"rgba(52, 73, 94, 0.7)",padding:"0.3rem 0.8rem",borderRadius:"18px",border:"1px solid rgba(52, 152, 219, 0.3)"},bO={color:"#ecf0f1",fontSize:"0.85rem",fontWeight:"600",minWidth:"55px",textAlign:"center"},SO={display:"flex",gap:"0.2rem"},Mb={backgroundColor:"rgba(52, 152, 219, 0.2)",color:"#ecf0f1",border:"1px solid rgba(52, 152, 219, 0.3)",width:"26px",height:"26px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(52, 152, 219, 0.4)",transform:"scale(1.1)"},"&:disabled":{opacity:.3,cursor:"not-allowed"}},EO={position:"absolute",top:"60px",left:0,right:0,bottom:0,overflowY:"auto",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",padding:"0"},TO={minHeight:"calc(100vh - 140px)",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"1.5rem 2rem",position:"relative",borderBottom:"1px solid rgba(52, 73, 94, 0.3)"},AO={position:"absolute",bottom:"1.5rem",left:"50%",transform:"translateX(-50%)",textAlign:"center",color:"rgba(52, 152, 219, 0.7)",animation:"bounce 2s infinite",zIndex:10},wO={fontSize:"1.8rem",marginBottom:"0.4rem"},xO={fontSize:"0.85rem",fontWeight:"500",backgroundColor:"rgba(10, 25, 41, 0.8)",padding:"0.4rem 0.8rem",borderRadius:"18px",border:"1px solid rgba(52, 152, 219, 0.3)"},RO={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem",color:"#95a5a6",textAlign:"center"},CO={width:"30px",height:"30px",border:"3px solid rgba(52, 152, 219, 0.2)",borderTop:"3px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"},IO={textAlign:"center",padding:"3rem",color:"#95a5a6",backgroundColor:"rgba(44, 62, 80, 0.3)",margin:"1rem",borderRadius:"12px",border:"2px dashed #34495e"},DO={fontSize:"3rem",marginBottom:"1rem",opacity:.5},NO={fontSize:"1.2rem",fontWeight:"600",marginBottom:"0.5rem",color:"#bdc3c7"},OO={fontSize:"0.9rem",opacity:.7,maxWidth:"400px",margin:"0 auto"},kO={position:"fixed",top:"80px",left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(10, 25, 41, 0.95)",backdropFilter:"blur(10px)",zIndex:1e3,padding:"2rem",textAlign:"center",gap:"1.5rem"},MO={width:"50px",height:"50px",border:"4px solid rgba(52, 152, 219, 0.2)",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},LO={fontSize:"4rem",marginBottom:"1.2rem",opacity:.6,animation:"pulse 2s infinite"},VO={fontSize:"1.8rem",color:"#FFD700",margin:"0 0 0.8rem 0",fontWeight:"700"},PO={fontSize:"1rem",color:"#bdc3c7",margin:"0 0 1.5rem 0",maxWidth:"500px",lineHeight:"1.5"},UO={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"22px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.6rem",boxShadow:"0 4px 15px rgba(39, 174, 96, 0.3)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(39, 174, 96, 0.4)",backgroundColor:"#229954"}},jO={display:"flex",flexDirection:"column",alignItems:"center",gap:"0.8rem",padding:"1.2rem",backgroundColor:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",border:"1px solid rgba(52, 152, 219, 0.3)",maxWidth:"380px"},zO={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.6rem 1.2rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem","&:hover":{backgroundColor:"#2980b9",transform:"translateY(-2px)"}},BO={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"calc(100vh - 140px)",textAlign:"center",padding:"2rem 1.5rem",backgroundColor:"rgba(44, 62, 80, 0.5)",borderRadius:"18px",border:"2px dashed #34495e",margin:"1.5rem auto",maxWidth:"550px",animation:"fadeIn 0.5s ease"},DT=document.createElement("style");DT.textContent=`
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
  40% { transform: translateX(-50%) translateY(-8px); }
  60% { transform: translateX(-50%) translateY(-4px); }
}

@keyframes pulse {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.05); }
}

/* Hide scrollbar but keep functionality */
.experiences-container::-webkit-scrollbar {
  display: none;
}

.experiences-container {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Active experience styling */
.active-experience {
  background: linear-gradient(to right, rgba(52, 152, 219, 0.05), transparent);
}

/* Smooth transitions */
.experience-section {
  transition: background-color 0.3s ease;
}
`;document.head.appendChild(DT);IT.displayName="LifeExperiencesTab";const qO=({activeTab:r})=>{const{user:e,userProfile:n,fetchFullProfile:s}=Nn(),[o,c]=U.useState(!1),[d,y]=U.useState(null),[g,m]=U.useState(!1),[S,E]=U.useState(!1),x=U.useCallback(async P=>{E(!0);try{const z=await s(P.id);z&&(y(z),m(!0))}catch(z){console.error("Error loading profile:",z)}finally{E(!1)}},[s]);U.useEffect(()=>{const P=()=>{e&&c(!0)},z=q=>{console.log("MainContent: Opening profile from event",q.detail.profile),x(q.detail.profile)};return window.addEventListener("showCreateProfile",P),window.addEventListener("openProfileModal",z),()=>{window.removeEventListener("showCreateProfile",P),window.removeEventListener("openProfileModal",z)}},[e,x]);const L=U.useCallback(()=>{m(!1),y(null)},[]);return b.jsxs("main",{style:HO,children:[b.jsx(YN,{}),b.jsx("div",{style:FO,children:r==="galaxy"?b.jsx("div",{style:GO,children:b.jsx(AT,{onProfileClick:x})}):b.jsx(IT,{})}),S&&b.jsx("div",{style:$O,children:b.jsx("div",{style:YO})}),b.jsx(M5,{isOpen:o,onClose:()=>c(!1)}),b.jsx(hN,{profile:d,isOpen:g,onClose:L})]})},HO={position:"fixed",top:"80px",left:0,right:0,bottom:0,width:"100vw",height:"calc(100vh - 80px)",backgroundColor:"transparent",margin:0,padding:0,overflow:"hidden",zIndex:0},FO={position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1,overflow:"hidden"},GO={position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1},$O={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},YO={width:"50px",height:"50px",border:"5px solid rgba(255, 215, 0, 0.3)",borderTop:"5px solid rgba(255, 215, 0, 0.9)",borderRadius:"50%",animation:"spin 1s linear infinite"},NT=document.createElement("style");NT.innerText=`
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Ensure no scrollbars */
body {
  overflow: hidden;
}
`;document.head.appendChild(NT);const QO=({isOpen:r,onClose:e})=>{const{user:n,profiles:s,profilesLoading:o,addTestProfile:c,createBulkTestProfiles:d,clearAllProfiles:y,loadProfiles:g,deleteAllProfiles:m}=Nn();U.useEffect(()=>{const Q=ne=>{ne.key==="Escape"&&e()};return r&&(document.addEventListener("keydown",Q),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",Q),document.body.style.overflow="unset"}},[r,e]);const S=async()=>{try{await c()}catch(Q){console.error("Error adding test profile:",Q)}},E=async()=>{try{await d(100)}catch(ne){console.error("Error creating bulk profiles:",ne)}},x=async()=>{if(window.confirm("Are you sure you want to clear ALL profiles? This cannot be undone!"))try{await y()}catch(Q){console.error("Error clearing profiles:",Q)}},L=async()=>{if(s.length!==0)try{console.log(`Adding random likes to ${s.length} profiles...`);const Q=s.map(async ne=>{const $=Math.floor(Math.random()*20),me=Math.floor(Math.random()*15),fe=doc(De,"profiles",ne.id),Se=[],D=[];for(let w=0;w<$;w++)Se.push(`fake_liker_${Math.random().toString(36).substr(2,9)}`);for(let w=0;w<me;w++)D.push(`fake_liker_${Math.random().toString(36).substr(2,9)}`);await updateDoc(fe,{thoughtLikes:$,thoughtLikers:arrayUnion(...Se),experienceLikes:me,experienceLikers:arrayUnion(...D),updatedAt:new Date})});await Promise.all(Q),console.log(` Added random likes to ${s.length} profiles!`),g&&await g()}catch(Q){console.error("Error adding random likes:",Q)}},P=async()=>{if(s.length!==0)try{const Q=Math.min(3,s.length),$=[...s].sort(()=>.5-Math.random()).slice(0,Q);console.log(`Making ${$.length} profiles go viral...`);const me=$.map(async fe=>{const Se=doc(De,"profiles",fe.id),D=Math.floor(Math.random()*200+100),w=Math.floor(Math.random()*150+50),R=Array.from({length:D},(N,k)=>`viral_liker_${k}_${Math.random().toString(36).substr(2,5)}`),C=Array.from({length:w},(N,k)=>`viral_liker_${k}_${Math.random().toString(36).substr(2,5)}`);await updateDoc(Se,{thoughtLikes:D,thoughtLikers:arrayUnion(...R),experienceLikes:w,experienceLikers:arrayUnion(...C),updatedAt:new Date})});await Promise.all(me),console.log(` ${$.length} profiles now have viral like counts!`),g&&await g()}catch(Q){console.error("Error simulating viral content:",Q)}},z=async()=>{if(s.length!==0&&window.confirm(`Clear ALL likes from ${s.length} profiles? This cannot be undone!`))try{console.log("Clearing all likes...");const Q=s.map(async ne=>{const $=doc(De,"profiles",ne.id);await updateDoc($,{thoughtLikes:0,thoughtLikers:[],experienceLikes:0,experienceLikers:[],updatedAt:new Date})});await Promise.all(Q),console.log(" All likes cleared!"),g&&await g()}catch(Q){console.error("Error clearing likes:",Q)}},q=async()=>{if(s.length===0){console.log("No profiles to add comments to");return}try{console.log("Generating test comments with real user context...");const Q=n?.uid||"test_system_user",ne=n?.displayName||"Test System",$=n?.photoURL||"https://i.pravatar.cc/150",me=Bn(Rt(De,"experiences"),_i(20)),Se=(await Ki(me)).docs.map(ae=>({id:ae.id,...ae.data()}));if(Se.length===0){console.log("No experiences found to add comments to");return}const D=["This is such an inspiring story! Thank you for sharing.","I had a similar experience last year. It truly changes your perspective.","Wow, this really resonated with me. Beautifully written!","Thank you for being vulnerable and sharing your journey.","This gives me hope. We need more stories like this.","I can relate to this so much. You're not alone!","What an amazing experience. How did you overcome the challenges?","This made my day. Thank you for the inspiration!","Powerful story. Keep sharing your light with the world.","I've been through something similar. It gets better, I promise."],w=["Thank you! I appreciate your kind words.","I'm glad it resonated with you too.","It wasn't easy, but so worth it.","Thank you for reading and sharing your thoughts!","Your support means everything. Thank you!"];let R=0,C=ys(De);const N=Math.min(5,Se.length),I=[...Se].sort(()=>.5-Math.random()).slice(0,N);for(const ae of I){const xe=Math.floor(Math.random()*2)+2;for(let G=0;G<xe;G++){const le=D[Math.floor(Math.random()*D.length)],pe=s[Math.floor(Math.random()*s.length)],Ee=`test_comment_${Date.now()}_${G}`,Re=doc(De,"experiences",ae.id,"comments",Ee),M={userId:pe.id,userDisplayName:pe.displayName,userPhotoURL:pe.photoURL,content:le,createdAt:st(),parentCommentId:null,depth:0,likeCount:Math.floor(Math.random()*5),likedBy:[],isTest:!0};C.set(Re,M),R++;const W=doc(De,"experiences",ae.id);if(C.update(W,{commentCount:uc(1),updatedAt:st()}),console.log(`Adding comment to ${ae.id}: ${le.substring(0,30)}...`),Math.random()>.5&&R<20){const he=w[Math.floor(Math.random()*w.length)],ve=`test_reply_${Date.now()}_${G}`,Ne=doc(De,"experiences",ae.id,"comments",ve),Le={userId:ae.userId,userDisplayName:ae.userDisplayName,userPhotoURL:ae.userPhotoURL,content:he,createdAt:st(),parentCommentId:Ee,depth:1,likeCount:Math.floor(Math.random()*3),likedBy:[],isTest:!0};C.set(Ne,Le),R++,C.update(W,{commentCount:uc(1),updatedAt:st()}),console.log(`   Adding reply from author: ${he.substring(0,30)}...`)}R%50===0&&(await C.commit(),C=ys(De),console.log(`Committed ${R} comments...`))}}R%50!==0&&await C.commit(),console.log(` Generated ${R} test comments`),g&&await g()}catch(Q){console.error("Error generating test comments:",Q)}};return r?b.jsx("div",{style:KO,onClick:e,children:b.jsxs("div",{style:XO,onClick:Q=>Q.stopPropagation(),children:[b.jsxs("div",{style:WO,children:[b.jsx("h2",{style:JO,children:" Test Panel"}),b.jsx("button",{onClick:e,style:ZO,children:""})]}),b.jsxs("div",{style:ek,children:[b.jsxs("div",{style:tk,children:[b.jsx("h3",{style:ph,children:"Current Stats"}),b.jsxs("div",{style:nk,children:[b.jsxs("div",{style:Lb,children:[b.jsx("div",{style:Vb,children:s.length}),b.jsx("div",{style:Pb,children:"Total Stars"})]}),b.jsxs("div",{style:Lb,children:[b.jsx("div",{style:Vb,children:n?"Yes":"No"}),b.jsx("div",{style:Pb,children:"Signed In"})]})]})]}),b.jsxs("div",{style:Ub,children:[b.jsx("h3",{style:ph,children:"Profile Management"}),b.jsxs("div",{style:jb,children:[b.jsx("button",{onClick:S,style:To,disabled:o,children:"Add Test Star"}),b.jsx("button",{onClick:E,style:To,disabled:o,children:"Add 100 Stars"}),b.jsx("button",{onClick:q,style:To,disabled:o||s.length===0,children:"Add Test Comments"}),b.jsx("button",{onClick:x,style:zb,disabled:o||s.length===0,children:"Clear All Stars"})]})]}),b.jsxs("div",{style:Ub,children:[b.jsx("h3",{style:ph,children:"Like Management"}),b.jsxs("div",{style:jb,children:[b.jsx("button",{onClick:L,style:To,disabled:o||s.length===0,children:"Add Random Likes"}),b.jsx("button",{onClick:P,style:To,disabled:o||s.length===0,children:"Simulate Viral Content"}),b.jsx("button",{onClick:z,style:zb,disabled:o||s.length===0,children:"Clear All Likes"})]}),b.jsx("div",{style:ik,children:"Random likes: 0-19 for thoughts, 0-14 for experiences"})]}),n&&b.jsxs("div",{style:rk,children:[b.jsx("h3",{style:ph,children:"Current User"}),b.jsxs("div",{style:sk,children:[b.jsx("img",{src:n.photoURL,alt:n.displayName,style:ak}),b.jsxs("div",{style:ok,children:[b.jsx("div",{style:lk,children:n.displayName}),b.jsx("div",{style:ck,children:n.email}),b.jsxs("div",{style:uk,children:["ID: ",n.uid.substring(0,12),"..."]})]})]})]}),o&&b.jsxs("div",{style:hk,children:[b.jsx("div",{style:dk}),b.jsx("div",{children:"Processing..."})]}),b.jsx("div",{style:fk,children:" This panel is for testing only. Changes affect the live database."})]})]})}):null},KO={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,padding:"1rem"},XO={backgroundColor:"#2c3e50",border:"2px solid #34495e",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"modalFadeIn 0.3s ease"},WO={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #34495e"},JO={margin:0,fontSize:"1.5rem",color:"#ecf0f1"},ZO={background:"none",border:"none",fontSize:"2rem",cursor:"pointer",color:"#95a5a6",padding:"0.25rem",borderRadius:"4px",lineHeight:1},ek={display:"flex",flexDirection:"column",gap:"1.5rem"},tk={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",border:"1px solid #34495e"},ph={margin:"0 0 1rem 0",fontSize:"1.1rem",color:"#3498db",fontWeight:"600"},nk={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},Lb={backgroundColor:"#34495e",padding:"1rem",borderRadius:"8px",textAlign:"center",border:"1px solid #2c3e50"},Vb={fontSize:"2rem",fontWeight:"bold",color:"#FFD700",marginBottom:"0.5rem"},Pb={fontSize:"0.9rem",color:"#bdc3c7"},Ub={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",border:"1px solid #34495e"},jb={display:"flex",flexDirection:"column",gap:"0.75rem"},To={padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",backgroundColor:"#3498db",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"#2980b9",transform:"translateY(-2px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},zb={...To,backgroundColor:"#e74c3c","&:hover:not(:disabled)":{backgroundColor:"#c0392b"}},ik={fontSize:"0.8rem",color:"#95a5a6",fontStyle:"italic",marginTop:"0.5rem",textAlign:"center"},rk={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",border:"1px solid #34495e"},sk={display:"flex",alignItems:"center",gap:"1rem"},ak={width:"60px",height:"60px",borderRadius:"50%",border:"3px solid #3498db"},ok={flex:1},lk={fontSize:"1.1rem",fontWeight:"bold",color:"#ecf0f1",marginBottom:"0.25rem"},ck={fontSize:"0.9rem",color:"#bdc3c7",marginBottom:"0.25rem"},uk={fontSize:"0.8rem",color:"#95a5a6",fontFamily:"monospace"},hk={display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",padding:"1rem",backgroundColor:"rgba(52, 73, 94, 0.3)",borderRadius:"8px",border:"1px solid #34495e"},dk={width:"40px",height:"40px",border:"4px solid rgba(52, 152, 219, 0.3)",borderTopColor:"#3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},fk={padding:"1rem",backgroundColor:"rgba(243, 156, 18, 0.1)",border:"1px solid #f39c12",borderRadius:"8px",color:"#f39c12",fontSize:"0.9rem",textAlign:"center"},OT=document.createElement("style");OT.textContent=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
`;document.head.appendChild(OT);class mk{async addDonation(e,n=null,s=null,o=null){try{const c=Rt(De,"donations"),d={amount:parseFloat(e),userId:n,userEmail:s,displayName:o,timestamp:lt.now(),createdAt:new Date().toISOString()};return{id:(await ma(c,d)).id,...d}}catch(c){throw console.error("Error adding donation:",c),c}}async getTotalAmount(){try{const e=Rt(De,"donations"),n=await Ki(e);let s=0;return n.forEach(o=>{const c=o.data();s+=c.amount||0}),s}catch(e){return console.error("Error getting total amount:",e),0}}async getRecentDonations(e=5){try{const n=Rt(De,"donations"),s=Bn(n,xr("timestamp","desc"),_i(e)),o=await Ki(s),c=[];return o.forEach(d=>{c.push({id:d.id,...d.data()})}),c}catch(n){return console.error("Error getting recent donations:",n),[]}}async getAllDonations(){try{const e=Rt(De,"donations"),n=Bn(e,xr("timestamp","desc")),s=await Ki(n),o=[];return s.forEach(c=>{o.push({id:c.id,...c.data()})}),o}catch(e){return console.error("Error getting all donations:",e),[]}}async getDonationCount(){try{const e=Rt(De,"donations");return(await CD(e)).data().count}catch(e){return console.error("Error getting donation count:",e),0}}subscribeToDonations(e){const n=Rt(De,"donations"),s=Bn(n,xr("timestamp","desc"));return dp(s,o=>{const c=[];o.forEach(d=>{c.push({id:d.id,...d.data()})}),e({donations:c,changes:o.docChanges()})})}}const gs=new mk;function pk(){const{user:r}=Nn(),[e,n]=U.useState(0),[s,o]=U.useState([]),[c,d]=U.useState(0),[y,g]=U.useState(!0);U.useEffect(()=>{(async()=>{g(!0);try{const[x,L,P]=await Promise.all([gs.getTotalAmount(),gs.getRecentDonations(5),gs.getDonationCount()]);n(Number(x)||0),o(L||[]),d(Number(P)||0)}catch(x){console.error("Error loading donation data:",x)}finally{g(!1)}})()},[]),U.useEffect(()=>{const E=gs.subscribeToDonations(({donations:x})=>{if(x&&x.length>0){o(x.slice(0,5));const L=x.reduce((P,z)=>P+(Number(z.amount)||0),0);n(L),d(x.length)}});return()=>E()},[]);const m=U.useCallback(async(E,x={})=>{try{return await gs.addDonation(E,r?.uid,r?.email,r?.displayName)}catch(L){throw console.error("Error adding donation:",L),L}},[r]),S=U.useCallback(async()=>{g(!0);try{const[E,x,L]=await Promise.all([gs.getTotalAmount(),gs.getRecentDonations(5),gs.getDonationCount()]);n(Number(E)||0),o(x||[]),d(Number(L)||0)}catch(E){console.error("Error refreshing donation data:",E)}finally{g(!1)}},[]);return{totalAmount:e,recentDonations:s,donationCount:c,loading:y,addDonation:m,refreshData:S}}var In;(function(r){r.INITIAL="initial",r.PENDING="pending",r.REJECTED="rejected",r.RESOLVED="resolved"})(In||(In={}));var Cs;(function(r){r.LOADING_STATUS="setLoadingStatus",r.RESET_OPTIONS="resetOptions",r.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Cs||(Cs={}));var Bb;(function(r){r.NUMBER="number",r.CVV="cvv",r.EXPIRATION_DATE="expirationDate",r.EXPIRATION_MONTH="expirationMonth",r.EXPIRATION_YEAR="expirationYear",r.POSTAL_CODE="postalCode"})(Bb||(Bb={}));var Gt=function(){return Gt=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Gt.apply(this,arguments)};function kT(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function qb(r,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return r.concat(c||Array.prototype.slice.call(e))}var Sc="data-react-paypal-script-id",ya={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},gk="Failed to load the PayPal JS SDK script.",MT="paypal",yk="usePayPalScriptReducer must be used within a PayPalScriptProvider";function _k(r){return r===void 0&&(r=MT),window[r]}function vk(r){for(var e="",n=0;n<r.length;n++){var s=r[n].charCodeAt(0)*n;r[n+1]&&(s+=r[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function bk(r){var e=r.reactComponentName,n=r.sdkComponentKey,s=r.sdkRequestedComponents,o=s===void 0?"":s,c=r.sdkDataNamespace,d=c===void 0?MT:c,y=n.charAt(0).toUpperCase().concat(n.substring(1)),g="Unable to render <".concat(e," /> because window.").concat(d,".").concat(y," is undefined."),m=typeof o=="string"?o:o.join(",");if(!m.includes(n)){var S=[m,n].filter(Boolean).join();g+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(S,"'}}>`.")}return g}function LT(r){var e=r,n=Sc;e[n];var s=kT(e,[n+""]);return"react-paypal-js-".concat(vk(JSON.stringify(s)))}function Sk(r){var e=self.document.querySelector("script[".concat(Sc,'="').concat(r,'"]'));e?.parentNode&&e.parentNode.removeChild(e)}function Ek(r,e){var n,s;switch(e.type){case Cs.LOADING_STATUS:return typeof e.value=="object"?Gt(Gt({},r),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Gt(Gt({},r),{loadingStatus:e.value});case Cs.RESET_OPTIONS:return Sk(r.options[Sc]),Gt(Gt({},r),{loadingStatus:In.PENDING,options:Gt(Gt((n={},n[ya.DATA_SDK_INTEGRATION_SOURCE]=ya.DATA_LIBRARY_VALUE,n),e.value),(s={},s[Sc]="".concat(LT(e.value)),s))});case Cs.SET_BRAINTREE_INSTANCE:return Gt(Gt({},r),{braintreePayPalCheckoutInstance:e.value});default:return r}}var VT=U.createContext(null);function Tk(r){if(typeof r?.dispatch=="function"&&r.dispatch.length!==0)return r;throw new Error(yk)}function Ak(){var r=Tk(U.useContext(VT)),e=Gt(Gt({},r),{isInitial:r.loadingStatus===In.INITIAL,isPending:r.loadingStatus===In.PENDING,isResolved:r.loadingStatus===In.RESOLVED,isRejected:r.loadingStatus===In.REJECTED});return[e,r.dispatch]}U.createContext({});function wk(r){var e=U.useRef(new Proxy({},{get:function(n,s,o){return typeof n[s]=="function"?function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return n[s].apply(n,c)}:Reflect.get(n,s,o)}}));return e.current=Object.assign(e.current,r),e.current}var gg=function(r){var e,n=r.className,s=n===void 0?"":n,o=r.disabled,c=o===void 0?!1:o,d=r.children,y=r.forceReRender,g=y===void 0?[]:y,m=kT(r,["className","disabled","children","forceReRender"]),S=c?{opacity:.38}:{},E="".concat(s," ").concat(c?"paypal-buttons-disabled":"").trim(),x=U.useRef(null),L=U.useRef(null),P=wk(m),z=Ak()[0],q=z.isResolved,Q=z.options,ne=U.useState(null),$=ne[0],me=ne[1],fe=U.useState(!0),Se=fe[0],D=fe[1],w=U.useState(null),R=w[1];function C(){L.current!==null&&L.current.close().catch(function(){})}return!((e=L.current)===null||e===void 0)&&e.updateProps&&L.current.updateProps({message:m.message}),U.useEffect(function(){if(q===!1)return C;var N=_k(Q.dataNamespace);if(N===void 0||N.Buttons===void 0)return R(function(){throw new Error(bk({reactComponentName:gg.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:Q.components,sdkDataNamespace:Q[ya.DATA_NAMESPACE]}))}),C;var k=function(I,ae){me(ae),typeof m.onInit=="function"&&m.onInit(I,ae)};try{L.current=N.Buttons(Gt(Gt({},P),{onInit:k}))}catch(I){return R(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(I))})}return L.current.isEligible()===!1?(D(!1),C):(x.current&&L.current.render(x.current).catch(function(I){x.current===null||x.current.children.length===0||R(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(I))})}),C)},qb(qb([q],g,!0),[m.fundingSource],!1)),U.useEffect(function(){$!==null&&(c===!0?$.disable().catch(function(){}):$.enable().catch(function(){}))},[c,$]),rc.createElement(rc.Fragment,null,Se?rc.createElement("div",{ref:x,style:S,className:E}):d)};gg.displayName="PayPalButtons";function xk(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function Rk(r,e){var n=document.querySelector('script[src="'.concat(r,'"]'));if(n===null)return null;var s=PT(r,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(s.dataset).length)return null;var c=!0;return Object.keys(o.dataset).forEach(function(d){o.dataset[d]!==s.dataset[d]&&(c=!1)}),c?n:null}function Ck(r){var e=r.url,n=r.attributes,s=r.onSuccess,o=r.onError,c=PT(e,n);c.onerror=o,c.onload=s,document.head.insertBefore(c,document.head.firstElementChild)}function Ik(r){var e=r.sdkBaseUrl,n=r.environment,s=xk(r,["sdkBaseUrl","environment"]),o=e||Ok(n),c=s,d=Object.keys(c).filter(function(m){return typeof c[m]<"u"&&c[m]!==null&&c[m]!==""}).reduce(function(m,S){var E=c[S].toString();return S=Dk(S),S.substring(0,4)==="data"||S==="crossorigin"?m.attributes[S]=E:m.queryParams[S]=E,m},{queryParams:{},attributes:{}}),y=d.queryParams,g=d.attributes;return y["merchant-id"]&&y["merchant-id"].indexOf(",")!==-1&&(g["data-merchant-id"]=y["merchant-id"],y["merchant-id"]="*"),{url:"".concat(o,"?").concat(Nk(y)),attributes:g}}function Dk(r){var e=function(n,s){return(s?"-":"")+n.toLowerCase()};return r.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function Nk(r){var e="";return Object.keys(r).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+r[n]}),e}function Ok(r){return r==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function PT(r,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=r,Object.keys(e).forEach(function(s){n.setAttribute(s,e[s]),s==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function kk(r,e){if(e===void 0&&(e=Promise),UT(r,e),typeof document>"u")return e.resolve(null);var n=Ik(r),s=n.url,o=n.attributes,c=o["data-namespace"]||"paypal",d=Hb(c);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),Rk(s,o)&&d?e.resolve(d):Mk({url:s,attributes:o},e).then(function(){var y=Hb(c);if(y)return y;throw new Error("The window.".concat(c," global variable is not available."))})}function Mk(r,e){e===void 0&&(e=Promise),UT(r,e);var n=r.url,s=r.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,c){if(typeof document>"u")return o();Ck({url:n,attributes:s,onSuccess:function(){return o()},onError:function(){var d=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return c(d)}})})}function Hb(r){return window[r]}function UT(r,e){if(typeof r!="object"||r===null)throw new Error("Expected an options object.");var n=r.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var Lk=function(r){var e,n=r.options,s=n===void 0?{clientId:"test"}:n,o=r.children,c=r.deferLoading,d=c===void 0?!1:c,y=U.useReducer(Ek,{options:Gt(Gt({},s),(e={},e[ya.DATA_JS_SDK_LIBRARY]=ya.DATA_LIBRARY_VALUE,e[ya.DATA_SDK_INTEGRATION_SOURCE]=ya.DATA_LIBRARY_VALUE,e[Sc]="".concat(LT(s)),e)),loadingStatus:d?In.INITIAL:In.PENDING}),g=y[0],m=y[1];return U.useEffect(function(){if(d===!1&&g.loadingStatus===In.INITIAL)return m({type:Cs.LOADING_STATUS,value:In.PENDING});if(g.loadingStatus===In.PENDING){var S=!0;return kk(g.options).then(function(){S&&m({type:Cs.LOADING_STATUS,value:In.RESOLVED})}).catch(function(E){console.error("".concat(gk," ").concat(E)),S&&m({type:Cs.LOADING_STATUS,value:{state:In.REJECTED,message:String(E)}})}),function(){S=!1}}},[g.options,d,g.loadingStatus]),rc.createElement(VT.Provider,{value:Gt(Gt({},g),{dispatch:m})},o)};function Fb(){}U.createContext({cardFieldsForm:null,fields:{},registerField:Fb,unregisterField:Fb});const Vk=[5,10,25,50,100],Gb=1e9,zm={SUCCESS:"Thank you for your donation! Your star will now glow in the galaxy! ",ERROR:"There was an issue processing your donation. Please try again.",PROCESSING:"Processing your donation..."},Pk=({isOpen:r,onClose:e})=>{const{user:n}=Nn(),{totalAmount:s,recentDonations:o,addDonation:c,loading:d}=pk(),[y,g]=U.useState(10),[m,S]=U.useState(""),[E,x]=U.useState(!1),[L,P]=U.useState(""),[z,q]=U.useState(!1),Q=Math.min(s/Gb*100,100);U.useEffect(()=>{const C=N=>{N.key==="Escape"&&e()};return r&&(document.addEventListener("keydown",C),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",C),document.body.style.overflow="unset"}},[r,e]);const ne=C=>{g(C),x(!1),S("")},$=()=>{x(!0),g(null)},me=C=>{const N=C.target.value;(N===""||/^\d*\.?\d*$/.test(N))&&S(N)},fe=async(C,N)=>{q(!0),P(zm.PROCESSING);try{await c(C,N),P(zm.SUCCESS),n&&window.dispatchEvent(new CustomEvent("donationSuccess",{detail:{userId:n.uid,amount:C}})),setTimeout(()=>{P(""),g(10),S(""),x(!1),q(!1),e()},3e3)}catch{P(zm.ERROR),q(!1)}},Se=(C,N)=>{const k=E&&m?parseFloat(m):y,I=Math.max(1,k||1);return N.order.create({purchase_units:[{amount:{value:I.toFixed(2),currency_code:"USD"},description:`Donation to Limitless Galaxy - $${I}`}]})},D=async(C,N)=>{const k=E&&m?parseFloat(m):y,I=Math.max(1,k||1);try{const ae=await N.order.capture();return await fe(I,ae),ae}catch{P("Payment failed. Please try again."),q(!1)}},w=C=>{P("Payment error. Please try again."),q(!1)};if(!r)return null;const R=E&&m?parseFloat(m):y;return b.jsx("div",{style:Uk,onClick:e,children:b.jsxs("div",{style:jk,onClick:C=>C.stopPropagation(),children:[b.jsxs("div",{style:zk,children:[b.jsx("h2",{style:Bk,children:" Support the Galaxy "}),b.jsx("button",{onClick:e,style:qk,children:""})]}),b.jsxs("div",{style:Hk,children:[b.jsxs("div",{style:Fk,children:[b.jsxs("div",{style:Gk,children:["$",s.toLocaleString()]}),b.jsx("div",{style:$k,children:"Total Raised"})]}),b.jsxs("div",{style:Yk,children:[b.jsx("div",{style:Qk,children:b.jsx("div",{style:{...Kk,width:`${Q}%`}})}),b.jsxs("div",{style:Xk,children:[b.jsxs("span",{children:["Goal: $",Gb.toLocaleString()]}),b.jsxs("span",{children:[Q.toFixed(1),"%"]})]})]})]}),b.jsxs("div",{style:Wk,children:[b.jsx("h3",{style:$b,children:"Choose Amount"}),b.jsxs("div",{style:Jk,children:[Vk.map(C=>b.jsxs("button",{onClick:()=>ne(C),style:{...Yb,backgroundColor:y===C&&!E?"#FFD700":"#34495e",color:y===C&&!E?"#2c3e50":"#ecf0f1"},children:["$",C]},C)),b.jsx("button",{onClick:$,style:{...Yb,backgroundColor:E?"#3498db":"#34495e",color:E?"white":"#3498db",border:"2px solid #3498db"},children:"Custom"})]}),E&&b.jsx("div",{style:Zk,children:b.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[b.jsx("span",{style:{color:"#ecf0f1",fontSize:"18px"},children:"$"}),b.jsx("input",{type:"text",value:m,onChange:me,placeholder:"Enter amount",style:e3,autoFocus:!0})]})})]}),b.jsx("div",{style:t3,children:R>=1?b.jsxs(b.Fragment,{children:[b.jsxs("div",{style:n3,children:["Donating: ",b.jsxs("strong",{style:{color:"#FFD700"},children:["$",R.toFixed(2)]})]}),b.jsx(gg,{createOrder:Se,onApprove:D,onError:w,style:{layout:"vertical",color:"gold",shape:"pill",label:"donate",height:45},disabled:z||d})]}):b.jsx("div",{style:i3,children:"Please select an amount of $1 or more"})}),L&&b.jsx("div",{style:r3(L),children:L}),o.length>0&&b.jsxs("div",{style:s3,children:[b.jsx("h3",{style:$b,children:"Recent Supporters"}),b.jsx("div",{style:a3,children:o.slice(0,3).map((C,N)=>b.jsx("div",{style:o3,children:b.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[b.jsx("span",{style:{color:"#bdc3c7"},children:C.displayName||C.userEmail?.split("@")[0]||"Anonymous"}),b.jsxs("span",{style:{color:"#FFD700",fontWeight:"bold"},children:["$",C.amount]})]})},C.id||N))})]}),b.jsx("div",{style:l3,children:b.jsxs("p",{style:c3,children:["Your donation helps keep the galaxy shining bright! ",n?` Donating as: ${n.displayName||n.email}`:""]})})]})})},Uk={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,padding:"1rem"},jk={backgroundColor:"#2c3e50",border:"2px solid #34495e",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5), 0 0 30px rgba(255, 215, 0, 0.2)",animation:"modalFadeIn 0.3s ease"},zk={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #34495e"},Bk={margin:0,fontSize:"1.5rem",color:"#FFD700",textAlign:"center",flex:1},qk={background:"none",border:"none",fontSize:"2rem",cursor:"pointer",color:"#95a5a6",padding:"0.25rem",borderRadius:"4px",lineHeight:1,marginLeft:"1rem"},Hk={textAlign:"center",marginBottom:"2rem"},Fk={marginBottom:"1rem"},Gk={fontSize:"2.5rem",fontWeight:"bold",color:"#FFD700",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)"},$k={fontSize:"0.9rem",color:"#bdc3c7",marginTop:"0.25rem"},Yk={marginTop:"1rem"},Qk={height:"12px",backgroundColor:"#34495e",borderRadius:"6px",overflow:"hidden",marginBottom:"8px"},Kk={height:"100%",borderRadius:"6px",background:"linear-gradient(90deg, #FFD700, #FF6B6B)",transition:"width 0.5s ease"},Xk={display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#95a5a6"},Wk={marginBottom:"2rem"},$b={margin:"0 0 1rem 0",fontSize:"1.1rem",color:"#ecf0f1",fontWeight:"600"},Jk={display:"flex",flexWrap:"wrap",gap:"10px",justifyContent:"center"},Yb={padding:"12px 20px",border:"none",borderRadius:"25px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px"},Zk={marginTop:"1rem"},e3={flex:1,padding:"12px",border:"2px solid #3498db",borderRadius:"8px",backgroundColor:"#1a252f",color:"#ecf0f1",fontSize:"16px",outline:"none"},t3={marginBottom:"1.5rem"},n3={textAlign:"center",color:"#ecf0f1",fontSize:"1.1rem",marginBottom:"1rem",padding:"12px",backgroundColor:"rgba(52, 152, 219, 0.1)",borderRadius:"8px"},i3={textAlign:"center",color:"#e74c3c",padding:"15px",backgroundColor:"rgba(231, 76, 60, 0.1)",borderRadius:"8px",fontSize:"0.9rem"},r3=r=>({padding:"12px",backgroundColor:r.includes("Thank you")?"rgba(46, 204, 113, 0.2)":"rgba(231, 76, 60, 0.2)",border:`1px solid ${r.includes("Thank you")?"#2ecc71":"#e74c3c"}`,borderRadius:"8px",color:r.includes("Thank you")?"#2ecc71":"#e74c3c",textAlign:"center",marginBottom:"1rem"}),s3={marginBottom:"1.5rem"},a3={display:"flex",flexDirection:"column",gap:"8px"},o3={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"10px 15px",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.1)"},l3={marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #34495e"},c3={margin:0,fontSize:"0.85rem",color:"#95a5a6",lineHeight:"1.4",textAlign:"center"},jT=document.createElement("style");jT.textContent=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
`;document.head.appendChild(jT);function u3(){const[r,e]=U.useState(!1),[n,s]=U.useState(!1),[o,c]=U.useState("galaxy");U.useEffect(()=>{const y=()=>{e(!0)},g=()=>{s(!0)};return window.addEventListener("showTestPanel",y),window.addEventListener("showDonationPopup",g),()=>{window.removeEventListener("showTestPanel",y),window.removeEventListener("showDonationPopup",g)}},[]);const d={"client-id":"Af3zaVrq7NbWzaZIC6sCW6azN-_POZjceapd5baYo8v31WZ8F7fwOwA6QhwW-GIRMbBN4V_3Bt1AFj7l",currency:"USD",intent:"capture",components:"buttons"};return b.jsx(Lk,{options:d,children:b.jsx(kD,{children:b.jsxs("div",{style:h3,children:[b.jsx(a5,{activeTab:o,setActiveTab:c}),b.jsx(qO,{activeTab:o}),b.jsx(QO,{isOpen:r,onClose:()=>e(!1)}),b.jsx(Pk,{isOpen:n,onClose:()=>s(!1)})]})})})}const h3={minHeight:"100vh",backgroundColor:"#0a0a1a",color:"#ecf0f1",position:"relative",width:"100vw",margin:0,padding:0,overflow:"hidden"};xA.createRoot(document.getElementById("root")).render(b.jsx(U.StrictMode,{children:b.jsx(u3,{})}));
