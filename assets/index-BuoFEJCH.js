(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function gA(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pm={exports:{}},ql={};var V_;function yA(){if(V_)return ql;V_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var y in o)y!=="key"&&(c[y]=o[y])}else c=o;return o=c.ref,{$$typeof:r,type:s,key:d,ref:o!==void 0?o:null,props:c}}return ql.Fragment=e,ql.jsx=n,ql.jsxs=n,ql}var P_;function _A(){return P_||(P_=1,pm.exports=yA()),pm.exports}var E=_A(),gm={exports:{}},Ne={};var U_;function vA(){if(U_)return Ne;U_=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),I=Symbol.iterator;function V(N){return N===null||typeof N!="object"?null:(N=I&&N[I]||N["@@iterator"],typeof N=="function"?N:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function K(N,Y,le){this.props=N,this.context=Y,this.refs=$,this.updater=le||U}K.prototype.isReactComponent={},K.prototype.setState=function(N,Y){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Y,"setState")},K.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function re(){}re.prototype=K.prototype;function ne(N,Y,le){this.props=N,this.context=Y,this.refs=$,this.updater=le||U}var pe=ne.prototype=new re;pe.constructor=ne,q(pe,K.prototype),pe.isPureReactComponent=!0;var he=Array.isArray;function ge(){}var D={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function x(N,Y,le){var se=le.ref;return{$$typeof:r,type:N,key:Y,ref:se!==void 0?se:null,props:le}}function R(N,Y){return x(N.type,Y,N.props)}function O(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function L(N){var Y={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(le){return Y[le]})}var C=/\/+/g;function ce(N,Y){return typeof N=="object"&&N!==null&&N.key!=null?L(""+N.key):Y.toString(36)}function ve(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ge,ge):(N.status="pending",N.then(function(Y){N.status==="pending"&&(N.status="fulfilled",N.value=Y)},function(Y){N.status==="pending"&&(N.status="rejected",N.reason=Y)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function M(N,Y,le,se,me){var Ee=typeof N;(Ee==="undefined"||Ee==="boolean")&&(N=null);var be=!1;if(N===null)be=!0;else switch(Ee){case"bigint":case"string":case"number":be=!0;break;case"object":switch(N.$$typeof){case r:case e:be=!0;break;case S:return be=N._init,M(be(N._payload),Y,le,se,me)}}if(be)return me=me(N),be=se===""?"."+ce(N,0):se,he(me)?(le="",be!=null&&(le=be.replace(C,"$&/")+"/"),M(me,Y,le,"",function(Pn){return Pn})):me!=null&&(O(me)&&(me=R(me,le+(me.key==null||N&&N.key===me.key?"":(""+me.key).replace(C,"$&/")+"/")+be)),Y.push(me)),1;be=0;var We=se===""?".":se+":";if(he(N))for(var Ge=0;Ge<N.length;Ge++)se=N[Ge],Ee=We+ce(se,Ge),be+=M(se,Y,le,Ee,me);else if(Ge=V(N),typeof Ge=="function")for(N=Ge.call(N),Ge=0;!(se=N.next()).done;)se=se.value,Ee=We+ce(se,Ge++),be+=M(se,Y,le,Ee,me);else if(Ee==="object"){if(typeof N.then=="function")return M(ve(N),Y,le,se,me);throw Y=String(N),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return be}function z(N,Y,le){if(N==null)return N;var se=[],me=0;return M(N,se,"","",function(Ee){return Y.call(le,Ee,me++)}),se}function J(N){if(N._status===-1){var Y=N._result;Y=Y(),Y.then(function(le){(N._status===0||N._status===-1)&&(N._status=1,N._result=le)},function(le){(N._status===0||N._status===-1)&&(N._status=2,N._result=le)}),N._status===-1&&(N._status=0,N._result=Y)}if(N._status===1)return N._result.default;throw N._result}var te=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ue={map:z,forEach:function(N,Y,le){z(N,function(){Y.apply(this,arguments)},le)},count:function(N){var Y=0;return z(N,function(){Y++}),Y},toArray:function(N){return z(N,function(Y){return Y})||[]},only:function(N){if(!O(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return Ne.Activity=b,Ne.Children=ue,Ne.Component=K,Ne.Fragment=n,Ne.Profiler=o,Ne.PureComponent=ne,Ne.StrictMode=s,Ne.Suspense=g,Ne.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ne.__COMPILER_RUNTIME={__proto__:null,c:function(N){return D.H.useMemoCache(N)}},Ne.cache=function(N){return function(){return N.apply(null,arguments)}},Ne.cacheSignal=function(){return null},Ne.cloneElement=function(N,Y,le){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var se=q({},N.props),me=N.key;if(Y!=null)for(Ee in Y.key!==void 0&&(me=""+Y.key),Y)!w.call(Y,Ee)||Ee==="key"||Ee==="__self"||Ee==="__source"||Ee==="ref"&&Y.ref===void 0||(se[Ee]=Y[Ee]);var Ee=arguments.length-2;if(Ee===1)se.children=le;else if(1<Ee){for(var be=Array(Ee),We=0;We<Ee;We++)be[We]=arguments[We+2];se.children=be}return x(N.type,me,se)},Ne.createContext=function(N){return N={$$typeof:d,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:c,_context:N},N},Ne.createElement=function(N,Y,le){var se,me={},Ee=null;if(Y!=null)for(se in Y.key!==void 0&&(Ee=""+Y.key),Y)w.call(Y,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(me[se]=Y[se]);var be=arguments.length-2;if(be===1)me.children=le;else if(1<be){for(var We=Array(be),Ge=0;Ge<be;Ge++)We[Ge]=arguments[Ge+2];me.children=We}if(N&&N.defaultProps)for(se in be=N.defaultProps,be)me[se]===void 0&&(me[se]=be[se]);return x(N,Ee,me)},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(N){return{$$typeof:y,render:N}},Ne.isValidElement=O,Ne.lazy=function(N){return{$$typeof:S,_payload:{_status:-1,_result:N},_init:J}},Ne.memo=function(N,Y){return{$$typeof:m,type:N,compare:Y===void 0?null:Y}},Ne.startTransition=function(N){var Y=D.T,le={};D.T=le;try{var se=N(),me=D.S;me!==null&&me(le,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(ge,te)}catch(Ee){te(Ee)}finally{Y!==null&&le.types!==null&&(Y.types=le.types),D.T=Y}},Ne.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ne.use=function(N){return D.H.use(N)},Ne.useActionState=function(N,Y,le){return D.H.useActionState(N,Y,le)},Ne.useCallback=function(N,Y){return D.H.useCallback(N,Y)},Ne.useContext=function(N){return D.H.useContext(N)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(N,Y){return D.H.useDeferredValue(N,Y)},Ne.useEffect=function(N,Y){return D.H.useEffect(N,Y)},Ne.useEffectEvent=function(N){return D.H.useEffectEvent(N)},Ne.useId=function(){return D.H.useId()},Ne.useImperativeHandle=function(N,Y,le){return D.H.useImperativeHandle(N,Y,le)},Ne.useInsertionEffect=function(N,Y){return D.H.useInsertionEffect(N,Y)},Ne.useLayoutEffect=function(N,Y){return D.H.useLayoutEffect(N,Y)},Ne.useMemo=function(N,Y){return D.H.useMemo(N,Y)},Ne.useOptimistic=function(N,Y){return D.H.useOptimistic(N,Y)},Ne.useReducer=function(N,Y,le){return D.H.useReducer(N,Y,le)},Ne.useRef=function(N){return D.H.useRef(N)},Ne.useState=function(N){return D.H.useState(N)},Ne.useSyncExternalStore=function(N,Y,le){return D.H.useSyncExternalStore(N,Y,le)},Ne.useTransition=function(){return D.H.useTransition()},Ne.version="19.2.0",Ne}var j_;function dp(){return j_||(j_=1,gm.exports=vA()),gm.exports}var B=dp();const Zl=gA(B);var ym={exports:{}},Hl={},_m={exports:{}},vm={};var z_;function EA(){return z_||(z_=1,(function(r){function e(M,z){var J=M.length;M.push(z);e:for(;0<J;){var te=J-1>>>1,ue=M[te];if(0<o(ue,z))M[te]=z,M[J]=ue,J=te;else break e}}function n(M){return M.length===0?null:M[0]}function s(M){if(M.length===0)return null;var z=M[0],J=M.pop();if(J!==z){M[0]=J;e:for(var te=0,ue=M.length,N=ue>>>1;te<N;){var Y=2*(te+1)-1,le=M[Y],se=Y+1,me=M[se];if(0>o(le,J))se<ue&&0>o(me,le)?(M[te]=me,M[se]=J,te=se):(M[te]=le,M[Y]=J,te=Y);else if(se<ue&&0>o(me,J))M[te]=me,M[se]=J,te=se;else break e}}return z}function o(M,z){var J=M.sortIndex-z.sortIndex;return J!==0?J:M.id-z.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var d=Date,y=d.now();r.unstable_now=function(){return d.now()-y}}var g=[],m=[],S=1,b=null,I=3,V=!1,U=!1,q=!1,$=!1,K=typeof setTimeout=="function"?setTimeout:null,re=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;function pe(M){for(var z=n(m);z!==null;){if(z.callback===null)s(m);else if(z.startTime<=M)s(m),z.sortIndex=z.expirationTime,e(g,z);else break;z=n(m)}}function he(M){if(q=!1,pe(M),!U)if(n(g)!==null)U=!0,ge||(ge=!0,L());else{var z=n(m);z!==null&&ve(he,z.startTime-M)}}var ge=!1,D=-1,w=5,x=-1;function R(){return $?!0:!(r.unstable_now()-x<w)}function O(){if($=!1,ge){var M=r.unstable_now();x=M;var z=!0;try{e:{U=!1,q&&(q=!1,re(D),D=-1),V=!0;var J=I;try{t:{for(pe(M),b=n(g);b!==null&&!(b.expirationTime>M&&R());){var te=b.callback;if(typeof te=="function"){b.callback=null,I=b.priorityLevel;var ue=te(b.expirationTime<=M);if(M=r.unstable_now(),typeof ue=="function"){b.callback=ue,pe(M),z=!0;break t}b===n(g)&&s(g),pe(M)}else s(g);b=n(g)}if(b!==null)z=!0;else{var N=n(m);N!==null&&ve(he,N.startTime-M),z=!1}}break e}finally{b=null,I=J,V=!1}z=void 0}}finally{z?L():ge=!1}}}var L;if(typeof ne=="function")L=function(){ne(O)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,ce=C.port2;C.port1.onmessage=O,L=function(){ce.postMessage(null)}}else L=function(){K(O,0)};function ve(M,z){D=K(function(){M(r.unstable_now())},z)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(M){M.callback=null},r.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<M?Math.floor(1e3/M):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_next=function(M){switch(I){case 1:case 2:case 3:var z=3;break;default:z=I}var J=I;I=z;try{return M()}finally{I=J}},r.unstable_requestPaint=function(){$=!0},r.unstable_runWithPriority=function(M,z){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var J=I;I=M;try{return z()}finally{I=J}},r.unstable_scheduleCallback=function(M,z,J){var te=r.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?te+J:te):J=te,M){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=J+ue,M={id:S++,callback:z,priorityLevel:M,startTime:J,expirationTime:ue,sortIndex:-1},J>te?(M.sortIndex=J,e(m,M),n(g)===null&&M===n(m)&&(q?(re(D),D=-1):q=!0,ve(he,J-te))):(M.sortIndex=ue,e(g,M),U||V||(U=!0,ge||(ge=!0,L()))),M},r.unstable_shouldYield=R,r.unstable_wrapCallback=function(M){var z=I;return function(){var J=I;I=z;try{return M.apply(this,arguments)}finally{I=J}}}})(vm)),vm}var B_;function SA(){return B_||(B_=1,_m.exports=EA()),_m.exports}var Em={exports:{}},nn={};var q_;function bA(){if(q_)return nn;q_=1;var r=dp();function e(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)m+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(g,m,S){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:g,containerInfo:m,implementation:S}}var d=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return nn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,nn.createPortal=function(g,m){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return c(g,m,null,S)},nn.flushSync=function(g){var m=d.T,S=s.p;try{if(d.T=null,s.p=2,g)return g()}finally{d.T=m,s.p=S,s.d.f()}},nn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,s.d.C(g,m))},nn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},nn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var S=m.as,b=y(S,m.crossOrigin),I=typeof m.integrity=="string"?m.integrity:void 0,V=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;S==="style"?s.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:I,fetchPriority:V}):S==="script"&&s.d.X(g,{crossOrigin:b,integrity:I,fetchPriority:V,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},nn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var S=y(m.as,m.crossOrigin);s.d.M(g,{crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&s.d.M(g)},nn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var S=m.as,b=y(S,m.crossOrigin);s.d.L(g,S,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},nn.preloadModule=function(g,m){if(typeof g=="string")if(m){var S=y(m.as,m.crossOrigin);s.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:S,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else s.d.m(g)},nn.requestFormReset=function(g){s.d.r(g)},nn.unstable_batchedUpdates=function(g,m){return g(m)},nn.useFormState=function(g,m,S){return d.H.useFormState(g,m,S)},nn.useFormStatus=function(){return d.H.useHostTransitionStatus()},nn.version="19.2.0",nn}var H_;function TA(){if(H_)return Em.exports;H_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Em.exports=bA(),Em.exports}var F_;function AA(){if(F_)return Hl;F_=1;var r=SA(),e=dp(),n=TA();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function d(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function y(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(c(t)!==t)throw Error(s(188))}function m(t){var i=t.alternate;if(!i){if(i=c(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var f=h.alternate;if(f===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===f.child){for(f=h.child;f;){if(f===a)return g(h),t;if(f===l)return g(h),i;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=f;else{for(var _=!1,T=h.child;T;){if(T===a){_=!0,a=h,l=f;break}if(T===l){_=!0,l=h,a=f;break}T=T.sibling}if(!_){for(T=f.child;T;){if(T===a){_=!0,a=f,l=h;break}if(T===l){_=!0,l=f,a=h;break}T=T.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function S(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=S(t),i!==null)return i;t=t.sibling}return null}var b=Object.assign,I=Symbol.for("react.element"),V=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),$=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),re=Symbol.for("react.consumer"),ne=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),he=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function ce(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case q:return"Fragment";case K:return"Profiler";case $:return"StrictMode";case he:return"Suspense";case ge:return"SuspenseList";case x:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case ne:return t.displayName||"Context";case re:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case D:return i=t.displayName||null,i!==null?i:ce(t.type)||"Memo";case w:i=t._payload,t=t._init;try{return ce(t(i))}catch{}}return null}var ve=Array.isArray,M=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J={pending:!1,data:null,method:null,action:null},te=[],ue=-1;function N(t){return{current:t}}function Y(t){0>ue||(t.current=te[ue],te[ue]=null,ue--)}function le(t,i){ue++,te[ue]=t.current,t.current=i}var se=N(null),me=N(null),Ee=N(null),be=N(null);function We(t,i){switch(le(Ee,i),le(me,t),le(se,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?s_(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=s_(i),t=a_(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Y(se),le(se,t)}function Ge(){Y(se),Y(me),Y(Ee)}function Pn(t){t.memoizedState!==null&&le(be,t);var i=se.current,a=a_(i,t.type);i!==a&&(le(me,t),le(se,a))}function gi(t){me.current===t&&(Y(se),Y(me)),be.current===t&&(Y(be),Ul._currentValue=J)}var yi,Un;function cn(t){if(yi===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);yi=i&&i[1]||"",Un=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+yi+t+Un}var Wi=!1;function Ji(t,i){if(!t||Wi)return"";Wi=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(W){var Q=W}Reflect.construct(t,[],ae)}else{try{ae.call()}catch(W){Q=W}t.call(ae.prototype)}}else{try{throw Error()}catch(W){Q=W}(ae=t())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(W){if(W&&Q&&typeof W.stack=="string")return[W.stack,Q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),_=f[0],T=f[1];if(_&&T){var k=_.split(`
`),G=T.split(`
`);for(h=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;h<G.length&&!G[h].includes("DetermineComponentFrameRoot");)h++;if(l===k.length||h===G.length)for(l=k.length-1,h=G.length-1;1<=l&&0<=h&&k[l]!==G[h];)h--;for(;1<=l&&0<=h;l--,h--)if(k[l]!==G[h]){if(l!==1||h!==1)do if(l--,h--,0>h||k[l]!==G[h]){var ee=`
`+k[l].replace(" at new "," at ");return t.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",t.displayName)),ee}while(1<=l&&0<=h);break}}}finally{Wi=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?cn(a):""}function Le(t,i){switch(t.tag){case 26:case 27:case 5:return cn(t.type);case 16:return cn("Lazy");case 13:return t.child!==i&&i!==null?cn("Suspense Fallback"):cn("Suspense");case 19:return cn("SuspenseList");case 0:case 15:return Ji(t.type,!1);case 11:return Ji(t.type.render,!1);case 1:return Ji(t.type,!0);case 31:return cn("Activity");default:return""}}function Ye(t){try{var i="",a=null;do i+=Le(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Ve=Object.prototype.hasOwnProperty,Pe=r.unstable_scheduleCallback,zt=r.unstable_cancelCallback,_i=r.unstable_shouldYield,Zi=r.unstable_requestPaint,un=r.unstable_now,Os=r.unstable_getCurrentPriorityLevel,Bo=r.unstable_ImmediatePriority,qo=r.unstable_UserBlockingPriority,Ir=r.unstable_NormalPriority,yd=r.unstable_LowPriority,Ic=r.unstable_IdlePriority,Dc=r.log,Nc=r.unstable_setDisableYieldValue,Zn=null,$t=null;function jn(t){if(typeof Dc=="function"&&Nc(t),$t&&typeof $t.setStrictMode=="function")try{$t.setStrictMode(Zn,t)}catch{}}var Et=Math.clz32?Math.clz32:Mc,Oc=Math.log,Aa=Math.LN2;function Mc(t){return t>>>=0,t===0?32:31-(Oc(t)/Aa|0)|0}var vi=256,Ms=262144,xt=4194304;function Ei(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Si(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,f=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var T=l&134217727;return T!==0?(l=T&~f,l!==0?h=Ei(l):(_&=T,_!==0?h=Ei(_):a||(a=T&~t,a!==0&&(h=Ei(a))))):(T=l&~f,T!==0?h=Ei(T):_!==0?h=Ei(_):a||(a=l&~t,a!==0&&(h=Ei(a)))),h===0?0:i!==0&&i!==h&&(i&f)===0&&(f=h&-h,a=i&-i,f>=a||f===32&&(a&4194048)!==0)?i:h}function ei(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function _d(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kc(){var t=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),t}function bi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function ks(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function vd(t,i,a,l,h,f){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var T=t.entanglements,k=t.expirationTimes,G=t.hiddenUpdates;for(a=_&~a;0<a;){var ee=31-Et(a),ae=1<<ee;T[ee]=0,k[ee]=-1;var Q=G[ee];if(Q!==null)for(G[ee]=null,ee=0;ee<Q.length;ee++){var W=Q[ee];W!==null&&(W.lane&=-536870913)}a&=~ae}l!==0&&Ls(t,l,0),f!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=f&~(_&~i))}function Ls(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-Et(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function Ho(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-Et(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Fo(t,i){var a=i&-i;return a=(a&42)!==0?1:Vs(a),(a&(t.suspendedLanes|i))!==0?0:a}function Vs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function er(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Lc(){var t=z.p;return t!==0?t:(t=window.event,t===void 0?32:I_(t.type))}function ti(t,i){var a=z.p;try{return z.p=t,i()}finally{z.p=a}}var ni=Math.random().toString(36).slice(2),Rt="__reactFiber$"+ni,Bt="__reactProps$"+ni,Ti="__reactContainer$"+ni,wa="__reactEvents$"+ni,Ed="__reactListeners$"+ni,Vc="__reactHandles$"+ni,Pc="__reactResources$"+ni,Ai="__reactMarker$"+ni;function xa(t){delete t[Rt],delete t[Bt],delete t[wa],delete t[Ed],delete t[Vc]}function wi(t){var i=t[Rt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[Ti]||a[Rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=f_(t);t!==null;){if(a=t[Rt])return a;t=f_(t)}return i}t=a,a=t.parentNode}return null}function zn(t){if(t=t[Rt]||t[Ti]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function wn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function xi(t){var i=t[Pc];return i||(i=t[Pc]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ct(t){t[Ai]=!0}var Go=new Set,$o={};function Ri(t,i){Ci(t,i),Ci(t+"Capture",i)}function Ci(t,i){for($o[t]=i,t=0;t<i.length;t++)Go.add(i[t])}var Yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Qo={},Ko={};function Uc(t){return Ve.call(Ko,t)?!0:Ve.call(Qo,t)?!1:Yo.test(t)?Ko[t]=!0:(Qo[t]=!0,!1)}function Ra(t,i,a){if(Uc(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function xn(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function It(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Dr(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Xo(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,f=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,f.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function tt(t){if(!t._valueTracker){var i=Dr(t)?"checked":"value";t._valueTracker=Xo(t,i,""+t[i])}}function Ps(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Dr(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function Ii(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Us=/[\n"\\]/g;function pn(t){return t.replace(Us,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Ca(t,i,a,l,h,f,_,T){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+qt(i)):t.value!==""+qt(i)&&(t.value=""+qt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Wo(t,_,qt(i)):a!=null?Wo(t,_,qt(a)):l!=null&&t.removeAttribute("value"),h==null&&f!=null&&(t.defaultChecked=!!f),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.name=""+qt(T):t.removeAttribute("name")}function jc(t,i,a,l,h,f,_,T){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),i!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||i!=null)){tt(t);return}a=a!=null?""+qt(a):"",i=i!=null?""+qt(i):a,T||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=T?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),tt(t)}function Wo(t,i,a){i==="number"&&Ii(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Nr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+qt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function zc(t,i,a){if(i!=null&&(i=""+qt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+qt(a):""}function Or(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(ve(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=qt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),tt(t)}function gn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var Bc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||Bc.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function Zo(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Jo(t,h,l)}else for(var f in i)i.hasOwnProperty(f)&&Jo(t,f,i[f])}function Ia(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Da(t){return Mr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function ii(){}var el=null;function Bn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kr=null,Di=null;function js(t){var i=zn(t);if(i&&(t=i.stateNode)){var a=t[Bt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Ca(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+pn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Bt]||null;if(!h)throw Error(s(90));Ca(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&Ps(l)}break e;case"textarea":zc(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Nr(t,!!a.multiple,i,!1)}}}var Na=!1;function Lr(t,i,a){if(Na)return t(i,a);Na=!0;try{var l=t(i);return l}finally{if(Na=!1,(kr!==null||Di!==null)&&(Lu(),kr&&(i=kr,t=Di,Di=kr=null,js(i),t)))for(i=0;i<t.length;i++)js(t[i])}}function ri(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zs=!1;if(qn)try{var rt={};Object.defineProperty(rt,"passive",{get:function(){zs=!0}}),window.addEventListener("test",rt,rt),window.removeEventListener("test",rt,rt)}catch{zs=!1}var Ni=null,tl=null,Bs=null;function nl(){if(Bs)return Bs;var t,i=tl,a=i.length,l,h="value"in Ni?Ni.value:Ni.textContent,f=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[f-l];l++);return Bs=h.slice(t,1<l?1-l:void 0)}function qs(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function tr(){return!0}function si(){return!1}function Yt(t){function i(a,l,h,f,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=f,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(a=t[T],this[T]=a?a(f):f[T]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?tr:si,this.isPropagationStopped=si,this}return b(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),i}var nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oi=Yt(nr),Vr=b({},nr,{view:0,detail:0}),il=Yt(Vr),Pr,Oa,Mi,Ma=b({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ur,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Mi&&(Mi&&t.type==="mousemove"?(Pr=t.screenX-Mi.screenX,Oa=t.screenY-Mi.screenY):Oa=Pr=0,Mi=t),Pr)},movementY:function(t){return"movementY"in t?t.movementY:Oa}}),rl=Yt(Ma),Hs=b({},Ma,{dataTransfer:0}),Hc=Yt(Hs),Fc=b({},Vr,{relatedTarget:0}),Fs=Yt(Fc),sl=b({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Gc=Yt(sl),ka=b({},nr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$c=Yt(ka),Yc=b({},nr,{data:0}),ki=Yt(Yc),Qc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wc(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Xc[t])?!!i[t]:!1}function Ur(){return Wc}var hn=b({},Vr,{key:function(t){if(t.key){var i=Qc[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=qs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Kc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ur,charCode:function(t){return t.type==="keypress"?qs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Jc=Yt(hn),Zc=b({},Ma,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ir=Yt(Zc),u=b({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ur}),p=Yt(u),v=b({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Yt(v),H=b({},Ma,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),X=Yt(H),de=b({},nr,{newState:0,oldState:0}),Oe=Yt(de),St=[9,13,27,32],Je=qn&&"CompositionEvent"in window,mt=null;qn&&"documentMode"in document&&(mt=document.documentMode);var Hn=qn&&"TextEvent"in window&&!mt,Li=qn&&(!Je||mt&&8<mt&&11>=mt),ai=" ",oi=!1;function Gs(t,i){switch(t){case"keyup":return St.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function La(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Va=!1;function zT(t,i){switch(t){case"compositionend":return La(i);case"keypress":return i.which!==32?null:(oi=!0,ai);case"textInput":return t=i.data,t===ai&&oi?null:t;default:return null}}function BT(t,i){if(Va)return t==="compositionend"||!Je&&Gs(t,i)?(t=nl(),Bs=tl=Ni=null,Va=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Li&&i.locale!=="ko"?null:i.data;default:return null}}var qT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!qT[t.type]:i==="textarea"}function yg(t,i,a,l){kr?Di?Di.push(l):Di=[l]:kr=l,i=qu(i,"onChange"),0<i.length&&(a=new Oi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var al=null,ol=null;function HT(t){Z0(t,0)}function eu(t){var i=wn(t);if(Ps(i))return t}function _g(t,i){if(t==="change")return i}var vg=!1;if(qn){var Sd;if(qn){var bd="oninput"in document;if(!bd){var Eg=document.createElement("div");Eg.setAttribute("oninput","return;"),bd=typeof Eg.oninput=="function"}Sd=bd}else Sd=!1;vg=Sd&&(!document.documentMode||9<document.documentMode)}function Sg(){al&&(al.detachEvent("onpropertychange",bg),ol=al=null)}function bg(t){if(t.propertyName==="value"&&eu(ol)){var i=[];yg(i,ol,t,Bn(t)),Lr(HT,i)}}function FT(t,i,a){t==="focusin"?(Sg(),al=i,ol=a,al.attachEvent("onpropertychange",bg)):t==="focusout"&&Sg()}function GT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return eu(ol)}function $T(t,i){if(t==="click")return eu(i)}function YT(t,i){if(t==="input"||t==="change")return eu(i)}function QT(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Rn=typeof Object.is=="function"?Object.is:QT;function ll(t,i){if(Rn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!Ve.call(i,h)||!Rn(t[h],i[h]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ag(t,i){var a=Tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function wg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?wg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function xg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=Ii(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=Ii(t.document)}return i}function Td(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var KT=qn&&"documentMode"in document&&11>=document.documentMode,Pa=null,Ad=null,cl=null,wd=!1;function Rg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wd||Pa==null||Pa!==Ii(l)||(l=Pa,"selectionStart"in l&&Td(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ll(cl,l)||(cl=l,l=qu(Ad,"onSelect"),0<l.length&&(i=new Oi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Pa)))}function $s(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ua={animationend:$s("Animation","AnimationEnd"),animationiteration:$s("Animation","AnimationIteration"),animationstart:$s("Animation","AnimationStart"),transitionrun:$s("Transition","TransitionRun"),transitionstart:$s("Transition","TransitionStart"),transitioncancel:$s("Transition","TransitionCancel"),transitionend:$s("Transition","TransitionEnd")},xd={},Cg={};qn&&(Cg=document.createElement("div").style,"AnimationEvent"in window||(delete Ua.animationend.animation,delete Ua.animationiteration.animation,delete Ua.animationstart.animation),"TransitionEvent"in window||delete Ua.transitionend.transition);function Ys(t){if(xd[t])return xd[t];if(!Ua[t])return t;var i=Ua[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Cg)return xd[t]=i[a];return t}var Ig=Ys("animationend"),Dg=Ys("animationiteration"),Ng=Ys("animationstart"),XT=Ys("transitionrun"),WT=Ys("transitionstart"),JT=Ys("transitioncancel"),Og=Ys("transitionend"),Mg=new Map,Rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Rd.push("scrollEnd");function li(t,i){Mg.set(t,i),Ri(i,[t])}var tu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Fn=[],ja=0,Cd=0;function nu(){for(var t=ja,i=Cd=ja=0;i<t;){var a=Fn[i];Fn[i++]=null;var l=Fn[i];Fn[i++]=null;var h=Fn[i];Fn[i++]=null;var f=Fn[i];if(Fn[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}f!==0&&kg(a,h,f)}}function iu(t,i,a,l){Fn[ja++]=t,Fn[ja++]=i,Fn[ja++]=a,Fn[ja++]=l,Cd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Id(t,i,a,l){return iu(t,i,a,l),ru(t)}function Qs(t,i){return iu(t,null,null,i),ru(t)}function kg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(h=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,h&&i!==null&&(h=31-Et(a),t=f.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),f):null}function ru(t){if(50<Nl)throw Nl=0,jf=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var za={};function ZT(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,i,a,l){return new ZT(t,i,a,l)}function Dd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rr(t,i){var a=t.alternate;return a===null?(a=Cn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Lg(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function su(t,i,a,l,h,f){var _=0;if(l=t,typeof t=="function")Dd(t)&&(_=1);else if(typeof t=="string")_=rA(t,a,se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case x:return t=Cn(31,a,i,h),t.elementType=x,t.lanes=f,t;case q:return Ks(a.children,h,f,i);case $:_=8,h|=24;break;case K:return t=Cn(12,a,i,h|2),t.elementType=K,t.lanes=f,t;case he:return t=Cn(13,a,i,h),t.elementType=he,t.lanes=f,t;case ge:return t=Cn(19,a,i,h),t.elementType=ge,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:_=10;break e;case re:_=9;break e;case pe:_=11;break e;case D:_=14;break e;case w:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=Cn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=f,i}function Ks(t,i,a,l){return t=Cn(7,t,l,i),t.lanes=a,t}function Nd(t,i,a){return t=Cn(6,t,null,i),t.lanes=a,t}function Vg(t){var i=Cn(18,null,null,0);return i.stateNode=t,i}function Od(t,i,a){return i=Cn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Pg=new WeakMap;function Gn(t,i){if(typeof t=="object"&&t!==null){var a=Pg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Ye(i)},Pg.set(t,i),i)}return{value:t,source:i,stack:Ye(i)}}var Ba=[],qa=0,au=null,ul=0,$n=[],Yn=0,jr=null,Vi=1,Pi="";function sr(t,i){Ba[qa++]=ul,Ba[qa++]=au,au=t,ul=i}function Ug(t,i,a){$n[Yn++]=Vi,$n[Yn++]=Pi,$n[Yn++]=jr,jr=t;var l=Vi;t=Pi;var h=32-Et(l)-1;l&=~(1<<h),a+=1;var f=32-Et(i)+h;if(30<f){var _=h-h%5;f=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Vi=1<<32-Et(i)+h|a<<h|l,Pi=f+t}else Vi=1<<f|a<<h|l,Pi=t}function Md(t){t.return!==null&&(sr(t,1),Ug(t,1,0))}function kd(t){for(;t===au;)au=Ba[--qa],Ba[qa]=null,ul=Ba[--qa],Ba[qa]=null;for(;t===jr;)jr=$n[--Yn],$n[Yn]=null,Pi=$n[--Yn],$n[Yn]=null,Vi=$n[--Yn],$n[Yn]=null}function jg(t,i){$n[Yn++]=Vi,$n[Yn++]=Pi,$n[Yn++]=jr,Vi=i.id,Pi=i.overflow,jr=t}var Qt=null,ht=null,$e=!1,zr=null,Qn=!1,Ld=Error(s(519));function Br(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw hl(Gn(i,t)),Ld}function zg(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Rt]=t,i[Bt]=l,a){case"dialog":je("cancel",i),je("close",i);break;case"iframe":case"object":case"embed":je("load",i);break;case"video":case"audio":for(a=0;a<Ml.length;a++)je(Ml[a],i);break;case"source":je("error",i);break;case"img":case"image":case"link":je("error",i),je("load",i);break;case"details":je("toggle",i);break;case"input":je("invalid",i),jc(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",i);break;case"textarea":je("invalid",i),Or(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||i_(i.textContent,a)?(l.popover!=null&&(je("beforetoggle",i),je("toggle",i)),l.onScroll!=null&&je("scroll",i),l.onScrollEnd!=null&&je("scrollend",i),l.onClick!=null&&(i.onclick=ii),i=!0):i=!1,i||Br(t,!0)}function Bg(t){for(Qt=t.return;Qt;)switch(Qt.tag){case 5:case 31:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Qt=Qt.return}}function Ha(t){if(t!==Qt)return!1;if(!$e)return Bg(t),$e=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||em(t.type,t.memoizedProps)),a=!a),a&&ht&&Br(t),Bg(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ht=d_(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));ht=d_(t)}else i===27?(i=ht,ts(t.type)?(t=sm,sm=null,ht=t):ht=i):ht=Qt?Xn(t.stateNode.nextSibling):null;return!0}function Xs(){ht=Qt=null,$e=!1}function Vd(){var t=zr;return t!==null&&(En===null?En=t:En.push.apply(En,t),zr=null),t}function hl(t){zr===null?zr=[t]:zr.push(t)}var Pd=N(null),Ws=null,ar=null;function qr(t,i,a){le(Pd,i._currentValue),i._currentValue=a}function or(t){t._currentValue=Pd.current,Y(Pd)}function Ud(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function jd(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var f=h.dependencies;if(f!==null){var _=h.child;f=f.firstContext;e:for(;f!==null;){var T=f;f=h;for(var k=0;k<i.length;k++)if(T.context===i[k]){f.lanes|=a,T=f.alternate,T!==null&&(T.lanes|=a),Ud(f.return,a,t),l||(_=null);break e}f=T.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,f=_.alternate,f!==null&&(f.lanes|=a),Ud(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function Fa(t,i,a,l){t=null;for(var h=i,f=!1;h!==null;){if(!f){if((h.flags&524288)!==0)f=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var T=h.type;Rn(h.pendingProps.value,_.value)||(t!==null?t.push(T):t=[T])}}else if(h===be.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Ul):t=[Ul])}h=h.return}t!==null&&jd(i,t,a,l),i.flags|=262144}function ou(t){for(t=t.firstContext;t!==null;){if(!Rn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Js(t){Ws=t,ar=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kt(t){return qg(Ws,t)}function lu(t,i){return Ws===null&&Js(t),qg(t,i)}function qg(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},ar===null){if(t===null)throw Error(s(308));ar=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else ar=ar.next=i;return a}var e1=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},t1=r.unstable_scheduleCallback,n1=r.unstable_NormalPriority,Dt={$$typeof:ne,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zd(){return{controller:new e1,data:new Map,refCount:0}}function dl(t){t.refCount--,t.refCount===0&&t1(n1,function(){t.controller.abort()})}var fl=null,Bd=0,Ga=0,$a=null;function i1(t,i){if(fl===null){var a=fl=[];Bd=0,Ga=Gf(),$a={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Bd++,i.then(Hg,Hg),i}function Hg(){if(--Bd===0&&fl!==null){$a!==null&&($a.status="fulfilled");var t=fl;fl=null,Ga=0,$a=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function r1(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var Fg=M.S;M.S=function(t,i){R0=un(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i1(t,i),Fg!==null&&Fg(t,i)};var Zs=N(null);function qd(){var t=Zs.current;return t!==null?t:lt.pooledCache}function cu(t,i){i===null?le(Zs,Zs.current):le(Zs,i.pool)}function Gg(){var t=qd();return t===null?null:{parent:Dt._currentValue,pool:t}}var Ya=Error(s(460)),Hd=Error(s(474)),uu=Error(s(542)),hu={then:function(){}};function $g(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Yg(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(ii,ii),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Kg(t),t;default:if(typeof i.status=="string")i.then(ii,ii);else{if(t=lt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,Kg(t),t}throw ta=i,Ya}}function ea(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ta=a,Ya):a}}var ta=null;function Qg(){if(ta===null)throw Error(s(459));var t=ta;return ta=null,t}function Kg(t){if(t===Ya||t===uu)throw Error(s(483))}var Qa=null,ml=0;function du(t){var i=ml;return ml+=1,Qa===null&&(Qa=[]),Yg(Qa,t,i)}function pl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function fu(t,i){throw i.$$typeof===I?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function Xg(t){function i(j,P){if(t){var F=j.deletions;F===null?(j.deletions=[P],j.flags|=16):F.push(P)}}function a(j,P){if(!t)return null;for(;P!==null;)i(j,P),P=P.sibling;return null}function l(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function h(j,P){return j=rr(j,P),j.index=0,j.sibling=null,j}function f(j,P,F){return j.index=F,t?(F=j.alternate,F!==null?(F=F.index,F<P?(j.flags|=67108866,P):F):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function _(j){return t&&j.alternate===null&&(j.flags|=67108866),j}function T(j,P,F,ie){return P===null||P.tag!==6?(P=Nd(F,j.mode,ie),P.return=j,P):(P=h(P,F),P.return=j,P)}function k(j,P,F,ie){var Ae=F.type;return Ae===q?ee(j,P,F.props.children,ie,F.key):P!==null&&(P.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===w&&ea(Ae)===P.type)?(P=h(P,F.props),pl(P,F),P.return=j,P):(P=su(F.type,F.key,F.props,null,j.mode,ie),pl(P,F),P.return=j,P)}function G(j,P,F,ie){return P===null||P.tag!==4||P.stateNode.containerInfo!==F.containerInfo||P.stateNode.implementation!==F.implementation?(P=Od(F,j.mode,ie),P.return=j,P):(P=h(P,F.children||[]),P.return=j,P)}function ee(j,P,F,ie,Ae){return P===null||P.tag!==7?(P=Ks(F,j.mode,ie,Ae),P.return=j,P):(P=h(P,F),P.return=j,P)}function ae(j,P,F){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=Nd(""+P,j.mode,F),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case V:return F=su(P.type,P.key,P.props,null,j.mode,F),pl(F,P),F.return=j,F;case U:return P=Od(P,j.mode,F),P.return=j,P;case w:return P=ea(P),ae(j,P,F)}if(ve(P)||L(P))return P=Ks(P,j.mode,F,null),P.return=j,P;if(typeof P.then=="function")return ae(j,du(P),F);if(P.$$typeof===ne)return ae(j,lu(j,P),F);fu(j,P)}return null}function Q(j,P,F,ie){var Ae=P!==null?P.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ae!==null?null:T(j,P,""+F,ie);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case V:return F.key===Ae?k(j,P,F,ie):null;case U:return F.key===Ae?G(j,P,F,ie):null;case w:return F=ea(F),Q(j,P,F,ie)}if(ve(F)||L(F))return Ae!==null?null:ee(j,P,F,ie,null);if(typeof F.then=="function")return Q(j,P,du(F),ie);if(F.$$typeof===ne)return Q(j,P,lu(j,F),ie);fu(j,F)}return null}function W(j,P,F,ie,Ae){if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return j=j.get(F)||null,T(P,j,""+ie,Ae);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case V:return j=j.get(ie.key===null?F:ie.key)||null,k(P,j,ie,Ae);case U:return j=j.get(ie.key===null?F:ie.key)||null,G(P,j,ie,Ae);case w:return ie=ea(ie),W(j,P,F,ie,Ae)}if(ve(ie)||L(ie))return j=j.get(F)||null,ee(P,j,ie,Ae,null);if(typeof ie.then=="function")return W(j,P,F,du(ie),Ae);if(ie.$$typeof===ne)return W(j,P,F,lu(P,ie),Ae);fu(P,ie)}return null}function _e(j,P,F,ie){for(var Ae=null,Ke=null,Se=P,ke=P=0,Be=null;Se!==null&&ke<F.length;ke++){Se.index>ke?(Be=Se,Se=null):Be=Se.sibling;var Xe=Q(j,Se,F[ke],ie);if(Xe===null){Se===null&&(Se=Be);break}t&&Se&&Xe.alternate===null&&i(j,Se),P=f(Xe,P,ke),Ke===null?Ae=Xe:Ke.sibling=Xe,Ke=Xe,Se=Be}if(ke===F.length)return a(j,Se),$e&&sr(j,ke),Ae;if(Se===null){for(;ke<F.length;ke++)Se=ae(j,F[ke],ie),Se!==null&&(P=f(Se,P,ke),Ke===null?Ae=Se:Ke.sibling=Se,Ke=Se);return $e&&sr(j,ke),Ae}for(Se=l(Se);ke<F.length;ke++)Be=W(Se,j,ke,F[ke],ie),Be!==null&&(t&&Be.alternate!==null&&Se.delete(Be.key===null?ke:Be.key),P=f(Be,P,ke),Ke===null?Ae=Be:Ke.sibling=Be,Ke=Be);return t&&Se.forEach(function(as){return i(j,as)}),$e&&sr(j,ke),Ae}function we(j,P,F,ie){if(F==null)throw Error(s(151));for(var Ae=null,Ke=null,Se=P,ke=P=0,Be=null,Xe=F.next();Se!==null&&!Xe.done;ke++,Xe=F.next()){Se.index>ke?(Be=Se,Se=null):Be=Se.sibling;var as=Q(j,Se,Xe.value,ie);if(as===null){Se===null&&(Se=Be);break}t&&Se&&as.alternate===null&&i(j,Se),P=f(as,P,ke),Ke===null?Ae=as:Ke.sibling=as,Ke=as,Se=Be}if(Xe.done)return a(j,Se),$e&&sr(j,ke),Ae;if(Se===null){for(;!Xe.done;ke++,Xe=F.next())Xe=ae(j,Xe.value,ie),Xe!==null&&(P=f(Xe,P,ke),Ke===null?Ae=Xe:Ke.sibling=Xe,Ke=Xe);return $e&&sr(j,ke),Ae}for(Se=l(Se);!Xe.done;ke++,Xe=F.next())Xe=W(Se,j,ke,Xe.value,ie),Xe!==null&&(t&&Xe.alternate!==null&&Se.delete(Xe.key===null?ke:Xe.key),P=f(Xe,P,ke),Ke===null?Ae=Xe:Ke.sibling=Xe,Ke=Xe);return t&&Se.forEach(function(pA){return i(j,pA)}),$e&&sr(j,ke),Ae}function ot(j,P,F,ie){if(typeof F=="object"&&F!==null&&F.type===q&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case V:e:{for(var Ae=F.key;P!==null;){if(P.key===Ae){if(Ae=F.type,Ae===q){if(P.tag===7){a(j,P.sibling),ie=h(P,F.props.children),ie.return=j,j=ie;break e}}else if(P.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===w&&ea(Ae)===P.type){a(j,P.sibling),ie=h(P,F.props),pl(ie,F),ie.return=j,j=ie;break e}a(j,P);break}else i(j,P);P=P.sibling}F.type===q?(ie=Ks(F.props.children,j.mode,ie,F.key),ie.return=j,j=ie):(ie=su(F.type,F.key,F.props,null,j.mode,ie),pl(ie,F),ie.return=j,j=ie)}return _(j);case U:e:{for(Ae=F.key;P!==null;){if(P.key===Ae)if(P.tag===4&&P.stateNode.containerInfo===F.containerInfo&&P.stateNode.implementation===F.implementation){a(j,P.sibling),ie=h(P,F.children||[]),ie.return=j,j=ie;break e}else{a(j,P);break}else i(j,P);P=P.sibling}ie=Od(F,j.mode,ie),ie.return=j,j=ie}return _(j);case w:return F=ea(F),ot(j,P,F,ie)}if(ve(F))return _e(j,P,F,ie);if(L(F)){if(Ae=L(F),typeof Ae!="function")throw Error(s(150));return F=Ae.call(F),we(j,P,F,ie)}if(typeof F.then=="function")return ot(j,P,du(F),ie);if(F.$$typeof===ne)return ot(j,P,lu(j,F),ie);fu(j,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,P!==null&&P.tag===6?(a(j,P.sibling),ie=h(P,F),ie.return=j,j=ie):(a(j,P),ie=Nd(F,j.mode,ie),ie.return=j,j=ie),_(j)):a(j,P)}return function(j,P,F,ie){try{ml=0;var Ae=ot(j,P,F,ie);return Qa=null,Ae}catch(Se){if(Se===Ya||Se===uu)throw Se;var Ke=Cn(29,Se,null,j.mode);return Ke.lanes=ie,Ke.return=j,Ke}finally{}}}var na=Xg(!0),Wg=Xg(!1),Hr=!1;function Fd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Fr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Gr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ze&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=ru(t),kg(t,null,a),i}return iu(t,l,i,a),ru(t)}function gl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ho(t,a)}}function $d(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?h=f=_:f=f.next=_,a=a.next}while(a!==null);f===null?h=f=i:f=f.next=i}else h=f=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var Yd=!1;function yl(){if(Yd){var t=$a;if(t!==null)throw t}}function _l(t,i,a,l){Yd=!1;var h=t.updateQueue;Hr=!1;var f=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var k=T,G=k.next;k.next=null,_===null?f=G:_.next=G,_=k;var ee=t.alternate;ee!==null&&(ee=ee.updateQueue,T=ee.lastBaseUpdate,T!==_&&(T===null?ee.firstBaseUpdate=G:T.next=G,ee.lastBaseUpdate=k))}if(f!==null){var ae=h.baseState;_=0,ee=G=k=null,T=f;do{var Q=T.lane&-536870913,W=Q!==T.lane;if(W?(ze&Q)===Q:(l&Q)===Q){Q!==0&&Q===Ga&&(Yd=!0),ee!==null&&(ee=ee.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});e:{var _e=t,we=T;Q=i;var ot=a;switch(we.tag){case 1:if(_e=we.payload,typeof _e=="function"){ae=_e.call(ot,ae,Q);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=we.payload,Q=typeof _e=="function"?_e.call(ot,ae,Q):_e,Q==null)break e;ae=b({},ae,Q);break e;case 2:Hr=!0}}Q=T.callback,Q!==null&&(t.flags|=64,W&&(t.flags|=8192),W=h.callbacks,W===null?h.callbacks=[Q]:W.push(Q))}else W={lane:Q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},ee===null?(G=ee=W,k=ae):ee=ee.next=W,_|=Q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;W=T,T=W.next,W.next=null,h.lastBaseUpdate=W,h.shared.pending=null}}while(!0);ee===null&&(k=ae),h.baseState=k,h.firstBaseUpdate=G,h.lastBaseUpdate=ee,f===null&&(h.shared.lanes=0),Xr|=_,t.lanes=_,t.memoizedState=ae}}function Jg(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function Zg(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Jg(a[t],i)}var Ka=N(null),mu=N(0);function ey(t,i){t=gr,le(mu,t),le(Ka,i),gr=t|i.baseLanes}function Qd(){le(mu,gr),le(Ka,Ka.current)}function Kd(){gr=mu.current,Y(Ka),Y(mu)}var In=N(null),Kn=null;function $r(t){var i=t.alternate;le(bt,bt.current&1),le(In,t),Kn===null&&(i===null||Ka.current!==null||i.memoizedState!==null)&&(Kn=t)}function Xd(t){le(bt,bt.current),le(In,t),Kn===null&&(Kn=t)}function ty(t){t.tag===22?(le(bt,bt.current),le(In,t),Kn===null&&(Kn=t)):Yr()}function Yr(){le(bt,bt.current),le(In,In.current)}function Dn(t){Y(In),Kn===t&&(Kn=null),Y(bt)}var bt=N(0);function pu(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||im(a)||rm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var lr=0,Me=null,st=null,Nt=null,gu=!1,Xa=!1,ia=!1,yu=0,vl=0,Wa=null,s1=0;function yt(){throw Error(s(321))}function Wd(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Rn(t[a],i[a]))return!1;return!0}function Jd(t,i,a,l,h,f){return lr=f,Me=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,M.H=t===null||t.memoizedState===null?Uy:mf,ia=!1,f=a(l,h),ia=!1,Xa&&(f=iy(i,a,l,h)),ny(t),f}function ny(t){M.H=bl;var i=st!==null&&st.next!==null;if(lr=0,Nt=st=Me=null,gu=!1,vl=0,Wa=null,i)throw Error(s(300));t===null||Ot||(t=t.dependencies,t!==null&&ou(t)&&(Ot=!0))}function iy(t,i,a,l){Me=t;var h=0;do{if(Xa&&(Wa=null),vl=0,Xa=!1,25<=h)throw Error(s(301));if(h+=1,Nt=st=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}M.H=jy,f=i(a,l)}while(Xa);return f}function a1(){var t=M.H,i=t.useState()[0];return i=typeof i.then=="function"?El(i):i,t=t.useState()[0],(st!==null?st.memoizedState:null)!==t&&(Me.flags|=1024),i}function Zd(){var t=yu!==0;return yu=0,t}function ef(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function tf(t){if(gu){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}gu=!1}lr=0,Nt=st=Me=null,Xa=!1,vl=yu=0,Wa=null}function dn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Me.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Tt(){if(st===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var i=Nt===null?Me.memoizedState:Nt.next;if(i!==null)Nt=i,st=t;else{if(t===null)throw Me.alternate===null?Error(s(467)):Error(s(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Nt===null?Me.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function _u(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(t){var i=vl;return vl+=1,Wa===null&&(Wa=[]),t=Yg(Wa,t,i),i=Me,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,M.H=i===null||i.memoizedState===null?Uy:mf),t}function vu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return El(t);if(t.$$typeof===ne)return Kt(t)}throw Error(s(438,String(t)))}function nf(t){var i=null,a=Me.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Me.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=_u(),Me.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=R;return i.index++,a}function cr(t,i){return typeof i=="function"?i(t):i}function Eu(t){var i=Tt();return rf(i,st,t)}function rf(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,f=l.pending;if(f!==null){if(h!==null){var _=h.next;h.next=f.next,f.next=_}i.baseQueue=h=f,l.pending=null}if(f=t.baseState,h===null)t.memoizedState=f;else{i=h.next;var T=_=null,k=null,G=i,ee=!1;do{var ae=G.lane&-536870913;if(ae!==G.lane?(ze&ae)===ae:(lr&ae)===ae){var Q=G.revertLane;if(Q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null}),ae===Ga&&(ee=!0);else if((lr&Q)===Q){G=G.next,Q===Ga&&(ee=!0);continue}else ae={lane:0,revertLane:G.revertLane,gesture:null,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(T=k=ae,_=f):k=k.next=ae,Me.lanes|=Q,Xr|=Q;ae=G.action,ia&&a(f,ae),f=G.hasEagerState?G.eagerState:a(f,ae)}else Q={lane:ae,revertLane:G.revertLane,gesture:G.gesture,action:G.action,hasEagerState:G.hasEagerState,eagerState:G.eagerState,next:null},k===null?(T=k=Q,_=f):k=k.next=Q,Me.lanes|=ae,Xr|=ae;G=G.next}while(G!==null&&G!==i);if(k===null?_=f:k.next=T,!Rn(f,t.memoizedState)&&(Ot=!0,ee&&(a=$a,a!==null)))throw a;t.memoizedState=f,t.baseState=_,t.baseQueue=k,l.lastRenderedState=f}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function sf(t){var i=Tt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,f=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do f=t(f,_.action),_=_.next;while(_!==h);Rn(f,i.memoizedState)||(Ot=!0),i.memoizedState=f,i.baseQueue===null&&(i.baseState=f),a.lastRenderedState=f}return[f,l]}function ry(t,i,a){var l=Me,h=Tt(),f=$e;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Rn((st||h).memoizedState,a);if(_&&(h.memoizedState=a,Ot=!0),h=h.queue,lf(oy.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Ja(9,{destroy:void 0},ay.bind(null,l,h,a,i),null),lt===null)throw Error(s(349));f||(lr&127)!==0||sy(l,i,a)}return a}function sy(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Me.updateQueue,i===null?(i=_u(),Me.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function ay(t,i,a,l){i.value=a,i.getSnapshot=l,ly(i)&&cy(t)}function oy(t,i,a){return a(function(){ly(i)&&cy(t)})}function ly(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Rn(t,a)}catch{return!0}}function cy(t){var i=Qs(t,2);i!==null&&Sn(i,t,2)}function af(t){var i=dn();if(typeof t=="function"){var a=t;if(t=a(),ia){jn(!0);try{a()}finally{jn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:t},i}function uy(t,i,a,l){return t.baseState=a,rf(t,st,typeof l=="function"?l:cr)}function o1(t,i,a,l,h){if(Tu(t))throw Error(s(485));if(t=i.action,t!==null){var f={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){f.listeners.push(_)}};M.T!==null?a(!0):f.isTransition=!1,l(f),a=i.pending,a===null?(f.next=i.pending=f,hy(i,f)):(f.next=a.next,i.pending=a.next=f)}}function hy(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var f=M.T,_={};M.T=_;try{var T=a(h,l),k=M.S;k!==null&&k(_,T),dy(t,i,T)}catch(G){of(t,i,G)}finally{f!==null&&_.types!==null&&(f.types=_.types),M.T=f}}else try{f=a(h,l),dy(t,i,f)}catch(G){of(t,i,G)}}function dy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){fy(t,i,l)},function(l){return of(t,i,l)}):fy(t,i,a)}function fy(t,i,a){i.status="fulfilled",i.value=a,my(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,hy(t,a)))}function of(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,my(i),i=i.next;while(i!==l)}t.action=null}function my(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function py(t,i){return i}function gy(t,i){if($e){var a=lt.formState;if(a!==null){e:{var l=Me;if($e){if(ht){t:{for(var h=ht,f=Qn;h.nodeType!==8;){if(!f){h=null;break t}if(h=Xn(h.nextSibling),h===null){h=null;break t}}f=h.data,h=f==="F!"||f==="F"?h:null}if(h){ht=Xn(h.nextSibling),l=h.data==="F!";break e}}Br(l)}l=!1}l&&(i=a[0])}}return a=dn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:i},a.queue=l,a=Ly.bind(null,Me,l),l.dispatch=a,l=af(!1),f=ff.bind(null,Me,!1,l.queue),l=dn(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=o1.bind(null,Me,h,f,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function yy(t){var i=Tt();return _y(i,st,t)}function _y(t,i,a){if(i=rf(t,i,py)[0],t=Eu(cr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=El(i)}catch(_){throw _===Ya?uu:_}else l=i;i=Tt();var h=i.queue,f=h.dispatch;return a!==i.memoizedState&&(Me.flags|=2048,Ja(9,{destroy:void 0},l1.bind(null,h,a),null)),[l,f,t]}function l1(t,i){t.action=i}function vy(t){var i=Tt(),a=st;if(a!==null)return _y(i,a,t);Tt(),i=i.memoizedState,a=Tt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Ja(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Me.updateQueue,i===null&&(i=_u(),Me.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Ey(){return Tt().memoizedState}function Su(t,i,a,l){var h=dn();Me.flags|=t,h.memoizedState=Ja(1|i,{destroy:void 0},a,l===void 0?null:l)}function bu(t,i,a,l){var h=Tt();l=l===void 0?null:l;var f=h.memoizedState.inst;st!==null&&l!==null&&Wd(l,st.memoizedState.deps)?h.memoizedState=Ja(i,f,a,l):(Me.flags|=t,h.memoizedState=Ja(1|i,f,a,l))}function Sy(t,i){Su(8390656,8,t,i)}function lf(t,i){bu(2048,8,t,i)}function c1(t){Me.flags|=4;var i=Me.updateQueue;if(i===null)i=_u(),Me.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function by(t){var i=Tt().memoizedState;return c1({ref:i,nextImpl:t}),function(){if((Ze&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Ty(t,i){return bu(4,2,t,i)}function Ay(t,i){return bu(4,4,t,i)}function wy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function xy(t,i,a){a=a!=null?a.concat([t]):null,bu(4,4,wy.bind(null,i,t),a)}function cf(){}function Ry(t,i){var a=Tt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&Wd(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Cy(t,i){var a=Tt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&Wd(i,l[1]))return l[0];if(l=t(),ia){jn(!0);try{t()}finally{jn(!1)}}return a.memoizedState=[l,i],l}function uf(t,i,a){return a===void 0||(lr&1073741824)!==0&&(ze&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=I0(),Me.lanes|=t,Xr|=t,a)}function Iy(t,i,a,l){return Rn(a,i)?a:Ka.current!==null?(t=uf(t,a,l),Rn(t,i)||(Ot=!0),t):(lr&42)===0||(lr&1073741824)!==0&&(ze&261930)===0?(Ot=!0,t.memoizedState=a):(t=I0(),Me.lanes|=t,Xr|=t,i)}function Dy(t,i,a,l,h){var f=z.p;z.p=f!==0&&8>f?f:8;var _=M.T,T={};M.T=T,ff(t,!1,i,a);try{var k=h(),G=M.S;if(G!==null&&G(T,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var ee=r1(k,l);Sl(t,i,ee,Mn(t))}else Sl(t,i,l,Mn(t))}catch(ae){Sl(t,i,{then:function(){},status:"rejected",reason:ae},Mn())}finally{z.p=f,_!==null&&T.types!==null&&(_.types=T.types),M.T=_}}function u1(){}function hf(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Ny(t).queue;Dy(t,h,i,J,a===null?u1:function(){return Oy(t),a(l)})}function Ny(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:J,baseState:J,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:J},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Oy(t){var i=Ny(t);i.next===null&&(i=t.alternate.memoizedState),Sl(t,i.next.queue,{},Mn())}function df(){return Kt(Ul)}function My(){return Tt().memoizedState}function ky(){return Tt().memoizedState}function h1(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=Mn();t=Fr(a);var l=Gr(i,t,a);l!==null&&(Sn(l,i,a),gl(l,i,a)),i={cache:zd()},t.payload=i;return}i=i.return}}function d1(t,i,a){var l=Mn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Tu(t)?Vy(i,a):(a=Id(t,i,a,l),a!==null&&(Sn(a,t,l),Py(a,i,l)))}function Ly(t,i,a){var l=Mn();Sl(t,i,a,l)}function Sl(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tu(t))Vy(i,h);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=i.lastRenderedReducer,f!==null))try{var _=i.lastRenderedState,T=f(_,a);if(h.hasEagerState=!0,h.eagerState=T,Rn(T,_))return iu(t,i,h,0),lt===null&&nu(),!1}catch{}finally{}if(a=Id(t,i,h,l),a!==null)return Sn(a,t,l),Py(a,i,l),!0}return!1}function ff(t,i,a,l){if(l={lane:2,revertLane:Gf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Tu(t)){if(i)throw Error(s(479))}else i=Id(t,a,l,2),i!==null&&Sn(i,t,2)}function Tu(t){var i=t.alternate;return t===Me||i!==null&&i===Me}function Vy(t,i){Xa=gu=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Py(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,Ho(t,a)}}var bl={readContext:Kt,use:vu,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useLayoutEffect:yt,useInsertionEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useSyncExternalStore:yt,useId:yt,useHostTransitionStatus:yt,useFormState:yt,useActionState:yt,useOptimistic:yt,useMemoCache:yt,useCacheRefresh:yt};bl.useEffectEvent=yt;var Uy={readContext:Kt,use:vu,useCallback:function(t,i){return dn().memoizedState=[t,i===void 0?null:i],t},useContext:Kt,useEffect:Sy,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Su(4194308,4,wy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Su(4194308,4,t,i)},useInsertionEffect:function(t,i){Su(4,2,t,i)},useMemo:function(t,i){var a=dn();i=i===void 0?null:i;var l=t();if(ia){jn(!0);try{t()}finally{jn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=dn();if(a!==void 0){var h=a(i);if(ia){jn(!0);try{a(i)}finally{jn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=d1.bind(null,Me,t),[l.memoizedState,t]},useRef:function(t){var i=dn();return t={current:t},i.memoizedState=t},useState:function(t){t=af(t);var i=t.queue,a=Ly.bind(null,Me,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:cf,useDeferredValue:function(t,i){var a=dn();return uf(a,t,i)},useTransition:function(){var t=af(!1);return t=Dy.bind(null,Me,t.queue,!0,!1),dn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Me,h=dn();if($e){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),lt===null)throw Error(s(349));(ze&127)!==0||sy(l,i,a)}h.memoizedState=a;var f={value:a,getSnapshot:i};return h.queue=f,Sy(oy.bind(null,l,f,t),[t]),l.flags|=2048,Ja(9,{destroy:void 0},ay.bind(null,l,f,a,i),null),a},useId:function(){var t=dn(),i=lt.identifierPrefix;if($e){var a=Pi,l=Vi;a=(l&~(1<<32-Et(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=yu++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=s1++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:df,useFormState:gy,useActionState:gy,useOptimistic:function(t){var i=dn();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=ff.bind(null,Me,!0,a),a.dispatch=i,[t,i]},useMemoCache:nf,useCacheRefresh:function(){return dn().memoizedState=h1.bind(null,Me)},useEffectEvent:function(t){var i=dn(),a={impl:t};return i.memoizedState=a,function(){if((Ze&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},mf={readContext:Kt,use:vu,useCallback:Ry,useContext:Kt,useEffect:lf,useImperativeHandle:xy,useInsertionEffect:Ty,useLayoutEffect:Ay,useMemo:Cy,useReducer:Eu,useRef:Ey,useState:function(){return Eu(cr)},useDebugValue:cf,useDeferredValue:function(t,i){var a=Tt();return Iy(a,st.memoizedState,t,i)},useTransition:function(){var t=Eu(cr)[0],i=Tt().memoizedState;return[typeof t=="boolean"?t:El(t),i]},useSyncExternalStore:ry,useId:My,useHostTransitionStatus:df,useFormState:yy,useActionState:yy,useOptimistic:function(t,i){var a=Tt();return uy(a,st,t,i)},useMemoCache:nf,useCacheRefresh:ky};mf.useEffectEvent=by;var jy={readContext:Kt,use:vu,useCallback:Ry,useContext:Kt,useEffect:lf,useImperativeHandle:xy,useInsertionEffect:Ty,useLayoutEffect:Ay,useMemo:Cy,useReducer:sf,useRef:Ey,useState:function(){return sf(cr)},useDebugValue:cf,useDeferredValue:function(t,i){var a=Tt();return st===null?uf(a,t,i):Iy(a,st.memoizedState,t,i)},useTransition:function(){var t=sf(cr)[0],i=Tt().memoizedState;return[typeof t=="boolean"?t:El(t),i]},useSyncExternalStore:ry,useId:My,useHostTransitionStatus:df,useFormState:vy,useActionState:vy,useOptimistic:function(t,i){var a=Tt();return st!==null?uy(a,st,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:nf,useCacheRefresh:ky};jy.useEffectEvent=by;function pf(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:b({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var gf={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=Fr(l);h.payload=i,a!=null&&(h.callback=a),i=Gr(t,h,l),i!==null&&(Sn(i,t,l),gl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=Mn(),h=Fr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Gr(t,h,l),i!==null&&(Sn(i,t,l),gl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=Mn(),l=Fr(a);l.tag=2,i!=null&&(l.callback=i),i=Gr(t,l,a),i!==null&&(Sn(i,t,a),gl(i,t,a))}};function zy(t,i,a,l,h,f,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,_):i.prototype&&i.prototype.isPureReactComponent?!ll(a,l)||!ll(h,f):!0}function By(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&gf.enqueueReplaceState(i,i.state,null)}function ra(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=b({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function qy(t){tu(t)}function Hy(t){console.error(t)}function Fy(t){tu(t)}function Au(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Gy(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function yf(t,i,a){return a=Fr(a),a.tag=3,a.payload={element:null},a.callback=function(){Au(t,i)},a}function $y(t){return t=Fr(t),t.tag=3,t}function Yy(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var f=l.value;t.payload=function(){return h(f)},t.callback=function(){Gy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){Gy(i,a,l),typeof h!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function f1(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&Fa(i,a,h,!0),a=In.current,a!==null){switch(a.tag){case 31:case 13:return Kn===null?Vu():a.alternate===null&&_t===0&&(_t=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===hu?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),qf(t,l,h)),!1;case 22:return a.flags|=65536,l===hu?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),qf(t,l,h)),!1}throw Error(s(435,a.tag))}return qf(t,l,h),Vu(),!1}if($e)return i=In.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Ld&&(t=Error(s(422),{cause:l}),hl(Gn(t,a)))):(l!==Ld&&(i=Error(s(423),{cause:l}),hl(Gn(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Gn(l,a),h=yf(t.stateNode,l,h),$d(t,h),_t!==4&&(_t=2)),!1;var f=Error(s(520),{cause:l});if(f=Gn(f,a),Dl===null?Dl=[f]:Dl.push(f),_t!==4&&(_t=2),i===null)return!0;l=Gn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=yf(a.stateNode,l,t),$d(a,t),!1;case 1:if(i=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Wr===null||!Wr.has(f))))return a.flags|=65536,h&=-h,a.lanes|=h,h=$y(h),Yy(h,t,a,l),$d(a,h),!1}a=a.return}while(a!==null);return!1}var _f=Error(s(461)),Ot=!1;function Xt(t,i,a,l){i.child=t===null?Wg(i,null,a,l):na(i,t.child,a,l)}function Qy(t,i,a,l,h){a=a.render;var f=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Js(i),l=Jd(t,i,a,_,f,h),T=Zd(),t!==null&&!Ot?(ef(t,i,h),ur(t,i,h)):($e&&T&&Md(i),i.flags|=1,Xt(t,i,l,h),i.child)}function Ky(t,i,a,l,h){if(t===null){var f=a.type;return typeof f=="function"&&!Dd(f)&&f.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=f,Xy(t,i,f,l,h)):(t=su(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(f=t.child,!xf(t,h)){var _=f.memoizedProps;if(a=a.compare,a=a!==null?a:ll,a(_,l)&&t.ref===i.ref)return ur(t,i,h)}return i.flags|=1,t=rr(f,l),t.ref=i.ref,t.return=i,i.child=t}function Xy(t,i,a,l,h){if(t!==null){var f=t.memoizedProps;if(ll(f,l)&&t.ref===i.ref)if(Ot=!1,i.pendingProps=l=f,xf(t,h))(t.flags&131072)!==0&&(Ot=!0);else return i.lanes=t.lanes,ur(t,i,h)}return vf(t,i,a,l,h)}function Wy(t,i,a,l){var h=l.children,f=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(f=f!==null?f.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~f}else l=0,i.child=null;return Jy(t,i,f,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&cu(i,f!==null?f.cachePool:null),f!==null?ey(i,f):Qd(),ty(i);else return l=i.lanes=536870912,Jy(t,i,f!==null?f.baseLanes|a:a,a,l)}else f!==null?(cu(i,f.cachePool),ey(i,f),Yr(),i.memoizedState=null):(t!==null&&cu(i,null),Qd(),Yr());return Xt(t,i,h,a),i.child}function Tl(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Jy(t,i,a,l,h){var f=qd();return f=f===null?null:{parent:Dt._currentValue,pool:f},i.memoizedState={baseLanes:a,cachePool:f},t!==null&&cu(i,null),Qd(),ty(i),t!==null&&Fa(t,i,l,!0),i.childLanes=h,null}function wu(t,i){return i=Ru({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function Zy(t,i,a){return na(i,t.child,null,a),t=wu(i,i.pendingProps),t.flags|=2,Dn(i),i.memoizedState=null,t}function m1(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if($e){if(l.mode==="hidden")return t=wu(i,l),i.lanes=536870912,Tl(null,t);if(Xd(i),(t=ht)?(t=h_(t,Qn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:jr!==null?{id:Vi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=Vg(t),a.return=i,i.child=a,Qt=i,ht=null)):t=null,t===null)throw Br(i);return i.lanes=536870912,null}return wu(i,l)}var f=t.memoizedState;if(f!==null){var _=f.dehydrated;if(Xd(i),h)if(i.flags&256)i.flags&=-257,i=Zy(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Ot||Fa(t,i,a,!1),h=(a&t.childLanes)!==0,Ot||h){if(l=lt,l!==null&&(_=Fo(l,a),_!==0&&_!==f.retryLane))throw f.retryLane=_,Qs(t,_),Sn(l,t,_),_f;Vu(),i=Zy(t,i,a)}else t=f.treeContext,ht=Xn(_.nextSibling),Qt=i,$e=!0,zr=null,Qn=!1,t!==null&&jg(i,t),i=wu(i,l),i.flags|=4096;return i}return t=rr(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function xu(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function vf(t,i,a,l,h){return Js(i),a=Jd(t,i,a,l,void 0,h),l=Zd(),t!==null&&!Ot?(ef(t,i,h),ur(t,i,h)):($e&&l&&Md(i),i.flags|=1,Xt(t,i,a,h),i.child)}function e0(t,i,a,l,h,f){return Js(i),i.updateQueue=null,a=iy(i,l,a,h),ny(t),l=Zd(),t!==null&&!Ot?(ef(t,i,f),ur(t,i,f)):($e&&l&&Md(i),i.flags|=1,Xt(t,i,a,f),i.child)}function t0(t,i,a,l,h){if(Js(i),i.stateNode===null){var f=za,_=a.contextType;typeof _=="object"&&_!==null&&(f=Kt(_)),f=new a(l,f),i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=gf,i.stateNode=f,f._reactInternals=i,f=i.stateNode,f.props=l,f.state=i.memoizedState,f.refs={},Fd(i),_=a.contextType,f.context=typeof _=="object"&&_!==null?Kt(_):za,f.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(pf(i,a,_,l),f.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(_=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),_!==f.state&&gf.enqueueReplaceState(f,f.state,null),_l(i,l,f,h),yl(),f.state=i.memoizedState),typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){f=i.stateNode;var T=i.memoizedProps,k=ra(a,T);f.props=k;var G=f.context,ee=a.contextType;_=za,typeof ee=="object"&&ee!==null&&(_=Kt(ee));var ae=a.getDerivedStateFromProps;ee=typeof ae=="function"||typeof f.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,ee||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(T||G!==_)&&By(i,f,l,_),Hr=!1;var Q=i.memoizedState;f.state=Q,_l(i,l,f,h),yl(),G=i.memoizedState,T||Q!==G||Hr?(typeof ae=="function"&&(pf(i,a,ae,l),G=i.memoizedState),(k=Hr||zy(i,a,k,l,Q,G,_))?(ee||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(i.flags|=4194308)):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=G),f.props=l,f.state=G,f.context=_,l=k):(typeof f.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{f=i.stateNode,Gd(t,i),_=i.memoizedProps,ee=ra(a,_),f.props=ee,ae=i.pendingProps,Q=f.context,G=a.contextType,k=za,typeof G=="object"&&G!==null&&(k=Kt(G)),T=a.getDerivedStateFromProps,(G=typeof T=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(_!==ae||Q!==k)&&By(i,f,l,k),Hr=!1,Q=i.memoizedState,f.state=Q,_l(i,l,f,h),yl();var W=i.memoizedState;_!==ae||Q!==W||Hr||t!==null&&t.dependencies!==null&&ou(t.dependencies)?(typeof T=="function"&&(pf(i,a,T,l),W=i.memoizedState),(ee=Hr||zy(i,a,ee,l,Q,W,k)||t!==null&&t.dependencies!==null&&ou(t.dependencies))?(G||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,W,k),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,W,k)),typeof f.componentDidUpdate=="function"&&(i.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=W),f.props=l,f.state=W,f.context=k,l=ee):(typeof f.componentDidUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&Q===t.memoizedState||(i.flags|=1024),l=!1)}return f=l,xu(t,i),l=(i.flags&128)!==0,f||l?(f=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),i.flags|=1,t!==null&&l?(i.child=na(i,t.child,null,h),i.child=na(i,null,a,h)):Xt(t,i,a,h),i.memoizedState=f.state,t=i.child):t=ur(t,i,h),t}function n0(t,i,a,l){return Xs(),i.flags|=256,Xt(t,i,a,l),i.child}var Ef={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Sf(t){return{baseLanes:t,cachePool:Gg()}}function bf(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=On),t}function i0(t,i,a){var l=i.pendingProps,h=!1,f=(i.flags&128)!==0,_;if((_=f)||(_=t!==null&&t.memoizedState===null?!1:(bt.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if($e){if(h?$r(i):Yr(),(t=ht)?(t=h_(t,Qn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:jr!==null?{id:Vi,overflow:Pi}:null,retryLane:536870912,hydrationErrors:null},a=Vg(t),a.return=i,i.child=a,Qt=i,ht=null)):t=null,t===null)throw Br(i);return rm(t)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,h?(Yr(),h=i.mode,T=Ru({mode:"hidden",children:T},h),l=Ks(l,h,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Sf(a),l.childLanes=bf(t,_,a),i.memoizedState=Ef,Tl(null,l)):($r(i),Tf(i,T))}var k=t.memoizedState;if(k!==null&&(T=k.dehydrated,T!==null)){if(f)i.flags&256?($r(i),i.flags&=-257,i=Af(t,i,a)):i.memoizedState!==null?(Yr(),i.child=t.child,i.flags|=128,i=null):(Yr(),T=l.fallback,h=i.mode,l=Ru({mode:"visible",children:l.children},h),T=Ks(T,h,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,na(i,t.child,null,a),l=i.child,l.memoizedState=Sf(a),l.childLanes=bf(t,_,a),i.memoizedState=Ef,i=Tl(null,l));else if($r(i),rm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var G=_.dgst;_=G,l=Error(s(419)),l.stack="",l.digest=_,hl({value:l,source:null,stack:null}),i=Af(t,i,a)}else if(Ot||Fa(t,i,a,!1),_=(a&t.childLanes)!==0,Ot||_){if(_=lt,_!==null&&(l=Fo(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Qs(t,l),Sn(_,t,l),_f;im(T)||Vu(),i=Af(t,i,a)}else im(T)?(i.flags|=192,i.child=t.child,i=null):(t=k.treeContext,ht=Xn(T.nextSibling),Qt=i,$e=!0,zr=null,Qn=!1,t!==null&&jg(i,t),i=Tf(i,l.children),i.flags|=4096);return i}return h?(Yr(),T=l.fallback,h=i.mode,k=t.child,G=k.sibling,l=rr(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,G!==null?T=rr(G,T):(T=Ks(T,h,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Tl(null,l),l=i.child,T=t.child.memoizedState,T===null?T=Sf(a):(h=T.cachePool,h!==null?(k=Dt._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=Gg(),T={baseLanes:T.baseLanes|a,cachePool:h}),l.memoizedState=T,l.childLanes=bf(t,_,a),i.memoizedState=Ef,Tl(t.child,l)):($r(i),a=t.child,t=a.sibling,a=rr(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function Tf(t,i){return i=Ru({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Ru(t,i){return t=Cn(22,t,null,i),t.lanes=0,t}function Af(t,i,a){return na(i,t.child,null,a),t=Tf(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function r0(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Ud(t.return,i,a)}function wf(t,i,a,l,h,f){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:f}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=f)}function s0(t,i,a){var l=i.pendingProps,h=l.revealOrder,f=l.tail;l=l.children;var _=bt.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,le(bt,_),Xt(t,i,l,a),l=$e?ul:0,!T&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r0(t,a,i);else if(t.tag===19)r0(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&pu(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),wf(i,!1,h,a,f,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&pu(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}wf(i,!0,a,null,f,l);break;case"together":wf(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ur(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),Xr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(Fa(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=rr(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=rr(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function xf(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ou(t)))}function p1(t,i,a){switch(i.tag){case 3:We(i,i.stateNode.containerInfo),qr(i,Dt,t.memoizedState.cache),Xs();break;case 27:case 5:Pn(i);break;case 4:We(i,i.stateNode.containerInfo);break;case 10:qr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Xd(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?($r(i),i.flags|=128,null):(a&i.child.childLanes)!==0?i0(t,i,a):($r(i),t=ur(t,i,a),t!==null?t.sibling:null);$r(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(Fa(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return s0(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),le(bt,bt.current),l)break;return null;case 22:return i.lanes=0,Wy(t,i,a,i.pendingProps);case 24:qr(i,Dt,t.memoizedState.cache)}return ur(t,i,a)}function a0(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Ot=!0;else{if(!xf(t,a)&&(i.flags&128)===0)return Ot=!1,p1(t,i,a);Ot=(t.flags&131072)!==0}else Ot=!1,$e&&(i.flags&1048576)!==0&&Ug(i,ul,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=ea(i.elementType),i.type=t,typeof t=="function")Dd(t)?(l=ra(t,l),i.tag=1,i=t0(null,i,t,l,a)):(i.tag=0,i=vf(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===pe){i.tag=11,i=Qy(null,i,t,l,a);break e}else if(h===D){i.tag=14,i=Ky(null,i,t,l,a);break e}}throw i=ce(t)||t,Error(s(306,i,""))}}return i;case 0:return vf(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=ra(l,i.pendingProps),t0(t,i,l,h,a);case 3:e:{if(We(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var f=i.memoizedState;h=f.element,Gd(t,i),_l(i,l,null,a);var _=i.memoizedState;if(l=_.cache,qr(i,Dt,l),l!==f.cache&&jd(i,[Dt],a,!0),yl(),l=_.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=f,i.memoizedState=f,i.flags&256){i=n0(t,i,l,a);break e}else if(l!==h){h=Gn(Error(s(424)),i),hl(h),i=n0(t,i,l,a);break e}else{switch(t=i.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(ht=Xn(t.firstChild),Qt=i,$e=!0,zr=null,Qn=!0,a=Wg(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Xs(),l===h){i=ur(t,i,a);break e}Xt(t,i,l,a)}i=i.child}return i;case 26:return xu(t,i),t===null?(a=y_(i.type,null,i.pendingProps,null))?i.memoizedState=a:$e||(a=i.type,t=i.pendingProps,l=Hu(Ee.current).createElement(a),l[Rt]=i,l[Bt]=t,Wt(l,a,t),Ct(l),i.stateNode=l):i.memoizedState=y_(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Pn(i),t===null&&$e&&(l=i.stateNode=m_(i.type,i.pendingProps,Ee.current),Qt=i,Qn=!0,h=ht,ts(i.type)?(sm=h,ht=Xn(l.firstChild)):ht=h),Xt(t,i,i.pendingProps.children,a),xu(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&$e&&((h=l=ht)&&(l=G1(l,i.type,i.pendingProps,Qn),l!==null?(i.stateNode=l,Qt=i,ht=Xn(l.firstChild),Qn=!1,h=!0):h=!1),h||Br(i)),Pn(i),h=i.type,f=i.pendingProps,_=t!==null?t.memoizedProps:null,l=f.children,em(h,f)?l=null:_!==null&&em(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=Jd(t,i,a1,null,null,a),Ul._currentValue=h),xu(t,i),Xt(t,i,l,a),i.child;case 6:return t===null&&$e&&((t=a=ht)&&(a=$1(a,i.pendingProps,Qn),a!==null?(i.stateNode=a,Qt=i,ht=null,t=!0):t=!1),t||Br(i)),null;case 13:return i0(t,i,a);case 4:return We(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=na(i,null,l,a):Xt(t,i,l,a),i.child;case 11:return Qy(t,i,i.type,i.pendingProps,a);case 7:return Xt(t,i,i.pendingProps,a),i.child;case 8:return Xt(t,i,i.pendingProps.children,a),i.child;case 12:return Xt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,qr(i,i.type,l.value),Xt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,Js(i),h=Kt(h),l=l(h),i.flags|=1,Xt(t,i,l,a),i.child;case 14:return Ky(t,i,i.type,i.pendingProps,a);case 15:return Xy(t,i,i.type,i.pendingProps,a);case 19:return s0(t,i,a);case 31:return m1(t,i,a);case 22:return Wy(t,i,a,i.pendingProps);case 24:return Js(i),l=Kt(Dt),t===null?(h=qd(),h===null&&(h=lt,f=zd(),h.pooledCache=f,f.refCount++,f!==null&&(h.pooledCacheLanes|=a),h=f),i.memoizedState={parent:l,cache:h},Fd(i),qr(i,Dt,h)):((t.lanes&a)!==0&&(Gd(t,i),_l(i,null,null,a),yl()),h=t.memoizedState,f=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),qr(i,Dt,l)):(l=f.cache,qr(i,Dt,l),l!==h.cache&&jd(i,[Dt],a,!0))),Xt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function hr(t){t.flags|=4}function Rf(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(M0())t.flags|=8192;else throw ta=hu,Hd}else t.flags&=-16777217}function o0(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!b_(i))if(M0())t.flags|=8192;else throw ta=hu,Hd}function Cu(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?kc():536870912,t.lanes|=i,no|=i)}function Al(t,i){if(!$e)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function dt(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function g1(t,i,a){var l=i.pendingProps;switch(kd(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(i),null;case 1:return dt(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),or(Dt),Ge(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(Ha(i)?hr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Vd())),dt(i),null;case 26:var h=i.type,f=i.memoizedState;return t===null?(hr(i),f!==null?(dt(i),o0(i,f)):(dt(i),Rf(i,h,null,l,a))):f?f!==t.memoizedState?(hr(i),dt(i),o0(i,f)):(dt(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&hr(i),dt(i),Rf(i,h,t,l,a)),null;case 27:if(gi(i),a=Ee.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&hr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return dt(i),null}t=se.current,Ha(i)?zg(i):(t=m_(h,l,a),i.stateNode=t,hr(i))}return dt(i),null;case 5:if(gi(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&hr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return dt(i),null}if(f=se.current,Ha(i))zg(i);else{var _=Hu(Ee.current);switch(f){case 1:f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":f=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":f=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":f=_.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?f.multiple=!0:l.size&&(f.size=l.size);break;default:f=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}f[Rt]=i,f[Bt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)f.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=f;e:switch(Wt(f,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&hr(i)}}return dt(i),Rf(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&hr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ee.current,Ha(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Qt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Rt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||i_(t.nodeValue,a)),t||Br(i,!0)}else t=Hu(t).createTextNode(l),t[Rt]=i,i.stateNode=t}return dt(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=Ha(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Rt]=i}else Xs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),t=!1}else a=Vd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Dn(i),i):(Dn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return dt(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=Ha(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Rt]=i}else Xs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;dt(i),h=!1}else h=Vd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Dn(i),i):(Dn(i),null)}return Dn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),f=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),Cu(i,i.updateQueue),dt(i),null);case 4:return Ge(),t===null&&Kf(i.stateNode.containerInfo),dt(i),null;case 10:return or(i.type),dt(i),null;case 19:if(Y(bt),l=i.memoizedState,l===null)return dt(i),null;if(h=(i.flags&128)!==0,f=l.rendering,f===null)if(h)Al(l,!1);else{if(_t!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(f=pu(t),f!==null){for(i.flags|=128,Al(l,!1),t=f.updateQueue,i.updateQueue=t,Cu(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)Lg(a,t),a=a.sibling;return le(bt,bt.current&1|2),$e&&sr(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&un()>Mu&&(i.flags|=128,h=!0,Al(l,!1),i.lanes=4194304)}else{if(!h)if(t=pu(f),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,Cu(i,t),Al(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!$e)return dt(i),null}else 2*un()-l.renderingStartTime>Mu&&a!==536870912&&(i.flags|=128,h=!0,Al(l,!1),i.lanes=4194304);l.isBackwards?(f.sibling=i.child,i.child=f):(t=l.last,t!==null?t.sibling=f:i.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=un(),t.sibling=null,a=bt.current,le(bt,h?a&1|2:a&1),$e&&sr(i,l.treeForkCount),t):(dt(i),null);case 22:case 23:return Dn(i),Kd(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(dt(i),i.subtreeFlags&6&&(i.flags|=8192)):dt(i),a=i.updateQueue,a!==null&&Cu(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&Y(Zs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),or(Dt),dt(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function y1(t,i){switch(kd(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return or(Dt),Ge(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return gi(i),null;case 31:if(i.memoizedState!==null){if(Dn(i),i.alternate===null)throw Error(s(340));Xs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Dn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));Xs()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Y(bt),null;case 4:return Ge(),null;case 10:return or(i.type),null;case 22:case 23:return Dn(i),Kd(),t!==null&&Y(Zs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return or(Dt),null;case 25:return null;default:return null}}function l0(t,i){switch(kd(i),i.tag){case 3:or(Dt),Ge();break;case 26:case 27:case 5:gi(i);break;case 4:Ge();break;case 31:i.memoizedState!==null&&Dn(i);break;case 13:Dn(i);break;case 19:Y(bt);break;case 10:or(i.type);break;case 22:case 23:Dn(i),Kd(),t!==null&&Y(Zs);break;case 24:or(Dt)}}function wl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var f=a.create,_=a.inst;l=f(),_.destroy=l}a=a.next}while(a!==h)}}catch(T){it(i,i.return,T)}}function Qr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var f=h.next;l=f;do{if((l.tag&t)===t){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,h=i;var k=a,G=T;try{G()}catch(ee){it(h,k,ee)}}}l=l.next}while(l!==f)}}catch(ee){it(i,i.return,ee)}}function c0(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{Zg(i,a)}catch(l){it(t,t.return,l)}}}function u0(t,i,a){a.props=ra(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){it(t,i,l)}}function xl(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){it(t,i,h)}}function Ui(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){it(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){it(t,i,h)}else a.current=null}function h0(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){it(t,t.return,h)}}function Cf(t,i,a){try{var l=t.stateNode;j1(l,t.type,a,i),l[Bt]=i}catch(h){it(t,t.return,h)}}function d0(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ts(t.type)||t.tag===4}function If(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ts(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Df(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=ii));else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(Df(t,i,a),t=t.sibling;t!==null;)Df(t,i,a),t=t.sibling}function Iu(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&ts(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Iu(t,i,a),t=t.sibling;t!==null;)Iu(t,i,a),t=t.sibling}function f0(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);Wt(i,l,a),i[Rt]=t,i[Bt]=a}catch(f){it(t,t.return,f)}}var dr=!1,Mt=!1,Nf=!1,m0=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function _1(t,i){if(t=t.containerInfo,Jf=Xu,t=xg(t),Td(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var _=0,T=-1,k=-1,G=0,ee=0,ae=t,Q=null;t:for(;;){for(var W;ae!==a||h!==0&&ae.nodeType!==3||(T=_+h),ae!==f||l!==0&&ae.nodeType!==3||(k=_+l),ae.nodeType===3&&(_+=ae.nodeValue.length),(W=ae.firstChild)!==null;)Q=ae,ae=W;for(;;){if(ae===t)break t;if(Q===a&&++G===h&&(T=_),Q===f&&++ee===l&&(k=_),(W=ae.nextSibling)!==null)break;ae=Q,Q=ae.parentNode}ae=W}a=T===-1||k===-1?null:{start:T,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(Zf={focusedElem:t,selectionRange:a},Xu=!1,Ht=i;Ht!==null;)if(i=Ht,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ht=t;else for(;Ht!==null;){switch(i=Ht,f=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=i,h=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var _e=ra(a.type,h);t=l.getSnapshotBeforeUpdate(_e,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(we){it(a,a.return,we)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)nm(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":nm(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ht=t;break}Ht=i.return}}function p0(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:mr(t,a),l&4&&wl(5,a);break;case 1:if(mr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){it(a,a.return,_)}else{var h=ra(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){it(a,a.return,_)}}l&64&&c0(a),l&512&&xl(a,a.return);break;case 3:if(mr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{Zg(t,i)}catch(_){it(a,a.return,_)}}break;case 27:i===null&&l&4&&f0(a);case 26:case 5:mr(t,a),i===null&&l&4&&h0(a),l&512&&xl(a,a.return);break;case 12:mr(t,a);break;case 31:mr(t,a),l&4&&_0(t,a);break;case 13:mr(t,a),l&4&&v0(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=R1.bind(null,a),Y1(t,a))));break;case 22:if(l=a.memoizedState!==null||dr,!l){i=i!==null&&i.memoizedState!==null||Mt,h=dr;var f=Mt;dr=l,(Mt=i)&&!f?pr(t,a,(a.subtreeFlags&8772)!==0):mr(t,a),dr=h,Mt=f}break;case 30:break;default:mr(t,a)}}function g0(t){var i=t.alternate;i!==null&&(t.alternate=null,g0(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&xa(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pt=null,yn=!1;function fr(t,i,a){for(a=a.child;a!==null;)y0(t,i,a),a=a.sibling}function y0(t,i,a){if($t&&typeof $t.onCommitFiberUnmount=="function")try{$t.onCommitFiberUnmount(Zn,a)}catch{}switch(a.tag){case 26:Mt||Ui(a,i),fr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||Ui(a,i);var l=pt,h=yn;ts(a.type)&&(pt=a.stateNode,yn=!1),fr(t,i,a),Ll(a.stateNode),pt=l,yn=h;break;case 5:Mt||Ui(a,i);case 6:if(l=pt,h=yn,pt=null,fr(t,i,a),pt=l,yn=h,pt!==null)if(yn)try{(pt.nodeType===9?pt.body:pt.nodeName==="HTML"?pt.ownerDocument.body:pt).removeChild(a.stateNode)}catch(f){it(a,i,f)}else try{pt.removeChild(a.stateNode)}catch(f){it(a,i,f)}break;case 18:pt!==null&&(yn?(t=pt,c_(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),uo(t)):c_(pt,a.stateNode));break;case 4:l=pt,h=yn,pt=a.stateNode.containerInfo,yn=!0,fr(t,i,a),pt=l,yn=h;break;case 0:case 11:case 14:case 15:Qr(2,a,i),Mt||Qr(4,a,i),fr(t,i,a);break;case 1:Mt||(Ui(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&u0(a,i,l)),fr(t,i,a);break;case 21:fr(t,i,a);break;case 22:Mt=(l=Mt)||a.memoizedState!==null,fr(t,i,a),Mt=l;break;default:fr(t,i,a)}}function _0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{uo(t)}catch(a){it(i,i.return,a)}}}function v0(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{uo(t)}catch(a){it(i,i.return,a)}}function v1(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new m0),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new m0),i;default:throw Error(s(435,t.tag))}}function Du(t,i){var a=v1(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=C1.bind(null,t,l);l.then(h,h)}})}function _n(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],f=t,_=i,T=_;e:for(;T!==null;){switch(T.tag){case 27:if(ts(T.type)){pt=T.stateNode,yn=!1;break e}break;case 5:pt=T.stateNode,yn=!1;break e;case 3:case 4:pt=T.stateNode.containerInfo,yn=!0;break e}T=T.return}if(pt===null)throw Error(s(160));y0(f,_,h),pt=null,yn=!1,f=h.alternate,f!==null&&(f.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)E0(i,t),i=i.sibling}var ci=null;function E0(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:_n(i,t),vn(t),l&4&&(Qr(3,t,t.return),wl(3,t),Qr(5,t,t.return));break;case 1:_n(i,t),vn(t),l&512&&(Mt||a===null||Ui(a,a.return)),l&64&&dr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ci;if(_n(i,t),vn(t),l&512&&(Mt||a===null||Ui(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":f=h.getElementsByTagName("title")[0],(!f||f[Ai]||f[Rt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=h.createElement(l),h.head.insertBefore(f,h.querySelector("head > title"))),Wt(f,l,a),f[Rt]=t,Ct(f),l=f;break e;case"link":var _=E_("link","href",h).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(f=_[T],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break t}}f=h.createElement(l),Wt(f,l,a),h.head.appendChild(f);break;case"meta":if(_=E_("meta","content",h).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(f=_[T],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break t}}f=h.createElement(l),Wt(f,l,a),h.head.appendChild(f);break;default:throw Error(s(468,l))}f[Rt]=t,Ct(f),l=f}t.stateNode=l}else S_(h,t.type,t.stateNode);else t.stateNode=v_(h,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?S_(h,t.type,t.stateNode):v_(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Cf(t,t.memoizedProps,a.memoizedProps)}break;case 27:_n(i,t),vn(t),l&512&&(Mt||a===null||Ui(a,a.return)),a!==null&&l&4&&Cf(t,t.memoizedProps,a.memoizedProps);break;case 5:if(_n(i,t),vn(t),l&512&&(Mt||a===null||Ui(a,a.return)),t.flags&32){h=t.stateNode;try{gn(h,"")}catch(_e){it(t,t.return,_e)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Cf(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Nf=!0);break;case 6:if(_n(i,t),vn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(_e){it(t,t.return,_e)}}break;case 3:if($u=null,h=ci,ci=Fu(i.containerInfo),_n(i,t),ci=h,vn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{uo(i.containerInfo)}catch(_e){it(t,t.return,_e)}Nf&&(Nf=!1,S0(t));break;case 4:l=ci,ci=Fu(t.stateNode.containerInfo),_n(i,t),vn(t),ci=l;break;case 12:_n(i,t),vn(t);break;case 31:_n(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Du(t,l)));break;case 13:_n(i,t),vn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Ou=un()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Du(t,l)));break;case 22:h=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,G=dr,ee=Mt;if(dr=G||h,Mt=ee||k,_n(i,t),Mt=ee,dr=G,vn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||k||dr||Mt||sa(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){k=a=i;try{if(f=k.stateNode,h)_=f.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=k.stateNode;var ae=k.memoizedProps.style,Q=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;T.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(_e){it(k,k.return,_e)}}}else if(i.tag===6){if(a===null){k=i;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(_e){it(k,k.return,_e)}}}else if(i.tag===18){if(a===null){k=i;try{var W=k.stateNode;h?u_(W,!0):u_(k.stateNode,!1)}catch(_e){it(k,k.return,_e)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Du(t,a))));break;case 19:_n(i,t),vn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Du(t,l)));break;case 30:break;case 21:break;default:_n(i,t),vn(t)}}function vn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(d0(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,f=If(t);Iu(t,f,h);break;case 5:var _=a.stateNode;a.flags&32&&(gn(_,""),a.flags&=-33);var T=If(t);Iu(t,T,_);break;case 3:case 4:var k=a.stateNode.containerInfo,G=If(t);Df(t,G,k);break;default:throw Error(s(161))}}catch(ee){it(t,t.return,ee)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function S0(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;S0(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function mr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)p0(t,i.alternate,i),i=i.sibling}function sa(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Qr(4,i,i.return),sa(i);break;case 1:Ui(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&u0(i,i.return,a),sa(i);break;case 27:Ll(i.stateNode);case 26:case 5:Ui(i,i.return),sa(i);break;case 22:i.memoizedState===null&&sa(i);break;case 30:sa(i);break;default:sa(i)}t=t.sibling}}function pr(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,f=i,_=f.flags;switch(f.tag){case 0:case 11:case 15:pr(h,f,a),wl(4,f);break;case 1:if(pr(h,f,a),l=f,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(G){it(l,l.return,G)}if(l=f,h=l.updateQueue,h!==null){var T=l.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)Jg(k[h],T)}catch(G){it(l,l.return,G)}}a&&_&64&&c0(f),xl(f,f.return);break;case 27:f0(f);case 26:case 5:pr(h,f,a),a&&l===null&&_&4&&h0(f),xl(f,f.return);break;case 12:pr(h,f,a);break;case 31:pr(h,f,a),a&&_&4&&_0(h,f);break;case 13:pr(h,f,a),a&&_&4&&v0(h,f);break;case 22:f.memoizedState===null&&pr(h,f,a),xl(f,f.return);break;case 30:break;default:pr(h,f,a)}i=i.sibling}}function Of(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&dl(a))}function Mf(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t))}function ui(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)b0(t,i,a,l),i=i.sibling}function b0(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ui(t,i,a,l),h&2048&&wl(9,i);break;case 1:ui(t,i,a,l);break;case 3:ui(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&dl(t)));break;case 12:if(h&2048){ui(t,i,a,l),t=i.stateNode;try{var f=i.memoizedProps,_=f.id,T=f.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){it(i,i.return,k)}}else ui(t,i,a,l);break;case 31:ui(t,i,a,l);break;case 13:ui(t,i,a,l);break;case 23:break;case 22:f=i.stateNode,_=i.alternate,i.memoizedState!==null?f._visibility&2?ui(t,i,a,l):Rl(t,i):f._visibility&2?ui(t,i,a,l):(f._visibility|=2,Za(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Of(_,i);break;case 24:ui(t,i,a,l),h&2048&&Mf(i.alternate,i);break;default:ui(t,i,a,l)}}function Za(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var f=t,_=i,T=a,k=l,G=_.flags;switch(_.tag){case 0:case 11:case 15:Za(f,_,T,k,h),wl(8,_);break;case 23:break;case 22:var ee=_.stateNode;_.memoizedState!==null?ee._visibility&2?Za(f,_,T,k,h):Rl(f,_):(ee._visibility|=2,Za(f,_,T,k,h)),h&&G&2048&&Of(_.alternate,_);break;case 24:Za(f,_,T,k,h),h&&G&2048&&Mf(_.alternate,_);break;default:Za(f,_,T,k,h)}i=i.sibling}}function Rl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Rl(a,l),h&2048&&Of(l.alternate,l);break;case 24:Rl(a,l),h&2048&&Mf(l.alternate,l);break;default:Rl(a,l)}i=i.sibling}}var Cl=8192;function eo(t,i,a){if(t.subtreeFlags&Cl)for(t=t.child;t!==null;)T0(t,i,a),t=t.sibling}function T0(t,i,a){switch(t.tag){case 26:eo(t,i,a),t.flags&Cl&&t.memoizedState!==null&&sA(a,ci,t.memoizedState,t.memoizedProps);break;case 5:eo(t,i,a);break;case 3:case 4:var l=ci;ci=Fu(t.stateNode.containerInfo),eo(t,i,a),ci=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=Cl,Cl=16777216,eo(t,i,a),Cl=l):eo(t,i,a));break;default:eo(t,i,a)}}function A0(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Il(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,x0(l,t)}A0(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)w0(t),t=t.sibling}function w0(t){switch(t.tag){case 0:case 11:case 15:Il(t),t.flags&2048&&Qr(9,t,t.return);break;case 3:Il(t);break;case 12:Il(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nu(t)):Il(t);break;default:Il(t)}}function Nu(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,x0(l,t)}A0(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Qr(8,i,i.return),Nu(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Nu(i));break;default:Nu(i)}t=t.sibling}}function x0(t,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Qr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=t;Ht!==null;){l=Ht;var h=l.sibling,f=l.return;if(g0(l),l===a){Ht=null;break e}if(h!==null){h.return=f,Ht=h;break e}Ht=f}}}var E1={getCacheForType:function(t){var i=Kt(Dt),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Kt(Dt).controller.signal}},S1=typeof WeakMap=="function"?WeakMap:Map,Ze=0,lt=null,Ue=null,ze=0,nt=0,Nn=null,Kr=!1,to=!1,kf=!1,gr=0,_t=0,Xr=0,aa=0,Lf=0,On=0,no=0,Dl=null,En=null,Vf=!1,Ou=0,R0=0,Mu=1/0,ku=null,Wr=null,Ut=0,Jr=null,io=null,yr=0,Pf=0,Uf=null,C0=null,Nl=0,jf=null;function Mn(){return(Ze&2)!==0&&ze!==0?ze&-ze:M.T!==null?Gf():Lc()}function I0(){if(On===0)if((ze&536870912)===0||$e){var t=Ms;Ms<<=1,(Ms&3932160)===0&&(Ms=262144),On=t}else On=536870912;return t=In.current,t!==null&&(t.flags|=32),On}function Sn(t,i,a){(t===lt&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(ro(t,0),Zr(t,ze,On,!1)),ks(t,a),((Ze&2)===0||t!==lt)&&(t===lt&&((Ze&2)===0&&(aa|=a),_t===4&&Zr(t,ze,On,!1)),ji(t))}function D0(t,i,a){if((Ze&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||ei(t,i),h=l?A1(t,i):Bf(t,i,!0),f=l;do{if(h===0){to&&!l&&Zr(t,i,0,!1);break}else{if(a=t.current.alternate,f&&!b1(a)){h=Bf(t,i,!1),f=!1;continue}if(h===2){if(f=i,t.errorRecoveryDisabledLanes&f)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var T=t;h=Dl;var k=T.current.memoizedState.isDehydrated;if(k&&(ro(T,_).flags|=256),_=Bf(T,_,!1),_!==2){if(kf&&!k){T.errorRecoveryDisabledLanes|=f,aa|=f,h=4;break e}f=En,En=h,f!==null&&(En===null?En=f:En.push.apply(En,f))}h=_}if(f=!1,h!==2)continue}}if(h===1){ro(t,0),Zr(t,i,0,!0);break}e:{switch(l=t,f=h,f){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Zr(l,i,On,!Kr);break e;case 2:En=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Ou+300-un(),10<h)){if(Zr(l,i,On,!Kr),Si(l,0,!0)!==0)break e;yr=i,l.timeoutHandle=o_(N0.bind(null,l,a,En,ku,Vf,i,On,aa,no,Kr,f,"Throttled",-0,0),h);break e}N0(l,a,En,ku,Vf,i,On,aa,no,Kr,f,null,-0,0)}}break}while(!0);ji(t)}function N0(t,i,a,l,h,f,_,T,k,G,ee,ae,Q,W){if(t.timeoutHandle=-1,ae=i.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ii},T0(i,f,ae);var _e=(f&62914560)===f?Ou-un():(f&4194048)===f?R0-un():0;if(_e=aA(ae,_e),_e!==null){yr=f,t.cancelPendingCommit=_e(j0.bind(null,t,i,f,a,l,h,_,T,k,ee,ae,null,Q,W)),Zr(t,f,_,!G);return}}j0(t,i,f,a,l,h,_,T,k)}function b1(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],f=h.getSnapshot;h=h.value;try{if(!Rn(f(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Zr(t,i,a,l){i&=~Lf,i&=~aa,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var f=31-Et(h),_=1<<f;l[f]=-1,h&=~_}a!==0&&Ls(t,a,i)}function Lu(){return(Ze&6)===0?(Ol(0),!1):!0}function zf(){if(Ue!==null){if(nt===0)var t=Ue.return;else t=Ue,ar=Ws=null,tf(t),Qa=null,ml=0,t=Ue;for(;t!==null;)l0(t.alternate,t),t=t.return;Ue=null}}function ro(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,q1(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),yr=0,zf(),lt=t,Ue=a=rr(t.current,null),ze=i,nt=0,Nn=null,Kr=!1,to=ei(t,i),kf=!1,no=On=Lf=aa=Xr=_t=0,En=Dl=null,Vf=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-Et(l),f=1<<h;i|=t[h],l&=~f}return gr=i,nu(),a}function O0(t,i){Me=null,M.H=bl,i===Ya||i===uu?(i=Qg(),nt=3):i===Hd?(i=Qg(),nt=4):nt=i===_f?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Ue===null&&(_t=1,Au(t,Gn(i,t.current)))}function M0(){var t=In.current;return t===null?!0:(ze&4194048)===ze?Kn===null:(ze&62914560)===ze||(ze&536870912)!==0?t===Kn:!1}function k0(){var t=M.H;return M.H=bl,t===null?bl:t}function L0(){var t=M.A;return M.A=E1,t}function Vu(){_t=4,Kr||(ze&4194048)!==ze&&In.current!==null||(to=!0),(Xr&134217727)===0&&(aa&134217727)===0||lt===null||Zr(lt,ze,On,!1)}function Bf(t,i,a){var l=Ze;Ze|=2;var h=k0(),f=L0();(lt!==t||ze!==i)&&(ku=null,ro(t,i)),i=!1;var _=_t;e:do try{if(nt!==0&&Ue!==null){var T=Ue,k=Nn;switch(nt){case 8:zf(),_=6;break e;case 3:case 2:case 9:case 6:In.current===null&&(i=!0);var G=nt;if(nt=0,Nn=null,so(t,T,k,G),a&&to){_=0;break e}break;default:G=nt,nt=0,Nn=null,so(t,T,k,G)}}T1(),_=_t;break}catch(ee){O0(t,ee)}while(!0);return i&&t.shellSuspendCounter++,ar=Ws=null,Ze=l,M.H=h,M.A=f,Ue===null&&(lt=null,ze=0,nu()),_}function T1(){for(;Ue!==null;)V0(Ue)}function A1(t,i){var a=Ze;Ze|=2;var l=k0(),h=L0();lt!==t||ze!==i?(ku=null,Mu=un()+500,ro(t,i)):to=ei(t,i);e:do try{if(nt!==0&&Ue!==null){i=Ue;var f=Nn;t:switch(nt){case 1:nt=0,Nn=null,so(t,i,f,1);break;case 2:case 9:if($g(f)){nt=0,Nn=null,P0(i);break}i=function(){nt!==2&&nt!==9||lt!==t||(nt=7),ji(t)},f.then(i,i);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:$g(f)?(nt=0,Nn=null,P0(i)):(nt=0,Nn=null,so(t,i,f,7));break;case 5:var _=null;switch(Ue.tag){case 26:_=Ue.memoizedState;case 5:case 27:var T=Ue;if(_?b_(_):T.stateNode.complete){nt=0,Nn=null;var k=T.sibling;if(k!==null)Ue=k;else{var G=T.return;G!==null?(Ue=G,Pu(G)):Ue=null}break t}}nt=0,Nn=null,so(t,i,f,5);break;case 6:nt=0,Nn=null,so(t,i,f,6);break;case 8:zf(),_t=6;break e;default:throw Error(s(462))}}w1();break}catch(ee){O0(t,ee)}while(!0);return ar=Ws=null,M.H=l,M.A=h,Ze=a,Ue!==null?0:(lt=null,ze=0,nu(),_t)}function w1(){for(;Ue!==null&&!_i();)V0(Ue)}function V0(t){var i=a0(t.alternate,t,gr);t.memoizedProps=t.pendingProps,i===null?Pu(t):Ue=i}function P0(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=e0(a,i,i.pendingProps,i.type,void 0,ze);break;case 11:i=e0(a,i,i.pendingProps,i.type.render,i.ref,ze);break;case 5:tf(i);default:l0(a,i),i=Ue=Lg(i,gr),i=a0(a,i,gr)}t.memoizedProps=t.pendingProps,i===null?Pu(t):Ue=i}function so(t,i,a,l){ar=Ws=null,tf(i),Qa=null,ml=0;var h=i.return;try{if(f1(t,h,i,a,ze)){_t=1,Au(t,Gn(a,t.current)),Ue=null;return}}catch(f){if(h!==null)throw Ue=h,f;_t=1,Au(t,Gn(a,t.current)),Ue=null;return}i.flags&32768?($e||l===1?t=!0:to||(ze&536870912)!==0?t=!1:(Kr=t=!0,(l===2||l===9||l===3||l===6)&&(l=In.current,l!==null&&l.tag===13&&(l.flags|=16384))),U0(i,t)):Pu(i)}function Pu(t){var i=t;do{if((i.flags&32768)!==0){U0(i,Kr);return}t=i.return;var a=g1(i.alternate,i,gr);if(a!==null){Ue=a;return}if(i=i.sibling,i!==null){Ue=i;return}Ue=i=t}while(i!==null);_t===0&&(_t=5)}function U0(t,i){do{var a=y1(t.alternate,t);if(a!==null){a.flags&=32767,Ue=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){Ue=t;return}Ue=t=a}while(t!==null);_t=6,Ue=null}function j0(t,i,a,l,h,f,_,T,k){t.cancelPendingCommit=null;do Uu();while(Ut!==0);if((Ze&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(f=i.lanes|i.childLanes,f|=Cd,vd(t,a,f,_,T,k),t===lt&&(Ue=lt=null,ze=0),io=i,Jr=t,yr=a,Pf=f,Uf=h,C0=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,I1(Ir,function(){return F0(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=M.T,M.T=null,h=z.p,z.p=2,_=Ze,Ze|=4;try{_1(t,i,a)}finally{Ze=_,z.p=h,M.T=l}}Ut=1,z0(),B0(),q0()}}function z0(){if(Ut===1){Ut=0;var t=Jr,i=io,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=M.T,M.T=null;var l=z.p;z.p=2;var h=Ze;Ze|=4;try{E0(i,t);var f=Zf,_=xg(t.containerInfo),T=f.focusedElem,k=f.selectionRange;if(_!==T&&T&&T.ownerDocument&&wg(T.ownerDocument.documentElement,T)){if(k!==null&&Td(T)){var G=k.start,ee=k.end;if(ee===void 0&&(ee=G),"selectionStart"in T)T.selectionStart=G,T.selectionEnd=Math.min(ee,T.value.length);else{var ae=T.ownerDocument||document,Q=ae&&ae.defaultView||window;if(Q.getSelection){var W=Q.getSelection(),_e=T.textContent.length,we=Math.min(k.start,_e),ot=k.end===void 0?we:Math.min(k.end,_e);!W.extend&&we>ot&&(_=ot,ot=we,we=_);var j=Ag(T,we),P=Ag(T,ot);if(j&&P&&(W.rangeCount!==1||W.anchorNode!==j.node||W.anchorOffset!==j.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var F=ae.createRange();F.setStart(j.node,j.offset),W.removeAllRanges(),we>ot?(W.addRange(F),W.extend(P.node,P.offset)):(F.setEnd(P.node,P.offset),W.addRange(F))}}}}for(ae=[],W=T;W=W.parentNode;)W.nodeType===1&&ae.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<ae.length;T++){var ie=ae[T];ie.element.scrollLeft=ie.left,ie.element.scrollTop=ie.top}}Xu=!!Jf,Zf=Jf=null}finally{Ze=h,z.p=l,M.T=a}}t.current=i,Ut=2}}function B0(){if(Ut===2){Ut=0;var t=Jr,i=io,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=M.T,M.T=null;var l=z.p;z.p=2;var h=Ze;Ze|=4;try{p0(t,i.alternate,i)}finally{Ze=h,z.p=l,M.T=a}}Ut=3}}function q0(){if(Ut===4||Ut===3){Ut=0,Zi();var t=Jr,i=io,a=yr,l=C0;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?Ut=5:(Ut=0,io=Jr=null,H0(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Wr=null),er(a),i=i.stateNode,$t&&typeof $t.onCommitFiberRoot=="function")try{$t.onCommitFiberRoot(Zn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=M.T,h=z.p,z.p=2,M.T=null;try{for(var f=t.onRecoverableError,_=0;_<l.length;_++){var T=l[_];f(T.value,{componentStack:T.stack})}}finally{M.T=i,z.p=h}}(yr&3)!==0&&Uu(),ji(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===jf?Nl++:(Nl=0,jf=t):Nl=0,Ol(0)}}function H0(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,dl(i)))}function Uu(){return z0(),B0(),q0(),F0()}function F0(){if(Ut!==5)return!1;var t=Jr,i=Pf;Pf=0;var a=er(yr),l=M.T,h=z.p;try{z.p=32>a?32:a,M.T=null,a=Uf,Uf=null;var f=Jr,_=yr;if(Ut=0,io=Jr=null,yr=0,(Ze&6)!==0)throw Error(s(331));var T=Ze;if(Ze|=4,w0(f.current),b0(f,f.current,_,a),Ze=T,Ol(0,!1),$t&&typeof $t.onPostCommitFiberRoot=="function")try{$t.onPostCommitFiberRoot(Zn,f)}catch{}return!0}finally{z.p=h,M.T=l,H0(t,i)}}function G0(t,i,a){i=Gn(a,i),i=yf(t.stateNode,i,2),t=Gr(t,i,2),t!==null&&(ks(t,2),ji(t))}function it(t,i,a){if(t.tag===3)G0(t,t,a);else for(;i!==null;){if(i.tag===3){G0(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Wr===null||!Wr.has(l))){t=Gn(a,t),a=$y(2),l=Gr(i,a,2),l!==null&&(Yy(a,l,i,t),ks(l,2),ji(l));break}}i=i.return}}function qf(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new S1;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(kf=!0,h.add(a),t=x1.bind(null,t,i,a),i.then(t,t))}function x1(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,lt===t&&(ze&a)===a&&(_t===4||_t===3&&(ze&62914560)===ze&&300>un()-Ou?(Ze&2)===0&&ro(t,0):Lf|=a,no===ze&&(no=0)),ji(t)}function $0(t,i){i===0&&(i=kc()),t=Qs(t,i),t!==null&&(ks(t,i),ji(t))}function R1(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),$0(t,a)}function C1(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),$0(t,a)}function I1(t,i){return Pe(t,i)}var ju=null,ao=null,Hf=!1,zu=!1,Ff=!1,es=0;function ji(t){t!==ao&&t.next===null&&(ao===null?ju=ao=t:ao=ao.next=t),zu=!0,Hf||(Hf=!0,N1())}function Ol(t,i){if(!Ff&&zu){Ff=!0;do for(var a=!1,l=ju;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var f=0;else{var _=l.suspendedLanes,T=l.pingedLanes;f=(1<<31-Et(42|t)+1)-1,f&=h&~(_&~T),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,X0(l,f))}else f=ze,f=Si(l,l===lt?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||ei(l,f)||(a=!0,X0(l,f));l=l.next}while(a);Ff=!1}}function D1(){Y0()}function Y0(){zu=Hf=!1;var t=0;es!==0&&B1()&&(t=es);for(var i=un(),a=null,l=ju;l!==null;){var h=l.next,f=Q0(l,i);f===0?(l.next=null,a===null?ju=h:a.next=h,h===null&&(ao=a)):(a=l,(t!==0||(f&3)!==0)&&(zu=!0)),l=h}Ut!==0&&Ut!==5||Ol(t),es!==0&&(es=0)}function Q0(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var _=31-Et(f),T=1<<_,k=h[_];k===-1?((T&a)===0||(T&l)!==0)&&(h[_]=_d(T,i)):k<=i&&(t.expiredLanes|=T),f&=~T}if(i=lt,a=ze,a=Si(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&zt(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||ei(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&zt(l),er(a)){case 2:case 8:a=qo;break;case 32:a=Ir;break;case 268435456:a=Ic;break;default:a=Ir}return l=K0.bind(null,t),a=Pe(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&zt(l),t.callbackPriority=2,t.callbackNode=null,2}function K0(t,i){if(Ut!==0&&Ut!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Uu()&&t.callbackNode!==a)return null;var l=ze;return l=Si(t,t===lt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(D0(t,l,i),Q0(t,un()),t.callbackNode!=null&&t.callbackNode===a?K0.bind(null,t):null)}function X0(t,i){if(Uu())return null;D0(t,i,!0)}function N1(){H1(function(){(Ze&6)!==0?Pe(Bo,D1):Y0()})}function Gf(){if(es===0){var t=Ga;t===0&&(t=vi,vi<<=1,(vi&261888)===0&&(vi=256)),es=t}return es}function W0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Da(""+t)}function J0(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function O1(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var f=W0((h[Bt]||null).action),_=l.submitter;_&&(i=(i=_[Bt]||null)?W0(i.formAction):_.getAttribute("formAction"),i!==null&&(f=i,_=null));var T=new Oi("action","action",null,l,h);t.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(es!==0){var k=_?J0(h,_):new FormData(h);hf(a,{pending:!0,data:k,method:h.method,action:f},null,k)}}else typeof f=="function"&&(T.preventDefault(),k=_?J0(h,_):new FormData(h),hf(a,{pending:!0,data:k,method:h.method,action:f},f,k))},currentTarget:h}]})}}for(var $f=0;$f<Rd.length;$f++){var Yf=Rd[$f],M1=Yf.toLowerCase(),k1=Yf[0].toUpperCase()+Yf.slice(1);li(M1,"on"+k1)}li(Ig,"onAnimationEnd"),li(Dg,"onAnimationIteration"),li(Ng,"onAnimationStart"),li("dblclick","onDoubleClick"),li("focusin","onFocus"),li("focusout","onBlur"),li(XT,"onTransitionRun"),li(WT,"onTransitionStart"),li(JT,"onTransitionCancel"),li(Og,"onTransitionEnd"),Ci("onMouseEnter",["mouseout","mouseover"]),Ci("onMouseLeave",["mouseout","mouseover"]),Ci("onPointerEnter",["pointerout","pointerover"]),Ci("onPointerLeave",["pointerout","pointerover"]),Ri("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ri("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ri("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ri("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ri("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),L1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ml));function Z0(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var f=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],k=T.instance,G=T.currentTarget;if(T=T.listener,k!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=G;try{f(h)}catch(ee){tu(ee)}h.currentTarget=null,f=k}else for(_=0;_<l.length;_++){if(T=l[_],k=T.instance,G=T.currentTarget,T=T.listener,k!==f&&h.isPropagationStopped())break e;f=T,h.currentTarget=G;try{f(h)}catch(ee){tu(ee)}h.currentTarget=null,f=k}}}}function je(t,i){var a=i[wa];a===void 0&&(a=i[wa]=new Set);var l=t+"__bubble";a.has(l)||(e_(i,t,2,!1),a.add(l))}function Qf(t,i,a){var l=0;i&&(l|=4),e_(a,t,l,i)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Kf(t){if(!t[Bu]){t[Bu]=!0,Go.forEach(function(a){a!=="selectionchange"&&(L1.has(a)||Qf(a,!1,t),Qf(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Bu]||(i[Bu]=!0,Qf("selectionchange",!1,i))}}function e_(t,i,a,l){switch(I_(i)){case 2:var h=cA;break;case 8:h=uA;break;default:h=um}a=h.bind(null,i,a,t),h=void 0,!zs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Xf(t,i,a,l,h){var f=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===h)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;T!==null;){if(_=wi(T),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=f=_;continue e}T=T.parentNode}}l=l.return}Lr(function(){var G=f,ee=Bn(a),ae=[];e:{var Q=Mg.get(t);if(Q!==void 0){var W=Oi,_e=t;switch(t){case"keypress":if(qs(a)===0)break e;case"keydown":case"keyup":W=Jc;break;case"focusin":_e="focus",W=Fs;break;case"focusout":_e="blur",W=Fs;break;case"beforeblur":case"afterblur":W=Fs;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=rl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=Hc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=p;break;case Ig:case Dg:case Ng:W=Gc;break;case Og:W=A;break;case"scroll":case"scrollend":W=il;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=$c;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=ir;break;case"toggle":case"beforetoggle":W=Oe}var we=(i&4)!==0,ot=!we&&(t==="scroll"||t==="scrollend"),j=we?Q!==null?Q+"Capture":null:Q;we=[];for(var P=G,F;P!==null;){var ie=P;if(F=ie.stateNode,ie=ie.tag,ie!==5&&ie!==26&&ie!==27||F===null||j===null||(ie=ri(P,j),ie!=null&&we.push(kl(P,ie,F))),ot)break;P=P.return}0<we.length&&(Q=new W(Q,_e,null,a,ee),ae.push({event:Q,listeners:we}))}}if((i&7)===0){e:{if(Q=t==="mouseover"||t==="pointerover",W=t==="mouseout"||t==="pointerout",Q&&a!==el&&(_e=a.relatedTarget||a.fromElement)&&(wi(_e)||_e[Ti]))break e;if((W||Q)&&(Q=ee.window===ee?ee:(Q=ee.ownerDocument)?Q.defaultView||Q.parentWindow:window,W?(_e=a.relatedTarget||a.toElement,W=G,_e=_e?wi(_e):null,_e!==null&&(ot=c(_e),we=_e.tag,_e!==ot||we!==5&&we!==27&&we!==6)&&(_e=null)):(W=null,_e=G),W!==_e)){if(we=rl,ie="onMouseLeave",j="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(we=ir,ie="onPointerLeave",j="onPointerEnter",P="pointer"),ot=W==null?Q:wn(W),F=_e==null?Q:wn(_e),Q=new we(ie,P+"leave",W,a,ee),Q.target=ot,Q.relatedTarget=F,ie=null,wi(ee)===G&&(we=new we(j,P+"enter",_e,a,ee),we.target=F,we.relatedTarget=ot,ie=we),ot=ie,W&&_e)t:{for(we=V1,j=W,P=_e,F=0,ie=j;ie;ie=we(ie))F++;ie=0;for(var Ae=P;Ae;Ae=we(Ae))ie++;for(;0<F-ie;)j=we(j),F--;for(;0<ie-F;)P=we(P),ie--;for(;F--;){if(j===P||P!==null&&j===P.alternate){we=j;break t}j=we(j),P=we(P)}we=null}else we=null;W!==null&&t_(ae,Q,W,we,!1),_e!==null&&ot!==null&&t_(ae,ot,_e,we,!0)}}e:{if(Q=G?wn(G):window,W=Q.nodeName&&Q.nodeName.toLowerCase(),W==="select"||W==="input"&&Q.type==="file")var Ke=_g;else if(gg(Q))if(vg)Ke=YT;else{Ke=GT;var Se=FT}else W=Q.nodeName,!W||W.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?G&&Ia(G.elementType)&&(Ke=_g):Ke=$T;if(Ke&&(Ke=Ke(t,G))){yg(ae,Ke,a,ee);break e}Se&&Se(t,Q,G),t==="focusout"&&G&&Q.type==="number"&&G.memoizedProps.value!=null&&Wo(Q,"number",Q.value)}switch(Se=G?wn(G):window,t){case"focusin":(gg(Se)||Se.contentEditable==="true")&&(Pa=Se,Ad=G,cl=null);break;case"focusout":cl=Ad=Pa=null;break;case"mousedown":wd=!0;break;case"contextmenu":case"mouseup":case"dragend":wd=!1,Rg(ae,a,ee);break;case"selectionchange":if(KT)break;case"keydown":case"keyup":Rg(ae,a,ee)}var ke;if(Je)e:{switch(t){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Va?Gs(t,a)&&(Be="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Be="onCompositionStart");Be&&(Li&&a.locale!=="ko"&&(Va||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Va&&(ke=nl()):(Ni=ee,tl="value"in Ni?Ni.value:Ni.textContent,Va=!0)),Se=qu(G,Be),0<Se.length&&(Be=new ki(Be,t,null,a,ee),ae.push({event:Be,listeners:Se}),ke?Be.data=ke:(ke=La(a),ke!==null&&(Be.data=ke)))),(ke=Hn?zT(t,a):BT(t,a))&&(Be=qu(G,"onBeforeInput"),0<Be.length&&(Se=new ki("onBeforeInput","beforeinput",null,a,ee),ae.push({event:Se,listeners:Be}),Se.data=ke)),O1(ae,t,G,a,ee)}Z0(ae,i)})}function kl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function qu(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,f=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||f===null||(h=ri(t,a),h!=null&&l.unshift(kl(t,h,f)),h=ri(t,i),h!=null&&l.push(kl(t,h,f))),t.tag===3)return l;t=t.return}return[]}function V1(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function t_(t,i,a,l,h){for(var f=i._reactName,_=[];a!==null&&a!==l;){var T=a,k=T.alternate,G=T.stateNode;if(T=T.tag,k!==null&&k===l)break;T!==5&&T!==26&&T!==27||G===null||(k=G,h?(G=ri(a,f),G!=null&&_.unshift(kl(a,G,k))):h||(G=ri(a,f),G!=null&&_.push(kl(a,G,k)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var P1=/\r\n?/g,U1=/\u0000|\uFFFD/g;function n_(t){return(typeof t=="string"?t:""+t).replace(P1,`
`).replace(U1,"")}function i_(t,i){return i=n_(i),n_(t)===i}function at(t,i,a,l,h,f){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||gn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&gn(t,""+l);break;case"className":xn(t,"class",l);break;case"tabIndex":xn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":xn(t,a,l);break;case"style":Zo(t,l,f);break;case"data":if(i!=="object"){xn(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(i!=="input"&&at(t,i,"name",h.name,h,null),at(t,i,"formEncType",h.formEncType,h,null),at(t,i,"formMethod",h.formMethod,h,null),at(t,i,"formTarget",h.formTarget,h,null)):(at(t,i,"encType",h.encType,h,null),at(t,i,"method",h.method,h,null),at(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Da(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=ii);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Da(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Ra(t,"popover",l);break;case"xlinkActuate":It(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":It(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":It(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":It(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":It(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":It(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":It(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":It(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":It(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ra(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=qc.get(a)||a,Ra(t,a,l))}}function Wf(t,i,a,l,h,f){switch(a){case"style":Zo(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?gn(t,l):(typeof l=="number"||typeof l=="bigint")&&gn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=ii);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$o.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),f=t[Bt]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(i,f,h),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ra(t,a,l)}}}function Wt(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,h=!1,f;for(f in a)if(a.hasOwnProperty(f)){var _=a[f];if(_!=null)switch(f){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:at(t,i,f,_,a,null)}}h&&at(t,i,"srcSet",a.srcSet,a,null),l&&at(t,i,"src",a.src,a,null);return;case"input":je("invalid",t);var T=f=_=h=null,k=null,G=null;for(l in a)if(a.hasOwnProperty(l)){var ee=a[l];if(ee!=null)switch(l){case"name":h=ee;break;case"type":_=ee;break;case"checked":k=ee;break;case"defaultChecked":G=ee;break;case"value":f=ee;break;case"defaultValue":T=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(s(137,i));break;default:at(t,i,l,ee,a,null)}}jc(t,f,T,k,G,_,h,!1);return;case"select":je("invalid",t),l=_=f=null;for(h in a)if(a.hasOwnProperty(h)&&(T=a[h],T!=null))switch(h){case"value":f=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:at(t,i,h,T,a,null)}i=f,a=_,t.multiple=!!l,i!=null?Nr(t,!!l,i,!1):a!=null&&Nr(t,!!l,a,!0);return;case"textarea":je("invalid",t),f=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":h=T;break;case"children":f=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(s(91));break;default:at(t,i,_,T,a,null)}Or(t,l,h,f);return;case"option":for(k in a)if(a.hasOwnProperty(k)&&(l=a[k],l!=null))switch(k){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:at(t,i,k,l,a,null)}return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Ml.length;l++)je(Ml[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(G in a)if(a.hasOwnProperty(G)&&(l=a[G],l!=null))switch(G){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:at(t,i,G,l,a,null)}return;default:if(Ia(i)){for(ee in a)a.hasOwnProperty(ee)&&(l=a[ee],l!==void 0&&Wf(t,i,ee,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&at(t,i,T,l,a,null))}function j1(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,f=null,_=null,T=null,k=null,G=null,ee=null;for(W in a){var ae=a[W];if(a.hasOwnProperty(W)&&ae!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":k=ae;default:l.hasOwnProperty(W)||at(t,i,W,null,l,ae)}}for(var Q in l){var W=l[Q];if(ae=a[Q],l.hasOwnProperty(Q)&&(W!=null||ae!=null))switch(Q){case"type":f=W;break;case"name":h=W;break;case"checked":G=W;break;case"defaultChecked":ee=W;break;case"value":_=W;break;case"defaultValue":T=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,i));break;default:W!==ae&&at(t,i,Q,W,l,ae)}}Ca(t,_,T,k,G,ee,f,h);return;case"select":W=_=T=Q=null;for(f in a)if(k=a[f],a.hasOwnProperty(f)&&k!=null)switch(f){case"value":break;case"multiple":W=k;default:l.hasOwnProperty(f)||at(t,i,f,null,l,k)}for(h in l)if(f=l[h],k=a[h],l.hasOwnProperty(h)&&(f!=null||k!=null))switch(h){case"value":Q=f;break;case"defaultValue":T=f;break;case"multiple":_=f;default:f!==k&&at(t,i,h,f,l,k)}i=T,a=_,l=W,Q!=null?Nr(t,!!a,Q,!1):!!l!=!!a&&(i!=null?Nr(t,!!a,i,!0):Nr(t,!!a,a?[]:"",!1));return;case"textarea":W=Q=null;for(T in a)if(h=a[T],a.hasOwnProperty(T)&&h!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:at(t,i,T,null,l,h)}for(_ in l)if(h=l[_],f=a[_],l.hasOwnProperty(_)&&(h!=null||f!=null))switch(_){case"value":Q=h;break;case"defaultValue":W=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==f&&at(t,i,_,h,l,f)}zc(t,Q,W);return;case"option":for(var _e in a)if(Q=a[_e],a.hasOwnProperty(_e)&&Q!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:at(t,i,_e,null,l,Q)}for(k in l)if(Q=l[k],W=a[k],l.hasOwnProperty(k)&&Q!==W&&(Q!=null||W!=null))switch(k){case"selected":t.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:at(t,i,k,Q,l,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)Q=a[we],a.hasOwnProperty(we)&&Q!=null&&!l.hasOwnProperty(we)&&at(t,i,we,null,l,Q);for(G in l)if(Q=l[G],W=a[G],l.hasOwnProperty(G)&&Q!==W&&(Q!=null||W!=null))switch(G){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,i));break;default:at(t,i,G,Q,l,W)}return;default:if(Ia(i)){for(var ot in a)Q=a[ot],a.hasOwnProperty(ot)&&Q!==void 0&&!l.hasOwnProperty(ot)&&Wf(t,i,ot,void 0,l,Q);for(ee in l)Q=l[ee],W=a[ee],!l.hasOwnProperty(ee)||Q===W||Q===void 0&&W===void 0||Wf(t,i,ee,Q,l,W);return}}for(var j in a)Q=a[j],a.hasOwnProperty(j)&&Q!=null&&!l.hasOwnProperty(j)&&at(t,i,j,null,l,Q);for(ae in l)Q=l[ae],W=a[ae],!l.hasOwnProperty(ae)||Q===W||Q==null&&W==null||at(t,i,ae,Q,l,W)}function r_(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function z1(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],f=h.transferSize,_=h.initiatorType,T=h.duration;if(f&&T&&r_(_)){for(_=0,T=h.responseEnd,l+=1;l<a.length;l++){var k=a[l],G=k.startTime;if(G>T)break;var ee=k.transferSize,ae=k.initiatorType;ee&&r_(ae)&&(k=k.responseEnd,_+=ee*(k<T?1:(T-G)/(k-G)))}if(--l,i+=8*(f+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Jf=null,Zf=null;function Hu(t){return t.nodeType===9?t:t.ownerDocument}function s_(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function a_(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function em(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var tm=null;function B1(){var t=window.event;return t&&t.type==="popstate"?t===tm?!1:(tm=t,!0):(tm=null,!1)}var o_=typeof setTimeout=="function"?setTimeout:void 0,q1=typeof clearTimeout=="function"?clearTimeout:void 0,l_=typeof Promise=="function"?Promise:void 0,H1=typeof queueMicrotask=="function"?queueMicrotask:typeof l_<"u"?function(t){return l_.resolve(null).then(t).catch(F1)}:o_;function F1(t){setTimeout(function(){throw t})}function ts(t){return t==="head"}function c_(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),uo(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")Ll(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,Ll(a);for(var f=a.firstChild;f;){var _=f.nextSibling,T=f.nodeName;f[Ai]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&f.rel.toLowerCase()==="stylesheet"||a.removeChild(f),f=_}}else a==="body"&&Ll(t.ownerDocument.body);a=h}while(a);uo(i)}function u_(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function nm(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":nm(a),xa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function G1(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Ai])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var f=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=Xn(t.nextSibling),t===null)break}return null}function $1(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=Xn(t.nextSibling),t===null))return null;return t}function h_(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=Xn(t.nextSibling),t===null))return null;return t}function im(t){return t.data==="$?"||t.data==="$~"}function rm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Y1(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function Xn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var sm=null;function d_(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return Xn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function f_(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function m_(t,i,a){switch(i=Hu(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ll(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);xa(t)}var Wn=new Map,p_=new Set;function Fu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var _r=z.d;z.d={f:Q1,r:K1,D:X1,C:W1,L:J1,m:Z1,X:tA,S:eA,M:nA};function Q1(){var t=_r.f(),i=Lu();return t||i}function K1(t){var i=zn(t);i!==null&&i.tag===5&&i.type==="form"?Oy(i):_r.r(t)}var oo=typeof document>"u"?null:document;function g_(t,i,a){var l=oo;if(l&&typeof i=="string"&&i){var h=pn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),p_.has(h)||(p_.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),Wt(i,"link",t),Ct(i),l.head.appendChild(i)))}}function X1(t){_r.D(t),g_("dns-prefetch",t,null)}function W1(t,i){_r.C(t,i),g_("preconnect",t,i)}function J1(t,i,a){_r.L(t,i,a);var l=oo;if(l&&t&&i){var h='link[rel="preload"][as="'+pn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+pn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+pn(a.imageSizes)+'"]')):h+='[href="'+pn(t)+'"]';var f=h;switch(i){case"style":f=lo(t);break;case"script":f=co(t)}Wn.has(f)||(t=b({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Wn.set(f,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Vl(f))||i==="script"&&l.querySelector(Pl(f))||(i=l.createElement("link"),Wt(i,"link",t),Ct(i),l.head.appendChild(i)))}}function Z1(t,i){_r.m(t,i);var a=oo;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+pn(l)+'"][href="'+pn(t)+'"]',f=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=co(t)}if(!Wn.has(f)&&(t=b({rel:"modulepreload",href:t},i),Wn.set(f,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Pl(f)))return}l=a.createElement("link"),Wt(l,"link",t),Ct(l),a.head.appendChild(l)}}}function eA(t,i,a){_r.S(t,i,a);var l=oo;if(l&&t){var h=xi(l).hoistableStyles,f=lo(t);i=i||"default";var _=h.get(f);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(Vl(f)))T.loading=5;else{t=b({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Wn.get(f))&&am(t,a);var k=_=l.createElement("link");Ct(k),Wt(k,"link",t),k._p=new Promise(function(G,ee){k.onload=G,k.onerror=ee}),k.addEventListener("load",function(){T.loading|=1}),k.addEventListener("error",function(){T.loading|=2}),T.loading|=4,Gu(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},h.set(f,_)}}}function tA(t,i){_r.X(t,i);var a=oo;if(a&&t){var l=xi(a).hoistableScripts,h=co(t),f=l.get(h);f||(f=a.querySelector(Pl(h)),f||(t=b({src:t,async:!0},i),(i=Wn.get(h))&&om(t,i),f=a.createElement("script"),Ct(f),Wt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function nA(t,i){_r.M(t,i);var a=oo;if(a&&t){var l=xi(a).hoistableScripts,h=co(t),f=l.get(h);f||(f=a.querySelector(Pl(h)),f||(t=b({src:t,async:!0,type:"module"},i),(i=Wn.get(h))&&om(t,i),f=a.createElement("script"),Ct(f),Wt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(h,f))}}function y_(t,i,a,l){var h=(h=Ee.current)?Fu(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=lo(a.href),a=xi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=lo(a.href);var f=xi(h).hoistableStyles,_=f.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,_),(f=h.querySelector(Vl(t)))&&!f._p&&(_.instance=f,_.state.loading=5),Wn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Wn.set(t,a),f||iA(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=co(a),a=xi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function lo(t){return'href="'+pn(t)+'"'}function Vl(t){return'link[rel="stylesheet"]['+t+"]"}function __(t){return b({},t,{"data-precedence":t.precedence,precedence:null})}function iA(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),Wt(i,"link",a),Ct(i),t.head.appendChild(i))}function co(t){return'[src="'+pn(t)+'"]'}function Pl(t){return"script[async]"+t}function v_(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+pn(a.href)+'"]');if(l)return i.instance=l,Ct(l),l;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ct(l),Wt(l,"style",h),Gu(l,a.precedence,t),i.instance=l;case"stylesheet":h=lo(a.href);var f=t.querySelector(Vl(h));if(f)return i.state.loading|=4,i.instance=f,Ct(f),f;l=__(a),(h=Wn.get(h))&&am(l,h),f=(t.ownerDocument||t).createElement("link"),Ct(f);var _=f;return _._p=new Promise(function(T,k){_.onload=T,_.onerror=k}),Wt(f,"link",l),i.state.loading|=4,Gu(f,a.precedence,t),i.instance=f;case"script":return f=co(a.src),(h=t.querySelector(Pl(f)))?(i.instance=h,Ct(h),h):(l=a,(h=Wn.get(f))&&(l=b({},a),om(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),Ct(h),Wt(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Gu(l,a.precedence,t));return i.instance}function Gu(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,f=h,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)f=T;else if(f!==h)break}f?f.parentNode.insertBefore(t,f.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function am(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function om(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var $u=null;function E_(t,i,a){if($u===null){var l=new Map,h=$u=new Map;h.set(a,l)}else h=$u,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var f=a[h];if(!(f[Ai]||f[Rt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var _=f.getAttribute(i)||"";_=t+_;var T=l.get(_);T?T.push(f):l.set(_,[f])}}return l}function S_(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function rA(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return t=i.disabled,typeof i.precedence=="string"&&t==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function b_(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function sA(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=lo(l.href),f=i.querySelector(Vl(h));if(f){i=f._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Yu.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=f,Ct(f);return}f=i.ownerDocument||i,l=__(l),(h=Wn.get(h))&&am(l,h),f=f.createElement("link"),Ct(f);var _=f;_._p=new Promise(function(T,k){_.onload=T,_.onerror=k}),Wt(f,"link",l),a.instance=f}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Yu.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var lm=0;function aA(t,i){return t.stylesheets&&t.count===0&&Ku(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Ku(t,t.stylesheets),t.unsuspend){var f=t.unsuspend;t.unsuspend=null,f()}},6e4+i);0<t.imgBytes&&lm===0&&(lm=62500*z1());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Ku(t,t.stylesheets),t.unsuspend)){var f=t.unsuspend;t.unsuspend=null,f()}},(t.imgBytes>lm?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Yu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ku(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Qu=null;function Ku(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Qu=new Map,i.forEach(oA,t),Qu=null,Yu.call(t))}function oA(t,i){if(!(i.state.loading&4)){var a=Qu.get(t);if(a)var l=a.get(null);else{a=new Map,Qu.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<h.length;f++){var _=h[f];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),f=a.get(_)||l,f===l&&a.set(null,h),a.set(_,h),this.count++,l=Yu.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),f?f.parentNode.insertBefore(h,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Ul={$$typeof:ne,Provider:null,Consumer:null,_currentValue:J,_currentValue2:J,_threadCount:0};function lA(t,i,a,l,h,f,_,T,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bi(0),this.hiddenUpdates=bi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=f,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function T_(t,i,a,l,h,f,_,T,k,G,ee,ae){return t=new lA(t,i,a,_,k,G,ee,ae,T),i=1,f===!0&&(i|=24),f=Cn(3,null,null,i),t.current=f,f.stateNode=t,i=zd(),i.refCount++,t.pooledCache=i,i.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:i},Fd(f),t}function A_(t){return t?(t=za,t):za}function w_(t,i,a,l,h,f){h=A_(h),l.context===null?l.context=h:l.pendingContext=h,l=Fr(i),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Gr(t,l,i),a!==null&&(Sn(a,t,i),gl(a,t,i))}function x_(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function cm(t,i){x_(t,i),(t=t.alternate)&&x_(t,i)}function R_(t){if(t.tag===13||t.tag===31){var i=Qs(t,67108864);i!==null&&Sn(i,t,67108864),cm(t,67108864)}}function C_(t){if(t.tag===13||t.tag===31){var i=Mn();i=Vs(i);var a=Qs(t,i);a!==null&&Sn(a,t,i),cm(t,i)}}var Xu=!0;function cA(t,i,a,l){var h=M.T;M.T=null;var f=z.p;try{z.p=2,um(t,i,a,l)}finally{z.p=f,M.T=h}}function uA(t,i,a,l){var h=M.T;M.T=null;var f=z.p;try{z.p=8,um(t,i,a,l)}finally{z.p=f,M.T=h}}function um(t,i,a,l){if(Xu){var h=hm(l);if(h===null)Xf(t,i,l,Wu,a),D_(t,l);else if(dA(h,t,i,a,l))l.stopPropagation();else if(D_(t,l),i&4&&-1<hA.indexOf(t)){for(;h!==null;){var f=zn(h);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var _=Ei(f.pendingLanes);if(_!==0){var T=f;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var k=1<<31-Et(_);T.entanglements[1]|=k,_&=~k}ji(f),(Ze&6)===0&&(Mu=un()+500,Ol(0))}}break;case 31:case 13:T=Qs(f,2),T!==null&&Sn(T,f,2),Lu(),cm(f,2)}if(f=hm(l),f===null&&Xf(t,i,l,Wu,a),f===h)break;h=f}h!==null&&l.stopPropagation()}else Xf(t,i,l,null,a)}}function hm(t){return t=Bn(t),dm(t)}var Wu=null;function dm(t){if(Wu=null,t=wi(t),t!==null){var i=c(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=d(i),t!==null)return t;t=null}else if(a===31){if(t=y(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return Wu=t,null}function I_(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Os()){case Bo:return 2;case qo:return 8;case Ir:case yd:return 32;case Ic:return 268435456;default:return 32}default:return 32}}var fm=!1,ns=null,is=null,rs=null,jl=new Map,zl=new Map,ss=[],hA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function D_(t,i){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":rs=null;break;case"pointerover":case"pointerout":jl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":zl.delete(i.pointerId)}}function Bl(t,i,a,l,h,f){return t===null||t.nativeEvent!==f?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[h]},i!==null&&(i=zn(i),i!==null&&R_(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function dA(t,i,a,l,h){switch(i){case"focusin":return ns=Bl(ns,t,i,a,l,h),!0;case"dragenter":return is=Bl(is,t,i,a,l,h),!0;case"mouseover":return rs=Bl(rs,t,i,a,l,h),!0;case"pointerover":var f=h.pointerId;return jl.set(f,Bl(jl.get(f)||null,t,i,a,l,h)),!0;case"gotpointercapture":return f=h.pointerId,zl.set(f,Bl(zl.get(f)||null,t,i,a,l,h)),!0}return!1}function N_(t){var i=wi(t.target);if(i!==null){var a=c(i);if(a!==null){if(i=a.tag,i===13){if(i=d(a),i!==null){t.blockedOn=i,ti(t.priority,function(){C_(a)});return}}else if(i===31){if(i=y(a),i!==null){t.blockedOn=i,ti(t.priority,function(){C_(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ju(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=hm(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);el=l,a.target.dispatchEvent(l),el=null}else return i=zn(a),i!==null&&R_(i),t.blockedOn=a,!1;i.shift()}return!0}function O_(t,i,a){Ju(t)&&a.delete(i)}function fA(){fm=!1,ns!==null&&Ju(ns)&&(ns=null),is!==null&&Ju(is)&&(is=null),rs!==null&&Ju(rs)&&(rs=null),jl.forEach(O_),zl.forEach(O_)}function Zu(t,i){t.blockedOn===i&&(t.blockedOn=null,fm||(fm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,fA)))}var eh=null;function M_(t){eh!==t&&(eh=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){eh===t&&(eh=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(dm(l||a)===null)continue;break}var f=zn(a);f!==null&&(t.splice(i,3),i-=3,hf(f,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function uo(t){function i(k){return Zu(k,t)}ns!==null&&Zu(ns,t),is!==null&&Zu(is,t),rs!==null&&Zu(rs,t),jl.forEach(i),zl.forEach(i);for(var a=0;a<ss.length;a++){var l=ss[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ss.length&&(a=ss[0],a.blockedOn===null);)N_(a),a.blockedOn===null&&ss.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],f=a[l+1],_=h[Bt]||null;if(typeof f=="function")_||M_(a);else if(_){var T=null;if(f&&f.hasAttribute("formAction")){if(h=f,_=f[Bt]||null)T=_.formAction;else if(dm(h)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),M_(a)}}}function k_(){function t(f){f.canIntercept&&f.info==="react-transition"&&f.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var f=navigation.currentEntry;f&&f.url!=null&&navigation.navigate(f.url,{state:f.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function mm(t){this._internalRoot=t}th.prototype.render=mm.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=Mn();w_(a,l,t,i,null,null)},th.prototype.unmount=mm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;w_(t.current,2,null,t,null,null),Lu(),i[Ti]=null}};function th(t){this._internalRoot=t}th.prototype.unstable_scheduleHydration=function(t){if(t){var i=Lc();t={blockedOn:null,target:t,priority:i};for(var a=0;a<ss.length&&i!==0&&i<ss[a].priority;a++);ss.splice(a,0,t),a===0&&N_(t)}};var L_=e.version;if(L_!=="19.2.0")throw Error(s(527,L_,"19.2.0"));z.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=m(i),t=t!==null?S(t):null,t=t===null?null:t.stateNode,t};var mA={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:M,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{Zn=nh.inject(mA),$t=nh}catch{}}return Hl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=qy,f=Hy,_=Fy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(f=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=T_(t,1,!1,null,null,a,l,null,h,f,_,k_),t[Ti]=i.current,Kf(t),new mm(i)},Hl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",f=qy,_=Hy,T=Fy,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),i=T_(t,1,!0,i,a??null,l,h,k,f,_,T,k_),i.context=A_(null),a=i.current,l=Mn(),l=Vs(l),h=Fr(l),h.callback=null,Gr(a,h,l),a=l,i.current.lanes=a,ks(i,a),ji(i),t[Ti]=i.current,Kf(t),new th(i)},Hl.version="19.2.0",Hl}var G_;function wA(){if(G_)return ym.exports;G_=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),ym.exports=AA(),ym.exports}var xA=wA();const RA=()=>{};var $_={};const YE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},CA=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],d=r[n++],y=r[n++],g=((o&7)<<18|(c&63)<<12|(d&63)<<6|y&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const c=r[n++],d=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},QE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const c=r[o],d=o+1<r.length,y=d?r[o+1]:0,g=o+2<r.length,m=g?r[o+2]:0,S=c>>2,b=(c&3)<<4|y>>4;let I=(y&15)<<2|m>>6,V=m&63;g||(V=64,d||(I=64)),s.push(n[S],n[b],n[I],n[V])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(YE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):CA(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],y=o<r.length?n[r.charAt(o)]:0;++o;const m=o<r.length?n[r.charAt(o)]:64;++o;const b=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||y==null||m==null||b==null)throw new IA;const I=c<<2|y>>4;if(s.push(I),m!==64){const V=y<<4&240|m>>2;if(s.push(V),b!==64){const U=m<<6&192|b;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class IA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const DA=function(r){const e=YE(r);return QE.encodeByteArray(e,!0)},wh=function(r){return DA(r).replace(/\./g,"")},KE=function(r){try{return QE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function NA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const OA=()=>NA().__FIREBASE_DEFAULTS__,MA=()=>{if(typeof process>"u"||typeof $_>"u")return;const r=$_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},kA=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&KE(r[1]);return e&&JSON.parse(e)},Fh=()=>{try{return RA()||OA()||MA()||kA()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},XE=r=>Fh()?.emulatorHosts?.[r],LA=r=>{const e=XE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},WE=()=>Fh()?.config,JE=r=>Fh()?.[`_${r}`];class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Oo(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ZE(r){return(await fetch(r,{credentials:"include"})).ok}function PA(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[wh(JSON.stringify(n)),wh(JSON.stringify(d)),""].join(".")}const ec={};function UA(){const r={prod:[],emulator:[]};for(const e of Object.keys(ec))ec[e]?r.emulator.push(e):r.prod.push(e);return r}function jA(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Y_=!1;function eS(r,e){if(typeof window>"u"||typeof document>"u"||!Oo(window.location.host)||ec[r]===e||ec[r]||Y_)return;ec[r]=e;function n(I){return`__firebase__banner__${I}`}const s="__firebase__banner",c=UA().prod.length>0;function d(){const I=document.getElementById(s);I&&I.remove()}function y(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,V){I.setAttribute("width","24"),I.setAttribute("id",V),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function m(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{Y_=!0,d()},I}function S(I,V){I.setAttribute("id",V),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function b(){const I=jA(s),V=n("text"),U=document.getElementById(V)||document.createElement("span"),q=n("learnmore"),$=document.getElementById(q)||document.createElement("a"),K=n("preprendIcon"),re=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const ne=I.element;y(ne),S($,q);const pe=m();g(re,K),ne.append(re,U,$,pe),document.body.appendChild(ne)}c?(U.innerText="Preview backend disconnected.",re.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(re.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}function ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ln())}function BA(){const r=Fh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function HA(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function FA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GA(){const r=ln();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function $A(){return!BA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YA(){try{return typeof indexedDB=="object"}catch{return!1}}function QA(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const KA="FirebaseError";class Cr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=KA,Object.setPrototypeOf(this,Cr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,yc.prototype.create)}}class yc{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?XA(c,s):"Error",y=`${this.serviceName}: ${d} (${o}).`;return new Cr(o,y,s)}}function XA(r,e){return r.replace(WA,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const WA=/\{\$([^}]+)}/g;function JA(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Tr(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=r[o],d=e[o];if(Q_(c)&&Q_(d)){if(!Tr(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Q_(r){return r!==null&&typeof r=="object"}function _c(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ZA(r,e){const n=new ew(r,e);return n.subscribe.bind(n)}class ew{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");tw(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Sm),o.error===void 0&&(o.error=Sm),o.complete===void 0&&(o.complete=Sm);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tw(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Sm(){}function wt(r){return r&&r._delegate?r._delegate:r}class pa{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const oa="[DEFAULT]";class nw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new VA;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rw(e))try{this.getOrInitializeService({instanceIdentifier:oa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=oa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oa){return this.instances.has(e)}getOptions(e=oa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(c);s===y&&d.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const c=this.instances.get(s);return c&&e(c,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=oa){return this.component?this.component.multipleInstances?e:oa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(r){return r===oa?void 0:r}function rw(r){return r.instantiationMode==="EAGER"}class sw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var qe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(qe||(qe={}));const aw={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},ow=qe.INFO,lw={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},cw=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=lw[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fp{constructor(e){this.name=e,this._logLevel=ow,this._logHandler=cw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const uw=(r,e)=>e.some(n=>r instanceof n);let K_,X_;function hw(){return K_||(K_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dw(){return X_||(X_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const tS=new WeakMap,zm=new WeakMap,nS=new WeakMap,bm=new WeakMap,mp=new WeakMap;function fw(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",d)},c=()=>{n(_s(r.result)),o()},d=()=>{s(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&tS.set(n,r)}).catch(()=>{}),mp.set(e,r),e}function mw(r){if(zm.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",d),r.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",d),r.addEventListener("abort",d)});zm.set(r,e)}let Bm={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return zm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||nS.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _s(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function pw(r){Bm=r(Bm)}function gw(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Tm(this),e,...n);return nS.set(s,e.sort?e.sort():[e]),_s(s)}:dw().includes(r)?function(...e){return r.apply(Tm(this),e),_s(tS.get(this))}:function(...e){return _s(r.apply(Tm(this),e))}}function yw(r){return typeof r=="function"?gw(r):(r instanceof IDBTransaction&&mw(r),uw(r,hw())?new Proxy(r,Bm):r)}function _s(r){if(r instanceof IDBRequest)return fw(r);if(bm.has(r))return bm.get(r);const e=yw(r);return e!==r&&(bm.set(r,e),mp.set(e,r)),e}const Tm=r=>mp.get(r);function _w(r,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(r,e),y=_s(d);return s&&d.addEventListener("upgradeneeded",g=>{s(_s(d.result),g.oldVersion,g.newVersion,_s(d.transaction),g)}),n&&d.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),y.then(g=>{c&&g.addEventListener("close",()=>c()),o&&g.addEventListener("versionchange",m=>o(m.oldVersion,m.newVersion,m))}).catch(()=>{}),y}const vw=["get","getKey","getAll","getAllKeys","count"],Ew=["put","add","delete","clear"],Am=new Map;function W_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Am.get(e))return Am.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=Ew.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vw.includes(n)))return;const c=async function(d,...y){const g=this.transaction(d,o?"readwrite":"readonly");let m=g.store;return s&&(m=m.index(y.shift())),(await Promise.all([m[n](...y),o&&g.done]))[0]};return Am.set(e,c),c}pw(r=>({...r,get:(e,n,s)=>W_(e,n)||r.get(e,n,s),has:(e,n)=>!!W_(e,n)||r.has(e,n)}));class Sw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(bw(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function bw(r){return r.getComponent()?.type==="VERSION"}const qm="@firebase/app",J_="0.14.6";const Ar=new fp("@firebase/app"),Tw="@firebase/app-compat",Aw="@firebase/analytics-compat",ww="@firebase/analytics",xw="@firebase/app-check-compat",Rw="@firebase/app-check",Cw="@firebase/auth",Iw="@firebase/auth-compat",Dw="@firebase/database",Nw="@firebase/data-connect",Ow="@firebase/database-compat",Mw="@firebase/functions",kw="@firebase/functions-compat",Lw="@firebase/installations",Vw="@firebase/installations-compat",Pw="@firebase/messaging",Uw="@firebase/messaging-compat",jw="@firebase/performance",zw="@firebase/performance-compat",Bw="@firebase/remote-config",qw="@firebase/remote-config-compat",Hw="@firebase/storage",Fw="@firebase/storage-compat",Gw="@firebase/firestore",$w="@firebase/ai",Yw="@firebase/firestore-compat",Qw="firebase",Kw="12.6.0";const Hm="[DEFAULT]",Xw={[qm]:"fire-core",[Tw]:"fire-core-compat",[ww]:"fire-analytics",[Aw]:"fire-analytics-compat",[Rw]:"fire-app-check",[xw]:"fire-app-check-compat",[Cw]:"fire-auth",[Iw]:"fire-auth-compat",[Dw]:"fire-rtdb",[Nw]:"fire-data-connect",[Ow]:"fire-rtdb-compat",[Mw]:"fire-fn",[kw]:"fire-fn-compat",[Lw]:"fire-iid",[Vw]:"fire-iid-compat",[Pw]:"fire-fcm",[Uw]:"fire-fcm-compat",[jw]:"fire-perf",[zw]:"fire-perf-compat",[Bw]:"fire-rc",[qw]:"fire-rc-compat",[Hw]:"fire-gcs",[Fw]:"fire-gcs-compat",[Gw]:"fire-fst",[Yw]:"fire-fst-compat",[$w]:"fire-vertex","fire-js":"fire-js",[Qw]:"fire-js-all"};const xh=new Map,Ww=new Map,Fm=new Map;function Z_(r,e){try{r.container.addComponent(e)}catch(n){Ar.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function So(r){const e=r.name;if(Fm.has(e))return Ar.debug(`There were multiple attempts to register component ${e}.`),!1;Fm.set(e,r);for(const n of xh.values())Z_(n,r);for(const n of Ww.values())Z_(n,r);return!0}function pp(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function hi(r){return r==null?!1:r.settings!==void 0}const Jw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vs=new yc("app","Firebase",Jw);class Zw{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new pa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vs.create("app-deleted",{appName:this._name})}}const Mo=Kw;function iS(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Hm,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw vs.create("bad-app-name",{appName:String(o)});if(n||(n=WE()),!n)throw vs.create("no-options");const c=xh.get(o);if(c){if(Tr(n,c.options)&&Tr(s,c.config))return c;throw vs.create("duplicate-app",{appName:o})}const d=new sw(o);for(const g of Fm.values())d.addComponent(g);const y=new Zw(n,s,d);return xh.set(o,y),y}function rS(r=Hm){const e=xh.get(r);if(!e&&r===Hm&&WE())return iS();if(!e)throw vs.create("no-app",{appName:r});return e}function Es(r,e,n){let s=Xw[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const d=[`Unable to register library "${s}" with version "${e}":`];o&&d.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&c&&d.push("and"),c&&d.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ar.warn(d.join(" "));return}So(new pa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const ex="firebase-heartbeat-database",tx=1,oc="firebase-heartbeat-store";let wm=null;function sS(){return wm||(wm=_w(ex,tx,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(oc)}catch(n){console.warn(n)}}}}).catch(r=>{throw vs.create("idb-open",{originalErrorMessage:r.message})})),wm}async function nx(r){try{const n=(await sS()).transaction(oc),s=await n.objectStore(oc).get(aS(r));return await n.done,s}catch(e){if(e instanceof Cr)Ar.warn(e.message);else{const n=vs.create("idb-get",{originalErrorMessage:e?.message});Ar.warn(n.message)}}}async function ev(r,e){try{const s=(await sS()).transaction(oc,"readwrite");await s.objectStore(oc).put(e,aS(r)),await s.done}catch(n){if(n instanceof Cr)Ar.warn(n.message);else{const s=vs.create("idb-set",{originalErrorMessage:n?.message});Ar.warn(s.message)}}}function aS(r){return`${r.name}!${r.options.appId}`}const ix=1024,rx=30;class sx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ox(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=tv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>rx){const o=lx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Ar.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=tv(),{heartbeatsToSend:n,unsentEntries:s}=ax(this._heartbeatsCache.heartbeats),o=wh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Ar.warn(e),""}}}function tv(){return new Date().toISOString().substring(0,10)}function ax(r,e=ix){const n=[];let s=r.slice();for(const o of r){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),nv(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),nv(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ox{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YA()?QA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return ev(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nv(r){return wh(JSON.stringify({version:2,heartbeats:r})).length}function lx(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function cx(r){So(new pa("platform-logger",e=>new Sw(e),"PRIVATE")),So(new pa("heartbeat",e=>new sx(e),"PRIVATE")),Es(qm,J_,r),Es(qm,J_,"esm2020"),Es("fire-js","")}cx("");function oS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ux=oS,lS=new yc("auth","Firebase",oS());const Rh=new fp("@firebase/auth");function hx(r,...e){Rh.logLevel<=qe.WARN&&Rh.warn(`Auth (${Mo}): ${r}`,...e)}function mh(r,...e){Rh.logLevel<=qe.ERROR&&Rh.error(`Auth (${Mo}): ${r}`,...e)}function Qi(r,...e){throw yp(r,...e)}function fi(r,...e){return yp(r,...e)}function gp(r,e,n){const s={...ux(),[e]:n};return new yc("auth","Firebase",s).create(e,{appName:r.name})}function da(r){return gp(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dx(r,e,n){const s=n;if(!(e instanceof s))throw s.name!==e.constructor.name&&Qi(r,"argument-error"),gp(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function yp(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return lS.create(r,...e)}function Re(r,e,...n){if(!r)throw yp(e,...n)}function Sr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw mh(e),new Error(e)}function wr(r,e){r||Sr(e)}function Gm(){return typeof self<"u"&&self.location?.href||""}function fx(){return iv()==="http:"||iv()==="https:"}function iv(){return typeof self<"u"&&self.location?.protocol||null}function mx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fx()||HA()||"connection"in navigator)?navigator.onLine:!0}function px(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class vc{constructor(e,n){this.shortDelay=e,this.longDelay=n,wr(n>e,"Short delay should be less than long delay!"),this.isMobile=zA()||FA()}get(){return mx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function _p(r,e){wr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class cS{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Sr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Sr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Sr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const gx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const yx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_x=new vc(3e4,6e4);function vp(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ko(r,e,n,s,o={}){return uS(r,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const y=_c({key:r.config.apiKey,...d}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const m={method:e,headers:g,...c};return qA()||(m.referrerPolicy="no-referrer"),r.emulatorConfig&&Oo(r.emulatorConfig.host)&&(m.credentials="include"),cS.fetch()(await hS(r,r.config.apiHost,n,y),m)})}async function uS(r,e,n){r._canInitEmulator=!1;const s={...gx,...e};try{const o=new Ex(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw ih(r,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const y=c.ok?d.errorMessage:d.error.message,[g,m]=y.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw ih(r,"credential-already-in-use",d);if(g==="EMAIL_EXISTS")throw ih(r,"email-already-in-use",d);if(g==="USER_DISABLED")throw ih(r,"user-disabled",d);const S=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw gp(r,S,m);Qi(r,S)}}catch(o){if(o instanceof Cr)throw o;Qi(r,"network-request-failed",{message:String(o)})}}async function vx(r,e,n,s,o={}){const c=await ko(r,e,n,s,o);return"mfaPendingCredential"in c&&Qi(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function hS(r,e,n,s){const o=`${e}${n}?${s}`,c=r,d=c.config.emulator?_p(r.config,o):`${r.config.apiScheme}://${o}`;return yx.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class Ex{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(fi(this.auth,"network-request-failed")),_x.get())})}}function ih(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=fi(r,e,s);return o.customData._tokenResponse=n,o}async function Sx(r,e){return ko(r,"POST","/v1/accounts:delete",e)}async function Ch(r,e){return ko(r,"POST","/v1/accounts:lookup",e)}function tc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bx(r,e=!1){const n=wt(r),s=await n.getIdToken(e),o=Ep(s);Re(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c?.sign_in_provider;return{claims:o,token:s,authTime:tc(xm(o.auth_time)),issuedAtTime:tc(xm(o.iat)),expirationTime:tc(xm(o.exp)),signInProvider:d||null,signInSecondFactor:c?.sign_in_second_factor||null}}function xm(r){return Number(r)*1e3}function Ep(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return mh("JWT malformed, contained fewer than 3 sections"),null;try{const o=KE(n);return o?JSON.parse(o):(mh("Failed to decode base64 JWT payload"),null)}catch(o){return mh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function rv(r){const e=Ep(r);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function lc(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Cr&&Tx(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function Tx({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class Ax{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class $m{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=tc(this.lastLoginAt),this.creationTime=tc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Ih(r){const e=r.auth,n=await r.getIdToken(),s=await lc(r,Ch(e,{idToken:n}));Re(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const c=o.providerUserInfo?.length?dS(o.providerUserInfo):[],d=xx(r.providerData,c),y=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!d?.length,m=y?g:!1,S={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:d,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:m};Object.assign(r,S)}async function wx(r){const e=wt(r);await Ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function xx(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function dS(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function Rx(r,e){const n=await uS(r,{},async()=>{const s=_c({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,d=await hS(r,o,"/v1/token",`key=${c}`),y=await r._getAdditionalHeaders();y["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:y,body:s};return r.emulatorConfig&&Oo(r.emulatorConfig.host)&&(g.credentials="include"),cS.fetch()(d,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Cx(r,e){return ko(r,"POST","/v2/accounts:revokeToken",vp(r,e))}class go{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const n=rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await Rx(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new go;return s&&(Re(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Re(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Re(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new go,this.toJSON())}_performRefresh(){return Sr("not implemented")}}function os(r,e){Re(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class di{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new Ax(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new $m(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await lc(this,this.stsTokenManager.getToken(this.auth,e));return Re(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bx(this,e)}reload(){return wx(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new di({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Ih(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hi(this.auth.app))return Promise.reject(da(this.auth));const e=await this.getIdToken();return await lc(this,Sx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,d=n.photoURL??void 0,y=n.tenantId??void 0,g=n._redirectEventId??void 0,m=n.createdAt??void 0,S=n.lastLoginAt??void 0,{uid:b,emailVerified:I,isAnonymous:V,providerData:U,stsTokenManager:q}=n;Re(b&&q,e,"internal-error");const $=go.fromJSON(this.name,q);Re(typeof b=="string",e,"internal-error"),os(s,e.name),os(o,e.name),Re(typeof I=="boolean",e,"internal-error"),Re(typeof V=="boolean",e,"internal-error"),os(c,e.name),os(d,e.name),os(y,e.name),os(g,e.name),os(m,e.name),os(S,e.name);const K=new di({uid:b,auth:e,email:o,emailVerified:I,displayName:s,isAnonymous:V,photoURL:d,phoneNumber:c,tenantId:y,stsTokenManager:$,createdAt:m,lastLoginAt:S});return U&&Array.isArray(U)&&(K.providerData=U.map(re=>({...re}))),g&&(K._redirectEventId=g),K}static async _fromIdTokenResponse(e,n,s=!1){const o=new go;o.updateFromServerResponse(n);const c=new di({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Ih(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Re(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?dS(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!c?.length,y=new go;y.updateFromIdToken(s);const g=new di({uid:o.localId,auth:e,stsTokenManager:y,isAnonymous:d}),m={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new $m(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!c?.length};return Object.assign(g,m),g}}const sv=new Map;function br(r){wr(r instanceof Function,"Expected a class definition");let e=sv.get(r);return e?(wr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,sv.set(r,e),e)}class fS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}fS.type="NONE";const av=fS;function ph(r,e,n){return`firebase:${r}:${e}:${n}`}class yo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=ph(this.userKey,o.apiKey,c),this.fullPersistenceKey=ph("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ch(this.auth,{idToken:e}).catch(()=>{});return n?di._fromGetAccountInfoResponse(this.auth,n,e):null}return di._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new yo(br(av),e,s);const o=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let c=o[0]||br(av);const d=ph(s,e.config.apiKey,e.name);let y=null;for(const m of n)try{const S=await m._get(d);if(S){let b;if(typeof S=="string"){const I=await Ch(e,{idToken:S}).catch(()=>{});if(!I)break;b=await di._fromGetAccountInfoResponse(e,I,S)}else b=di._fromJSON(e,S);m!==c&&(y=b),c=m;break}}catch{}const g=o.filter(m=>m._shouldAllowMigration);return!c._shouldAllowMigration||!g.length?new yo(c,e,s):(c=g[0],y&&await c._set(d,y.toJSON()),await Promise.all(n.map(async m=>{if(m!==c)try{await m._remove(d)}catch{}})),new yo(c,e,s))}}function ov(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vS(e))return"Blackberry";if(ES(e))return"Webos";if(pS(e))return"Safari";if((e.includes("chrome/")||gS(e))&&!e.includes("edge/"))return"Chrome";if(_S(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function mS(r=ln()){return/firefox\//i.test(r)}function pS(r=ln()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gS(r=ln()){return/crios\//i.test(r)}function yS(r=ln()){return/iemobile/i.test(r)}function _S(r=ln()){return/android/i.test(r)}function vS(r=ln()){return/blackberry/i.test(r)}function ES(r=ln()){return/webos/i.test(r)}function Sp(r=ln()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Ix(r=ln()){return Sp(r)&&!!window.navigator?.standalone}function Dx(){return GA()&&document.documentMode===10}function SS(r=ln()){return Sp(r)||_S(r)||ES(r)||vS(r)||/windows phone/i.test(r)||yS(r)}function bS(r,e=[]){let n;switch(r){case"Browser":n=ov(ln());break;case"Worker":n=`${ov(ln())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Mo}/${s}`}class Nx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,y)=>{try{const g=e(c);d(g)}catch(g){y(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function Ox(r,e={}){return ko(r,"GET","/v2/passwordPolicy",vp(r,e))}const Mx=6;class kx{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Mx,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}class Lx{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new lv(this),this.idTokenSubscription=new lv(this),this.beforeStateQueue=new Nx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await yo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ch(this,{idToken:e}),s=await di._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(hi(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(d,d))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=this.redirectUser?._redirectEventId,d=s?._redirectEventId,y=await this.tryRedirectSignIn(e);(!c||c===d)&&y?.user&&(s=y.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(c){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ih(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=px()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hi(this.app))return Promise.reject(da(this));const n=e?wt(e):null;return n&&Re(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hi(this.app)?Promise.reject(da(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hi(this.app)?Promise.reject(da(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Ox(this),n=new kx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new yc("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Cx(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;Re(n,this,"argument-error"),this.redirectPersistenceManager=await yo.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const y=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(y,this,"internal-error"),y.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{d=!0,g()}}else{const g=e.addObserver(n);return()=>{d=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=bS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(hi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&hx(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Gh(r){return wt(r)}class lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZA(n=>this.observer=n)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let bp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Vx(r){bp=r}function Px(r){return bp.loadJS(r)}function Ux(){return bp.gapiScript}function jx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}function zx(r,e){const n=pp(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Tr(c,e??{}))return o;Qi(o,"already-initialized")}return n.initialize({options:e})}function Bx(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(br);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function qx(r,e,n){const s=Gh(r);Re(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=TS(e),{host:d,port:y}=Hx(e),g=y===null?"":`:${y}`,m={url:`${c}//${d}${g}/`},S=Object.freeze({host:d,port:y,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Re(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Re(Tr(m,s.config.emulator)&&Tr(S,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=m,s.emulatorConfig=S,s.settings.appVerificationDisabledForTesting=!0,Oo(d)?(ZE(`${c}//${d}${g}`),eS("Auth",!0)):Fx()}function TS(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function Hx(r){const e=TS(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:cv(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:cv(d)}}}function cv(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function Fx(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class AS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Sr("not implemented")}_getIdTokenResponse(e){return Sr("not implemented")}_linkToIdToken(e,n){return Sr("not implemented")}_getReauthenticationResolver(e){return Sr("not implemented")}}async function _o(r,e){return vx(r,"POST","/v1/accounts:signInWithIdp",vp(r,e))}const Gx="http://localhost";class ga extends AS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ga(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Qi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...c}=n;if(!s||!o)return null;const d=new ga(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return _o(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,_o(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,_o(e,n)}buildRequest(){const e={requestUri:Gx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=_c(n)}return e}}class Tp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ec extends Tp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class hs extends Ec{constructor(){super("facebook.com")}static credential(e){return ga._fromParams({providerId:hs.PROVIDER_ID,signInMethod:hs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hs.credentialFromTaggedObject(e)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hs.credential(e.oauthAccessToken)}catch{return null}}}hs.FACEBOOK_SIGN_IN_METHOD="facebook.com";hs.PROVIDER_ID="facebook.com";class Er extends Ec{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ga._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Er.credential(n,s)}catch{return null}}}Er.GOOGLE_SIGN_IN_METHOD="google.com";Er.PROVIDER_ID="google.com";class ds extends Ec{constructor(){super("github.com")}static credential(e){return ga._fromParams({providerId:ds.PROVIDER_ID,signInMethod:ds.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ds.credentialFromTaggedObject(e)}static credentialFromError(e){return ds.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ds.credential(e.oauthAccessToken)}catch{return null}}}ds.GITHUB_SIGN_IN_METHOD="github.com";ds.PROVIDER_ID="github.com";class fs extends Ec{constructor(){super("twitter.com")}static credential(e,n){return ga._fromParams({providerId:fs.PROVIDER_ID,signInMethod:fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return fs.credentialFromTaggedObject(e)}static credentialFromError(e){return fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return fs.credential(n,s)}catch{return null}}}fs.TWITTER_SIGN_IN_METHOD="twitter.com";fs.PROVIDER_ID="twitter.com";class bo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await di._fromIdTokenResponse(e,s,o),d=uv(s);return new bo({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=uv(s);return new bo({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function uv(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Dh extends Cr{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Dh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Dh(e,n,s,o)}}function wS(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Dh._fromErrorAndOperation(r,c,e,s):c})}async function $x(r,e,n=!1){const s=await lc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return bo._forOperation(r,"link",s)}async function Yx(r,e,n=!1){const{auth:s}=r;if(hi(s.app))return Promise.reject(da(s));const o="reauthenticate";try{const c=await lc(r,wS(s,o,e,r),n);Re(c.idToken,s,"internal-error");const d=Ep(c.idToken);Re(d,s,"internal-error");const{sub:y}=d;return Re(r.uid===y,s,"user-mismatch"),bo._forOperation(r,o,c)}catch(c){throw c?.code==="auth/user-not-found"&&Qi(s,"user-mismatch"),c}}async function Qx(r,e,n=!1){if(hi(r.app))return Promise.reject(da(r));const s="signIn",o=await wS(r,s,e),c=await bo._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(c.user),c}function Kx(r,e,n,s){return wt(r).onIdTokenChanged(e,n,s)}function Xx(r,e,n){return wt(r).beforeAuthStateChanged(e,n)}function Wx(r,e,n,s){return wt(r).onAuthStateChanged(e,n,s)}function Jx(r){return wt(r).signOut()}const Nh="__sak";class xS{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nh,"1"),this.storage.removeItem(Nh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Zx=1e3,eR=10;class RS extends xS{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=SS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,y,g)=>{this.notifyListeners(d,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);Dx()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,eR):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},Zx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}RS.type="LOCAL";const tR=RS;class CS extends xS{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CS.type="SESSION";const IS=CS;function nR(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class $h{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new $h(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!d?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const y=Array.from(d).map(async m=>m(n.origin,c)),g=await nR(y);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}$h.receivers=[];function Ap(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class iR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((y,g)=>{const m=Ap("",20);o.port1.start();const S=setTimeout(()=>{g(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const I=b;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(S),c=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),y(I.data.response);break;default:clearTimeout(S),clearTimeout(c),g(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}function qi(){return window}function rR(r){qi().location.href=r}function DS(){return typeof qi().WorkerGlobalScope<"u"&&typeof qi().importScripts=="function"}async function sR(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aR(){return navigator?.serviceWorker?.controller||null}function oR(){return DS()?self:null}const NS="firebaseLocalStorageDb",lR=1,Oh="firebaseLocalStorage",OS="fbase_key";class Sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Yh(r,e){return r.transaction([Oh],e?"readwrite":"readonly").objectStore(Oh)}function cR(){const r=indexedDB.deleteDatabase(NS);return new Sc(r).toPromise()}function Ym(){const r=indexedDB.open(NS,lR);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Oh,{keyPath:OS})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Oh)?e(s):(s.close(),await cR(),e(await Ym()))})})}async function hv(r,e,n){const s=Yh(r,!0).put({[OS]:e,value:n});return new Sc(s).toPromise()}async function uR(r,e){const n=Yh(r,!1).get(e),s=await new Sc(n).toPromise();return s===void 0?null:s.value}function dv(r,e){const n=Yh(r,!0).delete(e);return new Sc(n).toPromise()}const hR=800,dR=3;class MS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ym(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>dR)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return DS()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=$h._getInstance(oR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sR(),!this.activeServiceWorker)return;this.sender=new iR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||aR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ym();return await hv(e,Nh,"1"),await dv(e,Nh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>hv(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>uR(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>dv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Yh(o,!1).getAll();return new Sc(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MS.type="LOCAL";const fR=MS;new vc(3e4,6e4);function kS(r,e){return e?br(e):(Re(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class wp extends AS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _o(e,this._buildIdpRequest())}_linkToIdToken(e,n){return _o(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return _o(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function mR(r){return Qx(r.auth,new wp(r),r.bypassAuthState)}function pR(r){const{auth:e,user:n}=r;return Re(n,e,"internal-error"),Yx(n,new wp(r),r.bypassAuthState)}async function gR(r){const{auth:e,user:n}=r;return Re(n,e,"internal-error"),$x(n,new wp(r),r.bypassAuthState)}class LS{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:y}=e;if(d){this.reject(d);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(y)(g))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return mR;case"linkViaPopup":case"linkViaRedirect":return gR;case"reauthViaPopup":case"reauthViaRedirect":return pR;default:Qi(this.auth,"internal-error")}}resolve(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yR=new vc(2e3,1e4);async function _R(r,e,n){if(hi(r.app))return Promise.reject(fi(r,"operation-not-supported-in-this-environment"));const s=Gh(r);dx(r,e,Tp);const o=kS(s,n);return new ca(s,"signInViaPopup",e,o).executeNotNull()}class ca extends LS{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,ca.currentPopupAction&&ca.currentPopupAction.cancel(),ca.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){wr(this.filter.length===1,"Popup operations only handle one event");const e=Ap();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(fi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ca.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,yR.get())};e()}}ca.currentPopupAction=null;const vR="pendingRedirect",gh=new Map;class ER extends LS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=gh.get(this.auth._key());if(!e){try{const s=await SR(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}gh.set(this.auth._key(),e)}return this.bypassAuthState||gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function SR(r,e){const n=AR(e),s=TR(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function bR(r,e){gh.set(r._key(),e)}function TR(r){return br(r._redirectPersistence)}function AR(r){return ph(vR,r.config.apiKey,r.name)}async function wR(r,e,n=!1){if(hi(r.app))return Promise.reject(da(r));const s=Gh(r),o=kS(s,e),d=await new ER(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}const xR=600*1e3;class RR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!VS(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(fi(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=xR&&this.cachedEventUids.clear(),this.cachedEventUids.has(fv(e))}saveEventToCache(e){this.cachedEventUids.add(fv(e)),this.lastProcessedEventTime=Date.now()}}function fv(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function VS({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function CR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VS(r);default:return!1}}async function IR(r,e={}){return ko(r,"GET","/v1/projects",e)}const DR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NR=/^https?/;async function OR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await IR(r);for(const n of e)try{if(MR(n))return}catch{}Qi(r,"unauthorized-domain")}function MR(r){const e=Gm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const d=new URL(r);return d.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!NR.test(n))return!1;if(DR.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const kR=new vc(3e4,6e4);function mv(){const r=qi().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function LR(r){return new Promise((e,n)=>{function s(){mv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mv(),n(fi(r,"network-request-failed"))},timeout:kR.get()})}if(qi().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(qi().gapi?.load)s();else{const o=jx("iframefcb");return qi()[o]=()=>{gapi.load?s():n(fi(r,"network-request-failed"))},Px(`${Ux()}?onload=${o}`).catch(c=>n(c))}}).catch(e=>{throw yh=null,e})}let yh=null;function VR(r){return yh=yh||LR(r),yh}const PR=new vc(5e3,15e3),UR="__/auth/iframe",jR="emulator/auth/iframe",zR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qR(r){const e=r.config;Re(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?_p(e,jR):`https://${r.config.authDomain}/${UR}`,s={apiKey:e.apiKey,appName:r.name,v:Mo},o=BR.get(r.config.apiHost);o&&(s.eid=o);const c=r._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${_c(s).slice(1)}`}async function HR(r){const e=await VR(r),n=qi().gapi;return Re(n,r,"internal-error"),e.open({where:document.body,url:qR(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zR,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=fi(r,"network-request-failed"),y=qi().setTimeout(()=>{c(d)},PR.get());function g(){qi().clearTimeout(y),o(s)}s.ping(g).then(g,()=>{c(d)})}))}const FR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GR=500,$R=600,YR="_blank",QR="http://localhost";class pv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KR(r,e,n,s=GR,o=$R){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let y="";const g={...FR,width:s.toString(),height:o.toString(),top:c,left:d},m=ln().toLowerCase();n&&(y=gS(m)?YR:n),mS(m)&&(e=e||QR,g.scrollbars="yes");const S=Object.entries(g).reduce((I,[V,U])=>`${I}${V}=${U},`,"");if(Ix(m)&&y!=="_self")return XR(e||"",y),new pv(null);const b=window.open(e||"",y,S);Re(b,r,"popup-blocked");try{b.focus()}catch{}return new pv(b)}function XR(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const WR="__/auth/handler",JR="emulator/auth/handler",ZR=encodeURIComponent("fac");async function gv(r,e,n,s,o,c){Re(r.config.authDomain,r,"auth-domain-config-required"),Re(r.config.apiKey,r,"invalid-api-key");const d={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:Mo,eventId:o};if(e instanceof Tp){e.setDefaultLanguage(r.languageCode),d.providerId=e.providerId||"",JA(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[S,b]of Object.entries({}))d[S]=b}if(e instanceof Ec){const S=e.getScopes().filter(b=>b!=="");S.length>0&&(d.scopes=S.join(","))}r.tenantId&&(d.tid=r.tenantId);const y=d;for(const S of Object.keys(y))y[S]===void 0&&delete y[S];const g=await r._getAppCheckToken(),m=g?`#${ZR}=${encodeURIComponent(g)}`:"";return`${eC(r)}?${_c(y).slice(1)}${m}`}function eC({config:r}){return r.emulator?_p(r,JR):`https://${r.authDomain}/${WR}`}const Rm="webStorageSupport";class tC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IS,this._completeRedirectFn=wR,this._overrideRedirectResult=bR}async _openPopup(e,n,s,o){wr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const c=await gv(e,n,s,Gm(),o);return KR(e,c,Ap())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await gv(e,n,s,Gm(),o);return rR(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(wr(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await HR(e),s=new RR(e);return n.register("authEvent",o=>(Re(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rm,{type:Rm},o=>{const c=o?.[0]?.[Rm];c!==void 0&&n(!!c),Qi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=OR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return SS()||pS()||Sp()}}const nC=tC;var yv="@firebase/auth",_v="1.11.1";class iC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function rC(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sC(r){So(new pa("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:y}=s.options;Re(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:d,authDomain:y,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:bS(r)},m=new Lx(s,o,c,g);return Bx(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),So(new pa("auth-internal",e=>{const n=Gh(e.getProvider("auth").getImmediate());return(s=>new iC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Es(yv,_v,rC(r)),Es(yv,_v,"esm2020")}const aC=300,oC=JE("authIdTokenMaxAge")||aC;let vv=null;const lC=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>oC)return;const o=n?.token;vv!==o&&(vv=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function cC(r=rS()){const e=pp(r,"auth");if(e.isInitialized())return e.getImmediate();const n=zx(r,{popupRedirectResolver:nC,persistence:[fR,tR,IS]}),s=JE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=lC(c.toString());Xx(n,d,()=>d(n.currentUser)),Kx(n,y=>d(y))}}const o=XE("auth");return o&&qx(n,`http://${o}`),n}function uC(){return document.getElementsByTagName("head")?.[0]??document}Vx({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const c=fi("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",uC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sC("Browser");var hC="firebase",dC="12.6.0";Es(hC,dC,"app");var Ev=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var Ss,PS;(function(){var r;function e(D,w){function x(){}x.prototype=w.prototype,D.F=w.prototype,D.prototype=new x,D.prototype.constructor=D,D.D=function(R,O,L){for(var C=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)C[ce-2]=arguments[ce];return w.prototype[O].apply(R,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,w,x){x||(x=0);const R=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)R[O]=w.charCodeAt(x++)|w.charCodeAt(x++)<<8|w.charCodeAt(x++)<<16|w.charCodeAt(x++)<<24;else for(O=0;O<16;++O)R[O]=w[x++]|w[x++]<<8|w[x++]<<16|w[x++]<<24;w=D.g[0],x=D.g[1],O=D.g[2];let L=D.g[3],C;C=w+(L^x&(O^L))+R[0]+3614090360&4294967295,w=x+(C<<7&4294967295|C>>>25),C=L+(O^w&(x^O))+R[1]+3905402710&4294967295,L=w+(C<<12&4294967295|C>>>20),C=O+(x^L&(w^x))+R[2]+606105819&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(w^O&(L^w))+R[3]+3250441966&4294967295,x=O+(C<<22&4294967295|C>>>10),C=w+(L^x&(O^L))+R[4]+4118548399&4294967295,w=x+(C<<7&4294967295|C>>>25),C=L+(O^w&(x^O))+R[5]+1200080426&4294967295,L=w+(C<<12&4294967295|C>>>20),C=O+(x^L&(w^x))+R[6]+2821735955&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(w^O&(L^w))+R[7]+4249261313&4294967295,x=O+(C<<22&4294967295|C>>>10),C=w+(L^x&(O^L))+R[8]+1770035416&4294967295,w=x+(C<<7&4294967295|C>>>25),C=L+(O^w&(x^O))+R[9]+2336552879&4294967295,L=w+(C<<12&4294967295|C>>>20),C=O+(x^L&(w^x))+R[10]+4294925233&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(w^O&(L^w))+R[11]+2304563134&4294967295,x=O+(C<<22&4294967295|C>>>10),C=w+(L^x&(O^L))+R[12]+1804603682&4294967295,w=x+(C<<7&4294967295|C>>>25),C=L+(O^w&(x^O))+R[13]+4254626195&4294967295,L=w+(C<<12&4294967295|C>>>20),C=O+(x^L&(w^x))+R[14]+2792965006&4294967295,O=L+(C<<17&4294967295|C>>>15),C=x+(w^O&(L^w))+R[15]+1236535329&4294967295,x=O+(C<<22&4294967295|C>>>10),C=w+(O^L&(x^O))+R[1]+4129170786&4294967295,w=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(w^x))+R[6]+3225465664&4294967295,L=w+(C<<9&4294967295|C>>>23),C=O+(w^x&(L^w))+R[11]+643717713&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^w&(O^L))+R[0]+3921069994&4294967295,x=O+(C<<20&4294967295|C>>>12),C=w+(O^L&(x^O))+R[5]+3593408605&4294967295,w=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(w^x))+R[10]+38016083&4294967295,L=w+(C<<9&4294967295|C>>>23),C=O+(w^x&(L^w))+R[15]+3634488961&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^w&(O^L))+R[4]+3889429448&4294967295,x=O+(C<<20&4294967295|C>>>12),C=w+(O^L&(x^O))+R[9]+568446438&4294967295,w=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(w^x))+R[14]+3275163606&4294967295,L=w+(C<<9&4294967295|C>>>23),C=O+(w^x&(L^w))+R[3]+4107603335&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^w&(O^L))+R[8]+1163531501&4294967295,x=O+(C<<20&4294967295|C>>>12),C=w+(O^L&(x^O))+R[13]+2850285829&4294967295,w=x+(C<<5&4294967295|C>>>27),C=L+(x^O&(w^x))+R[2]+4243563512&4294967295,L=w+(C<<9&4294967295|C>>>23),C=O+(w^x&(L^w))+R[7]+1735328473&4294967295,O=L+(C<<14&4294967295|C>>>18),C=x+(L^w&(O^L))+R[12]+2368359562&4294967295,x=O+(C<<20&4294967295|C>>>12),C=w+(x^O^L)+R[5]+4294588738&4294967295,w=x+(C<<4&4294967295|C>>>28),C=L+(w^x^O)+R[8]+2272392833&4294967295,L=w+(C<<11&4294967295|C>>>21),C=O+(L^w^x)+R[11]+1839030562&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^w)+R[14]+4259657740&4294967295,x=O+(C<<23&4294967295|C>>>9),C=w+(x^O^L)+R[1]+2763975236&4294967295,w=x+(C<<4&4294967295|C>>>28),C=L+(w^x^O)+R[4]+1272893353&4294967295,L=w+(C<<11&4294967295|C>>>21),C=O+(L^w^x)+R[7]+4139469664&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^w)+R[10]+3200236656&4294967295,x=O+(C<<23&4294967295|C>>>9),C=w+(x^O^L)+R[13]+681279174&4294967295,w=x+(C<<4&4294967295|C>>>28),C=L+(w^x^O)+R[0]+3936430074&4294967295,L=w+(C<<11&4294967295|C>>>21),C=O+(L^w^x)+R[3]+3572445317&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^w)+R[6]+76029189&4294967295,x=O+(C<<23&4294967295|C>>>9),C=w+(x^O^L)+R[9]+3654602809&4294967295,w=x+(C<<4&4294967295|C>>>28),C=L+(w^x^O)+R[12]+3873151461&4294967295,L=w+(C<<11&4294967295|C>>>21),C=O+(L^w^x)+R[15]+530742520&4294967295,O=L+(C<<16&4294967295|C>>>16),C=x+(O^L^w)+R[2]+3299628645&4294967295,x=O+(C<<23&4294967295|C>>>9),C=w+(O^(x|~L))+R[0]+4096336452&4294967295,w=x+(C<<6&4294967295|C>>>26),C=L+(x^(w|~O))+R[7]+1126891415&4294967295,L=w+(C<<10&4294967295|C>>>22),C=O+(w^(L|~x))+R[14]+2878612391&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~w))+R[5]+4237533241&4294967295,x=O+(C<<21&4294967295|C>>>11),C=w+(O^(x|~L))+R[12]+1700485571&4294967295,w=x+(C<<6&4294967295|C>>>26),C=L+(x^(w|~O))+R[3]+2399980690&4294967295,L=w+(C<<10&4294967295|C>>>22),C=O+(w^(L|~x))+R[10]+4293915773&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~w))+R[1]+2240044497&4294967295,x=O+(C<<21&4294967295|C>>>11),C=w+(O^(x|~L))+R[8]+1873313359&4294967295,w=x+(C<<6&4294967295|C>>>26),C=L+(x^(w|~O))+R[15]+4264355552&4294967295,L=w+(C<<10&4294967295|C>>>22),C=O+(w^(L|~x))+R[6]+2734768916&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~w))+R[13]+1309151649&4294967295,x=O+(C<<21&4294967295|C>>>11),C=w+(O^(x|~L))+R[4]+4149444226&4294967295,w=x+(C<<6&4294967295|C>>>26),C=L+(x^(w|~O))+R[11]+3174756917&4294967295,L=w+(C<<10&4294967295|C>>>22),C=O+(w^(L|~x))+R[2]+718787259&4294967295,O=L+(C<<15&4294967295|C>>>17),C=x+(L^(O|~w))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(O+(C<<21&4294967295|C>>>11))&4294967295,D.g[2]=D.g[2]+O&4294967295,D.g[3]=D.g[3]+L&4294967295}s.prototype.v=function(D,w){w===void 0&&(w=D.length);const x=w-this.blockSize,R=this.C;let O=this.h,L=0;for(;L<w;){if(O==0)for(;L<=x;)o(this,D,L),L+=this.blockSize;if(typeof D=="string"){for(;L<w;)if(R[O++]=D.charCodeAt(L++),O==this.blockSize){o(this,R),O=0;break}}else for(;L<w;)if(R[O++]=D[L++],O==this.blockSize){o(this,R),O=0;break}}this.h=O,this.o+=w},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var x=D.length-8;x<D.length;++x)D[x]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,x=0;x<4;++x)for(let R=0;R<32;R+=8)D[w++]=this.g[x]>>>R&255;return D};function c(D,w){var x=y;return Object.prototype.hasOwnProperty.call(x,D)?x[D]:x[D]=w(D)}function d(D,w){this.h=w;const x=[];let R=!0;for(let O=D.length-1;O>=0;O--){const L=D[O]|0;R&&L==w||(x[O]=L,R=!1)}this.g=x}var y={};function g(D){return-128<=D&&D<128?c(D,function(w){return new d([w|0],w<0?-1:0)}):new d([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return b;if(D<0)return $(m(-D));const w=[];let x=1;for(let R=0;D>=x;R++)w[R]=D/x|0,x*=4294967296;return new d(w,0)}function S(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return $(S(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=m(Math.pow(w,8));let R=b;for(let L=0;L<D.length;L+=8){var O=Math.min(8,D.length-L);const C=parseInt(D.substring(L,L+O),w);O<8?(O=m(Math.pow(w,O)),R=R.j(O).add(m(C))):(R=R.j(x),R=R.add(m(C)))}return R}var b=g(0),I=g(1),V=g(16777216);r=d.prototype,r.m=function(){if(q(this))return-$(this).m();let D=0,w=1;for(let x=0;x<this.g.length;x++){const R=this.i(x);D+=(R>=0?R:4294967296+R)*w,w*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if(q(this))return"-"+$(this).toString(D);const w=m(Math.pow(D,6));var x=this;let R="";for(;;){const O=pe(x,w).g;x=K(x,O.j(w));let L=((x.g.length>0?x.g[0]:x.h)>>>0).toString(D);if(x=O,U(x))return L+R;for(;L.length<6;)L="0"+L;R=L+R}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function q(D){return D.h==-1}r.l=function(D){return D=K(this,D),q(D)?-1:U(D)?0:1};function $(D){const w=D.g.length,x=[];for(let R=0;R<w;R++)x[R]=~D.g[R];return new d(x,~D.h).add(I)}r.abs=function(){return q(this)?$(this):this},r.add=function(D){const w=Math.max(this.g.length,D.g.length),x=[];let R=0;for(let O=0;O<=w;O++){let L=R+(this.i(O)&65535)+(D.i(O)&65535),C=(L>>>16)+(this.i(O)>>>16)+(D.i(O)>>>16);R=C>>>16,L&=65535,C&=65535,x[O]=C<<16|L}return new d(x,x[x.length-1]&-2147483648?-1:0)};function K(D,w){return D.add($(w))}r.j=function(D){if(U(this)||U(D))return b;if(q(this))return q(D)?$(this).j($(D)):$($(this).j(D));if(q(D))return $(this.j($(D)));if(this.l(V)<0&&D.l(V)<0)return m(this.m()*D.m());const w=this.g.length+D.g.length,x=[];for(var R=0;R<2*w;R++)x[R]=0;for(R=0;R<this.g.length;R++)for(let O=0;O<D.g.length;O++){const L=this.i(R)>>>16,C=this.i(R)&65535,ce=D.i(O)>>>16,ve=D.i(O)&65535;x[2*R+2*O]+=C*ve,re(x,2*R+2*O),x[2*R+2*O+1]+=L*ve,re(x,2*R+2*O+1),x[2*R+2*O+1]+=C*ce,re(x,2*R+2*O+1),x[2*R+2*O+2]+=L*ce,re(x,2*R+2*O+2)}for(D=0;D<w;D++)x[D]=x[2*D+1]<<16|x[2*D];for(D=w;D<2*w;D++)x[D]=0;return new d(x,0)};function re(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function ne(D,w){this.g=D,this.h=w}function pe(D,w){if(U(w))throw Error("division by zero");if(U(D))return new ne(b,b);if(q(D))return w=pe($(D),w),new ne($(w.g),$(w.h));if(q(w))return w=pe(D,$(w)),new ne($(w.g),w.h);if(D.g.length>30){if(q(D)||q(w))throw Error("slowDivide_ only works with positive integers.");for(var x=I,R=w;R.l(D)<=0;)x=he(x),R=he(R);var O=ge(x,1),L=ge(R,1);for(R=ge(R,2),x=ge(x,2);!U(R);){var C=L.add(R);C.l(D)<=0&&(O=O.add(x),L=C),R=ge(R,1),x=ge(x,1)}return w=K(D,O.j(w)),new ne(O,w)}for(O=b;D.l(w)>=0;){for(x=Math.max(1,Math.floor(D.m()/w.m())),R=Math.ceil(Math.log(x)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),L=m(x),C=L.j(w);q(C)||C.l(D)>0;)x-=R,L=m(x),C=L.j(w);U(L)&&(L=I),O=O.add(L),D=K(D,C)}return new ne(O,D)}r.B=function(D){return pe(this,D).h},r.and=function(D){const w=Math.max(this.g.length,D.g.length),x=[];for(let R=0;R<w;R++)x[R]=this.i(R)&D.i(R);return new d(x,this.h&D.h)},r.or=function(D){const w=Math.max(this.g.length,D.g.length),x=[];for(let R=0;R<w;R++)x[R]=this.i(R)|D.i(R);return new d(x,this.h|D.h)},r.xor=function(D){const w=Math.max(this.g.length,D.g.length),x=[];for(let R=0;R<w;R++)x[R]=this.i(R)^D.i(R);return new d(x,this.h^D.h)};function he(D){const w=D.g.length+1,x=[];for(let R=0;R<w;R++)x[R]=D.i(R)<<1|D.i(R-1)>>>31;return new d(x,D.h)}function ge(D,w){const x=w>>5;w%=32;const R=D.g.length-x,O=[];for(let L=0;L<R;L++)O[L]=w>0?D.i(L+x)>>>w|D.i(L+x+1)<<32-w:D.i(L+x);return new d(O,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,PS=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.B,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=m,d.fromString=S,Ss=d}).apply(typeof Ev<"u"?Ev:typeof self<"u"?self:typeof window<"u"?window:{});var rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var US,Kl,jS,_h,Qm,zS,BS,qS;(function(){var r,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof rh=="object"&&rh];for(var p=0;p<u.length;++p){var v=u[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(u,p){if(p)e:{var v=s;u=u.split(".");for(var A=0;A<u.length-1;A++){var H=u[A];if(!(H in v))break e;v=v[H]}u=u[u.length-1],A=v[u],p=p(A),p!=A&&p!=null&&e(v,u,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(p){var v=[],A;for(A in p)Object.prototype.hasOwnProperty.call(p,A)&&v.push([A,p[A]]);return v}});var c=c||{},d=this||self;function y(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function g(u,p,v){return u.call.apply(u.bind,arguments)}function m(u,p,v){return m=g,m.apply(null,arguments)}function S(u,p){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function b(u,p){function v(){}v.prototype=p.prototype,u.Z=p.prototype,u.prototype=new v,u.prototype.constructor=u,u.Ob=function(A,H,X){for(var de=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)de[Oe-2]=arguments[Oe];return p.prototype[H].apply(A,de)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function V(u){const p=u.length;if(p>0){const v=Array(p);for(let A=0;A<p;A++)v[A]=u[A];return v}return[]}function U(u,p){for(let A=1;A<arguments.length;A++){const H=arguments[A];var v=typeof H;if(v=v!="object"?v:H?Array.isArray(H)?"array":v:"null",v=="array"||v=="object"&&typeof H.length=="number"){v=u.length||0;const X=H.length||0;u.length=v+X;for(let de=0;de<X;de++)u[v+de]=H[de]}else u.push(H)}}class q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function $(u){d.setTimeout(()=>{throw u},0)}function K(){var u=D;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class re{constructor(){this.h=this.g=null}add(p,v){const A=ne.get();A.set(p,v),this.h?this.h.next=A:this.g=A,this.h=A}}var ne=new q(()=>new pe,u=>u.reset());class pe{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ge=!1,D=new re,w=()=>{const u=Promise.resolve(void 0);he=()=>{u.then(x)}};function x(){for(var u;u=K();){try{u.h.call(u.g)}catch(v){$(v)}var p=ne;p.j(u),p.h<100&&(p.h++,u.next=p.g,p.g=u)}ge=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var L=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const v=()=>{};d.addEventListener("test",v,p),d.removeEventListener("test",v,p)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function ce(u,p){O.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,p)}b(ce,O),ce.prototype.init=function(u,p){const v=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget,p||(v=="mouseover"?p=u.fromElement:v=="mouseout"&&(p=u.toElement)),this.relatedTarget=p,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),M=0;function z(u,p,v,A,H){this.listener=u,this.proxy=null,this.src=p,this.type=v,this.capture=!!A,this.ha=H,this.key=++M,this.da=this.fa=!1}function J(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function te(u,p,v){for(const A in u)p.call(v,u[A],A,u)}function ue(u,p){for(const v in u)p.call(void 0,u[v],v,u)}function N(u){const p={};for(const v in u)p[v]=u[v];return p}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,p){let v,A;for(let H=1;H<arguments.length;H++){A=arguments[H];for(v in A)u[v]=A[v];for(let X=0;X<Y.length;X++)v=Y[X],Object.prototype.hasOwnProperty.call(A,v)&&(u[v]=A[v])}}function se(u){this.src=u,this.g={},this.h=0}se.prototype.add=function(u,p,v,A,H){const X=u.toString();u=this.g[X],u||(u=this.g[X]=[],this.h++);const de=Ee(u,p,A,H);return de>-1?(p=u[de],v||(p.fa=!1)):(p=new z(p,this.src,X,!!A,H),p.fa=v,u.push(p)),p};function me(u,p){const v=p.type;if(v in u.g){var A=u.g[v],H=Array.prototype.indexOf.call(A,p,void 0),X;(X=H>=0)&&Array.prototype.splice.call(A,H,1),X&&(J(p),u.g[v].length==0&&(delete u.g[v],u.h--))}}function Ee(u,p,v,A){for(let H=0;H<u.length;++H){const X=u[H];if(!X.da&&X.listener==p&&X.capture==!!v&&X.ha==A)return H}return-1}var be="closure_lm_"+(Math.random()*1e6|0),We={};function Ge(u,p,v,A,H){if(Array.isArray(p)){for(let X=0;X<p.length;X++)Ge(u,p[X],v,A,H);return null}return v=Ye(v),u&&u[ve]?u.J(p,v,y(A)?!!A.capture:!1,H):Pn(u,p,v,!1,A,H)}function Pn(u,p,v,A,H,X){if(!p)throw Error("Invalid event type");const de=y(H)?!!H.capture:!!H;let Oe=Ji(u);if(Oe||(u[be]=Oe=new se(u)),v=Oe.add(p,v,A,de,X),v.proxy)return v;if(A=gi(),v.proxy=A,A.src=u,A.listener=v,u.addEventListener)L||(H=de),H===void 0&&(H=!1),u.addEventListener(p.toString(),A,H);else if(u.attachEvent)u.attachEvent(cn(p.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function gi(){function u(v){return p.call(u.src,u.listener,v)}const p=Wi;return u}function yi(u,p,v,A,H){if(Array.isArray(p))for(var X=0;X<p.length;X++)yi(u,p[X],v,A,H);else A=y(A)?!!A.capture:!!A,v=Ye(v),u&&u[ve]?(u=u.i,X=String(p).toString(),X in u.g&&(p=u.g[X],v=Ee(p,v,A,H),v>-1&&(J(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete u.g[X],u.h--)))):u&&(u=Ji(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Ee(p,v,A,H)),(v=u>-1?p[u]:null)&&Un(v))}function Un(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ve])me(p.i,u);else{var v=u.type,A=u.proxy;p.removeEventListener?p.removeEventListener(v,A,u.capture):p.detachEvent?p.detachEvent(cn(v),A):p.addListener&&p.removeListener&&p.removeListener(A),(v=Ji(p))?(me(v,u),v.h==0&&(v.src=null,p[be]=null)):J(u)}}}function cn(u){return u in We?We[u]:We[u]="on"+u}function Wi(u,p){if(u.da)u=!0;else{p=new ce(p,this);const v=u.listener,A=u.ha||u.src;u.fa&&Un(u),u=v.call(A,p)}return u}function Ji(u){return u=u[be],u instanceof se?u:null}var Le="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ye(u){return typeof u=="function"?u:(u[Le]||(u[Le]=function(p){return u.handleEvent(p)}),u[Le])}function Ve(){R.call(this),this.i=new se(this),this.M=this,this.G=null}b(Ve,R),Ve.prototype[ve]=!0,Ve.prototype.removeEventListener=function(u,p,v,A){yi(this,u,p,v,A)};function Pe(u,p){var v,A=u.G;if(A)for(v=[];A;A=A.G)v.push(A);if(u=u.M,A=p.type||p,typeof p=="string")p=new O(p,u);else if(p instanceof O)p.target=p.target||u;else{var H=p;p=new O(A,u),le(p,H)}H=!0;let X,de;if(v)for(de=v.length-1;de>=0;de--)X=p.g=v[de],H=zt(X,A,!0,p)&&H;if(X=p.g=u,H=zt(X,A,!0,p)&&H,H=zt(X,A,!1,p)&&H,v)for(de=0;de<v.length;de++)X=p.g=v[de],H=zt(X,A,!1,p)&&H}Ve.prototype.N=function(){if(Ve.Z.N.call(this),this.i){var u=this.i;for(const p in u.g){const v=u.g[p];for(let A=0;A<v.length;A++)J(v[A]);delete u.g[p],u.h--}}this.G=null},Ve.prototype.J=function(u,p,v,A){return this.i.add(String(u),p,!1,v,A)},Ve.prototype.K=function(u,p,v,A){return this.i.add(String(u),p,!0,v,A)};function zt(u,p,v,A){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();let H=!0;for(let X=0;X<p.length;++X){const de=p[X];if(de&&!de.da&&de.capture==v){const Oe=de.listener,St=de.ha||de.src;de.fa&&me(u.i,de),H=Oe.call(St,A)!==!1&&H}}return H&&!A.defaultPrevented}function _i(u,p){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:d.setTimeout(u,p||0)}function Zi(u){u.g=_i(()=>{u.g=null,u.i&&(u.i=!1,Zi(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class un extends R{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Zi(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Os(u){R.call(this),this.h=u,this.g={}}b(Os,R);var Bo=[];function qo(u){te(u.g,function(p,v){this.g.hasOwnProperty(v)&&Un(p)},u),u.g={}}Os.prototype.N=function(){Os.Z.N.call(this),qo(this)},Os.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ir=d.JSON.stringify,yd=d.JSON.parse,Ic=class{stringify(u){return d.JSON.stringify(u,void 0)}parse(u){return d.JSON.parse(u,void 0)}};function Dc(){}function Nc(){}var Zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function $t(){O.call(this,"d")}b($t,O);function jn(){O.call(this,"c")}b(jn,O);var Et={},Oc=null;function Aa(){return Oc=Oc||new Ve}Et.Ia="serverreachability";function Mc(u){O.call(this,Et.Ia,u)}b(Mc,O);function vi(u){const p=Aa();Pe(p,new Mc(p))}Et.STAT_EVENT="statevent";function Ms(u,p){O.call(this,Et.STAT_EVENT,u),this.stat=p}b(Ms,O);function xt(u){const p=Aa();Pe(p,new Ms(p,u))}Et.Ja="timingevent";function Ei(u,p){O.call(this,Et.Ja,u),this.size=p}b(Ei,O);function Si(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){u()},p)}function ei(){this.g=!0}ei.prototype.ua=function(){this.g=!1};function _d(u,p,v,A,H,X){u.info(function(){if(u.g)if(X){var de="",Oe=X.split("&");for(let Je=0;Je<Oe.length;Je++){var St=Oe[Je].split("=");if(St.length>1){const mt=St[0];St=St[1];const Hn=mt.split("_");de=Hn.length>=2&&Hn[1]=="type"?de+(mt+"="+St+"&"):de+(mt+"=redacted&")}}}else de=null;else de=X;return"XMLHTTP REQ ("+A+") [attempt "+H+"]: "+p+`
`+v+`
`+de})}function kc(u,p,v,A,H,X,de){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+H+"]: "+p+`
`+v+`
`+X+" "+de})}function bi(u,p,v,A){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+vd(u,v)+(A?" "+A:"")})}function ks(u,p){u.info(function(){return"TIMEOUT: "+p})}ei.prototype.info=function(){};function vd(u,p){if(!u.g)return p;if(!p)return null;try{const X=JSON.parse(p);if(X){for(u=0;u<X.length;u++)if(Array.isArray(X[u])){var v=X[u];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var H=A[0];if(H!="noop"&&H!="stop"&&H!="close")for(let de=1;de<A.length;de++)A[de]=""}}}}return Ir(X)}catch{return p}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ho={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Fo;function Vs(){}b(Vs,Dc),Vs.prototype.g=function(){return new XMLHttpRequest},Fo=new Vs;function er(u){return encodeURIComponent(String(u))}function Lc(u){var p=1;u=u.split(":");const v=[];for(;p>0&&u.length;)v.push(u.shift()),p--;return u.length&&v.push(u.join(":")),v}function ti(u,p,v,A){this.j=u,this.i=p,this.l=v,this.S=A||1,this.V=new Os(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}var Rt={},Bt={};function Ti(u,p,v){u.M=1,u.A=Ps(It(p)),u.u=v,u.R=!0,wa(u,null)}function wa(u,p){u.F=Date.now(),Ai(u),u.B=It(u.A);var v=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),Ia(v.i,"t",A),u.C=0,v=u.j.L,u.h=new ni,u.g=Xc(u.j,v?p:null,!u.u),u.P>0&&(u.O=new un(m(u.Y,u,u.g),u.P)),p=u.V,v=u.g,A=u.ba;var H="readystatechange";Array.isArray(H)||(H&&(Bo[0]=H.toString()),H=Bo);for(let X=0;X<H.length;X++){const de=Ge(v,H[X],A||p.handleEvent,!1,p.h||p);if(!de)break;p.g[de.key]=de}p=u.J?N(u.J):{},u.u?(u.v||(u.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,p)):(u.v="GET",u.g.ea(u.B,u.v,null,p)),vi(),_d(u.i,u.v,u.B,u.l,u.S,u.u)}ti.prototype.ba=function(u){u=u.target;const p=this.O;p&&si(u)==3?p.j():this.Y(u)},ti.prototype.Y=function(u){try{if(u==this.g)e:{const Oe=si(this.g),St=this.g.ya(),Je=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Oe!=4||St==7||(St==8||Je<=0?vi(3):vi(2)),wi(this);var p=this.g.ca();this.X=p;var v=Ed(this);if(this.o=p==200,kc(this.i,this.v,this.B,this.l,this.S,Oe,p),this.o){if(this.U&&!this.L){t:{if(this.g){var A,H=this.g;if((A=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var X=A;break t}}X=null}if(u=X)bi(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xi(this,u);else{this.o=!1,this.m=3,xt(12),wn(this),zn(this);break e}}if(this.R){u=!0;let mt;for(;!this.K&&this.C<v.length;)if(mt=Pc(this,v),mt==Bt){Oe==4&&(this.m=4,xt(14),u=!1),bi(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==Rt){this.m=4,xt(15),bi(this.i,this.l,v,"[Invalid Chunk]"),u=!1;break}else bi(this.i,this.l,mt,null),xi(this,mt);if(Vc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||v.length!=0||this.h.h||(this.m=1,xt(16),u=!1),this.o=this.o&&u,!u)bi(this.i,this.l,v,"[Invalid Chunked Response]"),wn(this),zn(this);else if(v.length>0&&!this.W){this.W=!0;var de=this.j;de.g==this&&de.aa&&!de.P&&(de.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),sl(de),de.P=!0,xt(11))}}else bi(this.i,this.l,v,null),xi(this,v);Oe==4&&wn(this),this.o&&!this.K&&(Oe==4?$c(this.j,this):(this.o=!1,Ai(this)))}else nr(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),wn(this),zn(this)}}}catch{}finally{}};function Ed(u){if(!Vc(u))return u.g.la();const p=Yt(u.g);if(p==="")return"";let v="";const A=p.length,H=si(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return wn(u),zn(u),"";u.h.i=new d.TextDecoder}for(let X=0;X<A;X++)u.h.h=!0,v+=u.h.i.decode(p[X],{stream:!(H&&X==A-1)});return p.length=0,u.h.g+=v,u.C=0,u.h.g}function Vc(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Pc(u,p){var v=u.C,A=p.indexOf(`
`,v);return A==-1?Bt:(v=Number(p.substring(v,A)),isNaN(v)?Rt:(A+=1,A+v>p.length?Bt:(p=p.slice(A,A+v),u.C=A+v,p)))}ti.prototype.cancel=function(){this.K=!0,wn(this)};function Ai(u){u.T=Date.now()+u.H,xa(u,u.H)}function xa(u,p){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Si(m(u.aa,u),p)}function wi(u){u.D&&(d.clearTimeout(u.D),u.D=null)}ti.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(ks(this.i,this.B),this.M!=2&&(vi(),xt(17)),wn(this),this.m=2,zn(this)):xa(this,this.T-u)};function zn(u){u.j.I==0||u.K||$c(u.j,u)}function wn(u){wi(u);var p=u.O;p&&typeof p.dispose=="function"&&p.dispose(),u.O=null,qo(u.V),u.g&&(p=u.g,u.g=null,p.abort(),p.dispose())}function xi(u,p){try{var v=u.j;if(v.I!=0&&(v.g==u||Ci(v.h,u))){if(!u.L&&Ci(v.h,u)&&v.I==3){try{var A=v.Ba.g.parse(p)}catch{A=null}if(Array.isArray(A)&&A.length==3){var H=A;if(H[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<u.F)ka(v),Pr(v);else break e;Fs(v),xt(18)}}else v.xa=H[1],0<v.xa-v.K&&H[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=Si(m(v.Va,v),6e3));Ri(v.h)<=1&&v.ta&&(v.ta=void 0)}else ki(v,11)}else if((u.L||v.g==u)&&ka(v),!C(p))for(H=v.Ba.g.parse(p),p=0;p<H.length;p++){let Je=H[p];const mt=Je[0];if(!(mt<=v.K))if(v.K=mt,Je=Je[1],v.I==2)if(Je[0]=="c"){v.M=Je[1],v.ba=Je[2];const Hn=Je[3];Hn!=null&&(v.ka=Hn,v.j.info("VER="+v.ka));const Li=Je[4];Li!=null&&(v.za=Li,v.j.info("SVER="+v.za));const ai=Je[5];ai!=null&&typeof ai=="number"&&ai>0&&(A=1.5*ai,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const oi=u.g;if(oi){const Gs=oi.g?oi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Gs){var X=A.h;X.g||Gs.indexOf("spdy")==-1&&Gs.indexOf("quic")==-1&&Gs.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Yo(X,X.h),X.h=null))}if(A.G){const La=oi.g?oi.g.getResponseHeader("X-HTTP-Session-Id"):null;La&&(A.wa=La,tt(A.J,A.G,La))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-u.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var de=u;if(A.na=Kc(A,A.L?A.ba:null,A.W),de.L){Qo(A.h,de);var Oe=de,St=A.O;St&&(Oe.H=St),Oe.D&&(wi(Oe),Ai(Oe)),A.g=de}else Fc(A);v.i.length>0&&Mi(v)}else Je[0]!="stop"&&Je[0]!="close"||ki(v,7);else v.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?ki(v,7):il(v):Je[0]!="noop"&&v.l&&v.l.qa(Je),v.A=0)}}vi(4)}catch{}}var Ct=class{constructor(u,p){this.g=u,this.map=p}};function Go(u){this.l=u||10,d.PerformanceNavigationTiming?(u=d.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function $o(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Ri(u){return u.h?1:u.g?u.g.size:0}function Ci(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Yo(u,p){u.g?u.g.add(p):u.h=p}function Qo(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}Go.prototype.cancel=function(){if(this.i=Ko(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Ko(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const v of u.g.values())p=p.concat(v.G);return p}return V(u.i)}var Uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ra(u,p){if(u){u=u.split("&");for(let v=0;v<u.length;v++){const A=u[v].indexOf("=");let H,X=null;A>=0?(H=u[v].substring(0,A),X=u[v].substring(A+1)):H=u[v],p(H,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function xn(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;u instanceof xn?(this.l=u.l,qt(this,u.j),this.o=u.o,this.g=u.g,Dr(this,u.u),this.h=u.h,Xo(this,qc(u.i)),this.m=u.m):u&&(p=String(u).match(Uc))?(this.l=!1,qt(this,p[1]||"",!0),this.o=Ii(p[2]||""),this.g=Ii(p[3]||"",!0),Dr(this,p[4]),this.h=Ii(p[5]||"",!0),Xo(this,p[6]||"",!0),this.m=Ii(p[7]||"")):(this.l=!1,this.i=new Or(null,this.l))}xn.prototype.toString=function(){const u=[];var p=this.j;p&&u.push(Us(p,Ca,!0),":");var v=this.g;return(v||p=="file")&&(u.push("//"),(p=this.o)&&u.push(Us(p,Ca,!0),"@"),u.push(er(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&u.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&u.push("/"),u.push(Us(v,v.charAt(0)=="/"?Wo:jc,!0))),(v=this.i.toString())&&u.push("?",v),(v=this.m)&&u.push("#",Us(v,zc)),u.join("")},xn.prototype.resolve=function(u){const p=It(this);let v=!!u.j;v?qt(p,u.j):v=!!u.o,v?p.o=u.o:v=!!u.g,v?p.g=u.g:v=u.u!=null;var A=u.h;if(v)Dr(p,u.u);else if(v=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var H=p.h.lastIndexOf("/");H!=-1&&(A=p.h.slice(0,H+1)+A)}if(H=A,H==".."||H==".")A="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){A=H.lastIndexOf("/",0)==0,H=H.split("/");const X=[];for(let de=0;de<H.length;){const Oe=H[de++];Oe=="."?A&&de==H.length&&X.push(""):Oe==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),A&&de==H.length&&X.push("")):(X.push(Oe),A=!0)}A=X.join("/")}else A=H}return v?p.h=A:v=u.i.toString()!=="",v?Xo(p,qc(u.i)):v=!!u.m,v&&(p.m=u.m),p};function It(u){return new xn(u)}function qt(u,p,v){u.j=v?Ii(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function Dr(u,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);u.u=p}else u.u=null}function Xo(u,p,v){p instanceof Or?(u.i=p,Da(u.i,u.l)):(v||(p=Us(p,Nr)),u.i=new Or(p,u.l))}function tt(u,p,v){u.i.set(p,v)}function Ps(u){return tt(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ii(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Us(u,p,v){return typeof u=="string"?(u=encodeURI(u).replace(p,pn),v&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function pn(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ca=/[#\/\?@]/g,jc=/[#\?:]/g,Wo=/[#\?]/g,Nr=/[#\?@]/g,zc=/#/g;function Or(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function gn(u){u.g||(u.g=new Map,u.h=0,u.i&&Ra(u.i,function(p,v){u.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}r=Or.prototype,r.add=function(u,p){gn(this),this.i=null,u=Mr(this,u);let v=this.g.get(u);return v||this.g.set(u,v=[]),v.push(p),this.h+=1,this};function Bc(u,p){gn(u),p=Mr(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Jo(u,p){return gn(u),p=Mr(u,p),u.g.has(p)}r.forEach=function(u,p){gn(this),this.g.forEach(function(v,A){v.forEach(function(H){u.call(p,H,A,this)},this)},this)};function Zo(u,p){gn(u);let v=[];if(typeof p=="string")Jo(u,p)&&(v=v.concat(u.g.get(Mr(u,p))));else for(u=Array.from(u.g.values()),p=0;p<u.length;p++)v=v.concat(u[p]);return v}r.set=function(u,p){return gn(this),this.i=null,u=Mr(this,u),Jo(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},r.get=function(u,p){return u?(u=Zo(this,u),u.length>0?String(u[0]):p):p};function Ia(u,p,v){Bc(u,p),v.length>0&&(u.i=null,u.g.set(Mr(u,p),V(v)),u.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(let A=0;A<p.length;A++){var v=p[A];const H=er(v);v=Zo(this,v);for(let X=0;X<v.length;X++){let de=H;v[X]!==""&&(de+="="+er(v[X])),u.push(de)}}return this.i=u.join("&")};function qc(u){const p=new Or;return p.i=u.i,u.g&&(p.g=new Map(u.g),p.h=u.h),p}function Mr(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function Da(u,p){p&&!u.j&&(gn(u),u.i=null,u.g.forEach(function(v,A){const H=A.toLowerCase();A!=H&&(Bc(this,A),Ia(this,H,v))},u)),u.j=p}function ii(u,p){const v=new ei;if(d.Image){const A=new Image;A.onload=S(Bn,v,"TestLoadImage: loaded",!0,p,A),A.onerror=S(Bn,v,"TestLoadImage: error",!1,p,A),A.onabort=S(Bn,v,"TestLoadImage: abort",!1,p,A),A.ontimeout=S(Bn,v,"TestLoadImage: timeout",!1,p,A),d.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else p(!1)}function el(u,p){const v=new ei,A=new AbortController,H=setTimeout(()=>{A.abort(),Bn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:A.signal}).then(X=>{clearTimeout(H),X.ok?Bn(v,"TestPingServer: ok",!0,p):Bn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(H),Bn(v,"TestPingServer: error",!1,p)})}function Bn(u,p,v,A,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),A(v)}catch{}}function kr(){this.g=new Ic}function Di(u){this.i=u.Sb||null,this.h=u.ab||!1}b(Di,Dc),Di.prototype.g=function(){return new js(this.i,this.h)};function js(u,p){Ve.call(this),this.H=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(js,Ve),r=js.prototype,r.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=p,this.readyState=1,ri(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(p.body=u),(this.H||d).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lr(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,ri(this)),this.g&&(this.readyState=3,ri(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Na(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function Na(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?Lr(this):ri(this),this.readyState==3&&Na(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,Lr(this))},r.Na=function(u){this.g&&(this.response=u,Lr(this))},r.ga=function(){this.g&&Lr(this)};function Lr(u){u.readyState=4,u.l=null,u.j=null,u.B=null,ri(u)}r.setRequestHeader=function(u,p){this.A.append(u,p)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,u.push(v[0]+": "+v[1]),v=p.next();return u.join(`\r
`)};function ri(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function qn(u){let p="";return te(u,function(v,A){p+=A,p+=":",p+=v,p+=`\r
`}),p}function zs(u,p,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=qn(v),typeof u=="string"?v!=null&&er(v):tt(u,p,v))}function rt(u){Ve.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(rt,Ve);var Ni=/^https?$/i,tl=["POST","PUT"];r=rt.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,p,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fo.g(),this.g.onreadystatechange=I(m(this.Ca,this));try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(X){Bs(this,X);return}if(u=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var H in A)v.set(H,A[H]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const X of A.keys())v.set(X,A.get(X));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(X=>X.toLowerCase()=="content-type"),H=d.FormData&&u instanceof d.FormData,!(Array.prototype.indexOf.call(tl,p,void 0)>=0)||A||H||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,de]of v)this.g.setRequestHeader(X,de);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(X){Bs(this,X)}};function Bs(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.o=5,nl(u),tr(u)}function nl(u){u.A||(u.A=!0,Pe(u,"complete"),Pe(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,Pe(this,"complete"),Pe(this,"abort"),tr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tr(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?qs(this):this.Xa())},r.Xa=function(){qs(this)};function qs(u){if(u.h&&typeof c<"u"){if(u.v&&si(u)==4)setTimeout(u.Ca.bind(u),0);else if(Pe(u,"readystatechange"),si(u)==4){u.h=!1;try{const X=u.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var v;if(!(v=p)){var A;if(A=X===0){let de=String(u.D).match(Uc)[1]||null;!de&&d.self&&d.self.location&&(de=d.self.location.protocol.slice(0,-1)),A=!Ni.test(de?de.toLowerCase():"")}v=A}if(v)Pe(u,"complete"),Pe(u,"success");else{u.o=6;try{var H=si(u)>2?u.g.statusText:""}catch{H=""}u.l=H+" ["+u.ca()+"]",nl(u)}}finally{tr(u)}}}}function tr(u,p){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const v=u.g;u.g=null,p||Pe(u,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function si(u){return u.g?u.g.readyState:0}r.ca=function(){try{return si(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),yd(p)}};function Yt(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function nr(u){const p={};u=(u.g&&si(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(C(u[A]))continue;var v=Lc(u[A]);const H=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const X=p[H]||[];p[H]=X,X.push(v)}ue(p,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oi(u,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[u]||p}function Vr(u){this.za=0,this.i=[],this.j=new ei,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oi("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oi("baseRetryDelayMs",5e3,u),this.Za=Oi("retryDelaySeedMs",1e4,u),this.Ta=Oi("forwardChannelMaxRetries",2,u),this.va=Oi("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new Go(u&&u.concurrentRequestLimit),this.Ba=new kr,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Vr.prototype,r.ka=8,r.I=1,r.connect=function(u,p,v,A){xt(0),this.W=u,this.H=p||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Kc(this,null,this.W),Mi(this)};function il(u){if(Oa(u),u.I==3){var p=u.V++,v=It(u.J);if(tt(v,"SID",u.M),tt(v,"RID",p),tt(v,"TYPE","terminate"),Hs(u,v),p=new ti(u,u.j,p),p.M=2,p.A=Ps(It(v)),v=!1,d.navigator&&d.navigator.sendBeacon)try{v=d.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&d.Image&&(new Image().src=p.A,v=!0),v||(p.g=Xc(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ai(p)}Qc(u)}function Pr(u){u.g&&(sl(u),u.g.cancel(),u.g=null)}function Oa(u){Pr(u),u.v&&(d.clearTimeout(u.v),u.v=null),ka(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&d.clearTimeout(u.m),u.m=null)}function Mi(u){if(!$o(u.h)&&!u.m){u.m=!0;var p=u.Ea;he||w(),ge||(he(),ge=!0),D.add(p,u),u.D=0}}function Ma(u,p){return Ri(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=p.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Si(m(u.Ea,u,p),Yc(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const H=new ti(this,this.j,u);let X=this.o;if(this.U&&(X?(X=N(X),le(X,this.U)):X=this.U),this.u!==null||this.R||(H.J=X,X=null),this.S)e:{for(var p=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(p+=A,p>4096){p=v;break e}if(p===4096||v===this.i.length-1){p=v+1;break e}}p=1e3}else p=1e3;p=Hc(this,H,p),v=It(this.J),tt(v,"RID",u),tt(v,"CVER",22),this.G&&tt(v,"X-HTTP-Session-Id",this.G),Hs(this,v),X&&(this.R?p="headers="+er(qn(X))+"&"+p:this.u&&zs(v,this.u,X)),Yo(this.h,H),this.Ra&&tt(v,"TYPE","init"),this.S?(tt(v,"$req",p),tt(v,"SID","null"),H.U=!0,Ti(H,v,null)):Ti(H,v,p),this.I=2}}else this.I==3&&(u?rl(this,u):this.i.length==0||$o(this.h)||rl(this))};function rl(u,p){var v;p?v=p.l:v=u.V++;const A=It(u.J);tt(A,"SID",u.M),tt(A,"RID",v),tt(A,"AID",u.K),Hs(u,A),u.u&&u.o&&zs(A,u.u,u.o),v=new ti(u,u.j,v,u.D+1),u.u===null&&(v.J=u.o),p&&(u.i=p.G.concat(u.i)),p=Hc(u,v,1e3),v.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Yo(u.h,v),Ti(v,A,p)}function Hs(u,p){u.H&&te(u.H,function(v,A){tt(p,A,v)}),u.l&&te({},function(v,A){tt(p,A,v)})}function Hc(u,p,v){v=Math.min(u.i.length,v);const A=u.l?m(u.l.Ka,u.l,u):null;e:{var H=u.i;let Oe=-1;for(;;){const St=["count="+v];Oe==-1?v>0?(Oe=H[0].g,St.push("ofs="+Oe)):Oe=0:St.push("ofs="+Oe);let Je=!0;for(let mt=0;mt<v;mt++){var X=H[mt].g;const Hn=H[mt].map;if(X-=Oe,X<0)Oe=Math.max(0,H[mt].g-100),Je=!1;else try{X="req"+X+"_"||"";try{var de=Hn instanceof Map?Hn:Object.entries(Hn);for(const[Li,ai]of de){let oi=ai;y(ai)&&(oi=Ir(ai)),St.push(X+Li+"="+encodeURIComponent(oi))}}catch(Li){throw St.push(X+"type="+encodeURIComponent("_badmap")),Li}}catch{A&&A(Hn)}}if(Je){de=St.join("&");break e}}de=void 0}return u=u.i.splice(0,v),p.G=u,de}function Fc(u){if(!u.g&&!u.v){u.Y=1;var p=u.Da;he||w(),ge||(he(),ge=!0),D.add(p,u),u.A=0}}function Fs(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Si(m(u.Da,u),Yc(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Gc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Si(m(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Pr(this),Gc(this))};function sl(u){u.B!=null&&(d.clearTimeout(u.B),u.B=null)}function Gc(u){u.g=new ti(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var p=It(u.na);tt(p,"RID","rpc"),tt(p,"SID",u.M),tt(p,"AID",u.K),tt(p,"CI",u.F?"0":"1"),!u.F&&u.ia&&tt(p,"TO",u.ia),tt(p,"TYPE","xmlhttp"),Hs(u,p),u.u&&u.o&&zs(p,u.u,u.o),u.O&&(u.g.H=u.O);var v=u.g;u=u.ba,v.M=1,v.A=Ps(It(p)),v.u=null,v.R=!0,wa(v,u)}r.Va=function(){this.C!=null&&(this.C=null,Pr(this),Fs(this),xt(19))};function ka(u){u.C!=null&&(d.clearTimeout(u.C),u.C=null)}function $c(u,p){var v=null;if(u.g==p){ka(u),sl(u),u.g=null;var A=2}else if(Ci(u.h,p))v=p.G,Qo(u.h,p),A=1;else return;if(u.I!=0){if(p.o)if(A==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var H=u.D;A=Aa(),Pe(A,new Ei(A,v)),Mi(u)}else Fc(u);else if(H=p.m,H==3||H==0&&p.X>0||!(A==1&&Ma(u,p)||A==2&&Fs(u)))switch(v&&v.length>0&&(p=u.h,p.i=p.i.concat(v)),H){case 1:ki(u,5);break;case 4:ki(u,10);break;case 3:ki(u,6);break;default:ki(u,2)}}}function Yc(u,p){let v=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(v*=2),v*p}function ki(u,p){if(u.j.info("Error code "+p),p==2){var v=m(u.bb,u),A=u.Ua;const H=!A;A=new xn(A||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||qt(A,"https"),Ps(A),H?ii(A.toString(),v):el(A.toString(),v)}else xt(2);u.I=0,u.l&&u.l.pa(p),Qc(u),Oa(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Qc(u){if(u.I=0,u.ja=[],u.l){const p=Ko(u.h);(p.length!=0||u.i.length!=0)&&(U(u.ja,p),U(u.ja,u.i),u.h.i.length=0,V(u.i),u.i.length=0),u.l.oa()}}function Kc(u,p,v){var A=v instanceof xn?It(v):new xn(v);if(A.g!="")p&&(A.g=p+"."+A.g),Dr(A,A.u);else{var H=d.location;A=H.protocol,p=p?p+"."+H.hostname:H.hostname,H=+H.port;const X=new xn(null);A&&qt(X,A),p&&(X.g=p),H&&Dr(X,H),v&&(X.h=v),A=X}return v=u.G,p=u.wa,v&&p&&tt(A,v,p),tt(A,"VER",u.ka),Hs(u,A),A}function Xc(u,p,v){if(p&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Aa&&!u.ma?new rt(new Di({ab:v})):new rt(u.ma),p.Fa(u.L),p}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wc(){}r=Wc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ur(){}Ur.prototype.g=function(u,p){return new hn(u,p)};function hn(u,p){Ve.call(this),this.g=new Vr(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(u?u["X-WebChannel-Client-Profile"]=p.sa:u={"X-WebChannel-Client-Profile":p.sa}),this.g.U=u,(u=p&&p.Qb)&&!C(u)&&(this.g.u=u),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new ir(this)}b(hn,Ve),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){il(this.g)},hn.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var v={};v.__data__=u,u=v}else this.v&&(v={},v.__data__=Ir(u),u=v);p.i.push(new Ct(p.Ya++,u)),p.I==3&&Mi(p)},hn.prototype.N=function(){this.g.l=null,delete this.j,il(this.g),delete this.g,hn.Z.N.call(this)};function Jc(u){$t.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const v in p){u=v;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}b(Jc,$t);function Zc(){jn.call(this),this.status=1}b(Zc,jn);function ir(u){this.g=u}b(ir,Wc),ir.prototype.ra=function(){Pe(this.g,"a")},ir.prototype.qa=function(u){Pe(this.g,new Jc(u))},ir.prototype.pa=function(u){Pe(this.g,new Zc)},ir.prototype.oa=function(){Pe(this.g,"b")},Ur.prototype.createWebChannel=Ur.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,qS=function(){return new Ur},BS=function(){return Aa()},zS=Et,Qm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,_h=Ls,Ho.COMPLETE="complete",jS=Ho,Nc.EventType=Zn,Zn.OPEN="a",Zn.CLOSE="b",Zn.ERROR="c",Zn.MESSAGE="d",Ve.prototype.listen=Ve.prototype.J,Kl=Nc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,US=rt}).apply(typeof rh<"u"?rh:typeof self<"u"?self:typeof window<"u"?window:{});const Sv="@firebase/firestore",bv="4.9.2";class sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}sn.UNAUTHENTICATED=new sn(null),sn.GOOGLE_CREDENTIALS=new sn("google-credentials-uid"),sn.FIRST_PARTY=new sn("first-party-uid"),sn.MOCK_USER=new sn("mock-user");let Lo="12.3.0";const ya=new fp("@firebase/firestore");function ho(){return ya.logLevel}function ye(r,...e){if(ya.logLevel<=qe.DEBUG){const n=e.map(xp);ya.debug(`Firestore (${Lo}): ${r}`,...n)}}function xr(r,...e){if(ya.logLevel<=qe.ERROR){const n=e.map(xp);ya.error(`Firestore (${Lo}): ${r}`,...n)}}function To(r,...e){if(ya.logLevel<=qe.WARN){const n=e.map(xp);ya.warn(`Firestore (${Lo}): ${r}`,...n)}}function xp(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function xe(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,HS(r,s,n)}function HS(r,e,n){let s=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw xr(s),new Error(s)}function et(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||HS(e,o,s)}function Ce(r,e){return r}const Z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class fe extends Cr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Hi{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class FS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(sn.UNAUTHENTICATED)))}shutdown(){}}class mC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class pC{constructor(e){this.t=e,this.currentUser=sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){et(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let c=new Hi;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Hi,e.enqueueRetryable((()=>o(this.currentUser)))};const d=()=>{const g=c;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},y=g=>{ye("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit((g=>y(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?y(g):(ye("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Hi)}}),0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(ye("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(et(typeof s.accessToken=="string",31837,{l:s}),new FS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string",2055,{h:e}),new sn(e)}}class gC{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yC{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new gC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,hi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){et(this.o===void 0,3512);const s=c=>{c.error!=null&&ye("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.m;return this.m=c.token,ye("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>s(c)))};const o=c=>{ye("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):ye("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Tv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(et(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Tv(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function vC(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=vC(40);for(let c=0;c<o.length;++c)s.length<20&&o[c]<n&&(s+=e.charAt(o[c]%62))}return s}}function He(r,e){return r<e?-1:r>e?1:0}function Km(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),c=e.charAt(s);if(o!==c)return Cm(o)===Cm(c)?He(o,c):Cm(o)?1:-1}return He(r.length,e.length)}const EC=55296,SC=57343;function Cm(r){const e=r.charCodeAt(0);return e>=EC&&e<=SC}function Ao(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const Av="__name__";class zi{constructor(e,n,s){n===void 0?n=0:n>e.length&&xe(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&xe(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return zi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const c=zi.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return He(e.length,n.length)}static compareSegments(e,n){const s=zi.isNumericId(e),o=zi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?zi.extractNumericId(e).compare(zi.extractNumericId(n)):Km(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ss.fromString(e.substring(4,e.length-2))}}class ct extends zi{construct(e,n,s){return new ct(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new fe(Z.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new ct(n)}static emptyPath(){return new ct([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends zi{construct(e,n,s){return new en(e,n,s)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Av}static keyField(){return new en([Av])}static fromServerFormat(e){const n=[];let s="",o=0;const c=()=>{if(s.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;o<e.length;){const y=e[o];if(y==="\\"){if(o+1===e.length)throw new fe(Z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new fe(Z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else y==="`"?(d=!d,o++):y!=="."||d?(s+=y,o++):(c(),o++)}if(c(),d)throw new fe(Z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(n)}static emptyPath(){return new en([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ct.fromString(e))}static fromName(e){return new Te(ct.fromString(e).popFirst(5))}static empty(){return new Te(ct.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ct.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ct.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ct(e.slice()))}}function GS(r,e,n){if(!n)throw new fe(Z.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function TC(r,e,n,s){if(e===!0&&s===!0)throw new fe(Z.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function wv(r){if(!Te.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function xv(r){if(Te.isDocumentKey(r))throw new fe(Z.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function $S(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function Qh(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xe(12329,{type:typeof r})}function on(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new fe(Z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Qh(r);throw new fe(Z.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function AC(r,e){if(e<=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}function Pt(r,e){const n={typeString:r};return e&&(n.value=e),n}function bc(r,e){if(!$S(r))throw new fe(Z.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,c="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const d=r[s];if(o&&typeof d!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(c!==void 0&&d!==c.value){n=`Expected '${s}' field to equal '${c.value}'`;break}}if(n)throw new fe(Z.INVALID_ARGUMENT,n);return!0}const Rv=-62135596800,Cv=1e6;class ut{static now(){return ut.fromMillis(Date.now())}static fromDate(e){return ut.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Cv);return new ut(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new fe(Z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Rv)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new fe(Z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cv}_compareTo(e){return this.seconds===e.seconds?He(this.nanoseconds,e.nanoseconds):He(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ut._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(bc(e,ut._jsonSchema))return new ut(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Rv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ut._jsonSchemaVersion="firestore/timestamp/1.0",ut._jsonSchema={type:Pt("string",ut._jsonSchemaVersion),seconds:Pt("number"),nanoseconds:Pt("number")};class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new ut(0,0))}static max(){return new De(new ut(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const cc=-1;function wC(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=De.fromTimestamp(s===1e9?new ut(n+1,0):new ut(n,s));return new As(o,Te.empty(),e)}function xC(r){return new As(r.readTime,r.key,cc)}class As{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new As(De.min(),Te.empty(),cc)}static max(){return new As(De.max(),Te.empty(),cc)}}function RC(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(r.documentKey,e.documentKey),n!==0?n:He(r.largestBatchId,e.largestBatchId))}const CC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class IC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Vo(r){if(r.code!==Z.FAILED_PRECONDITION||r.message!==CC)throw r;ye("LocalStore","Unexpectedly lost primary lease")}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new oe(((s,o)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,o)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof oe?n:oe.resolve(n)}catch(n){return oe.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):oe.reject(n)}static resolve(e){return new oe(((n,s)=>{n(e)}))}static reject(e){return new oe(((n,s)=>{s(e)}))}static waitFor(e){return new oe(((n,s)=>{let o=0,c=0,d=!1;e.forEach((y=>{++o,y.next((()=>{++c,d&&c===o&&n()}),(g=>s(g)))})),d=!0,c===o&&n()}))}static or(e){let n=oe.resolve(!1);for(const s of e)n=n.next((o=>o?oe.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,c)=>{s.push(n.call(this,o,c))})),this.waitFor(s)}static mapArray(e,n){return new oe(((s,o)=>{const c=e.length,d=new Array(c);let y=0;for(let g=0;g<c;g++){const m=g;n(e[m]).next((S=>{d[m]=S,++y,y===c&&s(d)}),(S=>o(S)))}}))}static doWhile(e,n){return new oe(((s,o)=>{const c=()=>{e()===!0?n().next((()=>{c()}),o):s()};c()}))}}function DC(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Po(r){return r.name==="IndexedDbTransactionError"}class Kh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Kh.ce=-1;const Cp=-1;function Xh(r){return r==null}function Mh(r){return r===0&&1/r==-1/0}function NC(r){return typeof r=="number"&&Number.isInteger(r)&&!Mh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const YS="";function OC(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=Iv(e)),e=MC(r.get(n),e);return Iv(e)}function MC(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const c=r.charAt(o);switch(c){case"\0":n+="";break;case YS:n+="";break;default:n+=c}}return n}function Iv(r){return r+YS+""}function Dv(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function Ds(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function kC(r,e){const n=[];for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&n.push(e(r[s],s,r));return n}function QS(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class gt{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new gt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new gt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sh(this.root,e,this.comparator,!0)}}class sh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&o&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??Zt.RED,this.left=o??Zt.EMPTY,this.right=c??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,c){return new Zt(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return o=c<0?o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Zt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,n,s,o,c){return this}insert(e,n,s){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jt{constructor(e){this.comparator=e,this.data=new gt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nv(this.data.getIterator())}getIteratorFrom(e){return new Nv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(this.comparator(o,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class Nv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ln{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new jt(en.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ao(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class KS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new KS("Invalid base64 string: "+c):c}})(e);return new tn(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let d=0;d<o.length;++d)c+=String.fromCharCode(o[d]);return c})(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return He(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const LC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ws(r){if(et(!!r,39018),typeof r=="string"){let e=0;const n=LC.exec(r);if(et(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:At(r.seconds),nanos:At(r.nanos)}}function At(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function xs(r){return typeof r=="string"?tn.fromBase64String(r):tn.fromUint8Array(r)}const XS="server_timestamp",WS="__type__",JS="__previous_value__",ZS="__local_write_time__";function Wh(r){return(r?.mapValue?.fields||{})[WS]?.stringValue===XS}function Jh(r){const e=r.mapValue.fields[JS];return Wh(e)?Jh(e):e}function uc(r){const e=ws(r.mapValue.fields[ZS].timestampValue);return new ut(e.seconds,e.nanos)}class VC{constructor(e,n,s,o,c,d,y,g,m,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=y,this.longPollingOptions=g,this.useFetchStreams=m,this.isUsingEmulator=S}}const kh="(default)";class hc{constructor(e,n){this.projectId=e,this.database=n||kh}static empty(){return new hc("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof hc&&e.projectId===this.projectId&&e.database===this.database}}const eb="__type__",PC="__max__",ah={mapValue:{}},tb="__vector__",Lh="value";function Rs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Wh(r)?4:jC(r)?9007199254740991:UC(r)?10:11:xe(28295,{value:r})}function Ki(r,e){if(r===e)return!0;const n=Rs(r);if(n!==Rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return uc(r).isEqual(uc(e));case 3:return(function(o,c){if(typeof o.timestampValue=="string"&&typeof c.timestampValue=="string"&&o.timestampValue.length===c.timestampValue.length)return o.timestampValue===c.timestampValue;const d=ws(o.timestampValue),y=ws(c.timestampValue);return d.seconds===y.seconds&&d.nanos===y.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,c){return xs(o.bytesValue).isEqual(xs(c.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,c){return At(o.geoPointValue.latitude)===At(c.geoPointValue.latitude)&&At(o.geoPointValue.longitude)===At(c.geoPointValue.longitude)})(r,e);case 2:return(function(o,c){if("integerValue"in o&&"integerValue"in c)return At(o.integerValue)===At(c.integerValue);if("doubleValue"in o&&"doubleValue"in c){const d=At(o.doubleValue),y=At(c.doubleValue);return d===y?Mh(d)===Mh(y):isNaN(d)&&isNaN(y)}return!1})(r,e);case 9:return Ao(r.arrayValue.values||[],e.arrayValue.values||[],Ki);case 10:case 11:return(function(o,c){const d=o.mapValue.fields||{},y=c.mapValue.fields||{};if(Dv(d)!==Dv(y))return!1;for(const g in d)if(d.hasOwnProperty(g)&&(y[g]===void 0||!Ki(d[g],y[g])))return!1;return!0})(r,e);default:return xe(52216,{left:r})}}function dc(r,e){return(r.values||[]).find((n=>Ki(n,e)))!==void 0}function wo(r,e){if(r===e)return 0;const n=Rs(r),s=Rs(e);if(n!==s)return He(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return He(r.booleanValue,e.booleanValue);case 2:return(function(c,d){const y=At(c.integerValue||c.doubleValue),g=At(d.integerValue||d.doubleValue);return y<g?-1:y>g?1:y===g?0:isNaN(y)?isNaN(g)?0:-1:1})(r,e);case 3:return Ov(r.timestampValue,e.timestampValue);case 4:return Ov(uc(r),uc(e));case 5:return Km(r.stringValue,e.stringValue);case 6:return(function(c,d){const y=xs(c),g=xs(d);return y.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(c,d){const y=c.split("/"),g=d.split("/");for(let m=0;m<y.length&&m<g.length;m++){const S=He(y[m],g[m]);if(S!==0)return S}return He(y.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(c,d){const y=He(At(c.latitude),At(d.latitude));return y!==0?y:He(At(c.longitude),At(d.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Mv(r.arrayValue,e.arrayValue);case 10:return(function(c,d){const y=c.fields||{},g=d.fields||{},m=y[Lh]?.arrayValue,S=g[Lh]?.arrayValue,b=He(m?.values?.length||0,S?.values?.length||0);return b!==0?b:Mv(m,S)})(r.mapValue,e.mapValue);case 11:return(function(c,d){if(c===ah.mapValue&&d===ah.mapValue)return 0;if(c===ah.mapValue)return 1;if(d===ah.mapValue)return-1;const y=c.fields||{},g=Object.keys(y),m=d.fields||{},S=Object.keys(m);g.sort(),S.sort();for(let b=0;b<g.length&&b<S.length;++b){const I=Km(g[b],S[b]);if(I!==0)return I;const V=wo(y[g[b]],m[S[b]]);if(V!==0)return V}return He(g.length,S.length)})(r.mapValue,e.mapValue);default:throw xe(23264,{he:n})}}function Ov(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return He(r,e);const n=ws(r),s=ws(e),o=He(n.seconds,s.seconds);return o!==0?o:He(n.nanos,s.nanos)}function Mv(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const c=wo(n[o],s[o]);if(c)return c}return He(n.length,s.length)}function xo(r){return Xm(r)}function Xm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=ws(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return xs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return Te.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const c of n.values||[])o?o=!1:s+=",",s+=Xm(c);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",c=!0;for(const d of s)c?c=!1:o+=",",o+=`${d}:${Xm(n.fields[d])}`;return o+"}"})(r.mapValue):xe(61005,{value:r})}function vh(r){switch(Rs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jh(r);return e?16+vh(e):16;case 5:return 2*r.stringValue.length;case 6:return xs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,c)=>o+vh(c)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ds(s.fields,((c,d)=>{o+=c.length+vh(d)})),o})(r.mapValue);default:throw xe(13486,{value:r})}}function Vh(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Wm(r){return!!r&&"integerValue"in r}function Ip(r){return!!r&&"arrayValue"in r}function kv(r){return!!r&&"nullValue"in r}function Lv(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Eh(r){return!!r&&"mapValue"in r}function UC(r){return(r?.mapValue?.fields||{})[eb]?.stringValue===tb}function nc(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ds(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=nc(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nc(r.arrayValue.values[n]);return e}return{...r}}function jC(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===PC}class An{constructor(e){this.value=e}static empty(){return new An({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Eh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nc(n)}setAll(e){let n=en.emptyPath(),s={},o=[];e.forEach(((d,y)=>{if(!n.isImmediateParentOf(y)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=y.popLast()}d?s[y.lastSegment()]=nc(d):o.push(y.lastSegment())}));const c=this.getFieldsMap(n);this.applyChanges(c,s,o)}delete(e){const n=this.field(e.popLast());Eh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Eh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Ds(n,((o,c)=>e[o]=c));for(const o of s)delete e[o]}clone(){return new An(nc(this.value))}}function nb(r){const e=[];return Ds(r.fields,((n,s)=>{const o=new en([n]);if(Eh(s)){const c=nb(s.mapValue).fields;if(c.length===0)e.push(o);else for(const d of c)e.push(o.child(d))}else e.push(o)})),new Ln(e)}class an{constructor(e,n,s,o,c,d,y){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=c,this.data=d,this.documentState=y}static newInvalidDocument(e){return new an(e,0,De.min(),De.min(),De.min(),An.empty(),0)}static newFoundDocument(e,n,s,o){return new an(e,1,n,De.min(),s,o,0)}static newNoDocument(e,n){return new an(e,2,n,De.min(),De.min(),An.empty(),0)}static newUnknownDocument(e,n){return new an(e,3,n,De.min(),De.min(),An.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=An.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=An.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof an&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ro{constructor(e,n){this.position=e,this.inclusive=n}}function Vv(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const c=e[o],d=r.position[o];if(c.field.isKeyField()?s=Te.comparator(Te.fromName(d.referenceValue),n.key):s=wo(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Pv(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!Ki(r.position[n],e.position[n]))return!1;return!0}class fc{constructor(e,n="asc"){this.field=e,this.dir=n}}function zC(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class ib{}class Vt extends ib{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new qC(e,n,s):n==="array-contains"?new GC(e,s):n==="in"?new $C(e,s):n==="not-in"?new YC(e,s):n==="array-contains-any"?new QC(e,s):new Vt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new HC(e,s):new FC(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(wo(n,this.value)):n!==null&&Rs(this.value)===Rs(n)&&this.matchesComparison(wo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mi extends ib{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new mi(e,n)}matches(e){return rb(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function rb(r){return r.op==="and"}function sb(r){return BC(r)&&rb(r)}function BC(r){for(const e of r.filters)if(e instanceof mi)return!1;return!0}function Jm(r){if(r instanceof Vt)return r.field.canonicalString()+r.op.toString()+xo(r.value);if(sb(r))return r.filters.map((e=>Jm(e))).join(",");{const e=r.filters.map((n=>Jm(n))).join(",");return`${r.op}(${e})`}}function ab(r,e){return r instanceof Vt?(function(s,o){return o instanceof Vt&&s.op===o.op&&s.field.isEqual(o.field)&&Ki(s.value,o.value)})(r,e):r instanceof mi?(function(s,o){return o instanceof mi&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((c,d,y)=>c&&ab(d,o.filters[y])),!0):!1})(r,e):void xe(19439)}function ob(r){return r instanceof Vt?(function(n){return`${n.field.canonicalString()} ${n.op} ${xo(n.value)}`})(r):r instanceof mi?(function(n){return n.op.toString()+" {"+n.getFilters().map(ob).join(" ,")+"}"})(r):"Filter"}class qC extends Vt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class HC extends Vt{constructor(e,n){super(e,"in",n),this.keys=lb("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class FC extends Vt{constructor(e,n){super(e,"not-in",n),this.keys=lb("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function lb(r,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class GC extends Vt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ip(n)&&dc(n.arrayValue,this.value)}}class $C extends Vt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&dc(this.value.arrayValue,n)}}class YC extends Vt{constructor(e,n){super(e,"not-in",n)}matches(e){if(dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!dc(this.value.arrayValue,n)}}class QC extends Vt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ip(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>dc(this.value.arrayValue,s)))}}class KC{constructor(e,n=null,s=[],o=[],c=null,d=null,y=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=c,this.startAt=d,this.endAt=y,this.Te=null}}function Uv(r,e=null,n=[],s=[],o=null,c=null,d=null){return new KC(r,e,n,s,o,c,d)}function Dp(r){const e=Ce(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>Jm(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(c){return c.field.canonicalString()+c.dir})(s))).join(","),Xh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>xo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>xo(s))).join(",")),e.Te=n}return e.Te}function Np(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!zC(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!ab(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Pv(r.startAt,e.startAt)&&Pv(r.endAt,e.endAt)}function Zm(r){return Te.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class va{constructor(e,n=null,s=[],o=[],c=null,d="F",y=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=c,this.limitType=d,this.startAt=y,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XC(r,e,n,s,o,c,d,y){return new va(r,e,n,s,o,c,d,y)}function Zh(r){return new va(r)}function jv(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Op(r){return r.collectionGroup!==null}function vo(r){const e=Ce(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let y=new jt(en.comparator);return d.filters.forEach((g=>{g.getFlattenedFilters().forEach((m=>{m.isInequality()&&(y=y.add(m.field))}))})),y})(e).forEach((c=>{n.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new fc(c,s))})),n.has(en.keyField().canonicalString())||e.Ie.push(new fc(en.keyField(),s))}return e.Ie}function Fi(r){const e=Ce(r);return e.Ee||(e.Ee=cb(e,vo(r))),e.Ee}function WC(r){const e=Ce(r);return e.de||(e.de=cb(e,r.explicitOrderBy)),e.de}function cb(r,e){if(r.limitType==="F")return Uv(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const c=o.dir==="desc"?"asc":"desc";return new fc(o.field,c)}));const n=r.endAt?new Ro(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new Ro(r.startAt.position,r.startAt.inclusive):null;return Uv(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function ep(r,e){const n=r.filters.concat([e]);return new va(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function Ph(r,e,n){return new va(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function ed(r,e){return Np(Fi(r),Fi(e))&&r.limitType===e.limitType}function ub(r){return`${Dp(Fi(r))}|lt:${r.limitType}`}function fo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>ob(o))).join(", ")}]`),Xh(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(d){return`${d.field.canonicalString()} (${d.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>xo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>xo(o))).join(",")),`Target(${s})`})(Fi(r))}; limitType=${r.limitType})`}function td(r,e){return e.isFoundDocument()&&(function(s,o){const c=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):Te.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)})(r,e)&&(function(s,o){for(const c of vo(s))if(!c.field.isKeyField()&&o.data.field(c.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const c of s.filters)if(!c.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(d,y,g){const m=Vv(d,y,g);return d.inclusive?m<=0:m<0})(s.startAt,vo(s),o)||s.endAt&&!(function(d,y,g){const m=Vv(d,y,g);return d.inclusive?m>=0:m>0})(s.endAt,vo(s),o))})(r,e)}function JC(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function hb(r){return(e,n)=>{let s=!1;for(const o of vo(r)){const c=ZC(o,e,n);if(c!==0)return c;s=s||o.field.isKeyField()}return 0}}function ZC(r,e,n){const s=r.field.isKeyField()?Te.comparator(e.key,n.key):(function(c,d,y){const g=d.data.field(c),m=y.data.field(c);return g!==null&&m!==null?wo(g,m):xe(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return xe(19790,{direction:r.dir})}}class Ea{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,c]of s)if(this.equalsFn(o,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<o.length;c++)if(this.equalsFn(o[c][0],e))return void(o[c]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,((n,s)=>{for(const[o,c]of s)e(o,c)}))}isEmpty(){return QS(this.inner)}size(){return this.innerSize}}const e2=new gt(Te.comparator);function Rr(){return e2}const db=new gt(Te.comparator);function Xl(...r){let e=db;for(const n of r)e=e.insert(n.key,n);return e}function fb(r){let e=db;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ua(){return ic()}function mb(){return ic()}function ic(){return new Ea((r=>r.toString()),((r,e)=>r.isEqual(e)))}const t2=new gt(Te.comparator),n2=new jt(Te.comparator);function Fe(...r){let e=n2;for(const n of r)e=e.add(n);return e}const i2=new jt(He);function r2(){return i2}function Mp(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Mh(e)?"-0":e}}function pb(r){return{integerValue:""+r}}function gb(r,e){return NC(e)?pb(e):Mp(r,e)}class nd{constructor(){this._=void 0}}function s2(r,e,n){return r instanceof mc?(function(o,c){const d={fields:{[WS]:{stringValue:XS},[ZS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return c&&Wh(c)&&(c=Jh(c)),c&&(d.fields[JS]=c),{mapValue:d}})(n,e):r instanceof Co?_b(r,e):r instanceof Io?vb(r,e):(function(o,c){const d=yb(o,c),y=zv(d)+zv(o.Ae);return Wm(d)&&Wm(o.Ae)?pb(y):Mp(o.serializer,y)})(r,e)}function a2(r,e,n){return r instanceof Co?_b(r,e):r instanceof Io?vb(r,e):n}function yb(r,e){return r instanceof pc?(function(s){return Wm(s)||(function(c){return!!c&&"doubleValue"in c})(s)})(e)?e:{integerValue:0}:null}class mc extends nd{}class Co extends nd{constructor(e){super(),this.elements=e}}function _b(r,e){const n=Eb(e);for(const s of r.elements)n.some((o=>Ki(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Io extends nd{constructor(e){super(),this.elements=e}}function vb(r,e){let n=Eb(e);for(const s of r.elements)n=n.filter((o=>!Ki(o,s)));return{arrayValue:{values:n}}}class pc extends nd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function zv(r){return At(r.integerValue||r.doubleValue)}function Eb(r){return Ip(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class id{constructor(e,n){this.field=e,this.transform=n}}function o2(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Co&&o instanceof Co||s instanceof Io&&o instanceof Io?Ao(s.elements,o.elements,Ki):s instanceof pc&&o instanceof pc?Ki(s.Ae,o.Ae):s instanceof mc&&o instanceof mc})(r.transform,e.transform)}class l2{constructor(e,n){this.version=e,this.transformResults=n}}class mn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new mn}static exists(e){return new mn(void 0,e)}static updateTime(e){return new mn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Sh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class rd{}function Sb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new sd(r.key,mn.none()):new Tc(r.key,r.data,mn.none());{const n=r.data,s=An.empty();let o=new jt(en.comparator);for(let c of e.fields)if(!o.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),o=o.add(c)}return new Ns(r.key,s,new Ln(o.toArray()),mn.none())}}function c2(r,e,n){r instanceof Tc?(function(o,c,d){const y=o.value.clone(),g=qv(o.fieldTransforms,c,d.transformResults);y.setAll(g),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()})(r,e,n):r instanceof Ns?(function(o,c,d){if(!Sh(o.precondition,c))return void c.convertToUnknownDocument(d.version);const y=qv(o.fieldTransforms,c,d.transformResults),g=c.data;g.setAll(bb(o)),g.setAll(y),c.convertToFoundDocument(d.version,g).setHasCommittedMutations()})(r,e,n):(function(o,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()})(0,e,n)}function rc(r,e,n,s){return r instanceof Tc?(function(c,d,y,g){if(!Sh(c.precondition,d))return y;const m=c.value.clone(),S=Hv(c.fieldTransforms,g,d);return m.setAll(S),d.convertToFoundDocument(d.version,m).setHasLocalMutations(),null})(r,e,n,s):r instanceof Ns?(function(c,d,y,g){if(!Sh(c.precondition,d))return y;const m=Hv(c.fieldTransforms,g,d),S=d.data;return S.setAll(bb(c)),S.setAll(m),d.convertToFoundDocument(d.version,S).setHasLocalMutations(),y===null?null:y.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((b=>b.field)))})(r,e,n,s):(function(c,d,y){return Sh(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):y})(r,e,n)}function u2(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),c=yb(s.transform,o||null);c!=null&&(n===null&&(n=An.empty()),n.set(s.field,c))}return n||null}function Bv(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Ao(s,o,((c,d)=>o2(c,d)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Tc extends rd{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ns extends rd{constructor(e,n,s,o,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function bb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function qv(r,e,n){const s=new Map;et(r.length===n.length,32656,{Re:n.length,Ve:r.length});for(let o=0;o<n.length;o++){const c=r[o],d=c.transform,y=e.data.field(c.field);s.set(c.field,a2(d,y,n[o]))}return s}function Hv(r,e,n){const s=new Map;for(const o of r){const c=o.transform,d=n.data.field(o.field);s.set(o.field,s2(c,d,e))}return s}class sd extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends rd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class d2{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const c=this.mutations[o];c.key.isEqual(e.key)&&c2(c,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=rc(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=rc(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=mb();return this.mutations.forEach((o=>{const c=e.get(o.key),d=c.overlayedDocument;let y=this.applyToLocalView(d,c.mutatedFields);y=n.has(o.key)?null:y;const g=Sb(d,y);g!==null&&s.set(o.key,g),d.isValidDocument()||d.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Fe())}isEqual(e){return this.batchId===e.batchId&&Ao(this.mutations,e.mutations,((n,s)=>Bv(n,s)))&&Ao(this.baseMutations,e.baseMutations,((n,s)=>Bv(n,s)))}}class kp{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){et(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return t2})();const c=e.mutations;for(let d=0;d<c.length;d++)o=o.insert(c[d].key,s[d].version);return new kp(e,n,s,o)}}class f2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class m2{constructor(e,n,s){this.alias=e,this.aggregateType=n,this.fieldPath=s}}class p2{constructor(e,n){this.count=e,this.unchangedNames=n}}var kt,Qe;function g2(r){switch(r){case Z.OK:return xe(64938);case Z.CANCELLED:case Z.UNKNOWN:case Z.DEADLINE_EXCEEDED:case Z.RESOURCE_EXHAUSTED:case Z.INTERNAL:case Z.UNAVAILABLE:case Z.UNAUTHENTICATED:return!1;case Z.INVALID_ARGUMENT:case Z.NOT_FOUND:case Z.ALREADY_EXISTS:case Z.PERMISSION_DENIED:case Z.FAILED_PRECONDITION:case Z.ABORTED:case Z.OUT_OF_RANGE:case Z.UNIMPLEMENTED:case Z.DATA_LOSS:return!0;default:return xe(15467,{code:r})}}function Tb(r){if(r===void 0)return xr("GRPC error has no .code"),Z.UNKNOWN;switch(r){case kt.OK:return Z.OK;case kt.CANCELLED:return Z.CANCELLED;case kt.UNKNOWN:return Z.UNKNOWN;case kt.DEADLINE_EXCEEDED:return Z.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return Z.RESOURCE_EXHAUSTED;case kt.INTERNAL:return Z.INTERNAL;case kt.UNAVAILABLE:return Z.UNAVAILABLE;case kt.UNAUTHENTICATED:return Z.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return Z.INVALID_ARGUMENT;case kt.NOT_FOUND:return Z.NOT_FOUND;case kt.ALREADY_EXISTS:return Z.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return Z.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return Z.FAILED_PRECONDITION;case kt.ABORTED:return Z.ABORTED;case kt.OUT_OF_RANGE:return Z.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return Z.UNIMPLEMENTED;case kt.DATA_LOSS:return Z.DATA_LOSS;default:return xe(39323,{code:r})}}(Qe=kt||(kt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";function y2(){return new TextEncoder}const _2=new Ss([4294967295,4294967295],0);function Fv(r){const e=y2().encode(r),n=new PS;return n.update(e),new Uint8Array(n.digest())}function Gv(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Ss([n,s],0),new Ss([o,c],0)]}class Lp{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Wl(`Invalid padding: ${n}`);if(s<0)throw new Wl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Wl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Wl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ss.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(Ss.fromNumber(s)));return o.compare(_2)===1&&(o=new Ss([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Fv(e),[s,o]=Gv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);if(!this.we(d))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Lp(c,o,n);return s.forEach((y=>d.insert(y))),d}insert(e){if(this.ge===0)return;const n=Fv(e),[s,o]=Gv(n);for(let c=0;c<this.hashCount;c++){const d=this.ye(s,o,c);this.Se(d)}}Se(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Wl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ad{constructor(e,n,s,o,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Ac.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ad(De.min(),o,new gt(He),Rr(),Fe())}}class Ac{constructor(e,n,s,o,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Ac(s,n,Fe(),Fe(),Fe())}}class bh{constructor(e,n,s,o){this.be=e,this.removedTargetIds=n,this.key=s,this.De=o}}class Ab{constructor(e,n){this.targetId=e,this.Ce=n}}class wb{constructor(e,n,s=tn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class $v{constructor(){this.ve=0,this.Fe=Yv(),this.Me=tn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Fe(),n=Fe(),s=Fe();return this.Fe.forEach(((o,c)=>{switch(c){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:xe(38017,{changeType:c})}})),new Ac(this.Me,this.xe,e,n,s)}qe(){this.Oe=!1,this.Fe=Yv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,et(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class v2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Rr(),this.Je=oh(),this.He=oh(),this.Ye=new gt(He)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const c=o.target;if(Zm(c))if(s===0){const d=new Te(c.path);this.et(n,d,an.newNoDocument(d,De.min()))}else et(s===1,20013,{expectedCount:s});else{const d=this._t(n);if(d!==s){const y=this.ut(e),g=y?this.ct(y,e,d):1;if(g!==0){this.it(n);const m=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,m)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:c=0}=n;let d,y;try{d=xs(s).toUint8Array()}catch(g){if(g instanceof KS)return To("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{y=new Lp(d,o,c)}catch(g){return To(g instanceof Wl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return y.ge===0?null:y}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((c=>{const d=this.Ge.ht(),y=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(y)||(this.et(n,c,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((c,d)=>{const y=this.ot(d);if(y){if(c.current&&Zm(y.target)){const g=new Te(y.target.path);this.It(g).has(d)||this.Et(d,g)||this.et(d,g,an.newNoDocument(g,e))}c.Be&&(n.set(d,c.ke()),c.qe())}}));let s=Fe();this.He.forEach(((c,d)=>{let y=!0;d.forEachWhile((g=>{const m=this.ot(g);return!m||m.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(s=s.add(c))})),this.je.forEach(((c,d)=>d.setReadTime(e)));const o=new ad(e,n,this.Ye,this.je,s);return this.je=Rr(),this.Je=oh(),this.He=oh(),this.Ye=new gt(He),o}Xe(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new $v,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new jt(He),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new jt(He),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ye("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $v),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function oh(){return new gt(Te.comparator)}function Yv(){return new gt(Te.comparator)}const E2={asc:"ASCENDING",desc:"DESCENDING"},S2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},b2={and:"AND",or:"OR"};class T2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function tp(r,e){return r.useProto3Json||Xh(e)?e:{value:e}}function Uh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function A2(r,e){return Uh(r,e.toTimestamp())}function Gi(r){return et(!!r,49232),De.fromTimestamp((function(n){const s=ws(n);return new ut(s.seconds,s.nanos)})(r))}function Vp(r,e){return np(r,e).canonicalString()}function np(r,e){const n=(function(o){return new ct(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function Rb(r){const e=ct.fromString(r);return et(Mb(e),10190,{key:e.toString()}),e}function ip(r,e){return Vp(r.databaseId,e.path)}function Im(r,e){const n=Rb(e);if(n.get(1)!==r.databaseId.projectId)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new fe(Z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new Te(Ib(n))}function Cb(r,e){return Vp(r.databaseId,e)}function w2(r){const e=Rb(r);return e.length===4?ct.emptyPath():Ib(e)}function rp(r){return new ct(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Ib(r){return et(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Qv(r,e,n){return{name:ip(r,e),fields:n.value.mapValue.fields}}function x2(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:xe(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],c=(function(m,S){return m.useProto3Json?(et(S===void 0||typeof S=="string",58123),tn.fromBase64String(S||"")):(et(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),tn.fromUint8Array(S||new Uint8Array))})(r,e.targetChange.resumeToken),d=e.targetChange.cause,y=d&&(function(m){const S=m.code===void 0?Z.UNKNOWN:Tb(m.code);return new fe(S,m.message||"")})(d);n=new wb(s,o,c,y||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Im(r,s.document.name),c=Gi(s.document.updateTime),d=s.document.createTime?Gi(s.document.createTime):De.min(),y=new An({mapValue:{fields:s.document.fields}}),g=an.newFoundDocument(o,c,d,y),m=s.targetIds||[],S=s.removedTargetIds||[];n=new bh(m,S,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Im(r,s.document),c=s.readTime?Gi(s.readTime):De.min(),d=an.newNoDocument(o,c),y=s.removedTargetIds||[];n=new bh([],y,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Im(r,s.document),c=s.removedTargetIds||[];n=new bh([],c,o,null)}else{if(!("filter"in e))return xe(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:c}=s,d=new p2(o,c),y=s.targetId;n=new Ab(y,d)}}return n}function R2(r,e){let n;if(e instanceof Tc)n={update:Qv(r,e.key,e.value)};else if(e instanceof sd)n={delete:ip(r,e.key)};else if(e instanceof Ns)n={update:Qv(r,e.key,e.data),updateMask:V2(e.fieldMask)};else{if(!(e instanceof h2))return xe(16599,{Vt:e.type});n={verify:ip(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(c,d){const y=d.transform;if(y instanceof mc)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Co)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Io)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof pc)return{fieldPath:d.field.canonicalString(),increment:y.Ae};throw xe(20930,{transform:d.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,c){return c.updateTime!==void 0?{updateTime:A2(o,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:xe(27497)})(r,e.precondition)),n}function C2(r,e){return r&&r.length>0?(et(e!==void 0,14353),r.map((n=>(function(o,c){let d=o.updateTime?Gi(o.updateTime):Gi(c);return d.isEqual(De.min())&&(d=Gi(c)),new l2(d,o.transformResults||[])})(n,e)))):[]}function I2(r,e){return{documents:[Cb(r,e.path)]}}function Db(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Cb(r,o);const c=(function(m){if(m.length!==0)return Ob(mi.create(m,"and"))})(e.filters);c&&(n.structuredQuery.where=c);const d=(function(m){if(m.length!==0)return m.map((S=>(function(I){return{field:ms(I.field),direction:M2(I.dir)}})(S)))})(e.orderBy);d&&(n.structuredQuery.orderBy=d);const y=tp(r,e.limit);return y!==null&&(n.structuredQuery.limit=y),e.startAt&&(n.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:n,parent:o}}function D2(r,e,n,s){const{ft:o,parent:c}=Db(r,e),d={},y=[];let g=0;return n.forEach((m=>{const S="aggregate_"+g++;d[S]=m.alias,m.aggregateType==="count"?y.push({alias:S,count:{}}):m.aggregateType==="avg"?y.push({alias:S,avg:{field:ms(m.fieldPath)}}):m.aggregateType==="sum"&&y.push({alias:S,sum:{field:ms(m.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:y,structuredQuery:o.structuredQuery},parent:o.parent},gt:d,parent:c}}function N2(r){let e=w2(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){et(s===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:e=e.child(S.collectionId)}let c=[];n.where&&(c=(function(b){const I=Nb(b);return I instanceof mi&&sb(I)?I.getFilters():[I]})(n.where));let d=[];n.orderBy&&(d=(function(b){return b.map((I=>(function(U){return new fc(mo(U.field),(function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(I)))})(n.orderBy));let y=null;n.limit&&(y=(function(b){let I;return I=typeof b=="object"?b.value:b,Xh(I)?null:I})(n.limit));let g=null;n.startAt&&(g=(function(b){const I=!!b.before,V=b.values||[];return new Ro(V,I)})(n.startAt));let m=null;return n.endAt&&(m=(function(b){const I=!b.before,V=b.values||[];return new Ro(V,I)})(n.endAt)),XC(e,o,d,c,y,"F",g,m)}function O2(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Nb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=mo(n.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=mo(n.unaryFilter.field);return Vt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=mo(n.unaryFilter.field);return Vt.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=mo(n.unaryFilter.field);return Vt.create(d,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Vt.create(mo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return mi.create(n.compositeFilter.filters.map((s=>Nb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(n.compositeFilter.op))})(r):xe(30097,{filter:r})}function M2(r){return E2[r]}function k2(r){return S2[r]}function L2(r){return b2[r]}function ms(r){return{fieldPath:r.canonicalString()}}function mo(r){return en.fromServerFormat(r.fieldPath)}function Ob(r){return r instanceof Vt?(function(n){if(n.op==="=="){if(Lv(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NAN"}};if(kv(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lv(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NAN"}};if(kv(n.value))return{unaryFilter:{field:ms(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(n.field),op:k2(n.op),value:n.value}}})(r):r instanceof mi?(function(n){const s=n.getFilters().map((o=>Ob(o)));return s.length===1?s[0]:{compositeFilter:{op:L2(n.op),filters:s}}})(r):xe(54877,{filter:r})}function V2(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function Mb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}class gs{constructor(e,n,s,o,c=De.min(),d=De.min(),y=tn.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=y,this.expectedCount=g}withSequenceNumber(e){return new gs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class P2{constructor(e){this.yt=e}}function U2(r){const e=N2({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?Ph(e,e.limit,"L"):e}class j2{constructor(){this.Cn=new z2}addToCollectionParentIndex(e,n){return this.Cn.add(n),oe.resolve()}getCollectionParents(e,n){return oe.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return oe.resolve()}deleteFieldIndex(e,n){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,n){return oe.resolve()}getDocumentsMatchingTarget(e,n){return oe.resolve(null)}getIndexType(e,n){return oe.resolve(0)}getFieldIndexes(e,n){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,n){return oe.resolve(As.min())}getMinOffsetFromCollectionGroup(e,n){return oe.resolve(As.min())}updateCollectionGroup(e,n,s){return oe.resolve()}updateIndexEntries(e,n){return oe.resolve()}}class z2{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new jt(ct.comparator),c=!o.has(s);return this.index[n]=o.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new jt(ct.comparator)).toArray()}}const Kv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kb=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(kb,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);class Do{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Do(0)}static cr(){return new Do(-1)}}const Xv="LruGarbageCollector",B2=1048576;function Wv([r,e],[n,s]){const o=He(r,n);return o===0?He(e,s):o}class q2{constructor(e){this.Ir=e,this.buffer=new jt(Wv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();Wv(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class H2{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ye(Xv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Po(n)?ye(Xv,"Ignoring IndexedDB error during garbage collection: ",n):await Vo(n)}await this.Vr(3e5)}))}}class F2{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return oe.resolve(Kh.ce);const s=new q2(n);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.mr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ye("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Kv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ye("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kv):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let s,o,c,d,y,g,m;const S=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(ye("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),o=this.params.maximumSequenceNumbersToCollect):o=b,d=Date.now(),this.nthSequenceNumber(e,o)))).next((b=>(s=b,y=Date.now(),this.removeTargets(e,s,n)))).next((b=>(c=b,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((b=>(m=Date.now(),ho()<=qe.DEBUG&&ye("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-S}ms
	Determined least recently used ${o} in `+(y-d)+`ms
	Removed ${c} targets in `+(g-y)+`ms
	Removed ${b} documents in `+(m-g)+`ms
Total Duration: ${m-S}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:c,documentsRemoved:b}))))}}function G2(r,e){return new F2(r,e)}class $2{constructor(){this.changes=new Ea((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,an.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?oe.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Y2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class Q2{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&rc(s.mutation,o,Ln.empty(),ut.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Fe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Fe()){const o=ua();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((c=>{let d=Xl();return c.forEach(((y,g)=>{d=d.insert(y,g.overlayedDocument)})),d}))))}getOverlayedDocuments(e,n){const s=ua();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Fe())))}populateOverlays(e,n,s){const o=[];return s.forEach((c=>{n.has(c)||o.push(c)})),this.documentOverlayCache.getOverlays(e,o).next((c=>{c.forEach(((d,y)=>{n.set(d,y)}))}))}computeViews(e,n,s,o){let c=Rr();const d=ic(),y=(function(){return ic()})();return n.forEach(((g,m)=>{const S=s.get(m.key);o.has(m.key)&&(S===void 0||S.mutation instanceof Ns)?c=c.insert(m.key,m):S!==void 0?(d.set(m.key,S.mutation.getFieldMask()),rc(S.mutation,m,S.mutation.getFieldMask(),ut.now())):d.set(m.key,Ln.empty())})),this.recalculateAndSaveOverlays(e,c).next((g=>(g.forEach(((m,S)=>d.set(m,S))),n.forEach(((m,S)=>y.set(m,new Y2(S,d.get(m)??null)))),y)))}recalculateAndSaveOverlays(e,n){const s=ic();let o=new gt(((d,y)=>d-y)),c=Fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((d=>{for(const y of d)y.keys().forEach((g=>{const m=n.get(g);if(m===null)return;let S=s.get(g)||Ln.empty();S=y.applyToLocalView(m,S),s.set(g,S);const b=(o.get(y.batchId)||Fe()).add(g);o=o.insert(y.batchId,b)}))})).next((()=>{const d=[],y=o.getReverseIterator();for(;y.hasNext();){const g=y.getNext(),m=g.key,S=g.value,b=mb();S.forEach((I=>{if(!c.has(I)){const V=Sb(n.get(I),s.get(I));V!==null&&b.set(I,V),c=c.add(I)}})),d.push(this.documentOverlayCache.saveOverlays(e,m,b))}return oe.waitFor(d)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return(function(d){return Te.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Op(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((c=>{const d=o-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-c.size):oe.resolve(ua());let y=cc,g=c;return d.next((m=>oe.forEach(m,((S,b)=>(y<b.largestBatchId&&(y=b.largestBatchId),c.get(S)?oe.resolve():this.remoteDocumentCache.getEntry(e,S).next((I=>{g=g.insert(S,I)}))))).next((()=>this.populateOverlays(e,m,c))).next((()=>this.computeViews(e,g,m,Fe()))).next((S=>({batchId:y,changes:fb(S)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=Xl();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const c=n.collectionGroup;let d=Xl();return this.indexManager.getCollectionParents(e,c).next((y=>oe.forEach(y,(g=>{const m=(function(b,I){return new va(I,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(n,g.child(c));return this.getDocumentsMatchingCollectionQuery(e,m,s,o).next((S=>{S.forEach(((b,I)=>{d=d.insert(b,I)}))}))})).next((()=>d))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,o)))).next((d=>{c.forEach(((g,m)=>{const S=m.getKey();d.get(S)===null&&(d=d.insert(S,an.newInvalidDocument(S)))}));let y=Xl();return d.forEach(((g,m)=>{const S=c.get(g);S!==void 0&&rc(S.mutation,m,Ln.empty(),ut.now()),td(n,m)&&(y=y.insert(g,m))})),y}))}}class K2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return oe.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Gi(o.createTime)}})(n)),oe.resolve()}getNamedQuery(e,n){return oe.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:U2(o.bundledQuery),readTime:Gi(o.readTime)}})(n)),oe.resolve()}}class X2{constructor(){this.overlays=new gt(Te.comparator),this.qr=new Map}getOverlay(e,n){return oe.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ua();return oe.forEach(n,(o=>this.getOverlay(e,o).next((c=>{c!==null&&s.set(o,c)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,c)=>{this.St(e,n,c)})),oe.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(s)),oe.resolve()}getOverlaysForCollection(e,n,s){const o=ua(),c=n.length+1,d=new Te(n.child("")),y=this.overlays.getIteratorFrom(d);for(;y.hasNext();){const g=y.getNext().value,m=g.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===c&&g.largestBatchId>s&&o.set(g.getKey(),g)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let c=new gt(((m,S)=>m-S));const d=this.overlays.getIterator();for(;d.hasNext();){const m=d.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>s){let S=c.get(m.largestBatchId);S===null&&(S=ua(),c=c.insert(m.largestBatchId,S)),S.set(m.getKey(),m)}}const y=ua(),g=c.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((m,S)=>y.set(m,S))),!(y.size()>=o)););return oe.resolve(y)}St(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const d=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new f2(n,s));let c=this.qr.get(n);c===void 0&&(c=Fe(),this.qr.set(n,c)),this.qr.set(n,c.add(s.key))}}class W2{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,oe.resolve()}}class Pp{constructor(){this.Qr=new jt(Gt.$r),this.Ur=new jt(Gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const s=new Gt(e,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Gr(new Gt(e,n))}zr(e,n){e.forEach((s=>this.removeReference(s,n)))}jr(e){const n=new Te(new ct([])),s=new Gt(n,e),o=new Gt(n,e+1),c=[];return this.Ur.forEachInRange([s,o],(d=>{this.Gr(d),c.push(d.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Te(new ct([])),s=new Gt(n,e),o=new Gt(n,e+1);let c=Fe();return this.Ur.forEachInRange([s,o],(d=>{c=c.add(d.key)})),c}containsKey(e){const n=new Gt(e,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Te.comparator(e.key,n.key)||He(e.Yr,n.Yr)}static Kr(e,n){return He(e.Yr,n.Yr)||Te.comparator(e.key,n.key)}}class J2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new jt(Gt.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new d2(c,n,s,o);this.mutationQueue.push(d);for(const y of o)this.Zr=this.Zr.add(new Gt(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,n){return oe.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.ei(s),c=o<0?0:o;return oe.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Cp:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Gt(n,0),o=new Gt(n,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([s,o],(d=>{const y=this.Xr(d.Yr);c.push(y)})),oe.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new jt(He);return n.forEach((o=>{const c=new Gt(o,0),d=new Gt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,d],(y=>{s=s.add(y.Yr)}))})),oe.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let c=s;Te.isDocumentKey(c)||(c=c.child(""));const d=new Gt(new Te(c),0);let y=new jt(He);return this.Zr.forEachWhile((g=>{const m=g.key.path;return!!s.isPrefixOf(m)&&(m.length===o&&(y=y.add(g.Yr)),!0)}),d),oe.resolve(this.ti(y))}ti(e){const n=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){et(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return oe.forEach(n.mutations,(o=>{const c=new Gt(o.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,n){const s=new Gt(n,0),o=this.Zr.firstAfterOrEqual(s);return oe.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Z2{constructor(e){this.ri=e,this.docs=(function(){return new gt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),c=o?o.size:0,d=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return oe.resolve(s?s.document.mutableCopy():an.newInvalidDocument(n))}getEntries(e,n){let s=Rr();return n.forEach((o=>{const c=this.docs.get(o);s=s.insert(o,c?c.document.mutableCopy():an.newInvalidDocument(o))})),oe.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let c=Rr();const d=n.path,y=new Te(d.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(y);for(;g.hasNext();){const{key:m,value:{document:S}}=g.getNext();if(!d.isPrefixOf(m.path))break;m.path.length>d.length+1||RC(xC(S),s)<=0||(o.has(S.key)||td(n,S))&&(c=c.insert(S.key,S.mutableCopy()))}return oe.resolve(c)}getAllFromCollectionGroup(e,n,s,o){xe(9500)}ii(e,n){return oe.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new eI(this)}getSize(e){return oe.resolve(this.size)}}class eI extends $2{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),oe.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}class tI{constructor(e){this.persistence=e,this.si=new Ea((n=>Dp(n)),Np),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Pp,this.targetCount=0,this.ai=Do.ur()}forEachTarget(e,n){return this.si.forEach(((s,o)=>n(o))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),oe.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Do(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,oe.resolve()}updateTargetData(e,n){return this.Pr(n),oe.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,n,s){let o=0;const c=[];return this.si.forEach(((d,y)=>{y.sequenceNumber<=n&&s.get(y.targetId)===null&&(this.si.delete(d),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),o++)})),oe.waitFor(c).next((()=>o))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,n){const s=this.si.get(n)||null;return oe.resolve(s)}addMatchingKeys(e,n,s){return this._i.Wr(n,s),oe.resolve()}removeMatchingKeys(e,n,s){this._i.zr(n,s);const o=this.persistence.referenceDelegate,c=[];return o&&n.forEach((d=>{c.push(o.markPotentiallyOrphaned(e,d))})),oe.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),oe.resolve()}getMatchingKeysForTargetId(e,n){const s=this._i.Hr(n);return oe.resolve(s)}containsKey(e,n){return oe.resolve(this._i.containsKey(n))}}class Lb{constructor(e,n){this.ui={},this.overlays={},this.ci=new Kh(0),this.li=!1,this.li=!0,this.hi=new W2,this.referenceDelegate=e(this),this.Pi=new tI(this),this.indexManager=new j2,this.remoteDocumentCache=(function(o){return new Z2(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new P2(n),this.Ii=new K2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new X2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.ui[e.toKey()];return s||(s=new J2(n,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,s){ye("MemoryPersistence","Starting transaction:",e);const o=new nI(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((c=>this.referenceDelegate.di(o).next((()=>c)))).toPromise().then((c=>(o.raiseOnCommittedEvent(),c)))}Ai(e,n){return oe.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,n))))}}class nI extends IC{constructor(e){super(),this.currentSequenceNumber=e}}class Up{constructor(e){this.persistence=e,this.Ri=new Pp,this.Vi=null}static mi(e){return new Up(e)}get fi(){if(this.Vi)return this.Vi;throw xe(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),oe.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),oe.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),oe.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((c=>this.fi.add(c.toString())))})).next((()=>s.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(s=>{const o=Te.fromPath(s);return this.gi(e,o).next((c=>{c||n.removeEntry(o,De.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return oe.or([()=>oe.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class jh{constructor(e,n){this.persistence=e,this.pi=new Ea((s=>OC(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=G2(this,n)}static mi(e,n){return new jh(e,n)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}wr(e){let n=0;return this.pr(e,(s=>{n++})).next((()=>n))}pr(e,n){return oe.forEach(this.pi,((s,o)=>this.br(e,s,o).next((c=>c?oe.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),c=o.newChangeBuffer();return o.ii(e,(d=>this.br(e,d,n).next((y=>{y||(s++,c.removeEntry(d,De.min()))})))).next((()=>c.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}removeReference(e,n,s){return this.pi.set(s,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),oe.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=vh(e.data.value)),n}br(e,n,s){return oe.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.pi.get(n);return oe.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class jp{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Es=s,this.ds=o}static As(e,n){let s=Fe(),o=Fe();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:o=o.add(c.doc.key)}return new jp(e,n.fromCache,s,o)}}class iI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class rI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $A()?8:DC(ln())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const c={result:null};return this.ys(e,n).next((d=>{c.result=d})).next((()=>{if(!c.result)return this.ws(e,n,o,s).next((d=>{c.result=d}))})).next((()=>{if(c.result)return;const d=new iI;return this.Ss(e,n,d).next((y=>{if(c.result=y,this.Vs)return this.bs(e,n,d,y.size)}))})).next((()=>c.result))}bs(e,n,s,o){return s.documentReadCount<this.fs?(ho()<=qe.DEBUG&&ye("QueryEngine","SDK will not create cache indexes for query:",fo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(ho()<=qe.DEBUG&&ye("QueryEngine","Query:",fo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(ho()<=qe.DEBUG&&ye("QueryEngine","The SDK decides to create cache indexes for query:",fo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(n))):oe.resolve())}ys(e,n){if(jv(n))return oe.resolve(null);let s=Fi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Ph(n,null,"F"),s=Fi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((c=>{const d=Fe(...c);return this.ps.getDocuments(e,d).next((y=>this.indexManager.getMinOffset(e,s).next((g=>{const m=this.Ds(n,y);return this.Cs(n,m,d,g.readTime)?this.ys(e,Ph(n,null,"F")):this.vs(e,m,n,g)}))))})))))}ws(e,n,s,o){return jv(n)||o.isEqual(De.min())?oe.resolve(null):this.ps.getDocuments(e,s).next((c=>{const d=this.Ds(n,c);return this.Cs(n,d,s,o)?oe.resolve(null):(ho()<=qe.DEBUG&&ye("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),fo(n)),this.vs(e,d,n,wC(o,cc)).next((y=>y)))}))}Ds(e,n){let s=new jt(hb(e));return n.forEach(((o,c)=>{td(e,c)&&(s=s.add(c))})),s}Cs(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(o)>0)}Ss(e,n,s){return ho()<=qe.DEBUG&&ye("QueryEngine","Using full collection scan to execute query:",fo(n)),this.ps.getDocumentsMatchingQuery(e,n,As.min(),s)}vs(e,n,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((c=>(n.forEach((d=>{c=c.insert(d.key,d)})),c)))}}const zp="LocalStore",sI=3e8;class aI{constructor(e,n,s,o){this.persistence=e,this.Fs=n,this.serializer=o,this.Ms=new gt(He),this.xs=new Ea((c=>Dp(c)),Np),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Q2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function oI(r,e,n,s){return new aI(r,e,n,s)}async function Vb(r,e){const n=Ce(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((c=>(o=c,n.Bs(e),n.mutationQueue.getAllMutationBatches(s)))).next((c=>{const d=[],y=[];let g=Fe();for(const m of o){d.push(m.batchId);for(const S of m.mutations)g=g.add(S.key)}for(const m of c){y.push(m.batchId);for(const S of m.mutations)g=g.add(S.key)}return n.localDocuments.getDocuments(s,g).next((m=>({Ls:m,removedBatchIds:d,addedBatchIds:y})))}))}))}function lI(r,e){const n=Ce(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),c=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,g,m,S){const b=m.batch,I=b.keys();let V=oe.resolve();return I.forEach((U=>{V=V.next((()=>S.getEntry(g,U))).next((q=>{const $=m.docVersions.get(U);et($!==null,48541),q.version.compareTo($)<0&&(b.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),S.addEntry(q)))}))})),V.next((()=>y.mutationQueue.removeMutationBatch(g,b)))})(n,s,e,c).next((()=>c.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(y){let g=Fe();for(let m=0;m<y.mutationResults.length;++m)y.mutationResults[m].transformResults.length>0&&(g=g.add(y.batch.mutations[m].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Pb(r){const e=Ce(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function cI(r,e){const n=Ce(r),s=e.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const d=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];e.targetChanges.forEach(((S,b)=>{const I=o.get(b);if(!I)return;y.push(n.Pi.removeMatchingKeys(c,S.removedDocuments,b).next((()=>n.Pi.addMatchingKeys(c,S.addedDocuments,b))));let V=I.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(b)!==null?V=V.withResumeToken(tn.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):S.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(S.resumeToken,s)),o=o.insert(b,V),(function(q,$,K){return q.resumeToken.approximateByteSize()===0||$.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=sI?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(I,V,S)&&y.push(n.Pi.updateTargetData(c,V))}));let g=Rr(),m=Fe();if(e.documentUpdates.forEach((S=>{e.resolvedLimboDocuments.has(S)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(c,S))})),y.push(uI(c,d,e.documentUpdates).next((S=>{g=S.ks,m=S.qs}))),!s.isEqual(De.min())){const S=n.Pi.getLastRemoteSnapshotVersion(c).next((b=>n.Pi.setTargetsMetadata(c,c.currentSequenceNumber,s)));y.push(S)}return oe.waitFor(y).next((()=>d.apply(c))).next((()=>n.localDocuments.getLocalViewOfDocuments(c,g,m))).next((()=>g))})).then((c=>(n.Ms=o,c)))}function uI(r,e,n){let s=Fe(),o=Fe();return n.forEach((c=>s=s.add(c))),e.getEntries(r,s).next((c=>{let d=Rr();return n.forEach(((y,g)=>{const m=c.get(y);g.isFoundDocument()!==m.isFoundDocument()&&(o=o.add(y)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(y,g.readTime),d=d.insert(y,g)):!m.isValidDocument()||g.version.compareTo(m.version)>0||g.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(g),d=d.insert(y,g)):ye(zp,"Ignoring outdated watch update for ",y,". Current version:",m.version," Watch version:",g.version)})),{ks:d,qs:o}}))}function hI(r,e){const n=Ce(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Cp),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function dI(r,e){const n=Ce(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.Pi.getTargetData(s,e).next((c=>c?(o=c,oe.resolve(o)):n.Pi.allocateTargetId(s).next((d=>(o=new gs(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(e,s.targetId)),s}))}async function sp(r,e,n){const s=Ce(r),o=s.Ms.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,(d=>s.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!Po(d))throw d;ye(zp,`Failed to update sequence numbers for target ${e}: ${d}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Jv(r,e,n){const s=Ce(r);let o=De.min(),c=Fe();return s.persistence.runTransaction("Execute query","readwrite",(d=>(function(g,m,S){const b=Ce(g),I=b.xs.get(S);return I!==void 0?oe.resolve(b.Ms.get(I)):b.Pi.getTargetData(m,S)})(s,d,Fi(e)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(d,y.targetId).next((g=>{c=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(d,e,n?o:De.min(),n?c:Fe()))).next((y=>(fI(s,JC(e),y),{documents:y,Qs:c})))))}function fI(r,e,n){let s=r.Os.get(e)||De.min();n.forEach(((o,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)})),r.Os.set(e,s)}class Zv{constructor(){this.activeTargetIds=r2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mI{constructor(){this.Mo=new Zv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,s){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Zv,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class pI{Oo(e){}shutdown(){}}const eE="ConnectivityMonitor";class tE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ye(eE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ye(eE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let lh=null;function ap(){return lh===null?lh=(function(){return 268435456+Math.round(2147483648*Math.random())})():lh++,"0x"+lh.toString(16)}const Dm="RestConnection",gI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===kh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,n,s,o,c){const d=ap(),y=this.zo(e,n.toUriEncodedString());ye(Dm,`Sending RPC '${e}' ${d}:`,y,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,c);const{host:m}=new URL(y),S=Oo(m);return this.Jo(e,y,g,s,S).then((b=>(ye(Dm,`Received RPC '${e}' ${d}: `,b),b)),(b=>{throw To(Dm,`RPC '${e}' ${d} failed with error: `,b,"url: ",y,"request:",s),b}))}Ho(e,n,s,o,c,d){return this.Go(e,n,s,o,c)}jo(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,c)=>e[c]=o)),s&&s.headers.forEach(((o,c)=>e[c]=o))}zo(e,n){const s=gI[e];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}class _I{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const rn="WebChannelConnection";class vI extends yI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,s,o,c){const d=ap();return new Promise(((y,g)=>{const m=new US;m.setWithCredentials(!0),m.listenOnce(jS.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case _h.NO_ERROR:const b=m.getResponseJson();ye(rn,`XHR for RPC '${e}' ${d} received:`,JSON.stringify(b)),y(b);break;case _h.TIMEOUT:ye(rn,`RPC '${e}' ${d} timed out`),g(new fe(Z.DEADLINE_EXCEEDED,"Request time out"));break;case _h.HTTP_ERROR:const I=m.getStatus();if(ye(rn,`RPC '${e}' ${d} failed with status:`,I,"response text:",m.getResponseText()),I>0){let V=m.getResponseJson();Array.isArray(V)&&(V=V[0]);const U=V?.error;if(U&&U.status&&U.message){const q=(function(K){const re=K.toLowerCase().replace(/_/g,"-");return Object.values(Z).indexOf(re)>=0?re:Z.UNKNOWN})(U.status);g(new fe(q,U.message))}else g(new fe(Z.UNKNOWN,"Server responded with status "+m.getStatus()))}else g(new fe(Z.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:d,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{ye(rn,`RPC '${e}' ${d} completed.`)}}));const S=JSON.stringify(o);ye(rn,`RPC '${e}' ${d} sending request:`,o),m.send(n,"POST",S,s,15)}))}T_(e,n,s){const o=ap(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=qS(),y=BS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(g.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const S=c.join("");ye(rn,`Creating RPC '${e}' stream ${o}: ${S}`,g);const b=d.createWebChannel(S,g);this.I_(b);let I=!1,V=!1;const U=new _I({Yo:$=>{V?ye(rn,`Not sending because RPC '${e}' stream ${o} is closed:`,$):(I||(ye(rn,`Opening RPC '${e}' stream ${o} transport.`),b.open(),I=!0),ye(rn,`RPC '${e}' stream ${o} sending:`,$),b.send($))},Zo:()=>b.close()}),q=($,K,re)=>{$.listen(K,(ne=>{try{re(ne)}catch(pe){setTimeout((()=>{throw pe}),0)}}))};return q(b,Kl.EventType.OPEN,(()=>{V||(ye(rn,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),q(b,Kl.EventType.CLOSE,(()=>{V||(V=!0,ye(rn,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(b))})),q(b,Kl.EventType.ERROR,($=>{V||(V=!0,To(rn,`RPC '${e}' stream ${o} transport errored. Name:`,$.name,"Message:",$.message),U.a_(new fe(Z.UNAVAILABLE,"The operation could not be completed")))})),q(b,Kl.EventType.MESSAGE,($=>{if(!V){const K=$.data[0];et(!!K,16349);const re=K,ne=re?.error||re[0]?.error;if(ne){ye(rn,`RPC '${e}' stream ${o} received error:`,ne);const pe=ne.status;let he=(function(w){const x=kt[w];if(x!==void 0)return Tb(x)})(pe),ge=ne.message;he===void 0&&(he=Z.INTERNAL,ge="Unknown error status: "+pe+" with message "+ne.message),V=!0,U.a_(new fe(he,ge)),b.close()}else ye(rn,`RPC '${e}' stream ${o} received:`,K),U.u_(K)}})),q(y,zS.STAT_EVENT,($=>{$.stat===Qm.PROXY?ye(rn,`RPC '${e}' stream ${o} detected buffering proxy`):$.stat===Qm.NOPROXY&&ye(rn,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function Nm(){return typeof document<"u"?document:null}function od(r){return new T2(r,!0)}class Ub{constructor(e,n,s=1e3,o=1.5,c=6e4){this.Mi=e,this.timerId=n,this.d_=s,this.A_=o,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&ye("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const nE="PersistentStream";class jb{constructor(e,n,s,o,c,d,y,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=y,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ub(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Z.RESOURCE_EXHAUSTED?(xr(n.toString()),xr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new fe(Z.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ye(nE,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(ye(nE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class EI extends jb{constructor(e,n,s,o,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=x2(this.serializer,e),s=(function(c){if(!("targetChange"in c))return De.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?De.min():d.readTime?Gi(d.readTime):De.min()})(e);return this.listener.H_(n,s)}Y_(e){const n={};n.database=rp(this.serializer),n.addTarget=(function(c,d){let y;const g=d.target;if(y=Zm(g)?{documents:I2(c,g)}:{query:Db(c,g).ft},y.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){y.resumeToken=xb(c,d.resumeToken);const m=tp(c,d.expectedCount);m!==null&&(y.expectedCount=m)}else if(d.snapshotVersion.compareTo(De.min())>0){y.readTime=Uh(c,d.snapshotVersion.toTimestamp());const m=tp(c,d.expectedCount);m!==null&&(y.expectedCount=m)}return y})(this.serializer,e);const s=O2(this.serializer,e);s&&(n.labels=s),this.q_(n)}Z_(e){const n={};n.database=rp(this.serializer),n.removeTarget=e,this.q_(n)}}class SI extends jb{constructor(e,n,s,o,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,d),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return et(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){et(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=C2(e.writeResults,e.commitTime),s=Gi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=rp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>R2(this.serializer,s)))};this.q_(n)}}class bI{}class TI extends bI{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Go(e,np(n,s),o,c,d))).catch((c=>{throw c.name==="FirebaseError"?(c.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new fe(Z.UNKNOWN,c.toString())}))}Ho(e,n,s,o,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([d,y])=>this.connection.Ho(e,np(n,s),o,d,y,c))).catch((d=>{throw d.name==="FirebaseError"?(d.code===Z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new fe(Z.UNKNOWN,d.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(xr(n),this.aa=!1):ye("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const _a="RemoteStore";class wI{constructor(e,n,s,o,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((d=>{s.enqueueAndForget((async()=>{Sa(this)&&(ye(_a,"Restarting streams for network reachability change."),await(async function(g){const m=Ce(g);m.Ea.add(4),await wc(m),m.Ra.set("Unknown"),m.Ea.delete(4),await ld(m)})(this))}))})),this.Ra=new AI(s,o)}}async function ld(r){if(Sa(r))for(const e of r.da)await e(!0)}async function wc(r){for(const e of r.da)await e(!1)}function zb(r,e){const n=Ce(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Fp(n)?Hp(n):Uo(n).O_()&&qp(n,e))}function Bp(r,e){const n=Ce(r),s=Uo(n);n.Ia.delete(e),s.O_()&&Bb(n,e),n.Ia.size===0&&(s.O_()?s.L_():Sa(n)&&n.Ra.set("Unknown"))}function qp(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Uo(r).Y_(e)}function Bb(r,e){r.Va.Ue(e),Uo(r).Z_(e)}function Hp(r){r.Va=new v2({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Uo(r).start(),r.Ra.ua()}function Fp(r){return Sa(r)&&!Uo(r).x_()&&r.Ia.size>0}function Sa(r){return Ce(r).Ea.size===0}function qb(r){r.Va=void 0}async function xI(r){r.Ra.set("Online")}async function RI(r){r.Ia.forEach(((e,n)=>{qp(r,e)}))}async function CI(r,e){qb(r),Fp(r)?(r.Ra.ha(e),Hp(r)):r.Ra.set("Unknown")}async function II(r,e,n){if(r.Ra.set("Online"),e instanceof wb&&e.state===2&&e.cause)try{await(async function(o,c){const d=c.cause;for(const y of c.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,d),o.Ia.delete(y),o.Va.removeTarget(y))})(r,e)}catch(s){ye(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await zh(r,s)}else if(e instanceof bh?r.Va.Ze(e):e instanceof Ab?r.Va.st(e):r.Va.tt(e),!n.isEqual(De.min()))try{const s=await Pb(r.localStore);n.compareTo(s)>=0&&await(function(c,d){const y=c.Va.Tt(d);return y.targetChanges.forEach(((g,m)=>{if(g.resumeToken.approximateByteSize()>0){const S=c.Ia.get(m);S&&c.Ia.set(m,S.withResumeToken(g.resumeToken,d))}})),y.targetMismatches.forEach(((g,m)=>{const S=c.Ia.get(g);if(!S)return;c.Ia.set(g,S.withResumeToken(tn.EMPTY_BYTE_STRING,S.snapshotVersion)),Bb(c,g);const b=new gs(S.target,g,m,S.sequenceNumber);qp(c,b)})),c.remoteSyncer.applyRemoteEvent(y)})(r,n)}catch(s){ye(_a,"Failed to raise snapshot:",s),await zh(r,s)}}async function zh(r,e,n){if(!Po(e))throw e;r.Ea.add(1),await wc(r),r.Ra.set("Offline"),n||(n=()=>Pb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ye(_a,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await ld(r)}))}function Hb(r,e){return e().catch((n=>zh(r,n,e)))}async function cd(r){const e=Ce(r),n=Cs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Cp;for(;DI(e);)try{const o=await hI(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,NI(e,o)}catch(o){await zh(e,o)}Fb(e)&&Gb(e)}function DI(r){return Sa(r)&&r.Ta.length<10}function NI(r,e){r.Ta.push(e);const n=Cs(r);n.O_()&&n.X_&&n.ea(e.mutations)}function Fb(r){return Sa(r)&&!Cs(r).x_()&&r.Ta.length>0}function Gb(r){Cs(r).start()}async function OI(r){Cs(r).ra()}async function MI(r){const e=Cs(r);for(const n of r.Ta)e.ea(n.mutations)}async function kI(r,e,n){const s=r.Ta.shift(),o=kp.from(s,e,n);await Hb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await cd(r)}async function LI(r,e){e&&Cs(r).X_&&await(async function(s,o){if((function(d){return g2(d)&&d!==Z.ABORTED})(o.code)){const c=s.Ta.shift();Cs(s).B_(),await Hb(s,(()=>s.remoteSyncer.rejectFailedWrite(c.batchId,o))),await cd(s)}})(r,e),Fb(r)&&Gb(r)}async function iE(r,e){const n=Ce(r);n.asyncQueue.verifyOperationInProgress(),ye(_a,"RemoteStore received new credentials");const s=Sa(n);n.Ea.add(3),await wc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await ld(n)}async function VI(r,e){const n=Ce(r);e?(n.Ea.delete(2),await ld(n)):e||(n.Ea.add(2),await wc(n),n.Ra.set("Unknown"))}function Uo(r){return r.ma||(r.ma=(function(n,s,o){const c=Ce(n);return c.sa(),new EI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:xI.bind(null,r),t_:RI.bind(null,r),r_:CI.bind(null,r),H_:II.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),Fp(r)?Hp(r):r.Ra.set("Unknown")):(await r.ma.stop(),qb(r))}))),r.ma}function Cs(r){return r.fa||(r.fa=(function(n,s,o){const c=Ce(n);return c.sa(),new SI(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:OI.bind(null,r),r_:LI.bind(null,r),ta:MI.bind(null,r),na:kI.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await cd(r)):(await r.fa.stop(),r.Ta.length>0&&(ye(_a,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class Gp{constructor(e,n,s,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=c,this.deferred=new Hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((d=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,c){const d=Date.now()+s,y=new Gp(e,n,d,o,c);return y.start(s),y}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new fe(Z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $p(r,e){if(xr("AsyncQueue",`${e}: ${r}`),Po(r))return new fe(Z.UNAVAILABLE,`${e}: ${r}`);throw r}class Eo{static emptySet(e){return new Eo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=Xl(),this.sortedSet=new gt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Eo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,c=s.getNext().key;if(!o.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Eo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class rE{constructor(){this.ga=new gt(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):xe(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class No{constructor(e,n,s,o,c,d,y,g,m){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=y,this.excludesMetadataChanges=g,this.hasCachedResults=m}static fromInitialDocuments(e,n,s,o,c){const d=[];return n.forEach((y=>{d.push({type:0,doc:y})})),new No(e,n,Eo.emptySet(n),d,s,o,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ed(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class PI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UI{constructor(){this.queries=sE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Ce(n),c=o.queries;o.queries=sE(),c.forEach(((d,y)=>{for(const g of y.Sa)g.onError(s)}))})(this,new fe(Z.ABORTED,"Firestore shutting down"))}}function sE(){return new Ea((r=>ub(r)),ed)}async function Yp(r,e){const n=Ce(r);let s=3;const o=e.query;let c=n.queries.get(o);c?!c.ba()&&e.Da()&&(s=2):(c=new PI,s=e.Da()?0:1);try{switch(s){case 0:c.wa=await n.onListen(o,!0);break;case 1:c.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(d){const y=$p(d,`Initialization of query '${fo(e.query)}' failed`);return void e.onError(y)}n.queries.set(o,c),c.Sa.push(e),e.va(n.onlineState),c.wa&&e.Fa(c.wa)&&Kp(n)}async function Qp(r,e){const n=Ce(r),s=e.query;let o=3;const c=n.queries.get(s);if(c){const d=c.Sa.indexOf(e);d>=0&&(c.Sa.splice(d,1),c.Sa.length===0?o=e.Da()?0:1:!c.ba()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function jI(r,e){const n=Ce(r);let s=!1;for(const o of e){const c=o.query,d=n.queries.get(c);if(d){for(const y of d.Sa)y.Fa(o)&&(s=!0);d.wa=o}}s&&Kp(n)}function zI(r,e,n){const s=Ce(r),o=s.queries.get(e);if(o)for(const c of o.Sa)c.onError(n);s.queries.delete(e)}function Kp(r){r.Ca.forEach((e=>{e.next()}))}var op,aE;(aE=op||(op={})).Ma="default",aE.Cache="cache";class Xp{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new No(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=No.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==op.Cache}}class $b{constructor(e){this.key=e}}class Yb{constructor(e){this.key=e}}class BI{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Fe(),this.mutatedKeys=Fe(),this.eu=hb(e),this.tu=new Eo(this.eu)}get nu(){return this.Ya}ru(e,n){const s=n?n.iu:new rE,o=n?n.tu:this.tu;let c=n?n.mutatedKeys:this.mutatedKeys,d=o,y=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,m=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((S,b)=>{const I=o.get(S),V=td(this.query,b)?b:null,U=!!I&&this.mutatedKeys.has(I.key),q=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let $=!1;I&&V?I.data.isEqual(V.data)?U!==q&&(s.track({type:3,doc:V}),$=!0):this.su(I,V)||(s.track({type:2,doc:V}),$=!0,(g&&this.eu(V,g)>0||m&&this.eu(V,m)<0)&&(y=!0)):!I&&V?(s.track({type:0,doc:V}),$=!0):I&&!V&&(s.track({type:1,doc:I}),$=!0,(g||m)&&(y=!0)),$&&(V?(d=d.add(V),c=q?c.add(S):c.delete(S)):(d=d.delete(S),c=c.delete(S)))})),this.query.limit!==null)for(;d.size>this.query.limit;){const S=this.query.limitType==="F"?d.last():d.first();d=d.delete(S.key),c=c.delete(S.key),s.track({type:1,doc:S})}return{tu:d,iu:s,Cs:y,mutatedKeys:c}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const d=e.iu.ya();d.sort(((S,b)=>(function(V,U){const q=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Rt:$})}};return q(V)-q(U)})(S.type,b.type)||this.eu(S.doc,b.doc))),this.ou(s),o=o??!1;const y=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,m=g!==this.Za;return this.Za=g,d.length!==0||m?{snapshot:new No(this.query,e.tu,c,d,e.mutatedKeys,g===0,m,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Fe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return e.forEach((s=>{this.Xa.has(s)||n.push(new Yb(s))})),this.Xa.forEach((s=>{e.has(s)||n.push(new $b(s))})),n}cu(e){this.Ya=e.Qs,this.Xa=Fe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return No.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Wp="SyncEngine";class qI{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class HI{constructor(e){this.key=e,this.hu=!1}}class FI{constructor(e,n,s,o,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Pu={},this.Tu=new Ea((y=>ub(y)),ed),this.Iu=new Map,this.Eu=new Set,this.du=new gt(Te.comparator),this.Au=new Map,this.Ru=new Pp,this.Vu={},this.mu=new Map,this.fu=Do.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function GI(r,e,n=!0){const s=Zb(r);let o;const c=s.Tu.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),o=c.view.lu()):o=await Qb(s,e,n,!0),o}async function $I(r,e){const n=Zb(r);await Qb(n,e,!0,!1)}async function Qb(r,e,n,s){const o=await dI(r.localStore,Fi(e)),c=o.targetId,d=r.sharedClientState.addLocalQueryTarget(c,n);let y;return s&&(y=await YI(r,e,c,d==="current",o.resumeToken)),r.isPrimaryClient&&n&&zb(r.remoteStore,o),y}async function YI(r,e,n,s,o){r.pu=(b,I,V)=>(async function(q,$,K,re){let ne=$.view.ru(K);ne.Cs&&(ne=await Jv(q.localStore,$.query,!1).then((({documents:D})=>$.view.ru(D,ne))));const pe=re&&re.targetChanges.get($.targetId),he=re&&re.targetMismatches.get($.targetId)!=null,ge=$.view.applyChanges(ne,q.isPrimaryClient,pe,he);return lE(q,$.targetId,ge.au),ge.snapshot})(r,b,I,V);const c=await Jv(r.localStore,e,!0),d=new BI(e,c.Qs),y=d.ru(c.documents),g=Ac.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),m=d.applyChanges(y,r.isPrimaryClient,g);lE(r,n,m.au);const S=new qI(e,n,d);return r.Tu.set(e,S),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),m.snapshot}async function QI(r,e,n){const s=Ce(r),o=s.Tu.get(e),c=s.Iu.get(o.targetId);if(c.length>1)return s.Iu.set(o.targetId,c.filter((d=>!ed(d,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await sp(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Bp(s.remoteStore,o.targetId),lp(s,o.targetId)})).catch(Vo)):(lp(s,o.targetId),await sp(s.localStore,o.targetId,!0))}async function KI(r,e){const n=Ce(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Bp(n.remoteStore,s.targetId))}async function XI(r,e,n){const s=iD(r);try{const o=await(function(d,y){const g=Ce(d),m=ut.now(),S=y.reduce(((V,U)=>V.add(U.key)),Fe());let b,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let U=Rr(),q=Fe();return g.Ns.getEntries(V,S).next(($=>{U=$,U.forEach(((K,re)=>{re.isValidDocument()||(q=q.add(K))}))})).next((()=>g.localDocuments.getOverlayedDocuments(V,U))).next(($=>{b=$;const K=[];for(const re of y){const ne=u2(re,b.get(re.key).overlayedDocument);ne!=null&&K.push(new Ns(re.key,ne,nb(ne.value.mapValue),mn.exists(!0)))}return g.mutationQueue.addMutationBatch(V,m,K,y)})).next(($=>{I=$;const K=$.applyToLocalDocumentSet(b,q);return g.documentOverlayCache.saveOverlays(V,$.batchId,K)}))})).then((()=>({batchId:I.batchId,changes:fb(b)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(d,y,g){let m=d.Vu[d.currentUser.toKey()];m||(m=new gt(He)),m=m.insert(y,g),d.Vu[d.currentUser.toKey()]=m})(s,o.batchId,n),await xc(s,o.changes),await cd(s.remoteStore)}catch(o){const c=$p(o,"Failed to persist write");n.reject(c)}}async function Kb(r,e){const n=Ce(r);try{const s=await cI(n.localStore,e);e.targetChanges.forEach(((o,c)=>{const d=n.Au.get(c);d&&(et(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?d.hu=!0:o.modifiedDocuments.size>0?et(d.hu,14607):o.removedDocuments.size>0&&(et(d.hu,42227),d.hu=!1))})),await xc(n,s,e)}catch(s){await Vo(s)}}function oE(r,e,n){const s=Ce(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((c,d)=>{const y=d.view.va(e);y.snapshot&&o.push(y.snapshot)})),(function(d,y){const g=Ce(d);g.onlineState=y;let m=!1;g.queries.forEach(((S,b)=>{for(const I of b.Sa)I.va(y)&&(m=!0)})),m&&Kp(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WI(r,e,n){const s=Ce(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),c=o&&o.key;if(c){let d=new gt(Te.comparator);d=d.insert(c,an.newNoDocument(c,De.min()));const y=Fe().add(c),g=new ad(De.min(),new Map,new gt(He),d,y);await Kb(s,g),s.du=s.du.remove(c),s.Au.delete(e),Jp(s)}else await sp(s.localStore,e,!1).then((()=>lp(s,e,n))).catch(Vo)}async function JI(r,e){const n=Ce(r),s=e.batch.batchId;try{const o=await lI(n.localStore,e);Wb(n,s,null),Xb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await xc(n,o)}catch(o){await Vo(o)}}async function ZI(r,e,n){const s=Ce(r);try{const o=await(function(d,y){const g=Ce(d);return g.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let S;return g.mutationQueue.lookupMutationBatch(m,y).next((b=>(et(b!==null,37113),S=b.keys(),g.mutationQueue.removeMutationBatch(m,b)))).next((()=>g.mutationQueue.performConsistencyCheck(m))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(m,S,y))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,S))).next((()=>g.localDocuments.getDocuments(m,S)))}))})(s.localStore,e);Wb(s,e,n),Xb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await xc(s,o)}catch(o){await Vo(o)}}function Xb(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function Wb(r,e,n){const s=Ce(r);let o=s.Vu[s.currentUser.toKey()];if(o){const c=o.get(e);c&&(n?c.reject(n):c.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function lp(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Jb(r,s)}))}function Jb(r,e){r.Eu.delete(e.path.canonicalString());const n=r.du.get(e);n!==null&&(Bp(r.remoteStore,n),r.du=r.du.remove(e),r.Au.delete(n),Jp(r))}function lE(r,e,n){for(const s of n)s instanceof $b?(r.Ru.addReference(s.key,e),eD(r,s)):s instanceof Yb?(ye(Wp,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Jb(r,s.key)):xe(19791,{wu:s})}function eD(r,e){const n=e.key,s=n.path.canonicalString();r.du.get(n)||r.Eu.has(s)||(ye(Wp,"New document in limbo: "+n),r.Eu.add(s),Jp(r))}function Jp(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new Te(ct.fromString(e)),s=r.fu.next();r.Au.set(s,new HI(n)),r.du=r.du.insert(n,s),zb(r.remoteStore,new gs(Fi(Zh(n.path)),s,"TargetPurposeLimboResolution",Kh.ce))}}async function xc(r,e,n){const s=Ce(r),o=[],c=[],d=[];s.Tu.isEmpty()||(s.Tu.forEach(((y,g)=>{d.push(s.pu(g,e,n).then((m=>{if((m||n)&&s.isPrimaryClient){const S=m?!m.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,S?"current":"not-current")}if(m){o.push(m);const S=jp.As(g.targetId,m);c.push(S)}})))})),await Promise.all(d),s.Pu.H_(o),await(async function(g,m){const S=Ce(g);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>oe.forEach(m,(I=>oe.forEach(I.Es,(V=>S.persistence.referenceDelegate.addReference(b,I.targetId,V))).next((()=>oe.forEach(I.ds,(V=>S.persistence.referenceDelegate.removeReference(b,I.targetId,V)))))))))}catch(b){if(!Po(b))throw b;ye(zp,"Failed to update sequence numbers: "+b)}for(const b of m){const I=b.targetId;if(!b.fromCache){const V=S.Ms.get(I),U=V.snapshotVersion,q=V.withLastLimboFreeSnapshotVersion(U);S.Ms=S.Ms.insert(I,q)}}})(s.localStore,c))}async function tD(r,e){const n=Ce(r);if(!n.currentUser.isEqual(e)){ye(Wp,"User change. New user:",e.toKey());const s=await Vb(n.localStore,e);n.currentUser=e,(function(c,d){c.mu.forEach((y=>{y.forEach((g=>{g.reject(new fe(Z.CANCELLED,d))}))})),c.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await xc(n,s.Ls)}}function nD(r,e){const n=Ce(r),s=n.Au.get(e);if(s&&s.hu)return Fe().add(s.key);{let o=Fe();const c=n.Iu.get(e);if(!c)return o;for(const d of c){const y=n.Tu.get(d);o=o.unionWith(y.view.nu)}return o}}function Zb(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Kb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.Pu.H_=jI.bind(null,e.eventManager),e.Pu.yu=zI.bind(null,e.eventManager),e}function iD(r){const e=Ce(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,e),e}class Bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=od(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return oI(this.persistence,new rI,e.initialUser,this.serializer)}Cu(e){return new Lb(Up.mi,this.serializer)}Du(e){return new mI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bh.provider={build:()=>new Bh};class rD extends Bh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){et(this.persistence.referenceDelegate instanceof jh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new H2(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new Lb((s=>jh.mi(s,n)),this.serializer)}}class cp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>oE(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=tD.bind(null,this.syncEngine),await VI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UI})()}createDatastore(e){const n=od(e.databaseInfo.databaseId),s=(function(c){return new vI(c)})(e.databaseInfo);return(function(c,d,y,g){return new TI(c,d,y,g)})(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,c,d,y){return new wI(s,o,c,d,y)})(this.localStore,this.datastore,e.asyncQueue,(n=>oE(this.syncEngine,n,0)),(function(){return tE.v()?new tE:new pI})())}createSyncEngine(e,n){return(function(o,c,d,y,g,m,S){const b=new FI(o,c,d,y,g,m);return S&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Ce(n);ye(_a,"RemoteStore shutting down."),s.Ea.add(5),await wc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}cp.provider={build:()=>new cp};class Zp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):xr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const Is="FirestoreClient";class sD{constructor(e,n,s,o,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=o,this.user=sn.UNAUTHENTICATED,this.clientId=Rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,(async d=>{ye(Is,"Received user=",d.uid),await this.authCredentialListener(d),this.user=d})),this.appCheckCredentials.start(s,(d=>(ye(Is,"Received new app check token=",d),this.appCheckCredentialListener(d,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=$p(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Om(r,e){r.asyncQueue.verifyOperationInProgress(),ye(Is,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Vb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function cE(r,e){r.asyncQueue.verifyOperationInProgress();const n=await aD(r);ye(Is,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>iE(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>iE(e.remoteStore,o))),r._onlineComponents=e}async function aD(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ye(Is,"Using user provided OfflineComponentProvider");try{await Om(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===Z.FAILED_PRECONDITION||o.code===Z.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await Om(r,new Bh)}}else ye(Is,"Using default OfflineComponentProvider"),await Om(r,new rD(void 0));return r._offlineComponents}async function eg(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ye(Is,"Using user provided OnlineComponentProvider"),await cE(r,r._uninitializedComponentsProvider._online)):(ye(Is,"Using default OnlineComponentProvider"),await cE(r,new cp))),r._onlineComponents}function oD(r){return eg(r).then((e=>e.syncEngine))}function lD(r){return eg(r).then((e=>e.datastore))}async function qh(r){const e=await eg(r),n=e.eventManager;return n.onListen=GI.bind(null,e.syncEngine),n.onUnlisten=QI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$I.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KI.bind(null,e.syncEngine),n}function cD(r,e,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,y,g,m){const S=new Zp({next:I=>{S.Nu(),d.enqueueAndForget((()=>Qp(c,b)));const V=I.docs.has(y);!V&&I.fromCache?m.reject(new fe(Z.UNAVAILABLE,"Failed to get document because the client is offline.")):V&&I.fromCache&&g&&g.source==="server"?m.reject(new fe(Z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),b=new Xp(Zh(y.path),S,{includeMetadataChanges:!0,qa:!0});return Yp(c,b)})(await qh(r),r.asyncQueue,e,n,s))),s.promise}function uD(r,e,n={}){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>(function(c,d,y,g,m){const S=new Zp({next:I=>{S.Nu(),d.enqueueAndForget((()=>Qp(c,b))),I.fromCache&&g.source==="server"?m.reject(new fe(Z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),b=new Xp(y,S,{includeMetadataChanges:!0,qa:!0});return Yp(c,b)})(await qh(r),r.asyncQueue,e,n,s))),s.promise}function hD(r,e,n){const s=new Hi;return r.asyncQueue.enqueueAndForget((async()=>{try{const o=await lD(r);s.resolve((async function(d,y,g){const m=Ce(d),{request:S,gt:b,parent:I}=D2(m.serializer,WC(y),g);m.connection.$o||delete S.parent;const V=(await m.Ho("RunAggregationQuery",m.serializer.databaseId,I,S,1)).filter((q=>!!q.result));et(V.length===1,64727);const U=V[0].result?.aggregateFields;return Object.keys(U).reduce(((q,$)=>(q[b[$]]=U[$],q)),{})})(o,e,n))}catch(o){s.reject(o)}})),s.promise}function eT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const uE=new Map;const tT="firestore.googleapis.com",hE=!0;class dE{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new fe(Z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tT,this.ssl=hE}else this.host=e.host,this.ssl=e.ssl??hE;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<B2)throw new fe(Z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}TC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=eT(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new fe(Z.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ud{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new fe(Z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new fe(Z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new fC;switch(s.type){case"firstParty":return new yC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new fe(Z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=uE.get(n);s&&(ye("ComponentProvider","Removing Datastore"),uE.delete(n),s.terminate())})(this),Promise.resolve()}}function dD(r,e,n,s={}){r=on(r,ud);const o=Oo(e),c=r._getSettings(),d={...c,emulatorOptions:r._getEmulatorOptions()},y=`${e}:${n}`;o&&(ZE(`https://${y}`),eS("Firestore",!0)),c.host!==tT&&c.host!==y&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...c,host:y,ssl:o,emulatorOptions:s};if(!Tr(g,d)&&(r._setSettings(g),s.mockUserToken)){let m,S;if(typeof s.mockUserToken=="string")m=s.mockUserToken,S=sn.MOCK_USER;else{m=PA(s.mockUserToken,r._app?.options.projectId);const b=s.mockUserToken.sub||s.mockUserToken.user_id;if(!b)throw new fe(Z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new sn(b)}r._authCredentials=new mC(new FS(m,S))}}class Xi{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Xi(this.firestore,e,this._query)}}class vt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(bc(n,vt._jsonSchema))return new vt(e,s||null,new Te(ct.fromString(n.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:Pt("string",vt._jsonSchemaVersion),referencePath:Pt("string")};class bs extends Xi{constructor(e,n,s){super(e,n,Zh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new Te(e))}withConverter(e){return new bs(this.firestore,e,this._path)}}function fn(r,e,...n){if(r=wt(r),GS("collection","path",e),r instanceof ud){const s=ct.fromString(e,...n);return xv(s),new bs(r,null,s)}{if(!(r instanceof vt||r instanceof bs))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ct.fromString(e,...n));return xv(s),new bs(r.firestore,null,s)}}function Ft(r,e,...n){if(r=wt(r),arguments.length===1&&(e=Rp.newId()),GS("doc","path",e),r instanceof ud){const s=ct.fromString(e,...n);return wv(s),new vt(r,null,new Te(s))}{if(!(r instanceof vt||r instanceof bs))throw new fe(Z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(ct.fromString(e,...n));return wv(s),new vt(r.firestore,r instanceof bs?r.converter:null,new Te(s))}}const fE="AsyncQueue";class mE{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ub(this,"async_queue_retry"),this._c=()=>{const s=Nm();s&&ye(fE,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Nm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Nm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Hi;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Po(e))throw e;ye(fE,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,xr("INTERNAL UNHANDLED ERROR: ",pE(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Gp.createAndSchedule(this,e,n,s,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&xe(47125,{Pc:pE(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function pE(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}function gE(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const c of s)if(c in o&&typeof o[c]=="function")return!0;return!1})(r,["next","error","complete"])}class pi extends ud{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new mE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mE(e),this._firestoreClient=void 0,await e}}}function fD(r,e){const n=typeof r=="object"?r:rS(),s=typeof r=="string"?r:kh,o=pp(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const c=LA("firestore");c&&dD(o,...c)}return o}function jo(r){if(r._terminated)throw new fe(Z.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||mD(r),r._firestoreClient}function mD(r){const e=r._freezeSettings(),n=(function(o,c,d,y){return new VC(o,c,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,eT(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new sD(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const c=o?._online.build();return{_offline:o?._offline.build(c),_online:c}})(r._componentsProvider))}class pD{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class gD{constructor(e,n,s){this._userDataWriter=n,this._data=s,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Jn(tn.fromBase64String(e))}catch(n){throw new fe(Z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Jn(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(bc(e,Jn._jsonSchema))return Jn.fromBase64String(e.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Pt("string",Jn._jsonSchemaVersion),bytes:Pt("string")};class Rc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new fe(Z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ba{constructor(e){this._methodName=e}}class $i{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new fe(Z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new fe(Z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return He(this._lat,e._lat)||He(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:$i._jsonSchemaVersion}}static fromJSON(e){if(bc(e,$i._jsonSchema))return new $i(e.latitude,e.longitude)}}$i._jsonSchemaVersion="firestore/geoPoint/1.0",$i._jsonSchema={type:Pt("string",$i._jsonSchemaVersion),latitude:Pt("number"),longitude:Pt("number")};class Yi{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(bc(e,Yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Yi(e.vectorValues);throw new fe(Z.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Yi._jsonSchemaVersion="firestore/vectorValue/1.0",Yi._jsonSchema={type:Pt("string",Yi._jsonSchemaVersion),vectorValues:Pt("object")};const yD=/^__.*__$/;class _D{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Tc(e,this.data,n,this.fieldTransforms)}}class nT{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function iT(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{Ac:r})}}class hd{constructor(e,n,s,o,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.gc(e),s}yc(e){const n=this.path?.child(e),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Hh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(iT(this.Ac)&&yD.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class vD{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||od(e)}Cc(e,n,s,o=!1){return new hd({Ac:e,methodName:n,Dc:s,path:en.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function zo(r){const e=r._freezeSettings(),n=od(r._databaseId);return new vD(r._databaseId,!!e.ignoreUndefinedProperties,n)}function tg(r,e,n,s,o,c={}){const d=r.Cc(c.merge||c.mergeFields?2:0,e,n,o);ag("Data must be an object, but it was:",d,s);const y=lT(s,d);let g,m;if(c.merge)g=new Ln(d.fieldMask),m=d.fieldTransforms;else if(c.mergeFields){const S=[];for(const b of c.mergeFields){const I=up(e,b,n);if(!d.contains(I))throw new fe(Z.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);uT(S,I)||S.push(I)}g=new Ln(S),m=d.fieldTransforms.filter((b=>g.covers(b.field)))}else g=null,m=d.fieldTransforms;return new _D(new An(y),g,m)}class dd extends ba{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dd}}function rT(r,e,n){return new hd({Ac:3,Dc:e.settings.Dc,methodName:r._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ng extends ba{_toFieldTransform(e){return new id(e.path,new mc)}isEqual(e){return e instanceof ng}}class ig extends ba{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rT(this,e,!0),s=this.vc.map((c=>Ta(c,n))),o=new Co(s);return new id(e.path,o)}isEqual(e){return e instanceof ig&&Tr(this.vc,e.vc)}}class rg extends ba{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=rT(this,e,!0),s=this.vc.map((c=>Ta(c,n))),o=new Io(s);return new id(e.path,o)}isEqual(e){return e instanceof rg&&Tr(this.vc,e.vc)}}class sg extends ba{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new pc(e.serializer,gb(e.serializer,this.Fc));return new id(e.path,n)}isEqual(e){return e instanceof sg&&this.Fc===e.Fc}}function sT(r,e,n,s){const o=r.Cc(1,e,n);ag("Data must be an object, but it was:",o,s);const c=[],d=An.empty();Ds(s,((g,m)=>{const S=og(e,g,n);m=wt(m);const b=o.yc(S);if(m instanceof dd)c.push(S);else{const I=Ta(m,b);I!=null&&(c.push(S),d.set(S,I))}}));const y=new Ln(c);return new nT(d,y,o.fieldTransforms)}function aT(r,e,n,s,o,c){const d=r.Cc(1,e,n),y=[up(e,s,n)],g=[o];if(c.length%2!=0)throw new fe(Z.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<c.length;I+=2)y.push(up(e,c[I])),g.push(c[I+1]);const m=[],S=An.empty();for(let I=y.length-1;I>=0;--I)if(!uT(m,y[I])){const V=y[I];let U=g[I];U=wt(U);const q=d.yc(V);if(U instanceof dd)m.push(V);else{const $=Ta(U,q);$!=null&&(m.push(V),S.set(V,$))}}const b=new Ln(m);return new nT(S,b,d.fieldTransforms)}function oT(r,e,n,s=!1){return Ta(n,r.Cc(s?4:3,e))}function Ta(r,e){if(cT(r=wt(r)))return ag("Unsupported field value:",e,r),lT(r,e);if(r instanceof ba)return(function(s,o){if(!iT(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(o);c&&o.fieldTransforms.push(c)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const c=[];let d=0;for(const y of s){let g=Ta(y,o.wc(d));g==null&&(g={nullValue:"NULL_VALUE"}),c.push(g),d++}return{arrayValue:{values:c}}})(r,e)}return(function(s,o){if((s=wt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return gb(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=ut.fromDate(s);return{timestampValue:Uh(o.serializer,c)}}if(s instanceof ut){const c=new ut(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Uh(o.serializer,c)}}if(s instanceof $i)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Jn)return{bytesValue:xb(o.serializer,s._byteString)};if(s instanceof vt){const c=o.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw o.Sc(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Vp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Yi)return(function(d,y){return{mapValue:{fields:{[eb]:{stringValue:tb},[Lh]:{arrayValue:{values:d.toArray().map((m=>{if(typeof m!="number")throw y.Sc("VectorValues must only contain numeric values.");return Mp(y.serializer,m)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${Qh(s)}`)})(r,e)}function lT(r,e){const n={};return QS(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(r,((s,o)=>{const c=Ta(o,e.mc(s));c!=null&&(n[s]=c)})),{mapValue:{fields:n}}}function cT(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ut||r instanceof $i||r instanceof Jn||r instanceof vt||r instanceof ba||r instanceof Yi)}function ag(r,e,n){if(!cT(n)||!$S(n)){const s=Qh(n);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function up(r,e,n){if((e=wt(e))instanceof Rc)return e._internalPath;if(typeof e=="string")return og(r,e);throw Hh("Field path arguments must be of type string or ",r,!1,void 0,n)}const ED=new RegExp("[~\\*/\\[\\]]");function og(r,e,n){if(e.search(ED)>=0)throw Hh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new Rc(...e.split("."))._internalPath}catch{throw Hh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Hh(r,e,n,s,o){const c=s&&!s.isEmpty(),d=o!==void 0;let y=`Function ${e}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let g="";return(c||d)&&(g+=" (found",c&&(g+=` in field ${s}`),d&&(g+=` in document ${o}`),g+=")"),new fe(Z.INVALID_ARGUMENT,y+r+g)}function uT(r,e){return r.some((n=>n.isEqual(e)))}class lg{constructor(e,n,s,o,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(fd("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SD extends lg{data(){return super.data()}}function fd(r,e){return typeof e=="string"?og(r,e):e instanceof Rc?e._internalPath:e._delegate._internalPath}function hT(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new fe(Z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class md extends cg{}function Bi(r,e,...n){let s=[];e instanceof cg&&s.push(e),s=s.concat(n),(function(c){const d=c.filter((g=>g instanceof ug)).length,y=c.filter((g=>g instanceof pd)).length;if(d>1||d>0&&y>0)throw new fe(Z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class pd extends md{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new pd(e,n,s)}_apply(e){const n=this._parse(e);return dT(e._query,n),new Xi(e.firestore,e.converter,ep(e._query,n))}_parse(e){const n=zo(e.firestore);return(function(c,d,y,g,m,S,b){let I;if(m.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){_E(b,S);const U=[];for(const q of b)U.push(yE(g,c,q));I={arrayValue:{values:U}}}else I=yE(g,c,b)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||_E(b,S),I=oT(y,d,b,S==="in"||S==="not-in");return Vt.create(m,S,I)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Fl(r,e,n){const s=e,o=fd("where",r);return pd._create(o,s,n)}class ug extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ug(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:mi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,c){let d=o;const y=c.getFlattenedFilters();for(const g of y)dT(d,g),d=ep(d,g)})(e._query,n),new Xi(e.firestore,e.converter,ep(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class hg extends md{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new hg(e,n)}_apply(e){const n=(function(o,c,d){if(o.startAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new fe(Z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new fc(c,d)})(e._query,this._field,this._direction);return new Xi(e.firestore,e.converter,(function(o,c){const d=o.explicitOrderBy.concat([c]);return new va(o.path,o.collectionGroup,d,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,n))}}function ps(r,e="asc"){const n=e,s=fd("orderBy",r);return hg._create(s,n)}class dg extends md{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new dg(e,n,s)}_apply(e){return new Xi(e.firestore,e.converter,Ph(e._query,this._limit,this._limitType))}}function us(r){return AC("limit",r),dg._create("limit",r,"F")}class fg extends md{constructor(e,n,s){super(),this.type=e,this._docOrFields=n,this._inclusive=s}static _create(e,n,s){return new fg(e,n,s)}_apply(e){const n=TD(e,this.type,this._docOrFields,this._inclusive);return new Xi(e.firestore,e.converter,(function(o,c){return new va(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,c,o.endAt)})(e._query,n))}}function bD(...r){return fg._create("startAfter",r,!1)}function TD(r,e,n,s){if(n[0]=wt(n[0]),n[0]instanceof lg)return(function(c,d,y,g,m){if(!g)throw new fe(Z.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${y}().`);const S=[];for(const b of vo(c))if(b.field.isKeyField())S.push(Vh(d,g.key));else{const I=g.data.field(b.field);if(Wh(I))throw new fe(Z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(I===null){const V=b.field.canonicalString();throw new fe(Z.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${V}' (used as the orderBy) does not exist.`)}S.push(I)}return new Ro(S,m)})(r._query,r.firestore._databaseId,e,n[0]._document,s);{const o=zo(r.firestore);return(function(d,y,g,m,S,b){const I=d.explicitOrderBy;if(S.length>I.length)throw new fe(Z.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const V=[];for(let U=0;U<S.length;U++){const q=S[U];if(I[U].field.isKeyField()){if(typeof q!="string")throw new fe(Z.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!Op(d)&&q.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const $=d.path.child(ct.fromString(q));if(!Te.isDocumentKey($))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${$}' is not because it contains an odd number of segments.`);const K=new Te($);V.push(Vh(y,K))}else{const $=oT(g,m,q);V.push($)}}return new Ro(V,b)})(r._query,r.firestore._databaseId,o,e,n,s)}}function yE(r,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new fe(Z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Op(e)&&n.indexOf("/")!==-1)throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(ct.fromString(n));if(!Te.isDocumentKey(s))throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Vh(r,new Te(s))}if(n instanceof vt)return Vh(r,n._key);throw new fe(Z.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Qh(n)}.`)}function _E(r,e){if(!Array.isArray(r)||r.length===0)throw new fe(Z.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dT(r,e){const n=(function(o,c){for(const d of o)for(const y of d.getFlattenedFilters())if(c.indexOf(y.op)>=0)return y.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new fe(Z.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AD{convertValue(e,n="none"){switch(Rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Ds(e,((o,c)=>{s[o]=this.convertValue(c,n)})),s}convertVectorValue(e){const n=e.fields?.[Lh].arrayValue?.values?.map((s=>At(s.doubleValue)));return new Yi(n)}convertGeoPoint(e){return new $i(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=Jh(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(uc(e));default:return null}}convertTimestamp(e){const n=ws(e);return new ut(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=ct.fromString(e);et(Mb(s),9688,{name:e});const o=new hc(s.get(1),s.get(3)),c=new Te(s.popFirst(5));return o.isEqual(n)||xr(`Document ${c} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}function mg(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}function wD(){return new pD("count")}class Jl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fa extends lg{constructor(e,n,s,o,c,d){super(e,n,s,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(fd("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fa._jsonSchemaVersion="firestore/documentSnapshot/1.0",fa._jsonSchema={type:Pt("string",fa._jsonSchemaVersion),bundleSource:Pt("string","DocumentSnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class Th extends fa{data(e={}){return super.data(e)}}class ma{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Jl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Th(this._firestore,this._userDataWriter,s.key,s,new Jl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new fe(Z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let d=0;return o._snapshot.docChanges.map((y=>{const g=new Th(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Jl(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:g,oldIndex:-1,newIndex:d++}}))}{let d=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>c||y.type!==3)).map((y=>{const g=new Th(o._firestore,o._userDataWriter,y.doc.key,y.doc,new Jl(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let m=-1,S=-1;return y.type!==0&&(m=d.indexOf(y.doc.key),d=d.delete(y.doc.key)),y.type!==1&&(d=d.add(y.doc),S=d.indexOf(y.doc.key)),{type:xD(y.type),doc:g,oldIndex:m,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new fe(Z.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ma._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),s.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:r})}}function Gl(r){r=on(r,vt);const e=on(r.firestore,pi);return cD(jo(e),r._key).then((n=>mT(e,r,n)))}ma._jsonSchemaVersion="firestore/querySnapshot/1.0",ma._jsonSchema={type:Pt("string",ma._jsonSchemaVersion),bundleSource:Pt("string","QuerySnapshot"),bundleName:Pt("string"),bundle:Pt("string")};class gd extends AD{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,n)}}function ys(r){r=on(r,Xi);const e=on(r.firestore,pi),n=jo(e),s=new gd(e);return hT(r._query),uD(n,r._query).then((o=>new ma(e,s,r,o)))}function Mm(r,e,n){r=on(r,vt);const s=on(r.firestore,pi),o=mg(r.converter,e,n);return Cc(s,[tg(zo(s),"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,mn.none())])}function ls(r,e,n,...s){r=on(r,vt);const o=on(r.firestore,pi),c=zo(o);let d;return d=typeof(e=wt(e))=="string"||e instanceof Rc?aT(c,"updateDoc",r._key,e,n,s):sT(c,"updateDoc",r._key,e),Cc(o,[d.toMutation(r._key,mn.exists(!0))])}function RD(r){return Cc(on(r.firestore,pi),[new sd(r._key,mn.none())])}function hp(r,e){const n=on(r.firestore,pi),s=Ft(r),o=mg(r.converter,e);return Cc(n,[tg(zo(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,mn.exists(!1))]).then((()=>s))}function fT(r,...e){r=wt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||gE(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(gE(e[s])){const g=e[s];e[s]=g.next?.bind(g),e[s+1]=g.error?.bind(g),e[s+2]=g.complete?.bind(g)}let c,d,y;if(r instanceof vt)d=on(r.firestore,pi),y=Zh(r._key.path),c={next:g=>{e[s]&&e[s](mT(d,r,g))},error:e[s+1],complete:e[s+2]};else{const g=on(r,Xi);d=on(g.firestore,pi),y=g._query;const m=new gd(d);c={next:S=>{e[s]&&e[s](new ma(d,m,g,S))},error:e[s+1],complete:e[s+2]},hT(r._query)}return(function(m,S,b,I){const V=new Zp(I),U=new Xp(S,V,b);return m.asyncQueue.enqueueAndForget((async()=>Yp(await qh(m),U))),()=>{V.Nu(),m.asyncQueue.enqueueAndForget((async()=>Qp(await qh(m),U)))}})(jo(d),y,o,c)}function Cc(r,e){return(function(s,o){const c=new Hi;return s.asyncQueue.enqueueAndForget((async()=>XI(await oD(s),o,c))),c.promise})(jo(r),e)}function mT(r,e,n){const s=n.docs.get(e._key),o=new gd(r);return new fa(r,o,e._key,s,new Jl(n.hasPendingWrites,n.fromCache),e.converter)}function CD(r){return ID(r,{count:wD()})}function ID(r,e){const n=on(r.firestore,pi),s=jo(n),o=kC(e,((c,d)=>new m2(d,c.aggregateType,c._internalFieldPath)));return hD(s,r._query,o).then((c=>(function(y,g,m){const S=new gd(y);return new gD(g,S,m)})(n,r,c)))}class DD{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=zo(e)}set(e,n,s){this._verifyNotCommitted();const o=km(e,this._firestore),c=mg(o.converter,n,s),d=tg(this._dataReader,"WriteBatch.set",o._key,c,o.converter!==null,s);return this._mutations.push(d.toMutation(o._key,mn.none())),this}update(e,n,s,...o){this._verifyNotCommitted();const c=km(e,this._firestore);let d;return d=typeof(n=wt(n))=="string"||n instanceof Rc?aT(this._dataReader,"WriteBatch.update",c._key,n,s,o):sT(this._dataReader,"WriteBatch.update",c._key,n),this._mutations.push(d.toMutation(c._key,mn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=km(e,this._firestore);return this._mutations=this._mutations.concat(new sd(n._key,mn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new fe(Z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function km(r,e){if((r=wt(r)).firestore!==e)throw new fe(Z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}function ft(){return new ng("serverTimestamp")}function Lm(...r){return new ig("arrayUnion",r)}function Vm(...r){return new rg("arrayRemove",r)}function sc(r){return new sg("increment",r)}function la(r){return jo(r=on(r,pi)),new DD(r,(e=>Cc(r,e)))}(function(e,n=!0){(function(o){Lo=o})(Mo),So(new pa("firestore",((s,{instanceIdentifier:o,options:c})=>{const d=s.getProvider("app").getImmediate(),y=new pi(new pC(s.getProvider("auth-internal")),new _C(d,s.getProvider("app-check-internal")),(function(m,S){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new fe(Z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hc(m.options.projectId,S)})(d,o),d);return c={useFetchStreams:n,...c},y._setSettings(c),y}),"PUBLIC").setMultipleInstances(!0)),Es(Sv,bv,e),Es(Sv,bv,"esm2020")})();const ND={apiKey:"AIzaSyCTVENg8F8uHy7gtSWe987TMj3QUKMxols",authDomain:"limitless-df63b.firebaseapp.com",projectId:"limitless-df63b",storageBucket:"limitless-df63b.firebasestorage.app",messagingSenderId:"92343669520",appId:"1:92343669520:web:54c21a2ff237fb14564b95"},pT=iS(ND),Pm=cC(pT),OD=new Er,Ie=fD(pT),gT=B.createContext(),Vn=()=>{const r=B.useContext(gT);if(!r)throw new Error("useAuth must be used within an AuthProvider");return r},MD=({children:r})=>{const[e,n]=B.useState(null),[s,o]=B.useState(!0),[c,d]=B.useState([]),[y,g]=B.useState(null),[m,S]=B.useState({}),[b,I]=B.useState(!1),V=()=>_R(Pm,OD),U=()=>(g(null),d([]),S({}),Jx(Pm)),q=async M=>{if(!e)throw new Error("User must be logged in");const z={...M,thoughtOfTheDay:M.thoughtOfTheDay||"",shareLifeExperience:M.shareLifeExperience||"",thoughtLikes:0,thoughtLikers:[],experienceLikes:0,commentCount:0,experienceLikers:[],userId:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,createdAt:ft(),updatedAt:ft()};await Mm(Ft(Ie,"profiles",e.uid),z),z.shareLifeExperience&&z.shareLifeExperience.trim()!==""&&await re(z);const J={id:e.uid,...z};g(J);const te={id:e.uid,displayName:z.displayName,photoURL:z.photoURL,location:z.location||"",thoughtOfTheDay:z.thoughtOfTheDay||"",shareLifeExperience:z.shareLifeExperience||"",thoughtLikes:0,experienceLikes:0};return d(ue=>{const N=ue.findIndex(Y=>Y.id===e.uid);if(N>=0){const Y=[...ue];return Y[N]=te,Y}return[...ue,te]}),await ge(),z},$=async()=>{if(!e)throw new Error("User must be logged in");try{return await RD(Ft(Ie,"profiles",e.uid)),g(null),d(M=>M.filter(z=>z.id!==e.uid)),!0}catch(M){throw console.error("Error deleting profile:",M),M}},K=async M=>{try{const z=Bi(fn(Ie,"experiences"),Fl("userId","==",M),Fl("isActive","==",!0),us(1)),J=await ys(z);if(!J.empty){const te=J.docs[0];return{id:te.id,...te.data()}}return null}catch(z){return console.error("Error getting user experience:",z),null}},re=async M=>{if(!e)throw new Error("User must be logged in");if(!M.shareLifeExperience||M.shareLifeExperience.trim()==="")return null;const z=await K(e.uid);if(z){const J=Ft(Ie,"experiences",z.id);return await ls(J,{content:M.shareLifeExperience,updatedAt:ft(),userDisplayName:e.displayName,userPhotoURL:e.photoURL}),z.id}else{const J={userId:e.uid,userDisplayName:e.displayName,userPhotoURL:e.photoURL,content:M.shareLifeExperience,createdAt:ft(),updatedAt:ft(),likeCount:0,commentCount:0,isActive:!0};try{const te=await hp(fn(Ie,"experiences"),J);return y&&await ls(Ft(Ie,"profiles",e.uid),{experienceId:te.id,updatedAt:ft()}),te.id}catch(te){throw console.error("Error adding experience:",te),te}}},ne=async(M=20,z=null,J="newest")=>{try{console.log(" DEBUG fetchExperiences:",{limitCount:M,sortBy:J,hasLastDoc:!!z}),console.log(" DEBUG fetchExperiences - Sorting by:",J),console.log(" DEBUG - Will order by field:",J==="most_commented"?"comments":J==="most_liked"?"likeCount":"createdAt");let te,ue="createdAt",N="desc";switch(J){case"most_liked":ue="likeCount",N="desc";break;case"most_commented":ue="commentCount",N="desc";break;case"newest":default:ue="createdAt",N="desc";break}z?te=Bi(fn(Ie,"experiences"),Fl("isActive","==",!0),ps(ue,N),bD(z),us(M)):te=Bi(fn(Ie,"experiences"),Fl("isActive","==",!0),ps(ue,N),us(M)),console.log(" DEBUG: Query created with order:",ue,N);const Y=await ys(te);console.log(` DEBUG: Query returned ${Y.size} documents`);const le=[];let se=null;return Y.forEach((me,Ee)=>{const be=me.data();console.log(` DEBUG ${Ee+1}. ${me.id}:`,{userId:be.userId,userDisplayName:be.userDisplayName,content:be.content?.substring(0,50)+"...",likeCount:be.likeCount,commentCount:be.commentCount,createdAt:be.createdAt});const We=be.createdAt?.toDate?be.createdAt.toDate():be.createdAt;le.push({id:me.id,...be,createdAt:We,likeCount:Number(be.likeCount)||0,commentCount:Number(be.commentCount)||0}),se=me}),console.log(` DEBUG: Returning ${le.length} experiences`),console.log(` DEBUG: Has more? ${le.length===M}`),{experiences:le,lastDoc:se,hasMore:le.length===M}}catch(te){return console.error(" ERROR fetchExperiences:",te),console.error("Error code:",te.code),console.error("Error message:",te.message),te.code==="failed-precondition"&&(console.error(" FIREBASE INDEX ERROR DETECTED!"),console.error("You need to create composite indexes in Firebase Console:"),console.error("1. Collection: experiences, Fields: isActive (Ascending), createdAt (Descending)"),console.error("2. Collection: experiences, Fields: isActive (Ascending), likeCount (Descending)"),console.error("3. Collection: experiences, Fields: isActive (Ascending), commentCount (Descending)")),{experiences:[],lastDoc:null,hasMore:!1}}},pe=M=>{const z=Bi(fn(Ie,"experiences"),Fl("isActive","==",!0),ps("createdAt","desc"),us(50));return fT(z,J=>{const te=J.docs.map(ue=>({id:ue.id,...ue.data()}));M(te)})},he=B.useCallback(async M=>{if(m[M])return m[M];try{const z=Ft(Ie,"profiles",M),J=await Gl(z);if(J.exists()){const te=J.data(),ue={id:M,...te,thoughtLikes:te.thoughtLikes||0,thoughtLikers:te.thoughtLikers||[],experienceLikes:te.experienceLikes||0,experienceLikers:te.experienceLikers||[]};return S(N=>({...N,[M]:ue})),ue}}catch(z){console.error("Error fetching full profile:",z)}return null},[m]),ge=B.useCallback(async()=>{I(!0);try{const M=fn(Ie,"profiles"),z=Bi(M,ps("createdAt"),us(1e4)),te=(await ys(z)).docs.map(ue=>{const N=ue.data();return{id:ue.id,displayName:N.displayName||"Anonymous",photoURL:N.photoURL||"https://i.pravatar.cc/150?u=default",location:N.location||"",thoughtOfTheDay:N.thoughtOfTheDay||"",shareLifeExperience:N.shareLifeExperience||"",thoughtLikes:N.thoughtLikes||0,thoughtLikers:N.thoughtLikers||[],experienceLikes:N.experienceLikes||0,experienceLikers:N.experienceLikers||[]}});d(te)}catch(M){console.error("Error loading profiles:",M)}finally{I(!1)}},[]),D=async()=>{if(c.length===0)return 0;try{I(!0);const M=la(Ie),z=Math.min(c.length,500),J=c.slice(0,z);return J.forEach(te=>{const ue=Ft(Ie,"profiles",te.id);M.delete(ue)}),await M.commit(),d([]),S({}),J.length}catch(M){throw console.error("Error clearing profiles:",M),M}finally{I(!1)}},w=async M=>{if(!e)throw new Error("User must be logged in");try{const z=Ft(Ie,"profiles",M),J=await Gl(z);if(!J.exists())throw new Error("Profile not found");const te=J.data(),N=(te.thoughtLikers||[]).includes(e.uid),Y={thoughtLikers:N?Vm(e.uid):Lm(e.uid)},le=te.thoughtLikes||0;return Y.thoughtLikes=N?le-1:le+1,Y.updatedAt=ft(),await ls(z,Y),M===e.uid&&y&&g(se=>({...se,thoughtLikers:N?se.thoughtLikers.filter(me=>me!==e.uid):[...se.thoughtLikers,e.uid],thoughtLikes:N?se.thoughtLikes-1:se.thoughtLikes+1})),d(se=>se.map(me=>me.id===M?{...me,thoughtLikers:N?(me.thoughtLikers||[]).filter(Ee=>Ee!==e.uid):[...me.thoughtLikers||[],e.uid],thoughtLikes:N?(me.thoughtLikes||1)-1:(me.thoughtLikes||0)+1}:me)),m[M]&&S(se=>({...se,[M]:{...se[M],thoughtLikers:N?se[M].thoughtLikers.filter(me=>me!==e.uid):[...se[M].thoughtLikers,e.uid],thoughtLikes:N?se[M].thoughtLikes-1:se[M].thoughtLikes+1}})),console.log(` Thought ${N?"unliked":"liked"} for user ${M}`),!N}catch(z){throw console.error("Error toggling thought like:",z),z}},x=async M=>{if(!e)throw new Error("User must be logged in");try{const z=Ft(Ie,"experiences",M),J=await Gl(z);if(!J.exists())throw new Error("Experience not found");const ue=J.data().likedBy?.includes(e.uid)||!1,N={likedBy:ue?Vm(e.uid):Lm(e.uid),likeCount:sc(ue?-1:1),updatedAt:ft()};return await ls(z,N),!ue}catch(z){throw console.error("Error toggling experience like:",z),z}},R=async(M,z,J=null)=>{if(!e)throw new Error("User must be logged in");try{const te=await hp(fn(Ie,"experiences",M,"comments"),{userId:e.uid,userDisplayName:e.displayName,userPhotoURL:e.photoURL,content:z,createdAt:ft(),parentCommentId:J,depth:J?1:0,likeCount:0,likedBy:[]}),ue=Ft(Ie,"experiences",M);return await ls(ue,{commentCount:sc(1),updatedAt:ft()}),{id:te.id,userId:e.uid,userDisplayName:e.displayName,userPhotoURL:e.photoURL,content:z,createdAt:new Date,parentCommentId:J,depth:J?1:0,likeCount:0,likedBy:[]}}catch(te){throw console.error("Error adding comment:",te),te}},O=async(M,z=10,J=null)=>{try{console.log(`Fetching comments for experience: ${M}, limit: ${z}`);let te=Bi(fn(Ie,"experiences",M,"comments"),ps("createdAt","asc"),us(z));const ue=await ys(te),N=[];let Y=null;return ue.forEach(le=>{const se=le.data(),me={id:le.id,userId:se.userId||"unknown_user",userDisplayName:se.userDisplayName||"Anonymous",userPhotoURL:se.userPhotoURL||"https://i.pravatar.cc/150",content:se.content||"",createdAt:se.createdAt,parentCommentId:se.parentCommentId||null,depth:se.depth||0,likeCount:se.likeCount||0,likedBy:se.likedBy||[],...se};N.push(me),Y=le}),console.log(`Found ${N.length} comments for experience ${M}`),{comments:N,lastDoc:Y}}catch(te){return console.error("Error fetching comments:",te),{comments:[],lastDoc:null}}},L=async(M,z)=>{if(!e)throw new Error("User must be logged in");try{const J=Ft(Ie,"experiences",M,"comments",z),te=await Gl(J);if(!te.exists())throw console.log("Comment not found:",{experienceId:M,commentId:z}),new Error("Comment not found");const N=te.data().likedBy?.includes(e.uid)||!1,Y={likedBy:N?Vm(e.uid):Lm(e.uid),likeCount:sc(N?-1:1),updatedAt:ft()};return await ls(J,Y),!N}catch(J){throw console.error("Error toggling comment like:",J,{experienceId:M,commentId:z}),J}},C=async()=>{const M=`test_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,z=["Alex Johnson","Maria Garcia","James Smith","Sarah Chen","Mike Brown","Lisa Wang","David Kim","Emma Davis"],J=["New York, USA","London, UK","Tokyo, Japan","Sydney, Australia","Berlin, Germany","Toronto, Canada"],te=["Programming, Hiking, Music","Photography, Travel, Food","Gaming, AI, Robotics","Art, Design, Fashion","Sports, Cooking, Reading"],ue=["The only way to do great work is to love what you do.","Innovation distinguishes between a leader and a follower.","The future belongs to those who believe in the beauty of their dreams.","Don't watch the clock; do what it does. Keep going.","The best time to plant a tree was 20 years ago. The second best time is now."],N=["Traveled across Asia for 6 months, learning about different cultures and philosophies. The journey taught me that happiness comes from within.","Built my first startup at 22, failed, but learned invaluable lessons about resilience and perseverance that shaped my career.","Survived a hiking accident in the Andes that taught me the true meaning of teamwork and trusting others in difficult situations.","Volunteered in a remote village in Africa for a year, which completely changed my perspective on what really matters in life.","Overcame a serious illness that made me appreciate every single day and find joy in the smallest moments."],Y=z[Math.floor(Math.random()*z.length)],le=J[Math.floor(Math.random()*J.length)],se=te[Math.floor(Math.random()*te.length)],me=ue[Math.floor(Math.random()*ue.length)],Ee=N[Math.floor(Math.random()*N.length)],be={userId:M,email:`${Y.toLowerCase().replace(" ",".")}@test.com`,displayName:Y,photoURL:`https://i.pravatar.cc/150?u=${M}`,thoughtOfTheDay:me,shareLifeExperience:Ee,thoughtLikes:Math.floor(Math.random()*20),thoughtLikers:[],experienceLikes:Math.floor(Math.random()*15),experienceLikers:[],website:"https://example.com",location:le,interests:se,commentCount:0,createdAt:ft(),updatedAt:ft(),isTest:!0};if(await Mm(Ft(Ie,"profiles",M),be),Ee&&Ee.trim()!==""){const We=`exp_${M}`,Ge={userId:M,userDisplayName:Y,userPhotoURL:`https://i.pravatar.cc/150?u=${M}`,content:Ee,createdAt:ft(),updatedAt:ft(),likeCount:be.experienceLikes||0,commentCount:0,likedBy:[],isActive:!0};await Mm(Ft(Ie,"experiences",We),Ge),await ls(Ft(Ie,"profiles",M),{experienceId:We,updatedAt:ft()})}return await ge(),be},ce=async M=>{I(!0);let z=la(Ie),J=la(Ie);const te=Math.min(M,1e3);console.log(`Starting bulk creation of ${te} profiles with experiences...`);let ue=0,N=0;const Y=[];for(let le=0;le<te;le++){const se=`test_bulk_${Date.now()}_${le}`,me=["Alex","Maria","James","Sarah","Mike","Lisa","David","Emma"],Ee=["Johnson","Garcia","Smith","Chen","Brown","Wang","Kim","Davis"],be=["New York","London","Tokyo","Sydney","Berlin","Toronto"],We=["The only way to do great work is to love what you do.","Innovation distinguishes between a leader and a follower.","The future belongs to those who believe in the beauty of their dreams."],Ge=["Traveled across Asia for 6 months, learning about different cultures and philosophies. The journey taught me that happiness comes from within.","Built my first startup at 22, failed, but learned invaluable lessons about resilience and perseverance that shaped my career.","Survived a hiking accident in the Andes that taught me the true meaning of teamwork and trusting others in difficult situations.","Volunteered in a remote village in Africa for a year, which completely changed my perspective on what really matters in life.","Overcame a serious illness that made me appreciate every single day and find joy in the smallest moments.","Moved to a new country without knowing anyone, forcing me to grow and become more independent than I ever thought possible.","Learned a new language in my 30s, proving that it's never too late to challenge yourself and acquire new skills.","Witnessed the birth of my first child, an experience that redefined my understanding of love and responsibility.","Failed an important exam multiple times before finally passing, teaching me that persistence is more important than talent.","Helped a stranger in need during a storm, which led to a lifelong friendship and taught me about the value of human connection."],Pn=`${me[Math.floor(Math.random()*me.length)]} ${Ee[Math.floor(Math.random()*Ee.length)]}`,gi=`${be[Math.floor(Math.random()*be.length)]}, ${["USA","UK","Japan","Australia","Germany","Canada"][Math.floor(Math.random()*6)]}`,yi=We[Math.floor(Math.random()*We.length)],Un=Ge[Math.floor(Math.random()*Ge.length)],cn={userId:se,email:`${Pn.toLowerCase().replace(" ",".")}@test.com`,displayName:Pn,photoURL:`https://i.pravatar.cc/150?u=${se}`,thoughtOfTheDay:yi,shareLifeExperience:Un,thoughtLikes:Math.floor(Math.random()*30),thoughtLikers:[],experienceLikes:Math.floor(Math.random()*20),experienceLikers:[],website:"https://example.com",location:gi,interests:"Programming, Technology",commentCount:0,createdAt:ft(),updatedAt:ft(),isTest:!0},Wi=Ft(Ie,"profiles",se);z.set(Wi,cn),ue++,Un&&Un.trim()!==""&&Y.push({profileId:se,profileData:cn}),ue%100===0&&(await z.commit(),z=la(Ie),console.log(`Committed ${ue} profiles...`))}ue%100!==0&&await z.commit(),console.log(` Successfully created ${ue} test profiles!`),console.log(`Creating experiences for ${Y.length} profiles...`);for(let le=0;le<Y.length;le++){const{profileId:se,profileData:me}=Y[le],Ee=`exp_${se}`,be={userId:se,userDisplayName:me.displayName,userPhotoURL:me.photoURL,content:me.shareLifeExperience,createdAt:ft(),updatedAt:ft(),likeCount:me.experienceLikes||0,commentCount:0,likedBy:[],isActive:!0},We=Ft(Ie,"experiences",Ee);J.set(We,be),N++;const Ge=Ft(Ie,"profiles",se);await ls(Ge,{experienceId:Ee,updatedAt:ft()}),N%100===0&&(await J.commit(),J=la(Ie),console.log(`Committed ${N} experiences...`))}return N%100!==0&&await J.commit(),console.log(` Successfully created ${ue} test profiles with ${N} experiences!`),await ge(),ue};B.useEffect(()=>Wx(Pm,async z=>{if(n(z),z)try{const J=Ft(Ie,"profiles",z.uid),te=await Gl(J);if(te.exists()){const ue=te.data();g({id:z.uid,...ue})}}catch(J){console.error("Error fetching user profile:",J)}else g(null);o(!1)}),[]),B.useEffect(()=>{(async()=>{!b&&e!==null&&await ge()})()},[e]),B.useEffect(()=>{ge()},[ge]);const ve={user:e,userProfile:y,profiles:c,profilesLoading:b,signInWithGoogle:V,logout:U,createUserProfile:q,deleteUserProfile:$,fetchFullProfile:he,clearAllProfiles:D,loadProfiles:ge,likeThought:w,likeExperience:x,fetchExperiences:ne,subscribeToExperiences:pe,addUserExperience:re,addComment:R,fetchComments:O,likeComment:L,addTestProfile:C,createBulkTestProfiles:ce};return E.jsx(gT.Provider,{value:ve,children:!s&&r})},kD=({activeTab:r,setActiveTab:e})=>{const{user:n,userProfile:s,profiles:o,signInWithGoogle:c,logout:d}=Vn(),[y,g]=B.useState(!1),m=B.useRef(null),S=B.useRef(null),b=async()=>{try{await c()}catch(re){console.error("Error signing in:",re)}},I=async()=>{try{await d()}catch(re){console.error("Error signing out:",re)}},V=()=>{g(!y)},U=()=>{window.dispatchEvent(new CustomEvent("showDonationPopup"))},q=()=>{window.dispatchEvent(new CustomEvent("showTestPanel"))};B.useEffect(()=>{const re=ne=>{m.current&&S.current&&!m.current.contains(ne.target)&&!S.current.contains(ne.target)&&g(!1)};return y&&document.addEventListener("mousedown",re),()=>{document.removeEventListener("mousedown",re)}},[y]);const K=(()=>{if(o.length===0)return null;const re=window.innerWidth,ne=window.innerHeight-80;let pe=1,he=0,ge=1/0;for(let w=1;w<=Math.min(o.length,100);w++){const x=Math.ceil(o.length/w),R=re/w,O=ne/x,L=Math.min(R,O),C=Math.abs(re-w*L)+Math.abs(ne-x*L);C<ge&&(ge=C,pe=w,he=L)}const D=Math.ceil(o.length/pe);return{members:o.length.toLocaleString(),tileSize:Math.floor(he),grid:`${pe}${D}`,density:(o.length/(pe*D)).toFixed(2)}})();return E.jsx("header",{style:LD,children:E.jsxs("div",{style:VD,children:[E.jsxs("div",{style:PD,children:[E.jsx("div",{style:UD,children:E.jsx("h1",{style:jD,children:" Limitless"})}),E.jsxs("div",{style:zD,children:[E.jsx("button",{onClick:()=>e("galaxy"),style:{...vE,backgroundColor:r==="galaxy"?"rgba(52, 152, 219, 0.2)":"transparent",color:r==="galaxy"?"#FFD700":"#bdc3c7",borderBottom:r==="galaxy"?"3px solid #FFD700":"3px solid transparent"},children:" Galaxy"}),E.jsx("button",{onClick:()=>e("experiences"),style:{...vE,backgroundColor:r==="experiences"?"rgba(52, 152, 219, 0.2)":"transparent",color:r==="experiences"?"#FFD700":"#bdc3c7",borderBottom:r==="experiences"?"3px solid #FFD700":"3px solid transparent"},children:" Life Experiences"})]})]}),E.jsxs("div",{style:BD,children:[K&&E.jsxs("div",{style:qD,children:[E.jsxs("button",{ref:S,onClick:V,style:HD,title:"Show grid information",children:[" ",K.members," stars"]}),y&&E.jsxs("div",{ref:m,style:QD,children:[E.jsxs("div",{style:KD,children:[E.jsx("h4",{style:XD,children:"Galaxy Stats"}),E.jsx("button",{onClick:()=>g(!1),style:WD,children:""})]}),E.jsxs("div",{style:JD,children:[E.jsxs("div",{style:ch,children:[E.jsx("span",{style:uh,children:"Total Stars:"}),E.jsx("span",{style:hh,children:K.members})]}),E.jsxs("div",{style:ch,children:[E.jsx("span",{style:uh,children:"Star Size:"}),E.jsxs("span",{style:hh,children:[K.tileSize,"px"]})]}),E.jsxs("div",{style:ch,children:[E.jsx("span",{style:uh,children:"Galaxy Layout:"}),E.jsx("span",{style:hh,children:K.grid})]}),E.jsxs("div",{style:ch,children:[E.jsx("span",{style:uh,children:"Star Density:"}),E.jsx("span",{style:hh,children:K.density})]})]})]})]}),E.jsx("button",{onClick:U,style:FD,title:"Support the galaxy",children:" Donate"}),E.jsx("button",{onClick:q,style:GD,title:"Open test panel",children:" Test"}),n&&E.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("showCreateProfile",{detail:{mode:s?"edit":"create"}})),style:s?YD:$D,title:s?"Edit your profile":"Create your profile",children:s?" Edit":" Create"})]}),E.jsx("div",{style:ZD,children:n?E.jsxs("div",{style:e5,children:[E.jsx("img",{src:n.photoURL,alt:n.displayName,style:t5}),E.jsxs("div",{style:n5,children:[E.jsx("span",{style:i5,children:n.displayName}),s&&E.jsx("span",{style:r5,title:"You have a profile",children:""})]}),E.jsx("button",{onClick:I,style:a5,children:"Sign Out"})]}):E.jsx("button",{onClick:b,style:s5,children:" Sign In"})})]})})},LD={position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(44, 62, 80, 0.95)",color:"white",padding:"0.75rem 0",boxShadow:"0 4px 20px rgba(0,0,0,0.3)",width:"100vw",borderBottom:"1px solid #34495e",zIndex:1e3,backdropFilter:"blur(10px)"},VD={width:"100%",maxWidth:"1400px",margin:"0 auto",padding:"0 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1rem"},PD={display:"flex",alignItems:"center",gap:"2rem",flexShrink:0},UD={flexShrink:0},jD={margin:0,fontSize:"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},zD={display:"flex",gap:"0.5rem",height:"100%"},vE={padding:"0.5rem 1.25rem",border:"none",background:"transparent",color:"#bdc3c7",fontSize:"0.95rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",borderRadius:"8px",display:"flex",alignItems:"center",gap:"0.5rem"},BD={display:"flex",alignItems:"center",gap:"1rem",flex:1,justifyContent:"center"},qD={position:"relative"},HD={backgroundColor:"#34495e",color:"#bdc3c7",border:"1px solid #2c3e50",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},FD={backgroundColor:"#FFD700",color:"#2c3e50",border:"none",padding:"0.5rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem",boxShadow:"0 2px 10px rgba(255, 215, 0, 0.3)"},GD={backgroundColor:"#9b59b6",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},$D={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.5rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},YD={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.5rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},QD={position:"absolute",top:"calc(100% + 10px)",left:"50%",transform:"translateX(-50%)",backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"12px",padding:"1rem",width:"280px",boxShadow:"0 8px 30px rgba(0,0,0,0.4)",zIndex:2e3,animation:"fadeIn 0.2s ease"},KD={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",paddingBottom:"0.75rem",borderBottom:"1px solid #34495e"},XD={margin:0,fontSize:"1rem",color:"#ecf0f1",fontWeight:"600"},WD={background:"none",border:"none",color:"#95a5a6",fontSize:"1.2rem",cursor:"pointer",padding:"0",width:"24px",height:"24px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px"},JD={display:"flex",flexDirection:"column",gap:"0.75rem"},ch={display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.25rem 0"},uh={fontSize:"0.85rem",color:"#bdc3c7",fontWeight:"500"},hh={fontSize:"0.9rem",color:"#ecf0f1",fontWeight:"600",backgroundColor:"#34495e",padding:"0.25rem 0.5rem",borderRadius:"4px",minWidth:"60px",textAlign:"center"},ZD={display:"flex",alignItems:"center",flexShrink:0},e5={display:"flex",alignItems:"center",gap:"0.75rem"},t5={width:"36px",height:"36px",borderRadius:"50%",border:"2px solid #3498db"},n5={display:"flex",alignItems:"center",gap:"0.5rem"},i5={fontWeight:"500",color:"#ecf0f1",fontSize:"0.9rem"},r5={color:"#FFD700",fontSize:"1rem"},s5={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem"},a5={backgroundColor:"#e74c3c",color:"white",border:"none",padding:"0.4rem 0.8rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",fontWeight:"500",transition:"all 0.2s ease"},yT=document.createElement("style");yT.innerText=`
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}
`;document.head.appendChild(yT);const kn={DURATION_MS:5e3,FADE_IN_MS:500,MIN_STAR_SIZE_FOR_TOOLTIP:3,TOOLTIP_OFFSET:50,MAX_TOOLTIP_WIDTH:300},EE={MAX_THOUGHT_LENGTH:500,MAX_LIFE_EXPERIENCE_LENGTH:1e3},vr={STAR_PULSE:2e3,GLOW_TRANSITION:500},Jt={STAR_GLOW:"#FFFF00",STAR_NORMAL:"rgba(255, 255, 255, 0.9)",TOOLTIP_BG:"rgba(20, 25, 45, 0.95)",TOOLTIP_BORDER:"#FFFF00",TOOLTIP_TEXT:"rgba(240, 240, 255, 0.95)"},o5={INITIAL_LOAD_COUNT:10},dh={NEWEST:"newest",MOST_LIKED:"most_liked",MOST_COMMENTED:"most_commented"};console.log("Spotlight duration configured:",kn.DURATION_MS,"ms");console.log("Experience infinite scroll: Initial load",o5.INITIAL_LOAD_COUNT);const l5=({isOpen:r,onClose:e})=>{const{user:n,userProfile:s,createUserProfile:o,deleteUserProfile:c}=Vn(),[d,y]=B.useState("create"),[g,m]=B.useState({thoughtOfTheDay:"",shareLifeExperience:"",website:"",location:"",interests:""}),[S,b]=B.useState(!1),[I,V]=B.useState(!1);B.useEffect(()=>{r&&(s?(y("edit"),m({thoughtOfTheDay:s.thoughtOfTheDay||"",shareLifeExperience:s.shareLifeExperience||"",website:s.website||"",location:s.location||"",interests:s.interests||""})):(y("create"),m({thoughtOfTheDay:"",shareLifeExperience:"",website:"",location:"",interests:""})))},[r,s]);const U=async K=>{if(K.preventDefault(),!!n){b(!0);try{await o(g),e()}catch(re){console.error(`Error ${d==="create"?"creating":"updating"} profile:`,re)}finally{b(!1)}}},q=K=>{m({...g,[K.target.name]:K.target.value})},$=async()=>{if(window.confirm("Are you sure you want to delete your profile? This action cannot be undone.")){b(!0);try{await c(),e()}catch(K){console.error("Error deleting profile:",K)}finally{b(!1),V(!1)}}};return r?E.jsx("div",{style:c5,onClick:e,children:E.jsxs("div",{style:u5,onClick:K=>K.stopPropagation(),children:[E.jsxs("div",{style:h5,children:[E.jsx("h2",{children:d==="create"?"Create Your Profile":"Edit Your Profile"}),E.jsx("button",{onClick:e,style:d5,children:""})]}),d==="edit"&&s&&E.jsxs("div",{style:f5,children:[E.jsx("p",{style:m5,children:"You already have a profile! Update your information below."}),E.jsxs("div",{style:p5,children:[E.jsx("img",{src:n.photoURL,alt:n.displayName,style:g5}),E.jsxs("div",{style:y5,children:[E.jsx("strong",{style:_5,children:n.displayName}),E.jsx("p",{style:v5,children:n.email}),E.jsx("button",{onClick:()=>V(!0),style:E5,type:"button",children:" Delete Profile"})]})]})]}),I&&E.jsx("div",{style:S5,children:E.jsxs("div",{style:b5,children:[E.jsx("h3",{style:T5,children:"Delete Profile?"}),E.jsx("p",{style:A5,children:"Are you sure you want to delete your profile? This will remove you from the community grid. This action cannot be undone."}),E.jsxs("div",{style:w5,children:[E.jsx("button",{onClick:()=>V(!1),style:x5,disabled:S,type:"button",children:"Cancel"}),E.jsx("button",{onClick:$,style:R5,disabled:S,type:"button",children:S?"Deleting...":"Yes, Delete Profile"})]})]})}),E.jsxs("form",{onSubmit:U,style:C5,children:[E.jsxs("div",{style:$l,children:[E.jsxs("label",{style:Yl,children:["What are you thinking today? ",E.jsx("span",{style:Ql,children:"(Optional)"})]}),E.jsx("textarea",{name:"thoughtOfTheDay",value:g.thoughtOfTheDay,onChange:q,placeholder:"Tell us about your thought or mood of the day...",style:SE,rows:"4",maxLength:EE.MAX_THOUGHT_LENGTH}),E.jsxs("div",{style:bE,children:[g.thoughtOfTheDay.length,"/500 characters"]})]}),E.jsxs("div",{style:$l,children:[E.jsxs("label",{style:Yl,children:["Share a Life Experience ",E.jsx("span",{style:Ql,children:"(Optional)"})]}),E.jsx("textarea",{name:"shareLifeExperience",value:g.shareLifeExperience,onChange:q,placeholder:"Tell us about a meaningful experience that shaped who you are...",style:SE,rows:"4",maxLength:EE.MAX_LIFE_EXPERIENCE_LENGTH}),E.jsxs("div",{style:bE,children:[g.shareLifeExperience.length,"/1000 characters"]}),E.jsx("div",{style:TE,children:"Share something impactful - a journey, challenge, achievement, or lesson learned"})]}),E.jsxs("div",{style:$l,children:[E.jsxs("label",{style:Yl,children:["Website ",E.jsx("span",{style:Ql,children:"(Optional)"})]}),E.jsx("input",{type:"url",name:"website",value:g.website,onChange:q,placeholder:"https://yourwebsite.com",style:Ah})]}),E.jsxs("div",{style:$l,children:[E.jsxs("label",{style:Yl,children:["Location ",E.jsx("span",{style:Ql,children:"(Optional)"})]}),E.jsx("input",{type:"text",name:"location",value:g.location,onChange:q,placeholder:"Your city and country",style:Ah})]}),E.jsxs("div",{style:$l,children:[E.jsxs("label",{style:Yl,children:["Interests ",E.jsx("span",{style:Ql,children:"(Optional)"})]}),E.jsx("input",{type:"text",name:"interests",value:g.interests,onChange:q,placeholder:"e.g., Programming, Design, Music, Hiking",style:Ah}),E.jsx("div",{style:TE,children:"Separate multiple interests with commas"})]}),E.jsxs("div",{style:I5,children:[E.jsx("div",{style:D5,children:d==="edit"&&E.jsx("button",{type:"button",onClick:()=>V(!0),style:O5,disabled:S,children:"Delete Profile"})}),E.jsxs("div",{style:N5,children:[E.jsx("button",{type:"button",onClick:e,style:M5,disabled:S,children:"Cancel"}),E.jsx("button",{type:"submit",style:d==="create"?_T:k5,disabled:S,children:S?E.jsxs("span",{style:L5,children:[E.jsx("span",{style:V5})," Processing..."]}):d==="create"?"Create Profile":"Update Profile"})]})]})]}),E.jsx("div",{style:P5,children:E.jsxs("p",{style:U5,children:["Your profile photo and name are automatically imported from Google.",d==="edit"&&" Changes will be reflected immediately in the community grid."]})})]})}):null},c5={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,padding:"1rem"},u5={backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"modalFadeIn 0.3s ease"},h5={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #34495e"},d5={background:"none",border:"none",fontSize:"1.8rem",cursor:"pointer",color:"#95a5a6",padding:"0.25rem",borderRadius:"4px",lineHeight:1},f5={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",marginBottom:"1.5rem",borderLeft:"4px solid #3498db"},m5={margin:"0 0 0.75rem 0",color:"#bdc3c7",fontSize:"0.9rem"},p5={display:"flex",alignItems:"center",gap:"1rem"},g5={width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},y5={flex:1},_5={display:"block",color:"#ecf0f1",marginBottom:"0.25rem"},v5={margin:"0 0 0.5rem 0",fontSize:"0.85rem",color:"#95a5a6"},E5={backgroundColor:"transparent",color:"#e74c3c",border:"1px solid #e74c3c",padding:"0.25rem 0.75rem",borderRadius:"4px",cursor:"pointer",fontSize:"0.8rem",transition:"all 0.2s ease"},S5={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.9)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:12e3},b5={backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"400px",boxShadow:"0 20px 60px rgba(0,0,0,0.5)"},T5={margin:"0 0 1rem 0",color:"#e74c3c",fontSize:"1.5rem"},A5={margin:"0 0 1.5rem 0",color:"#bdc3c7",lineHeight:"1.5",fontSize:"0.95rem"},w5={display:"flex",gap:"1rem",justifyContent:"flex-end"},x5={padding:"0.75rem 1.5rem",border:"1px solid #34495e",borderRadius:"8px",backgroundColor:"transparent",color:"#bdc3c7",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},R5={padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",backgroundColor:"#e74c3c",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},C5={display:"flex",flexDirection:"column",gap:"1.5rem"},$l={display:"flex",flexDirection:"column"},Yl={marginBottom:"0.5rem",fontWeight:"600",color:"#ecf0f1",fontSize:"0.95rem"},Ql={color:"#95a5a6",fontWeight:"normal",fontSize:"0.85rem"},Ah={padding:"0.75rem",border:"1px solid #34495e",borderRadius:"8px",backgroundColor:"#1a252f",color:"#ecf0f1",fontSize:"1rem",transition:"border-color 0.2s ease"},SE={...Ah,resize:"vertical",minHeight:"100px",fontFamily:"inherit"},bE={textAlign:"right",fontSize:"0.8rem",color:"#95a5a6",marginTop:"0.25rem"},TE={fontSize:"0.8rem",color:"#95a5a6",fontStyle:"italic",marginTop:"0.25rem"},I5={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"1rem",gap:"1rem"},D5={flex:1},N5={display:"flex",gap:"1rem"},O5={padding:"0.75rem 1.5rem",border:"1px solid #e74c3c",borderRadius:"8px",backgroundColor:"transparent",color:"#e74c3c",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.2s ease"},M5={padding:"0.75rem 1.5rem",border:"1px solid #34495e",borderRadius:"8px",backgroundColor:"transparent",color:"#bdc3c7",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.2s ease"},_T={padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",backgroundColor:"#27ae60",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s ease"},k5={..._T,backgroundColor:"#3498db"},L5={display:"flex",alignItems:"center",gap:"0.5rem"},V5={display:"inline-block",width:"16px",height:"16px",border:"2px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite"},P5={marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #34495e"},U5={margin:0,fontSize:"0.85rem",color:"#95a5a6",lineHeight:"1.4"},vT=document.createElement("style");vT.innerText=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
`;document.head.appendChild(vT);const j5=({profile:r,isOpen:e,onClose:n})=>{const{user:s,likeThought:o,likeExperience:c}=Vn(),[d,y]=B.useState(!1),[g,m]=B.useState(r),[S,b]=B.useState(!1),[I,V]=B.useState(!1);B.useEffect(()=>{m(r)},[r]),B.useEffect(()=>{const re=ne=>{ne.key==="Escape"&&n()};return e&&(document.addEventListener("keydown",re),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",re),document.body.style.overflow="unset"}},[e,n]);const U=async()=>{if(!(!s||S)){b(!0);try{const re=await o(r.id);m(ne=>{const pe=ne.thoughtLikers?.includes(s.uid);return{...ne,thoughtLikers:pe?ne.thoughtLikers.filter(he=>he!==s.uid):[...ne.thoughtLikers||[],s.uid],thoughtLikes:pe?ne.thoughtLikes-1:(ne.thoughtLikes||0)+1}}),console.log(`Thought ${re?"liked":"unliked"}`)}catch(re){console.error("Failed to like thought:",re)}finally{b(!1)}}},q=async()=>{if(!(!s||I)){V(!0);try{const re=await c(r.id);m(ne=>{const pe=ne.experienceLikers?.includes(s.uid);return{...ne,experienceLikers:pe?ne.experienceLikers.filter(he=>he!==s.uid):[...ne.experienceLikers||[],s.uid],experienceLikes:pe?ne.experienceLikes-1:(ne.experienceLikes||0)+1}}),console.log(`Experience ${re?"liked":"unliked"}`)}catch(re){console.error("Failed to like experience:",re)}finally{V(!1)}}},$=s&&g?.thoughtLikers?.includes(s.uid),K=s&&g?.experienceLikers?.includes(s.uid);return!e||!r?null:E.jsx("div",{style:z5,onClick:n,children:E.jsxs("div",{style:B5,onClick:re=>re.stopPropagation(),children:[E.jsxs("div",{style:q5,children:[E.jsxs("div",{style:H5,children:[E.jsx("img",{src:r.photoURL,alt:r.displayName,style:F5}),E.jsxs("div",{children:[E.jsx("h2",{style:G5,children:r.displayName}),r.location&&E.jsxs("p",{style:$5,children:[" ",r.location]}),E.jsx("p",{style:Y5,children:r.email}),r.website&&E.jsxs("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",style:lN,children:[" ",r.website.replace(/^https?:\/\//,"")]})]})]}),E.jsx("button",{onClick:n,style:Q5,children:""})]}),E.jsxs("div",{style:K5,children:[r.thoughtOfTheDay&&E.jsxs("div",{style:xE,children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[E.jsx("h3",{style:RE,children:" Thought of the Day"}),s?E.jsx(AE,{onClick:U,isLiked:$,count:g?.thoughtLikes||0,disabled:d,label:$?"Unlike this thought":"Like this thought",isLoading:S}):E.jsx(wE,{})]}),E.jsx("p",{style:X5,children:r.thoughtOfTheDay})]}),r.shareLifeExperience&&E.jsxs("div",{style:xE,children:[E.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem"},children:[E.jsx("h3",{style:RE,children:" Life Experience"}),s?E.jsx(AE,{onClick:q,isLiked:K,count:g?.experienceLikes||0,disabled:d,label:K?"Unlike this experience":"Like this experience",isLoading:I}):E.jsx(wE,{})]}),E.jsx("p",{style:W5,children:r.shareLifeExperience})]}),E.jsx("div",{style:J5,children:r.interests&&E.jsxs("div",{style:Z5,children:[E.jsx("h4",{style:eN,children:" Interests"}),E.jsx("div",{style:tN,children:r.interests.split(",").map((re,ne)=>E.jsx("span",{style:nN,children:re.trim()},ne))})]})}),E.jsxs("div",{style:iN,children:[E.jsxs("div",{style:CE,children:[E.jsx("span",{style:IE,children:" Member Since:"}),E.jsx("span",{style:DE,children:r.createdAt?new Date(r.createdAt.seconds*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Recently"})]}),r.updatedAt&&E.jsxs("div",{style:CE,children:[E.jsx("span",{style:IE,children:" Last Updated:"}),E.jsx("span",{style:DE,children:new Date(r.updatedAt.seconds*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]}),r.isTest&&E.jsxs("div",{style:rN,children:[E.jsx("span",{style:sN,children:""}),E.jsx("span",{children:"Test Profile"})]}),r.isSimulated&&E.jsxs("div",{style:aN,children:[E.jsx("span",{style:oN,children:""}),E.jsx("span",{children:"Simulated Profile (in-memory only)"})]})]})]})})},AE=({onClick:r,isLiked:e,count:n,disabled:s,label:o,isLoading:c})=>{const d=e?"#2c3e50":"#FFD700",y=e?"rgba(44, 62, 80, 0.3)":"rgba(255, 215, 0, 0.3)";return E.jsx("button",{onClick:r,disabled:s||c,style:{...cN,backgroundColor:c?e?"rgba(255, 215, 0, 0.3)":"rgba(52, 73, 94, 0.7)":e?"#FFD700":"rgba(52, 73, 94, 0.5)",color:c?e?"#2c3e50":"#bdc3c7":e?"#2c3e50":"#ecf0f1",border:c?`2px solid ${e?"rgba(255, 215, 0, 0.5)":"#34495e"}`:e?"2px solid #FFD700":"2px solid #34495e",minWidth:"80px",opacity:s||c?.8:1,cursor:s||c?"not-allowed":"pointer",position:"relative"},title:c?"Processing...":o,children:c?E.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[E.jsx("div",{style:{width:"16px",height:"16px",border:`2px solid ${y}`,borderTop:`2px solid ${d}`,borderRadius:"50%",animation:"spin 1s linear infinite"}}),E.jsx("span",{style:{fontSize:"14px",color:e?"#2c3e50":"#ecf0f1"},children:e?"Unliking...":"Liking..."})]}):E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[E.jsx("span",{style:{fontSize:"18px"},children:e?"":""}),n>0&&E.jsx("span",{style:{backgroundColor:e?"rgba(44, 62, 80, 0.2)":"rgba(255, 255, 255, 0.1)",padding:"2px 8px",borderRadius:"10px",fontSize:"14px",fontWeight:"600"},children:n})]})})},wE=()=>E.jsx("div",{style:uN,children:E.jsx("span",{children:" Sign in to like content"})}),z5={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,padding:"1rem"},B5={backgroundColor:"#2c3e50",border:"1px solid #34495e",borderRadius:"16px",width:"100%",maxWidth:"600px",maxHeight:"90vh",overflow:"hidden",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"modalFadeIn 0.3s ease"},q5={display:"flex",justifyContent:"space-between",alignItems:"flex-start",padding:"2rem 2rem 1.5rem 2rem",borderBottom:"1px solid #34495e",backgroundColor:"#1a252f"},H5={display:"flex",alignItems:"center",gap:"1.5rem",flex:1},F5={width:"80px",height:"80px",borderRadius:"50%",objectFit:"cover",border:"4px solid #3498db"},G5={margin:"0 0 0.5rem 0",fontSize:"1.8rem",color:"#ecf0f1",fontWeight:"700"},$5={margin:"0 0 0.25rem 0",fontSize:"1rem",color:"#bdc3c7"},Y5={margin:0,fontSize:"0.9rem",color:"#95a5a6"},Q5={background:"none",border:"none",color:"#95a5a6",fontSize:"1.5rem",cursor:"pointer",padding:"0.5rem",borderRadius:"4px",marginLeft:"1rem"},K5={padding:"2rem",overflowY:"auto",maxHeight:"calc(90vh - 180px)"},xE={marginBottom:"2rem"},RE={margin:0,fontSize:"1.2rem",color:"#3498db",fontWeight:"600"},X5={margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#bdc3c7"},W5={margin:0,fontSize:"1rem",lineHeight:"1.6",color:"#ecf0f1",backgroundColor:"rgba(26, 37, 47, 0.7)",padding:"1.25rem",borderRadius:"10px",borderLeft:"4px solid #FFD700",boxShadow:"inset 0 2px 10px rgba(0,0,0,0.2)"},J5={display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem",marginBottom:"2rem"},Z5={backgroundColor:"#34495e",padding:"1.25rem",borderRadius:"10px",border:"1px solid #2c3e50"},eN={margin:"0 0 0.75rem 0",fontSize:"1rem",color:"#3498db",fontWeight:"600"},tN={display:"flex",flexWrap:"wrap",gap:"6px",marginTop:"8px"},nN={backgroundColor:"rgba(52, 152, 219, 0.2)",color:"#3498db",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:"500"},iN={marginTop:"1.5rem",padding:"1rem",backgroundColor:"rgba(52, 73, 94, 0.2)",borderRadius:"8px",border:"1px solid rgba(52, 73, 94, 0.5)"},CE={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.75rem",paddingBottom:"0.75rem",borderBottom:"1px solid rgba(52, 73, 94, 0.3)"},IE={color:"#bdc3c7",fontSize:"14px",fontWeight:"500"},DE={color:"#ecf0f1",fontSize:"14px",fontWeight:"600"},rN={display:"flex",alignItems:"center",gap:"8px",marginTop:"1rem",padding:"8px 12px",backgroundColor:"rgba(243, 156, 18, 0.2)",border:"1px solid rgba(243, 156, 18, 0.3)",borderRadius:"6px",color:"#f39c12",fontSize:"14px",fontWeight:"500"},sN={fontSize:"16px"},aN={display:"flex",alignItems:"center",gap:"8px",marginTop:"1rem",padding:"8px 12px",backgroundColor:"rgba(155, 89, 182, 0.2)",border:"1px solid rgba(155, 89, 182, 0.3)",borderRadius:"6px",color:"#9b59b6",fontSize:"14px",fontWeight:"500"},oN={fontSize:"16px"},lN={color:"#3498db",fontSize:"1rem",textDecoration:"none",wordBreak:"break-all"},cN={display:"flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"25px",cursor:"pointer",fontSize:"14px",fontWeight:"600",transition:"all 0.2s ease",border:"none","&:hover:not(:disabled)":{transform:"translateY(-2px)",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},uN={display:"inline-flex",alignItems:"center",gap:"8px",padding:"8px 16px",backgroundColor:"rgba(52, 152, 219, 0.1)",color:"#3498db",borderRadius:"25px",fontSize:"14px",fontWeight:"500",border:"1px solid rgba(52, 152, 219, 0.3)"},ET=document.createElement("style");ET.textContent=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes likePulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}

.liking {
  animation: likePulse 0.3s ease;
}
`;document.head.appendChild(ET);const ST=B.memo(({profile:r,baseSize:e,onProfileClick:n,isSpotlight:s=!1})=>{const[o,c]=B.useState(!1),[d,y]=B.useState(0),g=B.useRef(null);B.useEffect(()=>{s&&console.log(`Star ${r.displayName} is now in spotlight!`)},[s,r.displayName]),B.useEffect(()=>{if(s){let V=null;const U=q=>{V||(V=q);const K=(q-V)%vr.STAR_PULSE/vr.STAR_PULSE;y(K),g.current=requestAnimationFrame(U)};return g.current=requestAnimationFrame(U),()=>{g.current&&cancelAnimationFrame(g.current),y(0)}}},[s]);const m=B.useCallback(()=>{n&&n(r)},[r,n]),S=()=>s?.5+.5*Math.sin(d*Math.PI*2):0,b=()=>{const V=e,U=S(),q=s&&U>.7,$=q?Jt.STAR_GLOW:Jt.STAR_NORMAL;if(V<=2)return E.jsx("div",{style:{width:"70%",height:"70%",backgroundColor:$,borderRadius:"50%",margin:"15%",opacity:.8,animation:s?`pulseGlow ${vr.STAR_PULSE}ms infinite alternate`:"none",filter:q?`brightness(${1+U})`:"none",transition:`filter ${vr.GLOW_TRANSITION}ms ease`}});if(V<=5)return E.jsxs("div",{style:{width:"100%",height:"100%",position:"relative",opacity:.7,animation:s?`pulseGlow ${vr.STAR_PULSE}ms infinite alternate`:"none",filter:q?`brightness(${1+U})`:"none",transition:`filter ${vr.GLOW_TRANSITION}ms ease`},children:[E.jsx("div",{style:{position:"absolute",top:"20%",left:"45%",width:"10%",height:"60%",backgroundColor:$,borderRadius:"1px"}}),E.jsx("div",{style:{position:"absolute",top:"45%",left:"20%",width:"60%",height:"10%",backgroundColor:$,borderRadius:"1px"}})]});{const K=q?Jt.STAR_GLOW.replace("0.9",`${.9+U*.1}`):Jt.STAR_NORMAL;return E.jsx("div",{style:{width:"100%",height:"100%",position:"relative",opacity:.9,transform:o?"scale(1.2)":s?`scale(${1+U*.2})`:"scale(1)",transition:`transform ${vr.GLOW_TRANSITION}ms ease, filter ${vr.GLOW_TRANSITION}ms ease`,animation:s?`starPulse ${vr.STAR_PULSE}ms infinite ease-in-out`:"none",filter:q?`brightness(${1+U}) drop-shadow(0 0 ${5+U*10}px ${Jt.STAR_GLOW.replace("0.9",`${.3+U*.5}`)})`:"none"},children:E.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 100 100",style:{position:"absolute",top:0,left:0},children:E.jsx("polygon",{points:"50,10 61,35 88,35 66,52 72,78 50,63 28,78 34,52 12,35 39,35",fill:K,stroke:q?Jt.STAR_GLOW.replace("0.9","0.8"):"rgba(255, 255, 255, 0.5)",strokeWidth:q?"3":"2"})})})}},I={width:"100%",height:"100%",cursor:"pointer",position:"relative",zIndex:o||s?1e3:1,display:"flex",alignItems:"center",justifyContent:"center"};return E.jsx("div",{style:I,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onClick:m,title:e>10?r.displayName||"User":"",children:b()})}),bT=document.createElement("style");bT.textContent=`
@keyframes pulseGlow {
  0% { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 255, 255, 0.3)); }
  50% { filter: brightness(1.8) drop-shadow(0 0 15px rgba(255, 215, 0, 0.8)); }
  100% { filter: brightness(1) drop-shadow(0 0 5px rgba(255, 255, 255, 0.3)); }
}

@keyframes starPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}
`;document.head.appendChild(bT);ST.displayName="StarTile";const hN=({profile:r,starPosition:e,starIndex:n,onClick:s})=>{const[o,c]=B.useState({}),[d,y]=B.useState({}),[g,m]=B.useState(!1),S=B.useRef(null),b=()=>{if(!e||!e.x||!e.y)return{position:{top:100,left:"50%",transform:"translateX(-50%)"},arrow:{display:"none"}};const U=e.x,q=e.y,$=kn.MAX_TOOLTIP_WIDTH,K=180,re=kn.TOOLTIP_OFFSET,ne=window.innerWidth,pe=window.innerHeight,he=20,ge=[()=>{const D=Math.max(he,Math.min(U-$/2,ne-$-he)),w=q-K-re,x=Math.min($-20,Math.max(20,U-D));return{position:{top:w,left:D},arrow:{bottom:"-10px",left:`${x}px`}}},()=>{const D=Math.max(he,Math.min(U-$/2,ne-$-he)),w=q+re,x=Math.min($-20,Math.max(20,U-D));return{position:{top:w,left:D},arrow:{top:"-10px",left:`${x}px`}}},()=>{const D=U+re,w=Math.max(he,Math.min(q-K/2,pe-K-he)),x=Math.min(K-20,Math.max(20,q-w));return{position:{top:w,left:D},arrow:{left:"-10px",top:`${x}px`}}},()=>{const D=U-$-re,w=Math.max(he,Math.min(q-K/2,pe-K-he)),x=Math.min(K-20,Math.max(20,q-w));return{position:{top:w,left:D},arrow:{right:"-10px",top:`${x}px`}}}];for(const D of ge){const w=D(),{position:x}=w;if(x.top>=he&&x.top+K<=pe-he&&x.left>=he&&x.left+$<=ne-he)return w}return{position:{top:pe/2-K/2,left:ne/2-$/2},arrow:{display:"none"}}},I=U=>{if(!e)return"0deg";const q=U.left+kn.MAX_TOOLTIP_WIDTH/2,$=U.top+90,K=e.x-q,re=e.y-$;return`${Math.atan2(re,K)*(180/Math.PI)+90}deg`};B.useEffect(()=>{const{position:U,arrow:q}=b(),$=I(U);c({position:"fixed",top:`${U.top}px`,left:`${U.left}px`,width:`${kn.MAX_TOOLTIP_WIDTH}px`,zIndex:9999}),y({position:"absolute",width:"20px",height:"20px",backgroundColor:Jt.TOOLTIP_BG,borderRight:`2px solid ${Jt.TOOLTIP_BORDER}`,borderBottom:`2px solid ${Jt.TOOLTIP_BORDER}`,transform:`rotate(${$})`,...q});const K=setTimeout(()=>m(!0),kn.FADE_IN_MS);return()=>clearTimeout(K)},[e]);const V=(U,q=100)=>U?U.length<=q?U:U.substring(0,q)+"...":"";return g?E.jsxs("div",{ref:S,style:{...o,backgroundColor:Jt.TOOLTIP_BG,backdropFilter:"blur(10px)",border:`2px solid ${Jt.TOOLTIP_BORDER}`,borderRadius:"12px",padding:"16px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3)",cursor:"pointer",opacity:g?1:0,transition:`opacity ${kn.FADE_IN_MS}ms ease-out, transform ${kn.FADE_IN_MS}ms ease-out`,transform:g?"translateY(0) scale(1)":"translateY(10px) scale(0.95)"},onClick:s,onMouseEnter:U=>{U.currentTarget.style.transform="translateY(-2px) scale(1.02)",U.currentTarget.style.boxShadow="0 15px 40px rgba(0, 0, 0, 0.6), 0 0 40px rgba(255, 215, 0, 0.4)"},onMouseLeave:U=>{U.currentTarget.style.transform="translateY(0) scale(1)",U.currentTarget.style.boxShadow="0 10px 30px rgba(0, 0, 0, 0.5), 0 0 30px rgba(255, 215, 0, 0.3)"},children:[E.jsx("div",{style:d}),E.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px",paddingBottom:"10px",borderBottom:`1px solid ${Jt.TOOLTIP_BORDER}`},children:[E.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"50%",overflow:"hidden",marginRight:"12px",border:`3px solid ${Jt.TOOLTIP_BORDER}`,padding:"2px",background:"rgba(255, 255, 255, 0.1)"},children:E.jsx("img",{src:r.photoURL,alt:r.displayName,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}})}),E.jsxs("div",{children:[E.jsxs("h4",{style:{margin:0,color:Jt.STAR_GLOW,fontSize:"18px",fontWeight:"700",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)"},children:[" ",r.displayName]}),r.location&&E.jsxs("p",{style:{margin:"6px 0 0 0",color:"rgba(200, 220, 255, 0.9)",fontSize:"14px",fontWeight:"500"},children:[" ",r.location]})]})]}),E.jsx("div",{style:{marginBottom:"12px"},children:E.jsx("p",{style:{margin:0,color:Jt.TOOLTIP_TEXT,fontSize:"14px",lineHeight:"1.6",fontStyle:r.thoughtOfTheDay?"normal":"italic"},children:V(r.thoughtOfTheDay)||"No thought shared today."})}),r.shareLifeExperience&&E.jsx("div",{style:{marginBottom:"12px",padding:"10px",backgroundColor:"rgba(255, 215, 0, 0.1)",borderRadius:"8px",borderLeft:"3px solid rgba(255, 215, 0, 0.3)"},children:E.jsxs("p",{style:{margin:0,color:"rgba(255, 255, 255, 0.9)",fontSize:"13px",lineHeight:"1.5",fontStyle:"italic"},children:[" ",V(r.shareLifeExperience,120)]})}),E.jsxs("div",{style:{paddingTop:"10px",borderTop:`1px solid ${Jt.TOOLTIP_BORDER.replace("0.5","0.2")}`,display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"12px",color:"rgba(255, 215, 0, 0.8)",fontWeight:"600"},children:[E.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[E.jsx("span",{style:{fontSize:"16px"},children:""})," Spotlight #",n+1]}),E.jsx("div",{style:{width:"60px",height:"4px",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:"2px",overflow:"hidden"},children:E.jsx("div",{style:{height:"100%",width:"100%",backgroundColor:Jt.STAR_GLOW.replace("0.9","0.7"),animation:`timer ${kn.DURATION_MS}ms linear forwards`}})})]})]}):null},TT=document.createElement("style");TT.textContent=`
@keyframes timer {
  from { width: 100%; }
  to { width: 0%; }
}

@keyframes fadeInScale {
  from {
    opacity: 0;
    transform: translateY(10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
`;document.head.appendChild(TT);const dN=({profiles:r,containerRef:e,gridConfig:n,onSpotlightChange:s})=>{const{fetchFullProfile:o}=Vn(),[c,d]=B.useState(null),[y,g]=B.useState(null),[m,S]=B.useState(-1),[b,I]=B.useState({x:0,y:0}),[V,U]=B.useState(!1),q=B.useRef(null),$=B.useRef(null),K=B.useRef(!0),re=B.useRef(-1);console.log("SpotlightManager: Profiles count:",r?.length);const ne=B.useCallback((R,O=!1)=>{if(!e.current||!n||!n.cols||!r)return console.log("Cannot calculate position: missing container or grid config"),{x:0,y:0};try{const L=e.current;setTimeout(()=>{let C=null;if(C=L.querySelector(`div[data-index="${R}"]`),!C){const z=L.querySelectorAll("div");for(const J of z)if(J.style.position==="absolute"&&J.style.top&&J.style.left&&J.querySelectorAll("*").length>0){C=J;break}}if(!C){console.log(` Could not find star element for index ${R}`);const z=Math.floor(R/n.cols),J=R%n.cols,te=L.getBoundingClientRect(),ue=te.left+J*n.tileSize+n.tileSize/2,N=te.top+z*n.tileSize+n.tileSize/2;console.log(` Calculated mathematically: x=${ue.toFixed(1)}, y=${N.toFixed(1)}`),I({x:ue,y:N}),U(!0);return}const ce=C.getBoundingClientRect(),ve=ce.left+ce.width/2,M=ce.top+ce.height/2;console.log(` Star ${R} position: x=${ve.toFixed(1)}, y=${M.toFixed(1)}`),I({x:ve,y:M}),U(!0)},100)}catch(L){console.error("Error calculating star position:",L)}},[n,r]),pe=B.useCallback(()=>{if(!r||r.length===0)return console.log("No profiles to choose from"),-1;let R;const O=10;let L=0;do if(R=Math.floor(Math.random()*r.length),L++,L>=O)break;while(R===m&&r.length>1);return console.log(` Chose random star index: ${R}`),R},[r,m]),he=B.useCallback(async R=>{if(!r||R<0||R>=r.length){console.log(`Invalid index for spotlight: ${R}`);return}const O=r[R];console.log(` Loading spotlight profile: ${O.displayName} (index: ${R})`),U(!1);try{const L=await o(O.id);L&&K.current&&(console.log(` Successfully loaded profile: ${O.displayName}`),re.current=m,g(L),d(O),S(R),s&&s(R),setTimeout(()=>{console.log(` Calculating position for new spotlight index: ${R}`),ne(R,!0)},100),console.log(` Spotlight ACTIVE for ${O.displayName} at index ${R}`))}catch(L){console.error("Error loading spotlight profile:",L)}},[r,o,ne,s,m]),ge=B.useCallback(()=>{if(!K.current){console.log("Component not mounted, skipping spotlight");return}if(!r||r.length===0){console.log("No profiles available for spotlight");return}console.log(" Starting new spotlight...");const R=pe();R>=0&&he(R)},[r,pe,he]);B.useEffect(()=>{if(K.current=!0,!r||r.length===0){console.log("No profiles, skipping spotlight setup");return}return console.log(` Setting up spotlight interval for ${kn.DURATION_MS}ms (${kn.DURATION_MS/1e3}s)`),q.current&&(clearTimeout(q.current),q.current=null),$.current&&(clearInterval($.current),$.current=null),q.current=setTimeout(()=>{console.log(" Initial spotlight starting..."),ge(),$.current=setInterval(()=>{console.log(" Spotlight interval triggered - switching stars"),ge()},kn.DURATION_MS)},2e3),()=>{console.log(" Cleaning up spotlight timers"),K.current=!1,q.current&&(clearTimeout(q.current),q.current=null),$.current&&(clearInterval($.current),$.current=null)}},[r]),B.useEffect(()=>{const R=()=>{m>=0&&V&&(console.log("Window resized, updating spotlight position"),ne(m))};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[m,ne,V]),B.useEffect(()=>{m!==-1&&m!==re.current&&(console.log(` Spotlight index changed: ${re.current}  ${m}`),console.log(`   Profile: ${c?.displayName}`),console.log(`   Position calculated: ${V?"YES":"NO"}`),re.current=m)},[m,c,V]);const D=()=>{c&&y&&(console.log("Tooltip clicked, opening profile modal"),window.dispatchEvent(new CustomEvent("openProfileModal",{detail:{profile:y}})))},w=n&&n.tileSize>=kn.MIN_STAR_SIZE_FOR_TOOLTIP,x=w&&c&&y&&V;return console.log("SpotlightManager render:",{spotlightIndex:m,prevIndex:re.current,profileName:c?.displayName,positionCalculated:V,canShowTooltip:x,tileSize:n?.tileSize}),x?(console.log(` RENDERING tooltip for index ${m}:`,c.displayName),E.jsx(hN,{profile:y,starPosition:b,starIndex:m,onClick:D})):(console.log(" Not rendering spotlight tooltip:",{reason:c?y?w?V?"Unknown":"Position not calculated yet":"Star too small":"No full profile data":"No spotlight profile"}),null)},AT=B.memo(({onProfileClick:r})=>{const{profiles:e}=Vn(),n=B.useRef(null),[s,o]=B.useState(-1),[c,d]=B.useState({tileSize:60,cols:1,rows:1,actualWidth:0}),{profilesLoading:y}=Vn(),g=B.useCallback(()=>{if(!n.current||e.length===0)return{tileSize:60,cols:1,rows:1,actualWidth:0};const S=n.current,{width:b,height:I}=S.getBoundingClientRect();if(b===0||I===0)return{tileSize:60,cols:1,rows:1,actualWidth:0};const V=e.length;let U=1,q=0,$=1/0;const K=Math.min(100,Math.ceil(b/10)),re=Math.max(1,Math.floor(b/200));for(let he=re;he<=K;he++){const ge=Math.ceil(V/he),D=b/he,w=I/ge,x=Math.min(D,w),R=he*x,O=ge*x,L=b-R,C=I-O,ce=Math.abs(L)+Math.abs(C);if(ce<$&&($=ce,U=he,q=ge),Math.abs(L)<1)break}U=Math.max(1,U),q=Math.max(1,Math.ceil(V/U));const ne=b/U,pe=U*ne;return console.log(`Grid calculation: cols=${U}, rows=${q}, tileSize=${ne.toFixed(1)}px, actualWidth=${pe.toFixed(1)}px, containerWidth=${b.toFixed(1)}px`),{tileSize:ne,cols:U,rows:q,actualWidth:pe}},[e.length]);B.useEffect(()=>{const S=()=>{d(g())},b=setTimeout(S,100);return window.addEventListener("resize",S),()=>{window.removeEventListener("resize",S),clearTimeout(b)}},[g]),B.useEffect(()=>{const S=setTimeout(()=>{d(g())},100);return()=>clearTimeout(S)},[e.length,g]),B.useEffect(()=>{const S=b=>{r&&r(b.detail.profile)};return window.addEventListener("openProfileModal",S),()=>{window.removeEventListener("openProfileModal",S)}},[r]);const m=B.useCallback(S=>{console.log(`Spotlight changed to index: ${S}`),o(S)},[]);return y?E.jsxs("div",{style:pN,children:[E.jsx("div",{style:gN}),E.jsx("div",{children:"Loading the galaxy..."})]}):e.length===0?E.jsxs("div",{style:yN,children:[E.jsx("div",{style:_N,children:""}),E.jsx("h3",{style:vN,children:"No Stars Yet"}),E.jsx("p",{style:EN,children:"Be the first to create a profile and shine in the galaxy!"})]}):E.jsxs("div",{ref:n,style:fN,children:[e.length>0&&c.cols>0&&E.jsx(dN,{profiles:e,containerRef:n,gridConfig:c,onSpotlightChange:m}),E.jsx("div",{style:{...mN,width:`${c.actualWidth}px`},children:e.map((S,b)=>{const I=Math.floor(b/c.cols),V=b%c.cols,U=I*c.tileSize,q=V*c.tileSize;return E.jsx("div",{style:{position:"absolute",top:`${U}px`,left:`${q}px`,width:`${c.tileSize}px`,height:`${c.tileSize}px`,padding:"0px"},"data-index":b,children:E.jsx(ST,{profile:S,baseSize:c.tileSize,onProfileClick:r,isSpotlight:b===s})},`${S.id}-${b}`)})})]})}),fN={position:"absolute",top:0,left:0,right:0,bottom:0,width:"100vw",height:"calc(100vh - 80px)",backgroundColor:"transparent",overflow:"hidden",margin:0,padding:0,display:"flex",justifyContent:"center"},mN={position:"relative",height:"100%",margin:"0 auto",padding:0},pN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"3rem 1rem",color:"#bdc3c7",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(26, 37, 47, 0.8)",backdropFilter:"blur(10px)",borderRadius:"16px",maxWidth:"500px"},gN={width:"50px",height:"50px",border:"5px solid rgba(52, 152, 219, 0.3)",borderTop:"5px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"},yN={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center",padding:"3rem 1rem",color:"#bdc3c7",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(26, 37, 47, 0.8)",backdropFilter:"blur(10px)",borderRadius:"16px",maxWidth:"500px"},_N={fontSize:"4rem",marginBottom:"1rem",opacity:.5,animation:"twinkle 3s infinite alternate"},vN={fontSize:"1.8rem",margin:"0 0 0.75rem 0",color:"#FFD700",fontWeight:"700"},EN={fontSize:"1.1rem",margin:0,opacity:.7},wT=document.createElement("style");wT.textContent=`
@keyframes twinkle {
  0% { opacity: 0.3; transform: scale(0.95); }
  100% { opacity: 0.7; transform: scale(1.05); }
}

@keyframes spin {  /* ADD THIS */
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

html, body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  width: 100vw;
  height: 100vh;
}

/* Ensure no horizontal scroll */
* {
  box-sizing: border-box;
}
`;document.head.appendChild(wT);AT.displayName="UserGrid";const SN=()=>{const r=B.useRef(null);return B.useEffect(()=>{const e=r.current,n=e.getContext("2d");let s;const o=()=>{e.width=window.innerWidth,e.height=window.innerHeight};o(),window.addEventListener("resize",o);const c=[],d=Math.min(200,Math.floor(window.innerWidth*window.innerHeight/5e3));for(let m=0;m<d;m++)c.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:Math.random()*.3+.1,opacity:Math.random()*.5+.3,speed:Math.random()*.2+.05,twinkleSpeed:Math.random()*.02+.01});let y=0;const g=()=>{n.clearRect(0,0,e.width,e.height);const m=n.createLinearGradient(0,0,0,e.height);m.addColorStop(0,"#0a0a1a"),m.addColorStop(.5,"#0a0a0a"),m.addColorStop(1,"#000010"),n.fillStyle=m,n.fillRect(0,0,e.width,e.height),y+=.016,c.forEach(S=>{const b=Math.sin(y*S.twinkleSpeed)*.3+.7;n.beginPath(),n.arc(S.x,S.y,S.radius,0,Math.PI*2),n.fillStyle=`rgba(255, 255, 255, ${S.opacity*b})`,n.fill(),S.x-=S.speed,S.x<-10&&(S.x=e.width+10,S.y=Math.random()*e.height)}),s=requestAnimationFrame(g)};return g(),()=>{window.removeEventListener("resize",o),cancelAnimationFrame(s)}},[]),E.jsx("canvas",{ref:r,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:-1}})},ac={MAX_DEPTH:4,AVATAR_SIZE:32},xT=({comment:r,experienceId:e,depth:n=0,replies:s=[],onReply:o})=>{const{user:c,likeComment:d}=Vn(),[y,g]=B.useState(r.likedBy?.includes(c?.uid)||!1),[m,S]=B.useState(r.likeCount||0),[b,I]=B.useState(!1),[V,U]=B.useState(!1),[q,$]=B.useState(""),[K,re]=B.useState(!1),[ne,pe]=B.useState(!1),he=n<ac.MAX_DEPTH,ge=te=>{if(!te)return"Just now";const ue=te.toDate?te.toDate():new Date(te),Y=new Date-ue,le=Math.floor(Y/6e4),se=Math.floor(Y/36e5),me=Math.floor(Y/864e5);return le<1?"Just now":le<60?`${le}m ago`:se<24?`${se}h ago`:me<7?`${me}d ago`:ue.toLocaleDateString("en-US",{month:"short",day:"numeric"})},D=async()=>{if(c){I(!0);try{const te=await d(e,r.id);g(te),S(ue=>te?ue+1:Math.max(0,ue-1))}catch(te){console.error("Error liking comment:",te)}finally{I(!1)}}},w=async te=>{if(te.preventDefault(),!(!q.trim()||!c||K)){re(!0);try{o&&(await o(q,r.id),$(""),U(!1))}catch(ue){console.error("Error posting reply:",ue)}finally{re(!1)}}},x=()=>{pe(!ne)},R=n===0,O=n>0,L=s&&s.length>0,C=O&&n>0,ce=O,ve={display:"flex",flexDirection:"column",position:"relative",marginLeft:R?0:`${ac.AVATAR_SIZE/2}px`,paddingLeft:R?0:`${ac.AVATAR_SIZE/2+8}px`,borderLeft:C?"2px solid rgba(52, 152, 219, 0.3)":"none"},M={backgroundColor:R?"rgba(52, 73, 94, 0.6)":"rgba(52, 73, 94, 0.4)",border:"1px solid #2c3e50",borderRadius:"12px",padding:"1rem",marginBottom:"0.75rem",transition:"all 0.2s ease",position:"relative",width:"100%",...ve},z=ne?{maxHeight:"60px",overflow:"hidden",opacity:.8}:{},J=`comment-${r.id}-depth-${n}`;return E.jsxs("div",{style:{...M,...z},children:[C&&E.jsx("div",{style:bN,children:E.jsx("div",{style:TN})}),L&&E.jsx("button",{onClick:x,style:AN,title:ne?"Expand thread":"Collapse thread",children:ne?"":""}),ce&&E.jsxs("div",{style:wN,children:[E.jsx("span",{style:xN,children:""}),E.jsxs("span",{style:RN,children:["Replying to ",E.jsx("strong",{children:r.userDisplayName})]})]}),E.jsxs("div",{style:IN,children:[E.jsxs("div",{style:DN,children:[E.jsx("img",{src:r.userPhotoURL,alt:r.userDisplayName,style:NN}),E.jsx("div",{style:ON})]}),E.jsxs("div",{style:MN,children:[E.jsxs("div",{style:kN,children:[r.userDisplayName,O&&E.jsxs("span",{style:CN,children:["Reply #",n]})]}),E.jsx("div",{style:LN,children:ge(r.createdAt)})]})]}),E.jsx("div",{style:VN,children:E.jsx("p",{style:PN,children:r.content})}),E.jsxs("div",{style:UN,children:[E.jsxs("button",{onClick:D,style:{...Um,color:y?"#e74c3c":"#bdc3c7",backgroundColor:y?"rgba(231, 76, 60, 0.1)":"transparent",fontWeight:y?"600":"normal"},disabled:b,title:y?"Unlike":"Like",children:[b?E.jsx("span",{style:jN}):y?"":"",m>0&&` ${m}`]}),he&&E.jsx("button",{onClick:()=>U(!V),style:{...Um,backgroundColor:V?"rgba(52, 152, 219, 0.1)":"transparent",fontWeight:V?"600":"normal"},title:"Reply to this comment",children:V?" Cancel":" Reply"}),E.jsx("button",{style:Um,title:"Share comment",children:" Share"})]}),V&&he&&E.jsxs("form",{onSubmit:w,style:BN,children:[E.jsxs("div",{style:qN,children:[E.jsx("img",{src:c?.photoURL,alt:c?.displayName,style:HN}),E.jsxs("div",{style:FN,children:[E.jsx("div",{style:GN,children:c?.displayName}),E.jsxs("div",{style:$N,children:["Replying to ",r.userDisplayName]})]})]}),E.jsx("textarea",{value:q,onChange:te=>$(te.target.value),placeholder:`Reply to ${r.userDisplayName}...`,style:YN,rows:"3",maxLength:"500",disabled:K}),E.jsxs("div",{style:QN,children:[E.jsx("button",{type:"button",onClick:()=>{U(!1),$("")},style:XN,disabled:K,children:"Cancel"}),E.jsx("button",{type:"submit",style:KN,disabled:K||!q.trim(),children:K?E.jsxs(E.Fragment,{children:[E.jsx("div",{style:zN}),"Posting..."]}):"Reply"})]})]}),!ne&&L&&E.jsx("div",{style:WN,children:s.map((te,ue)=>E.jsx(xT,{comment:te,experienceId:e,depth:n+1,replies:te.replies||[],onReply:o},`reply-${te.id}-${ue}`))}),ne&&L&&E.jsxs("button",{onClick:x,style:JN,children:[" Show ",s.length," ",s.length===1?"reply":"replies"]})]},J)},bN={position:"absolute",left:"-1px",top:"0",bottom:"0",width:"2px",display:"flex",alignItems:"center",justifyContent:"center"},TN={width:"2px",height:"100%",background:"linear-gradient(to bottom, rgba(52, 152, 219, 0.3), rgba(52, 152, 219, 0.1))"},AN={position:"absolute",top:"10px",right:"10px",backgroundColor:"rgba(52, 73, 94, 0.8)",border:"1px solid #34495e",color:"#bdc3c7",width:"24px",height:"24px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",zIndex:2,transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.3)",color:"#ecf0f1"}},wN={display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"0.75rem",padding:"0.4rem 0.8rem",backgroundColor:"rgba(52, 152, 219, 0.1)",borderRadius:"6px",fontSize:"0.85rem",color:"#3498db",fontStyle:"italic",borderLeft:"3px solid #3498db"},xN={fontSize:"0.9rem"},RN={fontWeight:"500"},CN={fontSize:"0.7rem",backgroundColor:"rgba(52, 152, 219, 0.2)",color:"#3498db",padding:"2px 8px",borderRadius:"10px",marginLeft:"0.75rem",fontWeight:"600"},IN={display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},DN={position:"relative",width:`${ac.AVATAR_SIZE}px`,height:`${ac.AVATAR_SIZE}px`},NN={width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},ON={position:"absolute",bottom:"0",right:"0",width:"8px",height:"8px",backgroundColor:"#27ae60",borderRadius:"50%",border:"2px solid #2c3e50"},MN={flex:1},kN={fontWeight:"600",color:"#ecf0f1",fontSize:"0.95rem",marginBottom:"0.1rem",display:"flex",alignItems:"center",gap:"0.75rem"},LN={color:"#95a5a6",fontSize:"0.8rem"},VN={marginBottom:"0.75rem"},PN={color:"#bdc3c7",fontSize:"0.95rem",lineHeight:"1.5",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},UN={display:"flex",gap:"0.75rem",alignItems:"center",paddingTop:"0.75rem",borderTop:"1px solid rgba(52, 73, 94, 0.5)"},Um={backgroundColor:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"0.85rem",display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.4rem 0.8rem",borderRadius:"15px",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(52, 73, 94, 0.8)",color:"#ecf0f1",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},jN={width:"14px",height:"14px",border:"2px solid rgba(231, 76, 60, 0.3)",borderTop:"2px solid #e74c3c",borderRadius:"50%",animation:"spin 1s linear infinite"},zN={width:"16px",height:"16px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid #27ae60",borderRadius:"50%",animation:"spin 1s linear infinite"},BN={marginTop:"1rem",padding:"1rem",backgroundColor:"rgba(26, 37, 47, 0.5)",borderRadius:"8px",border:"1px solid #34495e"},qN={display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.75rem"},HN={width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},FN={flex:1},GN={fontWeight:"600",color:"#ecf0f1",fontSize:"0.9rem",marginBottom:"0.1rem"},$N={color:"#95a5a6",fontSize:"0.8rem",fontStyle:"italic"},YN={width:"100%",backgroundColor:"rgba(26, 37, 47, 0.8)",border:"1px solid #2c3e50",borderRadius:"6px",color:"#ecf0f1",padding:"0.75rem",fontSize:"0.9rem",resize:"vertical",marginBottom:"0.75rem",minHeight:"80px",fontFamily:"inherit","&:focus":{outline:"none",borderColor:"#3498db",boxShadow:"0 0 0 2px rgba(52, 152, 219, 0.2)"},"&:disabled":{opacity:.6,cursor:"not-allowed"}},QN={display:"flex",gap:"0.75rem",justifyContent:"flex-end",alignItems:"center"},KN={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.6rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.5rem","&:hover:not(:disabled)":{backgroundColor:"#229954",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},XN={backgroundColor:"transparent",color:"#95a5a6",border:"1px solid #95a5a6",padding:"0.6rem 1.25rem",borderRadius:"20px",cursor:"pointer",fontSize:"0.9rem",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(149, 165, 166, 0.1)",color:"#ecf0f1"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},WN={marginTop:"1rem",position:"relative"},JN={backgroundColor:"transparent",border:"none",color:"#3498db",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",padding:"0.5rem 0.75rem",borderRadius:"6px",marginTop:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.1)"}},RT=document.createElement("style");RT.textContent=`
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-5px); }
  to { opacity: 1; transform: translateY(0); }
}

.comment-enter {
  animation: fadeIn 0.3s ease;
}

/* Thread line animation */
@keyframes drawLine {
  from { height: 0; }
  to { height: 100%; }
}

.thread-line {
  animation: drawLine 0.5s ease-out;
}
`;document.head.appendChild(RT);const CT=B.memo(({experience:r,currentUserId:e,isFullScreen:n=!1,onInteraction:s})=>{const{user:o,addComment:c,fetchComments:d,likeComment:y,likeExperience:g}=Vn(),[m,S]=B.useState(r),[b,I]=B.useState(n),[V,U]=B.useState(""),[q,$]=B.useState(!1),[K,re]=B.useState(r.likedBy?.includes(e)||!1),[ne,pe]=B.useState(r.likeCount||0),[he,ge]=B.useState([]),[D,w]=B.useState(!1),[x,R]=B.useState(!0),[O,L]=B.useState(null),[C,ce]=B.useState(!1),ve=B.useRef(!0),M=B.useRef(r),z=B.useRef(b),J=B.useRef(!1);B.useEffect(()=>{M.current=r,S(r),ge([]),ce(!1),L(null)},[r]),B.useEffect(()=>{z.current=b},[b]),B.useEffect(()=>(ve.current=!0,()=>{ve.current=!1,J.current=!1}),[]),B.useEffect(()=>{n&&he.length===0&&!D&&!C&&Y(!0)},[n,he.length,D,C]);const te=B.useCallback(Le=>{if(!Le)return"Just now";const Ye=Le.toDate?Le.toDate():new Date(Le),Pe=new Date-Ye,zt=Math.floor(Pe/6e4),_i=Math.floor(Pe/36e5),Zi=Math.floor(Pe/864e5);return zt<1?"Just now":zt<60?`${zt}m ago`:_i<24?`${_i}h ago`:Zi<7?`${Zi}d ago`:Ye.toLocaleDateString("en-US",{month:"short",day:"numeric"})},[]),ue=B.useCallback(Le=>{if(!Le||Le.length===0)return[];const Ye=new Map,Ve=[];return Le.forEach(Pe=>{Ye.set(Pe.id,{...Pe,replies:[],visited:!1})}),Le.forEach(Pe=>{const zt=Ye.get(Pe.id);if(Pe.parentCommentId){const _i=Ye.get(Pe.parentCommentId);_i&&!_i.replies.some(Zi=>Zi.id===Pe.id)&&(_i.replies.push(zt),zt.visited=!0)}else zt.visited||(Ve.push(zt),zt.visited=!0)}),Ve.forEach(Pe=>N(Pe)),Ve},[]),N=Le=>{delete Le.visited,Le.replies&&Le.replies.forEach(Ye=>N(Ye))},Y=B.useCallback(async(Le=!1)=>{if(!(!ve.current||J.current)){J.current=!0,w(!0);try{const Ye=await d(M.current.id,10,Le?null:O);console.log("Loaded comments:",Ye?.comments?.length||0);const Ve=Ye?.comments||Ye||[];ge(Le?Ve:Pe=>[...Pe||[],...Ve]),L(Ye?.lastDoc||null),R(Ve.length===10),ce(!0)}catch(Ye){console.error("Error loading comments:",Ye),ve.current&&(ge([]),ce(!0))}finally{ve.current&&(w(!1),J.current=!1)}}},[d,O]);B.useEffect(()=>{b&&he.length===0&&!D&&!C&&Y(!0)},[b,he.length,D,C,Y]);const le=B.useCallback(async()=>{if(e)try{const Le=await g(m.id);re(Le),pe(Ye=>Le?Ye+1:Math.max(0,Ye-1)),S(Ye=>({...Ye,likeCount:Le?(Ye.likeCount||0)+1:Math.max(0,(Ye.likeCount||1)-1)}))}catch(Le){console.error("Error liking experience:",Le)}},[e,m.id,g]),se=B.useCallback(async Le=>{if(Le.preventDefault(),!(!e||!V.trim())){$(!0);try{const Ye=await c(m.id,V);U(""),ge(Ve=>[Ye,...Ve]),S(Ve=>({...Ve,commentCount:(Ve.commentCount||0)+1}))}catch(Ye){console.error("Error submitting comment:",Ye)}finally{ve.current&&$(!1)}}},[e,V,c,m.id]),me=B.useCallback(async(Le,Ye)=>{try{const Ve=await c(m.id,Le,Ye);return ge(Pe=>[Ve,...Pe]),S(Pe=>({...Pe,commentCount:(Pe.commentCount||0)+1})),Ve}catch(Ve){throw console.error("Error posting reply:",Ve),Ve}},[c,m.id]),Ee=B.useCallback(()=>{I(Le=>!Le),s&&s()},[s]),be=B.useCallback(Le=>{U(Le.target.value)},[]),We=B.useCallback(()=>{s&&s()},[s]),Ge=he&&he.length>0?ue(he):[];console.log("ExperienceCard debug:",{experienceId:m.id,showComments:b,isFullScreen:n,commentsCount:he.length,commentTreeCount:Ge.length,commentCount:m.commentCount,hasLoadedComments:C,loadingComments:D});const Pn=n?{transform:"scale(0.97)",transformOrigin:"top center",fontSize:"0.95rem",lineHeight:"1.4",padding:"1.2rem 1.5rem",marginBottom:"1rem"}:{},gi=n?{width:"100%",maxWidth:"none",margin:"0",backgroundColor:"rgba(10, 25, 41, 0.9)",border:"1px solid rgba(52, 152, 219, 0.2)",borderRadius:"12px"}:{},yi=n?{padding:"0.6rem 0",marginBottom:"0.8rem"}:{},Un=n?{fontSize:"0.95rem",lineHeight:"1.5",marginBottom:"1rem"}:{},cn=n?{paddingTop:"0.8rem"}:{},Wi=n?{marginTop:"1.5rem",paddingTop:"1rem",maxHeight:"350px",overflowY:"auto"}:{},Ji=n?{padding:"1rem",marginBottom:"1rem"}:{};return E.jsxs("div",{style:{...eO,...gi,...Pn},onClick:We,children:[E.jsxs("div",{style:{...tO,...yi},children:[E.jsxs("div",{style:nO,children:[E.jsx("img",{src:m.userPhotoURL,alt:m.userDisplayName,style:iO}),E.jsxs("div",{style:rO,children:[E.jsx("div",{style:sO,children:m.userDisplayName}),E.jsx("div",{style:aO,children:te(m.createdAt)})]})]}),E.jsxs("button",{onClick:le,style:{...oO,color:K?"#e74c3c":"#bdc3c7",backgroundColor:K?"rgba(231, 76, 60, 0.1)":"transparent"},title:K?"Unlike":"Like",children:[K?"":"",ne>0&&` ${ne}`]})]}),E.jsx("div",{style:{...lO,...Un},children:E.jsx("p",{style:cO,children:m.content})}),E.jsxs("div",{style:{...uO,...cn},children:[E.jsxs("button",{onClick:le,style:{...NE,color:K?"#e74c3c":"#bdc3c7"},title:K?"Unlike":"Like",children:[K?"":"",ne>0?` ${ne}`:" Like"]}),E.jsxs("button",{onClick:Ee,style:{...NE,backgroundColor:b?"rgba(52, 152, 219, 0.1)":"transparent"},title:b?"Hide comments":"Show comments",children:[" ",m.commentCount||0]})]}),(b||n)&&E.jsxs("div",{style:{...hO,...Wi},children:[e?E.jsxs("form",{onSubmit:se,style:{...dO,...Ji},children:[E.jsxs("div",{style:fO,children:[E.jsx("img",{src:o?.photoURL,alt:o?.displayName,style:mO}),E.jsx("div",{style:pO,children:E.jsx("div",{style:gO,children:o?.displayName})})]}),E.jsx("textarea",{value:V,onChange:be,placeholder:"Share your thoughts on this story...",style:yO,rows:"2",maxLength:"500",disabled:q}),E.jsxs("div",{style:_O,children:[E.jsxs("div",{style:vO,children:[V.length,"/500 characters"]}),E.jsx("button",{type:"submit",style:EO,disabled:q||!V.trim(),children:q?E.jsxs(E.Fragment,{children:[E.jsx("div",{style:OE}),"Posting..."]}):"Post Comment"})]})]}):E.jsxs("div",{style:SO,children:[E.jsxs("div",{style:{textAlign:"center",flex:1},children:[E.jsx("div",{style:bO,children:"Sign in to join the conversation"}),E.jsx("div",{style:TO,children:"Share your thoughts and connect with others"})]}),E.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("showSignInPrompt")),style:{...AO,padding:"0.4rem 0.8rem",fontSize:"0.85rem"},children:" Sign In"})]}),E.jsx("div",{style:wO,children:D&&he.length===0?E.jsxs("div",{style:ZN,children:[E.jsx("div",{style:OE}),E.jsx("div",{children:"Loading comments..."})]}):Ge.length>0?E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:xO,children:[E.jsxs("h4",{style:RO,children:[" Comments (",m.commentCount||0,")"]}),x&&E.jsx("button",{onClick:()=>Y(!1),style:CO,disabled:D,children:D?"Loading...":"Load More"})]}),Ge.map(Le=>E.jsx(xT,{comment:Le,experienceId:m.id,depth:0,replies:Le.replies||[],onReply:me},Le.id))]}):!D&&E.jsxs("div",{style:IO,children:[E.jsx("div",{style:DO,children:""}),E.jsx("div",{style:NO,children:"No comments yet. Be the first to share your thoughts!"})]})})]}),!n&&!b&&E.jsxs("div",{style:OO,onClick:Ee,children:[E.jsx("span",{style:MO,children:""}),E.jsx("span",{style:kO,children:m.commentCount>0?`Show ${m.commentCount} ${m.commentCount===1?"comment":"comments"}`:"View experience & add comments"}),E.jsx("span",{style:LO,children:""})]})]})},(r,e)=>r.experience.id===e.experience.id&&r.experience.likeCount===e.experience.likeCount&&r.experience.commentCount===e.experience.commentCount&&r.currentUserId===e.currentUserId&&r.isFullScreen===e.isFullScreen),ZN={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"2rem 1rem",color:"#95a5a6",gap:"0.8rem"},eO={backgroundColor:"rgba(44, 62, 80, 0.9)",border:"1px solid #34495e",borderRadius:"12px",padding:"1.5rem",marginBottom:"1.5rem",transition:"all 0.3s ease",width:"100%"},tO={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1rem",flexWrap:"wrap",gap:"0.8rem"},nO={display:"flex",alignItems:"center",gap:"0.8rem",flex:1},iO={width:"50px",height:"50px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},rO={flex:1},sO={fontWeight:"700",color:"#ecf0f1",fontSize:"1.1rem",marginBottom:"0.2rem"},aO={color:"#95a5a6",fontSize:"0.85rem"},oO={backgroundColor:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"1rem",display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1rem",borderRadius:"22px",transition:"all 0.2s ease",fontWeight:"600",border:"2px solid rgba(52, 73, 94, 0.5)","&:hover":{backgroundColor:"rgba(52, 73, 94, 0.3)"}},lO={marginBottom:"1.2rem",lineHeight:"1.6"},cO={color:"#ecf0f1",fontSize:"1rem",lineHeight:"1.6",margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word"},uO={display:"flex",gap:"0.8rem",paddingTop:"1rem",borderTop:"1px solid #34495e"},NE={backgroundColor:"transparent",border:"none",color:"#bdc3c7",cursor:"pointer",fontSize:"0.95rem",display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.6rem 1rem",borderRadius:"22px",transition:"all 0.2s ease",fontWeight:"600","&:hover":{backgroundColor:"rgba(52, 73, 94, 0.5)",color:"#ecf0f1"}},hO={marginTop:"1.8rem",paddingTop:"1.2rem",borderTop:"1px solid #34495e"},dO={marginBottom:"1.2rem",backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1.2rem",borderRadius:"10px",border:"1px solid #2c3e50"},fO={display:"flex",alignItems:"flex-start",gap:"0.8rem",marginBottom:"0.8rem"},mO={width:"36px",height:"36px",borderRadius:"50%",objectFit:"cover",border:"2px solid #3498db"},pO={flex:1},gO={fontWeight:"600",color:"#ecf0f1",fontSize:"0.9rem",marginBottom:"0.3rem"},yO={width:"100%",backgroundColor:"rgba(26, 37, 47, 0.8)",border:"1px solid #2c3e50",borderRadius:"8px",color:"#ecf0f1",padding:"0.6rem 0.75rem",fontSize:"0.95rem",resize:"vertical",fontFamily:"inherit","&:focus":{outline:"none",borderColor:"#3498db"},"&:disabled":{opacity:.6,cursor:"not-allowed"}},_O={display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"0.8rem"},vO={fontSize:"0.8rem",color:"#95a5a6",fontWeight:"500"},EO={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.6rem 1.5rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem","&:hover:not(:disabled)":{backgroundColor:"#229954",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},OE={width:"14px",height:"14px",border:"2px solid rgba(255, 255, 255, 0.3)",borderTop:"2px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},SO={backgroundColor:"rgba(52, 152, 219, 0.1)",border:"1px solid rgba(52, 152, 219, 0.3)",color:"#3498db",padding:"1rem",borderRadius:"10px",marginBottom:"1.2rem",fontSize:"0.95rem",display:"flex",alignItems:"center",gap:"0.8rem",justifyContent:"space-between",textAlign:"center"},bO={fontWeight:"600",color:"#3498db",fontSize:"1rem",marginBottom:"0.2rem"},TO={fontSize:"0.85rem",color:"#bdc3c7"},AO={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.6rem 1.2rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem","&:hover":{backgroundColor:"#2980b9",transform:"translateY(-1px)"}},wO={width:"100%"},xO={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.2rem",paddingBottom:"0.8rem",borderBottom:"2px solid #34495e"},RO={margin:0,fontSize:"1.1rem",color:"#FFD700",fontWeight:"700"},CO={backgroundColor:"rgba(52, 73, 94, 0.5)",border:"1px solid #34495e",color:"#bdc3c7",padding:"0.6rem 1.2rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(52, 73, 94, 0.8)",color:"#ecf0f1",transform:"translateY(-1px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},IO={textAlign:"center",padding:"2rem 1rem",color:"#95a5a6",backgroundColor:"rgba(52, 73, 94, 0.3)",borderRadius:"10px",border:"2px dashed #34495e"},DO={fontSize:"2.5rem",marginBottom:"0.8rem",opacity:.5},NO={fontStyle:"italic",fontSize:"1rem",maxWidth:"380px",margin:"0 auto"},OO={marginTop:"1.2rem",padding:"0.8rem",backgroundColor:"rgba(52, 152, 219, 0.1)",border:"1px solid rgba(52, 152, 219, 0.2)",borderRadius:"8px",color:"#3498db",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.6rem",transition:"all 0.2s ease","&:hover":{backgroundColor:"rgba(52, 152, 219, 0.2)",transform:"translateY(-1px)"}},MO={fontSize:"1.1rem"},kO={fontWeight:"600",fontSize:"0.95rem"},LO={fontSize:"0.85rem",opacity:.7};CT.displayName="ExperienceCard";const IT=Zl.memo(()=>{const{user:r,fetchExperiences:e}=Vn(),[n,s]=B.useState([]),[o,c]=B.useState(!1),[d,y]=B.useState(dh.NEWEST),[g,m]=B.useState(0),[S,b]=B.useState(!1),[I,V]=B.useState(!1),[U,q]=B.useState(!0),[$,K]=B.useState(null),[re,ne]=B.useState(!1),pe=B.useRef(null),he=B.useRef([]),[ge,D]=B.useState(null),w=B.useCallback(async()=>{console.log(" loadInitialExperiences called"),c(!0);try{console.log(" Fetching experiences with sort:",d);const ce=await e(20,null,d);console.log(" Fetch successful, got:",ce.experiences?.length||0,"experiences"),s(ce.experiences||[]),K(ce.lastDoc),q(ce.hasMore),b(!0),ce.experiences?.[0]&&D(ce.experiences[0].id)}catch(ce){console.error(" Error loading experiences:",ce),s([]),b(!0)}finally{console.log(" Setting loading to false"),c(!1)}},[e,d]),x=B.useCallback(async()=>{if(!(!U||re||!$)){ne(!0);try{console.log(" Loading more experiences...");const ce=await e(20,$,d);s(ve=>[...ve,...ce.experiences]),K(ce.lastDoc),q(ce.hasMore),console.log(` Added ${ce.experiences.length} more experiences`)}catch(ce){console.error("Error loading more experiences:",ce)}finally{ne(!1)}}},[e,U,re,$,d]);B.useEffect(()=>{console.log(" Component mounted, starting initial load"),!S&&!o&&w()},[]),B.useEffect(()=>{console.log(" Sort changed to:",d,"- Reloading..."),s([]),K(null),q(!0),b(!1),m(0),w()},[d]),B.useEffect(()=>{const ce=()=>{if(!pe.current||re||!U||o)return;const M=pe.current;M.scrollHeight-M.scrollTop-M.clientHeight<300&&x()},ve=pe.current;if(ve)return ve.addEventListener("scroll",ce),()=>ve.removeEventListener("scroll",ce)},[re,U,x,o]);const R=B.useCallback(ce=>{he.current[ce]&&pe.current&&(V(!0),he.current[ce].scrollIntoView({behavior:"smooth",block:"start"}),m(ce),n[ce]&&D(n[ce].id),setTimeout(()=>{V(!1)},500))},[n]);B.useEffect(()=>{const ce=ve=>{if(!(document.activeElement.tagName==="TEXTAREA"||document.activeElement.tagName==="INPUT"||document.activeElement.isContentEditable)&&!(n.length===0||I)){if(ve.key==="ArrowDown"){ve.preventDefault();const z=Math.min(g+1,n.length-1);R(z)}else if(ve.key==="ArrowUp"){ve.preventDefault();const z=Math.max(g-1,0);R(z)}else if(ve.key===" "&&ve.target===document.body){ve.preventDefault();const z=Math.min(g+1,n.length-1);R(z)}}};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[g,R,n.length,I]),B.useEffect(()=>{const ce=M=>{if(n.length===0||I||!pe.current)return;const J=pe.current.clientHeight,te=he.current[g];if(te){const ue=te.getBoundingClientRect(),N=ue.top,Y=ue.height;if(Y>J){const se=N+Y-J;if(M.deltaY>0&&N>-100||M.deltaY<0&&se>100)return}}if(Math.abs(M.deltaY)>30)if(M.deltaY>0){const ue=Math.min(g+1,n.length-1);ue!==g&&(M.preventDefault(),R(ue),ue>=n.length-5&&U&&!re&&x())}else{const ue=Math.max(g-1,0);ue!==g&&(M.preventDefault(),R(ue))}},ve=pe.current;if(ve)return ve.addEventListener("wheel",ce,{passive:!1}),()=>ve.removeEventListener("wheel",ce)},[g,R,n.length,I,U,re,x]),B.useEffect(()=>{const ce=()=>{if(!pe.current||I)return;const M=pe.current,z=M.clientHeight;for(let J=0;J<n.length;J++){const te=he.current[J];if(te){const ue=te.getBoundingClientRect(),N=M.getBoundingClientRect();if(ue.top<=N.top+z*.4&&ue.bottom>=N.top+z*.6){J!==g&&(m(J),D(n[J].id));break}}}},ve=pe.current;if(ve)return ve.addEventListener("scroll",ce),()=>ve.removeEventListener("scroll",ce)},[g,n,I]);const O=()=>{if(!r){window.dispatchEvent(new CustomEvent("showSignInPrompt"));return}window.dispatchEvent(new CustomEvent("showCreateProfile",{detail:{mode:"edit"}}))},L=B.useCallback(ce=>{D(ce)},[]),C=B.useMemo(()=>n,[n]);return console.log(" LifeExperiencesTab state:",{loading:o,hasLoaded:S,experiencesCount:n.length,sortBy:d,hasMore:U}),E.jsxs("div",{style:VO,children:[E.jsx("div",{style:PO,children:E.jsxs("div",{style:UO,children:[E.jsxs("div",{style:jO,children:[E.jsx("h2",{style:zO,children:" Life Experiences"}),E.jsxs("p",{style:BO,children:["Scroll to explore stories. Press  or Space to navigate.",U&&` (Loaded ${n.length}, more available)`]})]}),E.jsxs("div",{style:qO,children:[E.jsxs("div",{style:HO,children:[E.jsx("label",{style:FO,children:"Sort:"}),E.jsxs("select",{value:d,onChange:ce=>y(ce.target.value),style:GO,title:"Sort experiences",children:[E.jsx("option",{value:dh.NEWEST,children:"Newest"}),E.jsx("option",{value:dh.MOST_LIKED,children:"Most Liked"}),E.jsx("option",{value:dh.MOST_COMMENTED,children:"Most Discussed"})]})]}),E.jsx("button",{onClick:O,style:$O,title:"Share your life experience",children:" Share Your Story"}),C.length>0&&E.jsxs("div",{style:YO,children:[E.jsxs("span",{style:QO,children:[g+1," / ",C.length,U&&"+"]}),E.jsxs("div",{style:KO,children:[E.jsx("button",{onClick:()=>R(Math.max(g-1,0)),disabled:g===0,style:ME,title:"Previous story",children:""}),E.jsx("button",{onClick:()=>{const ce=Math.min(g+1,C.length-1);R(ce),ce>=C.length-3&&U&&!re&&x()},disabled:g===C.length-1&&!U,style:ME,title:"Next story",children:""})]})]})]})]})}),E.jsx("div",{ref:pe,style:XO,className:"experiences-container",children:C.length>0?E.jsxs(E.Fragment,{children:[C.map((ce,ve)=>E.jsxs("div",{ref:M=>he.current[ve]=M,style:WO,"data-index":ve,"data-experience-id":ce.id,className:ge===ce.id?"active-experience":"",children:[E.jsx(CT,{experience:ce,currentUserId:r?.uid,isFullScreen:!0,onInteraction:()=>L(ce.id)}),ve===0&&C.length>1&&E.jsxs("div",{style:JO,children:[E.jsx("div",{style:ZO,children:""}),E.jsx("div",{style:e4,children:"Scroll down for more stories"})]})]},`exp-${ce.id}-${ve}`)),re&&E.jsxs("div",{style:t4,children:[E.jsx("div",{style:n4}),E.jsx("div",{children:"Loading more stories..."})]}),!U&&C.length>0&&E.jsxs("div",{style:i4,children:[E.jsx("div",{style:r4,children:""}),E.jsx("div",{style:s4,children:"You've reached the end of the stories"}),E.jsxs("div",{style:a4,children:[C.length," stories loaded",r&&!C.some(ce=>ce.userId===r.uid)&&" (Your story might be in a different sort order)"]})]})]}):o?E.jsxs("div",{style:o4,children:[E.jsx("div",{style:l4}),E.jsx("p",{children:"Loading life experiences..."})]}):E.jsxs("div",{style:p4,children:[E.jsx("div",{style:c4,children:""}),E.jsx("h3",{style:u4,children:"No Experiences Shared Yet"}),E.jsx("p",{style:h4,children:"Be the first to share your life experience and inspire others with your story."}),r?E.jsx("button",{onClick:O,style:d4,children:" Share Your First Experience"}):E.jsxs("div",{style:f4,children:[E.jsx("p",{children:"Sign in to share your life experience"}),E.jsx("button",{onClick:()=>window.dispatchEvent(new CustomEvent("showSignInPrompt")),style:m4,children:" Sign In"})]})]})})]})}),VO={position:"fixed",top:"80px",left:0,right:0,bottom:0,width:"100vw",height:"calc(100vh - 80px)",backgroundColor:"#0a1929",overflow:"hidden",zIndex:1},PO={position:"absolute",top:0,left:0,right:0,backgroundColor:"rgba(10, 25, 41, 0.95)",backdropFilter:"blur(10px)",borderBottom:"1px solid rgba(52, 152, 219, 0.2)",zIndex:1e3,padding:"0.8rem 1.5rem",boxShadow:"0 4px 20px rgba(0,0,0,0.3)"},UO={maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",gap:"1.5rem",flexWrap:"wrap"},jO={flex:1,minWidth:"250px"},zO={fontSize:"1.6rem",color:"#FFD700",margin:"0 0 0.2rem 0",fontWeight:"700"},BO={fontSize:"0.85rem",color:"#bdc3c7",margin:0,opacity:.8},qO={display:"flex",alignItems:"center",gap:"1rem",flexWrap:"wrap"},HO={display:"flex",alignItems:"center",gap:"0.4rem",backgroundColor:"rgba(52, 73, 94, 0.7)",padding:"0.3rem 0.6rem",borderRadius:"18px",border:"1px solid #34495e",backdropFilter:"blur(5px)"},FO={color:"#bdc3c7",fontSize:"0.8rem",fontWeight:"500",whiteSpace:"nowrap"},GO={backgroundColor:"rgba(26, 37, 47, 0.8)",color:"#ecf0f1",border:"1px solid #3498db",borderRadius:"12px",padding:"0.25rem 0.5rem",fontSize:"0.8rem",cursor:"pointer",transition:"all 0.2s ease",minWidth:"110px"},$O={backgroundColor:"#FFD700",color:"#2c3e50",border:"none",padding:"0.5rem 1rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.85rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem",whiteSpace:"nowrap",boxShadow:"0 4px 15px rgba(255, 215, 0, 0.3)"},YO={display:"flex",alignItems:"center",gap:"0.8rem",backgroundColor:"rgba(52, 73, 94, 0.7)",padding:"0.3rem 0.8rem",borderRadius:"18px",border:"1px solid rgba(52, 152, 219, 0.3)"},QO={color:"#ecf0f1",fontSize:"0.85rem",fontWeight:"600",minWidth:"55px",textAlign:"center"},KO={display:"flex",gap:"0.2rem"},ME={backgroundColor:"rgba(52, 152, 219, 0.2)",color:"#ecf0f1",border:"1px solid rgba(52, 152, 219, 0.3)",width:"26px",height:"26px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"11px",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"rgba(52, 152, 219, 0.4)",transform:"scale(1.1)"},"&:disabled":{opacity:.3,cursor:"not-allowed"}},XO={position:"absolute",top:"60px",left:0,right:0,bottom:0,overflowY:"auto",scrollBehavior:"smooth",WebkitOverflowScrolling:"touch",padding:"0"},WO={minHeight:"calc(100vh - 140px)",width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start",padding:"1.5rem 2rem",position:"relative",borderBottom:"1px solid rgba(52, 73, 94, 0.3)"},JO={position:"absolute",bottom:"1.5rem",left:"50%",transform:"translateX(-50%)",textAlign:"center",color:"rgba(52, 152, 219, 0.7)",animation:"bounce 2s infinite",zIndex:10},ZO={fontSize:"1.8rem",marginBottom:"0.4rem"},e4={fontSize:"0.85rem",fontWeight:"500",backgroundColor:"rgba(10, 25, 41, 0.8)",padding:"0.4rem 0.8rem",borderRadius:"18px",border:"1px solid rgba(52, 152, 219, 0.3)"},t4={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"3rem",color:"#95a5a6",textAlign:"center"},n4={width:"30px",height:"30px",border:"3px solid rgba(52, 152, 219, 0.2)",borderTop:"3px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",marginBottom:"1rem"},i4={textAlign:"center",padding:"3rem",color:"#95a5a6",backgroundColor:"rgba(44, 62, 80, 0.3)",margin:"1rem",borderRadius:"12px",border:"2px dashed #34495e"},r4={fontSize:"3rem",marginBottom:"1rem",opacity:.5},s4={fontSize:"1.2rem",fontWeight:"600",marginBottom:"0.5rem",color:"#bdc3c7"},a4={fontSize:"0.9rem",opacity:.7,maxWidth:"400px",margin:"0 auto"},o4={position:"fixed",top:"80px",left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(10, 25, 41, 0.95)",backdropFilter:"blur(10px)",zIndex:1e3,padding:"2rem",textAlign:"center",gap:"1.5rem"},l4={width:"50px",height:"50px",border:"4px solid rgba(52, 152, 219, 0.2)",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},c4={fontSize:"4rem",marginBottom:"1.2rem",opacity:.6,animation:"pulse 2s infinite"},u4={fontSize:"1.8rem",color:"#FFD700",margin:"0 0 0.8rem 0",fontWeight:"700"},h4={fontSize:"1rem",color:"#bdc3c7",margin:"0 0 1.5rem 0",maxWidth:"500px",lineHeight:"1.5"},d4={backgroundColor:"#27ae60",color:"white",border:"none",padding:"0.8rem 1.5rem",borderRadius:"22px",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.6rem",boxShadow:"0 4px 15px rgba(39, 174, 96, 0.3)","&:hover":{transform:"translateY(-2px)",boxShadow:"0 6px 20px rgba(39, 174, 96, 0.4)",backgroundColor:"#229954"}},f4={display:"flex",flexDirection:"column",alignItems:"center",gap:"0.8rem",padding:"1.2rem",backgroundColor:"rgba(52, 152, 219, 0.1)",borderRadius:"12px",border:"1px solid rgba(52, 152, 219, 0.3)",maxWidth:"380px"},m4={backgroundColor:"#3498db",color:"white",border:"none",padding:"0.6rem 1.2rem",borderRadius:"22px",cursor:"pointer",fontSize:"0.9rem",fontWeight:"600",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.4rem","&:hover":{backgroundColor:"#2980b9",transform:"translateY(-2px)"}},p4={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"calc(100vh - 140px)",textAlign:"center",padding:"2rem 1.5rem",backgroundColor:"rgba(44, 62, 80, 0.5)",borderRadius:"18px",border:"2px dashed #34495e",margin:"1.5rem auto",maxWidth:"550px",animation:"fadeIn 0.5s ease"},DT=document.createElement("style");DT.textContent=`
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(15px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateX(-50%) translateY(0); }
  40% { transform: translateX(-50%) translateY(-8px); }
  60% { transform: translateX(-50%) translateY(-4px); }
}

@keyframes pulse {
  0%, 100% { opacity: 0.6; transform: scale(1); }
  50% { opacity: 0.8; transform: scale(1.05); }
}

/* Hide scrollbar but keep functionality */
.experiences-container::-webkit-scrollbar {
  display: none;
}

.experiences-container {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

/* Active experience styling */
.active-experience {
  background: linear-gradient(to right, rgba(52, 152, 219, 0.05), transparent);
}

/* Smooth transitions */
.experience-section {
  transition: background-color 0.3s ease;
}
`;document.head.appendChild(DT);IT.displayName="LifeExperiencesTab";const g4=({activeTab:r})=>{const{user:e,userProfile:n,fetchFullProfile:s}=Vn(),[o,c]=B.useState(!1),[d,y]=B.useState(null),[g,m]=B.useState(!1),[S,b]=B.useState(!1),I=B.useCallback(async U=>{b(!0);try{const q=await s(U.id);q&&(y(q),m(!0))}catch(q){console.error("Error loading profile:",q)}finally{b(!1)}},[s]);B.useEffect(()=>{const U=()=>{e&&c(!0)},q=$=>{console.log("MainContent: Opening profile from event",$.detail.profile),I($.detail.profile)};return window.addEventListener("showCreateProfile",U),window.addEventListener("openProfileModal",q),()=>{window.removeEventListener("showCreateProfile",U),window.removeEventListener("openProfileModal",q)}},[e,I]);const V=B.useCallback(()=>{m(!1),y(null)},[]);return E.jsxs("main",{style:y4,children:[E.jsx(SN,{}),E.jsx("div",{style:_4,children:r==="galaxy"?E.jsx("div",{style:v4,children:E.jsx(AT,{onProfileClick:I})}):E.jsx(IT,{})}),S&&E.jsx("div",{style:E4,children:E.jsx("div",{style:S4})}),E.jsx(l5,{isOpen:o,onClose:()=>c(!1)}),E.jsx(j5,{profile:d,isOpen:g,onClose:V})]})},y4={position:"fixed",top:"80px",left:0,right:0,bottom:0,width:"100vw",height:"calc(100vh - 80px)",backgroundColor:"transparent",margin:0,padding:0,overflow:"hidden",zIndex:0},_4={position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1,overflow:"hidden"},v4={position:"absolute",top:0,left:0,right:0,bottom:0,width:"100%",height:"100%",zIndex:1},E4={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4},S4={width:"50px",height:"50px",border:"5px solid rgba(255, 215, 0, 0.3)",borderTop:"5px solid rgba(255, 215, 0, 0.9)",borderRadius:"50%",animation:"spin 1s linear infinite"},NT=document.createElement("style");NT.innerText=`
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Ensure no scrollbars */
body {
  overflow: hidden;
}
`;document.head.appendChild(NT);const b4=({isOpen:r,onClose:e})=>{const{user:n,profiles:s,profilesLoading:o,addTestProfile:c,createBulkTestProfiles:d,clearAllProfiles:y,loadProfiles:g,deleteAllProfiles:m}=Vn();B.useEffect(()=>{const K=re=>{re.key==="Escape"&&e()};return r&&(document.addEventListener("keydown",K),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",K),document.body.style.overflow="unset"}},[r,e]);const S=async()=>{try{await c()}catch(K){console.error("Error adding test profile:",K)}},b=async()=>{try{await d(100)}catch(re){console.error("Error creating bulk profiles:",re)}},I=async()=>{if(window.confirm("Are you sure you want to clear ALL profiles? This cannot be undone!"))try{await y()}catch(K){console.error("Error clearing profiles:",K)}},V=async()=>{if(s.length!==0)try{console.log(`Adding random likes to ${s.length} profiles...`);const K=s.map(async re=>{const ne=Math.floor(Math.random()*20),pe=Math.floor(Math.random()*15),he=doc(Ie,"profiles",re.id),ge=[],D=[];for(let w=0;w<ne;w++)ge.push(`fake_liker_${Math.random().toString(36).substr(2,9)}`);for(let w=0;w<pe;w++)D.push(`fake_liker_${Math.random().toString(36).substr(2,9)}`);await updateDoc(he,{thoughtLikes:ne,thoughtLikers:arrayUnion(...ge),experienceLikes:pe,experienceLikers:arrayUnion(...D),updatedAt:new Date})});await Promise.all(K),console.log(` Added random likes to ${s.length} profiles!`),g&&await g()}catch(K){console.error("Error adding random likes:",K)}},U=async()=>{if(s.length!==0)try{const K=Math.min(3,s.length),ne=[...s].sort(()=>.5-Math.random()).slice(0,K);console.log(`Making ${ne.length} profiles go viral...`);const pe=ne.map(async he=>{const ge=doc(Ie,"profiles",he.id),D=Math.floor(Math.random()*200+100),w=Math.floor(Math.random()*150+50),x=Array.from({length:D},(O,L)=>`viral_liker_${L}_${Math.random().toString(36).substr(2,5)}`),R=Array.from({length:w},(O,L)=>`viral_liker_${L}_${Math.random().toString(36).substr(2,5)}`);await updateDoc(ge,{thoughtLikes:D,thoughtLikers:arrayUnion(...x),experienceLikes:w,experienceLikers:arrayUnion(...R),updatedAt:new Date})});await Promise.all(pe),console.log(` ${ne.length} profiles now have viral like counts!`),g&&await g()}catch(K){console.error("Error simulating viral content:",K)}},q=async()=>{if(s.length!==0&&window.confirm(`Clear ALL likes from ${s.length} profiles? This cannot be undone!`))try{console.log("Clearing all likes...");const K=s.map(async re=>{const ne=doc(Ie,"profiles",re.id);await updateDoc(ne,{thoughtLikes:0,thoughtLikers:[],experienceLikes:0,experienceLikers:[],updatedAt:new Date})});await Promise.all(K),console.log(" All likes cleared!"),g&&await g()}catch(K){console.error("Error clearing likes:",K)}},$=async()=>{if(s.length===0){console.log("No profiles to add comments to");return}try{console.log("Generating test comments with real user context...");const K=n?.uid||"test_system_user",re=n?.displayName||"Test System",ne=n?.photoURL||"https://i.pravatar.cc/150",pe=Bi(fn(Ie,"experiences"),us(20)),ge=(await ys(pe)).docs.map(ce=>({id:ce.id,...ce.data()}));if(ge.length===0){console.log("No experiences found to add comments to");return}const D=["This is such an inspiring story! Thank you for sharing.","I had a similar experience last year. It truly changes your perspective.","Wow, this really resonated with me. Beautifully written!","Thank you for being vulnerable and sharing your journey.","This gives me hope. We need more stories like this.","I can relate to this so much. You're not alone!","What an amazing experience. How did you overcome the challenges?","This made my day. Thank you for the inspiration!","Powerful story. Keep sharing your light with the world.","I've been through something similar. It gets better, I promise."],w=["Thank you! I appreciate your kind words.","I'm glad it resonated with you too.","It wasn't easy, but so worth it.","Thank you for reading and sharing your thoughts!","Your support means everything. Thank you!"];let x=0,R=la(Ie);const O=Math.min(5,ge.length),C=[...ge].sort(()=>.5-Math.random()).slice(0,O);for(const ce of C){const ve=Math.floor(Math.random()*2)+2;for(let M=0;M<ve;M++){const z=D[Math.floor(Math.random()*D.length)],J=s[Math.floor(Math.random()*s.length)],te=`test_comment_${Date.now()}_${M}`,ue=doc(Ie,"experiences",ce.id,"comments",te),N={userId:J.id,userDisplayName:J.displayName,userPhotoURL:J.photoURL,content:z,createdAt:ft(),parentCommentId:null,depth:0,likeCount:Math.floor(Math.random()*5),likedBy:[],isTest:!0};R.set(ue,N),x++;const Y=doc(Ie,"experiences",ce.id);if(R.update(Y,{commentCount:sc(1),updatedAt:ft()}),console.log(`Adding comment to ${ce.id}: ${z.substring(0,30)}...`),Math.random()>.5&&x<20){const le=w[Math.floor(Math.random()*w.length)],se=`test_reply_${Date.now()}_${M}`,me=doc(Ie,"experiences",ce.id,"comments",se),Ee={userId:ce.userId,userDisplayName:ce.userDisplayName,userPhotoURL:ce.userPhotoURL,content:le,createdAt:ft(),parentCommentId:te,depth:1,likeCount:Math.floor(Math.random()*3),likedBy:[],isTest:!0};R.set(me,Ee),x++,R.update(Y,{commentCount:sc(1),updatedAt:ft()}),console.log(`   Adding reply from author: ${le.substring(0,30)}...`)}x%50===0&&(await R.commit(),R=la(Ie),console.log(`Committed ${x} comments...`))}}x%50!==0&&await R.commit(),console.log(` Generated ${x} test comments`),g&&await g()}catch(K){console.error("Error generating test comments:",K)}};return r?E.jsx("div",{style:T4,onClick:e,children:E.jsxs("div",{style:A4,onClick:K=>K.stopPropagation(),children:[E.jsxs("div",{style:w4,children:[E.jsx("h2",{style:x4,children:" Test Panel"}),E.jsx("button",{onClick:e,style:R4,children:""})]}),E.jsxs("div",{style:C4,children:[E.jsxs("div",{style:I4,children:[E.jsx("h3",{style:fh,children:"Current Stats"}),E.jsxs("div",{style:D4,children:[E.jsxs("div",{style:kE,children:[E.jsx("div",{style:LE,children:s.length}),E.jsx("div",{style:VE,children:"Total Stars"})]}),E.jsxs("div",{style:kE,children:[E.jsx("div",{style:LE,children:n?"Yes":"No"}),E.jsx("div",{style:VE,children:"Signed In"})]})]})]}),E.jsxs("div",{style:PE,children:[E.jsx("h3",{style:fh,children:"Profile Management"}),E.jsxs("div",{style:UE,children:[E.jsx("button",{onClick:S,style:po,disabled:o,children:"Add Test Star"}),E.jsx("button",{onClick:b,style:po,disabled:o,children:"Add 100 Stars"}),E.jsx("button",{onClick:$,style:po,disabled:o||s.length===0,children:"Add Test Comments"}),E.jsx("button",{onClick:I,style:jE,disabled:o||s.length===0,children:"Clear All Stars"})]})]}),E.jsxs("div",{style:PE,children:[E.jsx("h3",{style:fh,children:"Like Management"}),E.jsxs("div",{style:UE,children:[E.jsx("button",{onClick:V,style:po,disabled:o||s.length===0,children:"Add Random Likes"}),E.jsx("button",{onClick:U,style:po,disabled:o||s.length===0,children:"Simulate Viral Content"}),E.jsx("button",{onClick:q,style:jE,disabled:o||s.length===0,children:"Clear All Likes"})]}),E.jsx("div",{style:N4,children:"Random likes: 0-19 for thoughts, 0-14 for experiences"})]}),n&&E.jsxs("div",{style:O4,children:[E.jsx("h3",{style:fh,children:"Current User"}),E.jsxs("div",{style:M4,children:[E.jsx("img",{src:n.photoURL,alt:n.displayName,style:k4}),E.jsxs("div",{style:L4,children:[E.jsx("div",{style:V4,children:n.displayName}),E.jsx("div",{style:P4,children:n.email}),E.jsxs("div",{style:U4,children:["ID: ",n.uid.substring(0,12),"..."]})]})]})]}),o&&E.jsxs("div",{style:j4,children:[E.jsx("div",{style:z4}),E.jsx("div",{children:"Processing..."})]}),E.jsx("div",{style:B4,children:" This panel is for testing only. Changes affect the live database."})]})]})}):null},T4={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,padding:"1rem"},A4={backgroundColor:"#2c3e50",border:"2px solid #34495e",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5)",animation:"modalFadeIn 0.3s ease"},w4={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #34495e"},x4={margin:0,fontSize:"1.5rem",color:"#ecf0f1"},R4={background:"none",border:"none",fontSize:"2rem",cursor:"pointer",color:"#95a5a6",padding:"0.25rem",borderRadius:"4px",lineHeight:1},C4={display:"flex",flexDirection:"column",gap:"1.5rem"},I4={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",border:"1px solid #34495e"},fh={margin:"0 0 1rem 0",fontSize:"1.1rem",color:"#3498db",fontWeight:"600"},D4={display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"1rem"},kE={backgroundColor:"#34495e",padding:"1rem",borderRadius:"8px",textAlign:"center",border:"1px solid #2c3e50"},LE={fontSize:"2rem",fontWeight:"bold",color:"#FFD700",marginBottom:"0.5rem"},VE={fontSize:"0.9rem",color:"#bdc3c7"},PE={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",border:"1px solid #34495e"},UE={display:"flex",flexDirection:"column",gap:"0.75rem"},po={padding:"0.75rem 1.5rem",border:"none",borderRadius:"8px",backgroundColor:"#3498db",color:"white",cursor:"pointer",fontSize:"1rem",fontWeight:"600",transition:"all 0.2s ease","&:hover:not(:disabled)":{backgroundColor:"#2980b9",transform:"translateY(-2px)"},"&:disabled":{opacity:.5,cursor:"not-allowed"}},jE={...po,backgroundColor:"#e74c3c","&:hover:not(:disabled)":{backgroundColor:"#c0392b"}},N4={fontSize:"0.8rem",color:"#95a5a6",fontStyle:"italic",marginTop:"0.5rem",textAlign:"center"},O4={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"1rem",borderRadius:"8px",border:"1px solid #34495e"},M4={display:"flex",alignItems:"center",gap:"1rem"},k4={width:"60px",height:"60px",borderRadius:"50%",border:"3px solid #3498db"},L4={flex:1},V4={fontSize:"1.1rem",fontWeight:"bold",color:"#ecf0f1",marginBottom:"0.25rem"},P4={fontSize:"0.9rem",color:"#bdc3c7",marginBottom:"0.25rem"},U4={fontSize:"0.8rem",color:"#95a5a6",fontFamily:"monospace"},j4={display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem",padding:"1rem",backgroundColor:"rgba(52, 73, 94, 0.3)",borderRadius:"8px",border:"1px solid #34495e"},z4={width:"40px",height:"40px",border:"4px solid rgba(52, 152, 219, 0.3)",borderTopColor:"#3498db",borderRadius:"50%",animation:"spin 1s linear infinite"},B4={padding:"1rem",backgroundColor:"rgba(243, 156, 18, 0.1)",border:"1px solid #f39c12",borderRadius:"8px",color:"#f39c12",fontSize:"0.9rem",textAlign:"center"},OT=document.createElement("style");OT.textContent=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
`;document.head.appendChild(OT);class q4{async addDonation(e,n=null,s=null,o=null){try{const c=fn(Ie,"donations"),d={amount:parseFloat(e),userId:n,userEmail:s,displayName:o,timestamp:ut.now(),createdAt:new Date().toISOString()};return{id:(await hp(c,d)).id,...d}}catch(c){throw console.error("Error adding donation:",c),c}}async getTotalAmount(){try{const e=fn(Ie,"donations"),n=await ys(e);let s=0;return n.forEach(o=>{const c=o.data();s+=c.amount||0}),s}catch(e){return console.error("Error getting total amount:",e),0}}async getRecentDonations(e=5){try{const n=fn(Ie,"donations"),s=Bi(n,ps("timestamp","desc"),us(e)),o=await ys(s),c=[];return o.forEach(d=>{c.push({id:d.id,...d.data()})}),c}catch(n){return console.error("Error getting recent donations:",n),[]}}async getAllDonations(){try{const e=fn(Ie,"donations"),n=Bi(e,ps("timestamp","desc")),s=await ys(n),o=[];return s.forEach(c=>{o.push({id:c.id,...c.data()})}),o}catch(e){return console.error("Error getting all donations:",e),[]}}async getDonationCount(){try{const e=fn(Ie,"donations");return(await CD(e)).data().count}catch(e){return console.error("Error getting donation count:",e),0}}subscribeToDonations(e){const n=fn(Ie,"donations"),s=Bi(n,ps("timestamp","desc"));return fT(s,o=>{const c=[];o.forEach(d=>{c.push({id:d.id,...d.data()})}),e({donations:c,changes:o.docChanges()})})}}const cs=new q4;function H4(){const{user:r}=Vn(),[e,n]=B.useState(0),[s,o]=B.useState([]),[c,d]=B.useState(0),[y,g]=B.useState(!0);B.useEffect(()=>{(async()=>{g(!0);try{const[I,V,U]=await Promise.all([cs.getTotalAmount(),cs.getRecentDonations(5),cs.getDonationCount()]);n(Number(I)||0),o(V||[]),d(Number(U)||0)}catch(I){console.error("Error loading donation data:",I)}finally{g(!1)}})()},[]),B.useEffect(()=>{const b=cs.subscribeToDonations(({donations:I})=>{if(I&&I.length>0){o(I.slice(0,5));const V=I.reduce((U,q)=>U+(Number(q.amount)||0),0);n(V),d(I.length)}});return()=>b()},[]);const m=B.useCallback(async(b,I={})=>{try{return await cs.addDonation(b,r?.uid,r?.email,r?.displayName)}catch(V){throw console.error("Error adding donation:",V),V}},[r]),S=B.useCallback(async()=>{g(!0);try{const[b,I,V]=await Promise.all([cs.getTotalAmount(),cs.getRecentDonations(5),cs.getDonationCount()]);n(Number(b)||0),o(I||[]),d(Number(V)||0)}catch(b){console.error("Error refreshing donation data:",b)}finally{g(!1)}},[]);return{totalAmount:e,recentDonations:s,donationCount:c,loading:y,addDonation:m,refreshData:S}}var Tn;(function(r){r.INITIAL="initial",r.PENDING="pending",r.REJECTED="rejected",r.RESOLVED="resolved"})(Tn||(Tn={}));var Ts;(function(r){r.LOADING_STATUS="setLoadingStatus",r.RESET_OPTIONS="resetOptions",r.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Ts||(Ts={}));var zE;(function(r){r.NUMBER="number",r.CVV="cvv",r.EXPIRATION_DATE="expirationDate",r.EXPIRATION_MONTH="expirationMonth",r.EXPIRATION_YEAR="expirationYear",r.POSTAL_CODE="postalCode"})(zE||(zE={}));var Lt=function(){return Lt=Object.assign||function(e){for(var n,s=1,o=arguments.length;s<o;s++){n=arguments[s];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e},Lt.apply(this,arguments)};function MT(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function BE(r,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,c;s<o;s++)(c||!(s in e))&&(c||(c=Array.prototype.slice.call(e,0,s)),c[s]=e[s]);return r.concat(c||Array.prototype.slice.call(e))}var gc="data-react-paypal-script-id",ha={DATA_JS_SDK_LIBRARY:"dataJsSdkLibrary",DATA_LIBRARY_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace",DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource"},F4="Failed to load the PayPal JS SDK script.",kT="paypal",G4="usePayPalScriptReducer must be used within a PayPalScriptProvider";function $4(r){return r===void 0&&(r=kT),window[r]}function Y4(r){for(var e="",n=0;n<r.length;n++){var s=r[n].charCodeAt(0)*n;r[n+1]&&(s+=r[n+1].charCodeAt(0)*(n-1)),e+=String.fromCharCode(97+Math.abs(s)%26)}return e}function Q4(r){var e=r.reactComponentName,n=r.sdkComponentKey,s=r.sdkRequestedComponents,o=s===void 0?"":s,c=r.sdkDataNamespace,d=c===void 0?kT:c,y=n.charAt(0).toUpperCase().concat(n.substring(1)),g="Unable to render <".concat(e," /> because window.").concat(d,".").concat(y," is undefined."),m=typeof o=="string"?o:o.join(",");if(!m.includes(n)){var S=[m,n].filter(Boolean).join();g+=`
To fix the issue, add '`.concat(n,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(S,"'}}>`.")}return g}function LT(r){var e=r,n=gc;e[n];var s=MT(e,[n+""]);return"react-paypal-js-".concat(Y4(JSON.stringify(s)))}function K4(r){var e=self.document.querySelector("script[".concat(gc,'="').concat(r,'"]'));e?.parentNode&&e.parentNode.removeChild(e)}function X4(r,e){var n,s;switch(e.type){case Ts.LOADING_STATUS:return typeof e.value=="object"?Lt(Lt({},r),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):Lt(Lt({},r),{loadingStatus:e.value});case Ts.RESET_OPTIONS:return K4(r.options[gc]),Lt(Lt({},r),{loadingStatus:Tn.PENDING,options:Lt(Lt((n={},n[ha.DATA_SDK_INTEGRATION_SOURCE]=ha.DATA_LIBRARY_VALUE,n),e.value),(s={},s[gc]="".concat(LT(e.value)),s))});case Ts.SET_BRAINTREE_INSTANCE:return Lt(Lt({},r),{braintreePayPalCheckoutInstance:e.value});default:return r}}var VT=B.createContext(null);function W4(r){if(typeof r?.dispatch=="function"&&r.dispatch.length!==0)return r;throw new Error(G4)}function J4(){var r=W4(B.useContext(VT)),e=Lt(Lt({},r),{isInitial:r.loadingStatus===Tn.INITIAL,isPending:r.loadingStatus===Tn.PENDING,isResolved:r.loadingStatus===Tn.RESOLVED,isRejected:r.loadingStatus===Tn.REJECTED});return[e,r.dispatch]}B.createContext({});function Z4(r){var e=B.useRef(new Proxy({},{get:function(n,s,o){return typeof n[s]=="function"?function(){for(var c=[],d=0;d<arguments.length;d++)c[d]=arguments[d];return n[s].apply(n,c)}:Reflect.get(n,s,o)}}));return e.current=Object.assign(e.current,r),e.current}var pg=function(r){var e,n=r.className,s=n===void 0?"":n,o=r.disabled,c=o===void 0?!1:o,d=r.children,y=r.forceReRender,g=y===void 0?[]:y,m=MT(r,["className","disabled","children","forceReRender"]),S=c?{opacity:.38}:{},b="".concat(s," ").concat(c?"paypal-buttons-disabled":"").trim(),I=B.useRef(null),V=B.useRef(null),U=Z4(m),q=J4()[0],$=q.isResolved,K=q.options,re=B.useState(null),ne=re[0],pe=re[1],he=B.useState(!0),ge=he[0],D=he[1],w=B.useState(null),x=w[1];function R(){V.current!==null&&V.current.close().catch(function(){})}return!((e=V.current)===null||e===void 0)&&e.updateProps&&V.current.updateProps({message:m.message}),B.useEffect(function(){if($===!1)return R;var O=$4(K.dataNamespace);if(O===void 0||O.Buttons===void 0)return x(function(){throw new Error(Q4({reactComponentName:pg.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:K.components,sdkDataNamespace:K[ha.DATA_NAMESPACE]}))}),R;var L=function(C,ce){pe(ce),typeof m.onInit=="function"&&m.onInit(C,ce)};try{V.current=O.Buttons(Lt(Lt({},U),{onInit:L}))}catch(C){return x(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(C))})}return V.current.isEligible()===!1?(D(!1),R):(I.current&&V.current.render(I.current).catch(function(C){I.current===null||I.current.children.length===0||x(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(C))})}),R)},BE(BE([$],g,!0),[m.fundingSource],!1)),B.useEffect(function(){ne!==null&&(c===!0?ne.disable().catch(function(){}):ne.enable().catch(function(){}))},[c,ne]),Zl.createElement(Zl.Fragment,null,ge?Zl.createElement("div",{ref:I,style:S,className:b}):d)};pg.displayName="PayPalButtons";function eM(r,e){var n={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(n[s]=r[s]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(r);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(r,s[o])&&(n[s[o]]=r[s[o]]);return n}function tM(r,e){var n=document.querySelector('script[src="'.concat(r,'"]'));if(n===null)return null;var s=PT(r,e),o=n.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(s.dataset).length)return null;var c=!0;return Object.keys(o.dataset).forEach(function(d){o.dataset[d]!==s.dataset[d]&&(c=!1)}),c?n:null}function nM(r){var e=r.url,n=r.attributes,s=r.onSuccess,o=r.onError,c=PT(e,n);c.onerror=o,c.onload=s,document.head.insertBefore(c,document.head.firstElementChild)}function iM(r){var e=r.sdkBaseUrl,n=r.environment,s=eM(r,["sdkBaseUrl","environment"]),o=e||aM(n),c=s,d=Object.keys(c).filter(function(m){return typeof c[m]<"u"&&c[m]!==null&&c[m]!==""}).reduce(function(m,S){var b=c[S].toString();return S=rM(S),S.substring(0,4)==="data"||S==="crossorigin"?m.attributes[S]=b:m.queryParams[S]=b,m},{queryParams:{},attributes:{}}),y=d.queryParams,g=d.attributes;return y["merchant-id"]&&y["merchant-id"].indexOf(",")!==-1&&(g["data-merchant-id"]=y["merchant-id"],y["merchant-id"]="*"),{url:"".concat(o,"?").concat(sM(y)),attributes:g}}function rM(r){var e=function(n,s){return(s?"-":"")+n.toLowerCase()};return r.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function sM(r){var e="";return Object.keys(r).forEach(function(n){e.length!==0&&(e+="&"),e+=n+"="+r[n]}),e}function aM(r){return r==="sandbox"?"https://www.sandbox.paypal.com/sdk/js":"https://www.paypal.com/sdk/js"}function PT(r,e){e===void 0&&(e={});var n=document.createElement("script");return n.src=r,Object.keys(e).forEach(function(s){n.setAttribute(s,e[s]),s==="data-csp-nonce"&&n.setAttribute("nonce",e["data-csp-nonce"])}),n}function oM(r,e){if(e===void 0&&(e=Promise),UT(r,e),typeof document>"u")return e.resolve(null);var n=iM(r),s=n.url,o=n.attributes,c=o["data-namespace"]||"paypal",d=qE(c);return o["data-js-sdk-library"]||(o["data-js-sdk-library"]="paypal-js"),tM(s,o)&&d?e.resolve(d):lM({url:s,attributes:o},e).then(function(){var y=qE(c);if(y)return y;throw new Error("The window.".concat(c," global variable is not available."))})}function lM(r,e){e===void 0&&(e=Promise),UT(r,e);var n=r.url,s=r.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof s<"u"&&typeof s!="object")throw new Error("Expected attributes to be an object.");return new e(function(o,c){if(typeof document>"u")return o();nM({url:n,attributes:s,onSuccess:function(){return o()},onError:function(){var d=new Error('The script "'.concat(n,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return c(d)}})})}function qE(r){return window[r]}function UT(r,e){if(typeof r!="object"||r===null)throw new Error("Expected an options object.");var n=r.environment;if(n&&n!=="production"&&n!=="sandbox")throw new Error('The `environment` option must be either "production" or "sandbox".');if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var cM=function(r){var e,n=r.options,s=n===void 0?{clientId:"test"}:n,o=r.children,c=r.deferLoading,d=c===void 0?!1:c,y=B.useReducer(X4,{options:Lt(Lt({},s),(e={},e[ha.DATA_JS_SDK_LIBRARY]=ha.DATA_LIBRARY_VALUE,e[ha.DATA_SDK_INTEGRATION_SOURCE]=ha.DATA_LIBRARY_VALUE,e[gc]="".concat(LT(s)),e)),loadingStatus:d?Tn.INITIAL:Tn.PENDING}),g=y[0],m=y[1];return B.useEffect(function(){if(d===!1&&g.loadingStatus===Tn.INITIAL)return m({type:Ts.LOADING_STATUS,value:Tn.PENDING});if(g.loadingStatus===Tn.PENDING){var S=!0;return oM(g.options).then(function(){S&&m({type:Ts.LOADING_STATUS,value:Tn.RESOLVED})}).catch(function(b){console.error("".concat(F4," ").concat(b)),S&&m({type:Ts.LOADING_STATUS,value:{state:Tn.REJECTED,message:String(b)}})}),function(){S=!1}}},[g.options,d,g.loadingStatus]),Zl.createElement(VT.Provider,{value:Lt(Lt({},g),{dispatch:m})},o)};function HE(){}B.createContext({cardFieldsForm:null,fields:{},registerField:HE,unregisterField:HE});const uM=[5,10,25,50,100],FE=1e9,jm={SUCCESS:"Thank you for your donation! Your star will now glow in the galaxy! ",ERROR:"There was an issue processing your donation. Please try again.",PROCESSING:"Processing your donation..."},hM=({isOpen:r,onClose:e})=>{const{user:n}=Vn(),{totalAmount:s,recentDonations:o,addDonation:c,loading:d}=H4(),[y,g]=B.useState(10),[m,S]=B.useState(""),[b,I]=B.useState(!1),[V,U]=B.useState(""),[q,$]=B.useState(!1),K=Math.min(s/FE*100,100);B.useEffect(()=>{const R=O=>{O.key==="Escape"&&e()};return r&&(document.addEventListener("keydown",R),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",R),document.body.style.overflow="unset"}},[r,e]);const re=R=>{g(R),I(!1),S("")},ne=()=>{I(!0),g(null)},pe=R=>{const O=R.target.value;(O===""||/^\d*\.?\d*$/.test(O))&&S(O)},he=async(R,O)=>{$(!0),U(jm.PROCESSING);try{await c(R,O),U(jm.SUCCESS),n&&window.dispatchEvent(new CustomEvent("donationSuccess",{detail:{userId:n.uid,amount:R}})),setTimeout(()=>{U(""),g(10),S(""),I(!1),$(!1),e()},3e3)}catch{U(jm.ERROR),$(!1)}},ge=(R,O)=>{const L=b&&m?parseFloat(m):y,C=Math.max(1,L||1);return O.order.create({purchase_units:[{amount:{value:C.toFixed(2),currency_code:"USD"},description:`Donation to Limitless Galaxy - $${C}`}]})},D=async(R,O)=>{const L=b&&m?parseFloat(m):y,C=Math.max(1,L||1);try{const ce=await O.order.capture();return await he(C,ce),ce}catch{U("Payment failed. Please try again."),$(!1)}},w=R=>{U("Payment error. Please try again."),$(!1)};if(!r)return null;const x=b&&m?parseFloat(m):y;return E.jsx("div",{style:dM,onClick:e,children:E.jsxs("div",{style:fM,onClick:R=>R.stopPropagation(),children:[E.jsxs("div",{style:mM,children:[E.jsx("h2",{style:pM,children:" Support the Galaxy "}),E.jsx("button",{onClick:e,style:gM,children:""})]}),E.jsxs("div",{style:yM,children:[E.jsxs("div",{style:_M,children:[E.jsxs("div",{style:vM,children:["$",s.toLocaleString()]}),E.jsx("div",{style:EM,children:"Total Raised"})]}),E.jsxs("div",{style:SM,children:[E.jsx("div",{style:bM,children:E.jsx("div",{style:{...TM,width:`${K}%`}})}),E.jsxs("div",{style:AM,children:[E.jsxs("span",{children:["Goal: $",FE.toLocaleString()]}),E.jsxs("span",{children:[K.toFixed(1),"%"]})]})]})]}),E.jsxs("div",{style:wM,children:[E.jsx("h3",{style:GE,children:"Choose Amount"}),E.jsxs("div",{style:xM,children:[uM.map(R=>E.jsxs("button",{onClick:()=>re(R),style:{...$E,backgroundColor:y===R&&!b?"#FFD700":"#34495e",color:y===R&&!b?"#2c3e50":"#ecf0f1"},children:["$",R]},R)),E.jsx("button",{onClick:ne,style:{...$E,backgroundColor:b?"#3498db":"#34495e",color:b?"white":"#3498db",border:"2px solid #3498db"},children:"Custom"})]}),b&&E.jsx("div",{style:RM,children:E.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[E.jsx("span",{style:{color:"#ecf0f1",fontSize:"18px"},children:"$"}),E.jsx("input",{type:"text",value:m,onChange:pe,placeholder:"Enter amount",style:CM,autoFocus:!0})]})})]}),E.jsx("div",{style:IM,children:x>=1?E.jsxs(E.Fragment,{children:[E.jsxs("div",{style:DM,children:["Donating: ",E.jsxs("strong",{style:{color:"#FFD700"},children:["$",x.toFixed(2)]})]}),E.jsx(pg,{createOrder:ge,onApprove:D,onError:w,style:{layout:"vertical",color:"gold",shape:"pill",label:"donate",height:45},disabled:q||d})]}):E.jsx("div",{style:NM,children:"Please select an amount of $1 or more"})}),V&&E.jsx("div",{style:OM(V),children:V}),o.length>0&&E.jsxs("div",{style:MM,children:[E.jsx("h3",{style:GE,children:"Recent Supporters"}),E.jsx("div",{style:kM,children:o.slice(0,3).map((R,O)=>E.jsx("div",{style:LM,children:E.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[E.jsx("span",{style:{color:"#bdc3c7"},children:R.displayName||R.userEmail?.split("@")[0]||"Anonymous"}),E.jsxs("span",{style:{color:"#FFD700",fontWeight:"bold"},children:["$",R.amount]})]})},R.id||O))})]}),E.jsx("div",{style:VM,children:E.jsxs("p",{style:PM,children:["Your donation helps keep the galaxy shining bright! ",n?` Donating as: ${n.displayName||n.email}`:""]})})]})})},dM={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:11e3,padding:"1rem"},fM={backgroundColor:"#2c3e50",border:"2px solid #34495e",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0,0,0,0.5), 0 0 30px rgba(255, 215, 0, 0.2)",animation:"modalFadeIn 0.3s ease"},mM={display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem",paddingBottom:"1rem",borderBottom:"1px solid #34495e"},pM={margin:0,fontSize:"1.5rem",color:"#FFD700",textAlign:"center",flex:1},gM={background:"none",border:"none",fontSize:"2rem",cursor:"pointer",color:"#95a5a6",padding:"0.25rem",borderRadius:"4px",lineHeight:1,marginLeft:"1rem"},yM={textAlign:"center",marginBottom:"2rem"},_M={marginBottom:"1rem"},vM={fontSize:"2.5rem",fontWeight:"bold",color:"#FFD700",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)"},EM={fontSize:"0.9rem",color:"#bdc3c7",marginTop:"0.25rem"},SM={marginTop:"1rem"},bM={height:"12px",backgroundColor:"#34495e",borderRadius:"6px",overflow:"hidden",marginBottom:"8px"},TM={height:"100%",borderRadius:"6px",background:"linear-gradient(90deg, #FFD700, #FF6B6B)",transition:"width 0.5s ease"},AM={display:"flex",justifyContent:"space-between",fontSize:"12px",color:"#95a5a6"},wM={marginBottom:"2rem"},GE={margin:"0 0 1rem 0",fontSize:"1.1rem",color:"#ecf0f1",fontWeight:"600"},xM={display:"flex",flexWrap:"wrap",gap:"10px",justifyContent:"center"},$E={padding:"12px 20px",border:"none",borderRadius:"25px",fontSize:"16px",fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease",minWidth:"80px"},RM={marginTop:"1rem"},CM={flex:1,padding:"12px",border:"2px solid #3498db",borderRadius:"8px",backgroundColor:"#1a252f",color:"#ecf0f1",fontSize:"16px",outline:"none"},IM={marginBottom:"1.5rem"},DM={textAlign:"center",color:"#ecf0f1",fontSize:"1.1rem",marginBottom:"1rem",padding:"12px",backgroundColor:"rgba(52, 152, 219, 0.1)",borderRadius:"8px"},NM={textAlign:"center",color:"#e74c3c",padding:"15px",backgroundColor:"rgba(231, 76, 60, 0.1)",borderRadius:"8px",fontSize:"0.9rem"},OM=r=>({padding:"12px",backgroundColor:r.includes("Thank you")?"rgba(46, 204, 113, 0.2)":"rgba(231, 76, 60, 0.2)",border:`1px solid ${r.includes("Thank you")?"#2ecc71":"#e74c3c"}`,borderRadius:"8px",color:r.includes("Thank you")?"#2ecc71":"#e74c3c",textAlign:"center",marginBottom:"1rem"}),MM={marginBottom:"1.5rem"},kM={display:"flex",flexDirection:"column",gap:"8px"},LM={backgroundColor:"rgba(52, 73, 94, 0.3)",padding:"10px 15px",borderRadius:"8px",border:"1px solid rgba(255, 215, 0, 0.1)"},VM={marginTop:"1.5rem",paddingTop:"1.5rem",borderTop:"1px solid #34495e"},PM={margin:0,fontSize:"0.85rem",color:"#95a5a6",lineHeight:"1.4",textAlign:"center"},jT=document.createElement("style");jT.textContent=`
@keyframes modalFadeIn {
  from {
    opacity: 0;
    transform: translateY(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
`;document.head.appendChild(jT);function UM(){const[r,e]=B.useState(!1),[n,s]=B.useState(!1),[o,c]=B.useState("galaxy");B.useEffect(()=>{const y=()=>{e(!0)},g=()=>{s(!0)};return window.addEventListener("showTestPanel",y),window.addEventListener("showDonationPopup",g),()=>{window.removeEventListener("showTestPanel",y),window.removeEventListener("showDonationPopup",g)}},[]);const d={"client-id":"Af3zaVrq7NbWzaZIC6sCW6azN-_POZjceapd5baYo8v31WZ8F7fwOwA6QhwW-GIRMbBN4V_3Bt1AFj7l",currency:"USD",intent:"capture",components:"buttons"};return E.jsx(cM,{options:d,children:E.jsx(MD,{children:E.jsxs("div",{style:jM,children:[E.jsx(kD,{activeTab:o,setActiveTab:c}),E.jsx(g4,{activeTab:o}),E.jsx(b4,{isOpen:r,onClose:()=>e(!1)}),E.jsx(hM,{isOpen:n,onClose:()=>s(!1)})]})})})}const jM={minHeight:"100vh",backgroundColor:"#0a0a1a",color:"#ecf0f1",position:"relative",width:"100vw",margin:0,padding:0,overflow:"hidden"};xA.createRoot(document.getElementById("root")).render(E.jsx(B.StrictMode,{children:E.jsx(UM,{})}));
